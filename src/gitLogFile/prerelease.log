commit 32671d87135f22707ea03c3f17e99d41d82c0a39
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 16:09:33 2018 -0700

    HADOOP-14783. [KMS] Add missing configuration properties into kms-default.xml. Contributed by Chetna Chaudhari.

 .../hadoop-kms/src/main/resources/kms-default.xml  | 35 ++++++++++++++++++++++
 1 file changed, 35 insertions(+)

commit 3f4a29813beccd85191886f4d7421c4f33180594
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 15:26:08 2018 -0700

    HDFS-13646. DFSAdmin doesn't display specialized help for triggerBlockReport. Contributed by Takanobu Asanuma.

 .../src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java            | 2 ++
 1 file changed, 2 insertions(+)

commit c95b9b5c077c5b95649d195bd7385a76604863c1
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 15:20:59 2018 -0700

    HDFS-13440. Log HDFS file name when client fails to connect.  Contributed by Gabor Bota.

 .../src/main/java/org/apache/hadoop/hdfs/DFSInputStream.java          | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ebe5853a458150b7e42fe7434851bfcbe25e354d
Author: Konstantin V Shvachko <shv@apache.org>
Date:   Thu May 31 14:56:32 2018 -0700

    HDFS-12978. Fine-grained locking while consuming journal stream. Contributed by Konstantin Shvachko.

 .../hdfs/server/namenode/FSEditLogLoader.java      | 23 ++++++++++++++----
 .../hadoop/hdfs/server/namenode/FSImage.java       | 16 ++++++++-----
 .../hdfs/server/namenode/ha/EditLogTailer.java     | 27 ++++++++++++++++++++--
 .../hdfs/server/namenode/ha/TestEditLogTailer.java | 13 ++++++++---
 4 files changed, 64 insertions(+), 15 deletions(-)

commit 950dea86f4e945fbf376ef3843c0101a2ca569b8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 31 11:28:42 2018 -0700

    HDDS-112. OzoneShell should support commands with url without scheme.
    Contributed by Lokesh Jain.

 .../robotframework/acceptance/ozone-shell.robot    | 21 ++++++++++
 .../apache/hadoop/ozone/web/ozShell/Handler.java   | 49 +++++++++++++++++++++-
 2 files changed, 68 insertions(+), 2 deletions(-)

commit 79b298111fb9d1bd10251fd30a95173fa9ccb398
Merge: 59777185fc3 a58acd9080a
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 11:45:01 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit a58acd9080ab609db197438d2e5ff9152c91898c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 31 10:56:17 2018 -0700

    HADOOP-15490:Multiple declaration of maven-enforcer-plugin found in pom.xml. Contributed by Nanda kumar

 pom.xml | 41 +++++++++++++++++------------------------
 1 file changed, 17 insertions(+), 24 deletions(-)

commit 59777185fc38b9f9b7428c5f3f7eb6c52796317d
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 10:29:25 2018 -0700

    HDDS-116. Implement VolumeSet to manage disk volumes. Contributed by Hanisha Koneru.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   1 +
 .../impl/RoundRobinVolumeChoosingPolicy.java       |  82 +++++++
 .../ozone/container/common/impl/VolumeInfo.java    | 125 +++++++++++
 .../ozone/container/common/impl/VolumeSet.java     | 250 +++++++++++++++++++++
 .../common/interfaces/VolumeChoosingPolicy.java    |  46 ++++
 .../impl/TestRoundRobinVolumeChoosingPolicy.java   | 100 +++++++++
 .../container/common/interfaces/TestVolumeSet.java | 138 ++++++++++++
 7 files changed, 742 insertions(+)

commit 1f324e966136f69c3254f01b43b56cf077abba7f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 31 10:12:38 2018 -0700

    HDFS-13631. TestDFSAdmin#testCheckNumOfBlocksInReportCommand should use a separate MiniDFSCluster path. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/tools/TestDFSAdmin.java | 59 +++++++++++-----------
 1 file changed, 29 insertions(+), 30 deletions(-)

commit 1361030e59d7557a2bffac0ea8df116ce2eaae4a
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu May 31 07:56:57 2018 -0600

    HDFS-13582. Improve backward compatibility for HDFS-13176 (WebHdfs file path gets truncated when having semicolon (;) inside). Contributed by Zsolt Venczel.

 .../apache/hadoop/hdfs/web/WebHdfsFileSystem.java  | 11 ++++-
 .../org/apache/hadoop/hdfs/web/TestWebHdfsUrl.java | 55 ++++++++++++++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)

commit 6bc92e304fe05e80f13830104d1fd2c59da8344b
Author: Billie Rinaldi <billie@apache.org>
Date:   Thu May 31 06:46:34 2018 -0700

    YARN-8333. Load balance YARN services using RegistryDNS multiple A records. Contributed by Eric Yang

 .../server/dns/BaseServiceRecordProcessor.java     | 20 +++++++
 .../dns/ContainerServiceRecordProcessor.java       |  3 +-
 .../registry/server/dns/TestRegistryDNS.java       | 62 +++++++++++++++++-----
 .../site/markdown/yarn-service/ServiceDiscovery.md | 14 ++++-
 4 files changed, 84 insertions(+), 15 deletions(-)

commit 6468071f137e6d918a7b4799ad54558fa26b25ce
Author: Weiwei Yang <wwei@apache.org>
Date:   Thu May 31 20:46:39 2018 +0800

    YARN-8367. Fix NPE in SingleConstraintAppPlacementAllocator when placement constraint in SchedulingRequest is null. Contributed by Weiwei Yang.

 .../SingleConstraintAppPlacementAllocator.java     | 187 +++++++++++----------
 .../TestSchedulingRequestContainerAllocation.java  |  84 +++++++++
 2 files changed, 182 insertions(+), 89 deletions(-)

commit d1e2b8098078af4af31392ed7f2fa350a7d1c3b2
Author: Takanobu Asanuma <tasanuma@yahoo-corp.jp>
Date:   Thu May 31 18:31:10 2018 +0900

    MAPREDUCE-7098. Upgrade common-langs version to 3.7 in hadoop-mapreduce-project
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../src/main/java/org/apache/hadoop/util/StringUtils.java    |  2 +-
 .../test/java/org/apache/hadoop/util/TestStringUtils.java    |  2 +-
 .../hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java    |  2 +-
 .../apache/hadoop/mapreduce/v2/app/webapp/AppController.java |  2 +-
 .../org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java  | 10 +++++-----
 .../apache/hadoop/mapreduce/v2/app/webapp/TasksBlock.java    |  6 +++---
 .../hadoop/mapreduce/v2/app/webapp/TestAppController.java    |  2 +-
 .../apache/hadoop/mapreduce/checkpoint/RandomNameCNS.java    |  2 +-
 .../jobhistory/HumanReadableHistoryViewerPrinter.java        |  2 +-
 .../mapreduce/lib/output/PathOutputCommitterFactory.java     |  2 +-
 .../org/apache/hadoop/mapreduce/security/TokenCache.java     |  2 +-
 .../src/main/java/org/apache/hadoop/mapreduce/tools/CLI.java |  2 +-
 .../mapreduce/lib/partition/TestRehashPartitioner.java       |  2 +-
 .../apache/hadoop/mapreduce/v2/hs/webapp/HsJobsBlock.java    |  8 ++++----
 .../org/apache/hadoop/mapreduce/v2/hs/webapp/HsTaskPage.java | 10 +++++-----
 .../src/main/java/org/apache/hadoop/mapred/ClientCache.java  |  2 +-
 .../java/org/apache/hadoop/mapred/ClientServiceDelegate.java |  2 +-
 .../main/java/org/apache/hadoop/mapred/NotRunningJob.java    | 12 ++++++------
 .../src/main/java/org/apache/hadoop/mapred/YARNRunner.java   |  2 +-
 .../test/java/org/apache/hadoop/mapred/TestJobCounters.java  |  2 +-
 .../apache/hadoop/mapreduce/lib/db/TestDBOutputFormat.java   |  2 +-
 hadoop-mapreduce-project/hadoop-mapreduce-client/pom.xml     |  5 -----
 22 files changed, 39 insertions(+), 44 deletions(-)

commit 02c4b89f99c93cf0a98509bc65a3313b653e98ff
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 13:15:44 2018 -0700

    HDDS-128. Support for DN to SCM signaling.
    Contributed by Nanda Kumar.

 .../proto/StorageContainerDatanodeProtocol.proto   | 28 ++++++++++++++++------
 1 file changed, 21 insertions(+), 7 deletions(-)

commit 6cd19b45efbbcce6d6ca4b5c0eb3beb42d95e558
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri May 25 15:11:19 2018 -0700

    HDDS-90: Create ContainerData, Container classes. Contributed by Bharat Viswanadham

 .../src/main/proto/DatanodeContainerProtocol.proto |   8 +
 .../container/common/impl/ChunkLayOutVersion.java  |  80 +++++++
 .../ozone/container/common/impl/ContainerData.java | 234 +++++++++++++++++++++
 .../container/common/impl/KeyValueContainer.java   |  74 +++++++
 .../common/impl/KeyValueContainerData.java         | 159 ++++++++++++++
 .../container/common/interfaces/Container.java     |  75 +++++++
 .../container/common/TestChunkLayOutVersion.java   |  42 ++++
 .../common/TestKeyValueContainerData.java          | 119 +++++++++++
 8 files changed, 791 insertions(+)

commit ee1e0e20368e825a6cef347ed9637c9cf67be45f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 18:25:35 2018 -0700

    HDDS-92. Use DBType during parsing datanode .container files. Contributed by Bharat Viswanadham.

 .../apache/hadoop/utils/MetadataStoreBuilder.java  | 40 ++++++++++++---
 .../hadoop/{ozone => utils}/TestMetadataStore.java | 57 ++++++++++++++++++++--
 .../ozone/container/common/helpers/KeyUtils.java   |  3 +-
 .../container/common/utils/ContainerCache.java     |  6 ++-
 4 files changed, 93 insertions(+), 13 deletions(-)

commit 778a4a24be176382a5704f709c00bdfcfe6ddc8c
Author: Billie Rinaldi <billie@apache.org>
Date:   Wed May 30 13:19:13 2018 -0700

    YARN-8350. NPE in service AM related to placement policy. Contributed by Gour Saha

 .../hadoop/yarn/service/component/Component.java   | 114 +++++++++++----------
 .../service/exceptions/RestApiErrorMessages.java   |   8 ++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  24 ++++-
 .../hadoop/yarn/service/TestServiceApiUtil.java    |  44 +++++++-
 4 files changed, 130 insertions(+), 60 deletions(-)

commit 96eefcc84aacc4cc82ad7e3e72c5bdad56f4a7b7
Author: Billie Rinaldi <billie@apache.org>
Date:   Wed May 30 12:37:01 2018 -0700

    YARN-8368. yarn app start cli should print applicationId. Contributed by Rohith Sharma K S

 .../hadoop/yarn/service/webapp/ApiServer.java      | 28 ++++++++++++----------
 .../hadoop/yarn/service/ServiceClientTest.java     | 18 +++++++++++++-
 .../hadoop/yarn/service/client/ServiceClient.java  |  2 ++
 3 files changed, 35 insertions(+), 13 deletions(-)

commit 47c31ff16b452d47afc6ffc1cf936ac2de9b788d
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 30 10:22:04 2018 -0700

    HDFS-13629. Some tests in TestDiskBalancerCommand fail on Windows due to MiniDFSCluster path conflict and improper path usage. Contributed by Anbang Hu.

 .../hdfs/server/diskbalancer/DiskBalancerTestUtil.java    |  5 ++++-
 .../diskbalancer/command/TestDiskBalancerCommand.java     | 15 +++++++--------
 2 files changed, 11 insertions(+), 9 deletions(-)

commit 8197b9b56040113806bdf328bbee68e95dd0aadd
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 30 10:02:19 2018 -0700

    HDFS-13632. Randomize baseDir for MiniJournalCluster in MiniQJMHACluster for TestDFSAdminWithHA. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/qjournal/MiniQJMHACluster.java | 10 ++++++++--
 .../java/org/apache/hadoop/hdfs/tools/TestDFSAdminWithHA.java  |  4 +++-
 2 files changed, 11 insertions(+), 3 deletions(-)

commit e44c0849d7982c8f1ed43af25d2092090881d19f
Author: Eric E Payne <ericp@oath.com>
Date:   Wed May 30 16:50:19 2018 +0000

    YARN-8377: Javadoc build failed in hadoop-yarn-server-nodemanager. Contributed by Takanobu Asanuma

 .../containermanager/container/SlidingWindowRetryPolicy.java         | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 3b34148c4f7380d201de59c4a1870b597649248f
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 08:52:07 2018 -0700

    HDDS-88. Create separate message structure to represent ports in DatanodeDetails.
    Contributed by Nanda Kumar.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |   2 +-
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   2 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      | 219 ++++++++++++---------
 .../main/java/org/apache/ratis/RatisHelper.java    |   6 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  10 +-
 .../common/transport/server/XceiverServer.java     |   3 +-
 .../common/transport/server/XceiverServerGrpc.java |   3 +-
 .../transport/server/ratis/XceiverServerRatis.java |   3 +-
 .../container/common/TestDatanodeStateMachine.java |  16 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  12 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  18 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  17 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   3 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  12 +-
 .../container/metrics/TestContainerMetrics.java    |   3 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  11 +-
 .../container/server/TestContainerServer.java      |   8 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |   5 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |   4 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |   4 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |   4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |   4 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   2 -
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |   4 +-
 .../hadoop/ozone/web/OzoneHddsDatanodeService.java |   5 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   4 +-
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  12 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   6 +-
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |   3 +-
 30 files changed, 260 insertions(+), 153 deletions(-)

commit b24098bc8ffe976d662acabc168e20eac8cc8460
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed May 30 16:52:21 2018 +0800

    HDFS-13626. Fix incorrect username when deny the setOwner operation. Contributed by Zsolt Venczel.

 .../org/apache/hadoop/hdfs/server/namenode/FSDirAttrOp.java |  4 ++--
 .../java/org/apache/hadoop/security/TestPermission.java     | 13 ++++++++-----
 2 files changed, 10 insertions(+), 7 deletions(-)

commit 5f6769f7964ff002b6c04a95893b5baeb424b6db
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 29 19:20:22 2018 -0700

    HADOOP-15480 AbstractS3GuardToolTestBase.testDiffCommand fails when using dynamo (Gabor Bota)

 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 37 +++++++++++++++-------
 .../fs/s3a/s3guard/ITestS3GuardToolDynamoDB.java   |  5 ---
 .../fs/s3a/s3guard/ITestS3GuardToolLocal.java      |  5 ---
 3 files changed, 25 insertions(+), 22 deletions(-)

commit 135941e00d762a417c3b4cc524cdc59b0d1810b1
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 29 16:56:58 2018 -0400

    YARN-8362.  Bugfix logic in container retries in node manager.
                Contributed by Chandni Singh

 .../containermanager/container/ContainerImpl.java  |  4 +-
 .../container/SlidingWindowRetryPolicy.java        | 62 ++++++++++++----------
 .../container/TestSlidingWindowRetryPolicy.java    |  6 +++
 3 files changed, 44 insertions(+), 28 deletions(-)

commit 24169062e5f4e7798a47c5e6e3e94504cba73092
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 13:23:58 2018 -0700

    HDDS-114. Ozone Datanode mbean registration fails for StorageLocation.
    Contributed by Elek, Marton.

 .../common/impl/StorageLocationReport.java         | 52 +++++++++++++---------
 .../interfaces/ContainerLocationManagerMXBean.java |  4 +-
 .../interfaces/StorageLocationReportMXBean.java    | 40 +++++++++++++++++
 3 files changed, 71 insertions(+), 25 deletions(-)

commit 30284d020d36c502dad5bdbae61ec48e9dfe9f8c
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 29 13:38:15 2018 -0700

    HADOOP-14946 S3Guard testPruneCommandCLI can fail. Contributed by Gabor Bota.

 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 52 ++++++++++++++++++----
 1 file changed, 44 insertions(+), 8 deletions(-)

commit 201440b987d5ef3910c2045b2411c213ed6eec1f
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 12:40:27 2018 -0700

    HDDS-81. Moving ContainerReport inside Datanode heartbeat.
    Contributed by Nanda Kumar.

 .../common/impl/ContainerManagerImpl.java          |  22 +-
 .../common/impl/StorageLocationReport.java         |   8 +-
 .../common/interfaces/ContainerManager.java        |   8 +-
 .../common/statemachine/DatanodeStateMachine.java  |   7 +-
 .../common/statemachine/StateContext.java          |  16 +-
 ...dler.java => CloseContainerCommandHandler.java} |  20 +-
 .../commandhandler/CommandDispatcher.java          |   5 +-
 .../commandhandler/CommandHandler.java             |   8 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |  12 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |  30 ++-
 .../states/endpoint/RegisterEndpointTask.java      |  12 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  10 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  30 +--
 .../protocol/StorageContainerNodeProtocol.java     |  15 +-
 .../protocol/commands/CloseContainerCommand.java   |  18 +-
 .../protocol/commands/DeleteBlocksCommand.java     |  18 +-
 .../ozone/protocol/commands/RegisteredCommand.java |  26 +-
 .../ozone/protocol/commands/ReregisterCommand.java |  16 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java |   4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  50 +---
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  53 ++--
 .../proto/StorageContainerDatanodeProtocol.proto   | 256 +++++++++----------
 .../hadoop/ozone/container/common/ScmTestMock.java |  78 ++----
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |   6 +-
 .../container/replication/ContainerSupervisor.java |  13 +-
 .../scm/container/replication/InProgressPool.java  |  15 +-
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   |  14 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  58 ++---
 .../hdds/scm/node/SCMNodeStorageStatMap.java       |  14 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 195 +++++++--------
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  19 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  26 +-
 .../hdds/scm/container/TestContainerMapping.java   |  24 +-
 .../scm/container/closer/TestContainerCloser.java  |  12 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   6 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  83 +++----
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  16 +-
 .../ozone/container/common/TestEndPoint.java       | 113 ++-------
 .../replication/TestContainerSupervisor.java       | 275 ---------------------
 .../testutils/ReplicationDatanodeStateManager.java | 101 --------
 .../testutils/ReplicationNodeManagerMock.java      |  14 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  11 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  68 ++---
 44 files changed, 603 insertions(+), 1212 deletions(-)

commit 4827e9a9085b306bc379cb6e0b1fe4b92326edcd
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 29 14:43:17 2018 -0500

    YARN-8329. Docker client configuration can still be set incorrectly. Contributed by Shane Kumpf

 .../yarn/util/DockerClientConfigHandler.java       | 23 ++++++++++++----------
 .../security/TestDockerClientConfigHandler.java    |  4 ++--
 .../linux/runtime/DockerLinuxContainerRuntime.java |  7 ++++---
 3 files changed, 19 insertions(+), 15 deletions(-)

commit e3236a9680709de7a95ffbc11b20e1bdc95a8605
Author: Kihwal Lee <kihwal@apache.org>
Date:   Tue May 29 14:15:12 2018 -0500

    Additional check when unpacking archives. Contributed by Wilfred Spiegelenburg.

 .../main/java/org/apache/hadoop/util/RunJar.java   | 10 ++++++
 .../java/org/apache/hadoop/util/TestRunJar.java    | 42 ++++++++++++++++++++++
 2 files changed, 52 insertions(+)

commit 9502b47bd2a3cf32edae635293169883c2914475
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 09:54:06 2018 -0700

    HDDS-125. Cleanup HDDS CheckStyle issues.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  1 -
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  2 +-
 .../hdds/scm/container/ContainerMapping.java       |  6 +-
 .../hdds/scm/container/ContainerStateManager.java  | 24 ++++----
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  9 ++-
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  4 +-
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 19 ++++---
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  8 +--
 .../hdds/scm/node/states/Node2ContainerMap.java    |  2 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |  5 +-
 .../hdds/scm/server/StorageContainerManager.java   |  3 +-
 .../scm/TestStorageContainerManagerHttpServer.java |  1 -
 .../apache/hadoop/hdds/scm/block/package-info.java | 23 ++++++++
 .../hdds/scm/container/TestContainerMapping.java   | 12 ++--
 .../hdds/scm/container/closer/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/container/package-info.java    | 22 ++++++++
 .../hdds/scm/container/states/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 66 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 32 ++++++-----
 .../apache/hadoop/hdds/scm/node/package-info.java  | 22 ++++++++
 .../ozone/container/common/TestEndPoint.java       |  2 -
 .../ozone/container/common/package-info.java       | 22 ++++++++
 .../ozone/container/placement/package-info.java    | 22 ++++++++
 .../replication/TestContainerSupervisor.java       |  7 ++-
 24 files changed, 263 insertions(+), 95 deletions(-)

commit 17aa40f669f197d43387d67dc00040d14cd00948
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 29 09:27:36 2018 -0700

    YARN-8369. Javadoc build failed due to 'bad use of >'. (Takanobu Asanuma via wangda)
    
    Change-Id: I79a42154e8f86ab1c3cc939b3745024b8eebe5f4

 .../org/apache/hadoop/yarn/util/resource/ResourceCalculator.java  | 4 ++--
 .../monitor/capacity/CapacitySchedulerPreemptionUtils.java        | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 3061bfcde53210d2032df3814243498b27a997b7
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 29 09:23:11 2018 -0700

    YARN-8339. Service AM should localize static/archive resource types to container working directory instead of 'resources'. (Suma Shivaprasad via wangda)
    
    Change-Id: I9f8e8f621650347f6c2f9e3420edee9eb2f356a4

 .../java/org/apache/hadoop/yarn/service/provider/ProviderUtils.java | 3 +--
 .../org/apache/hadoop/yarn/service/provider/TestProviderUtils.java  | 6 +++---
 2 files changed, 4 insertions(+), 5 deletions(-)

commit 3c75f8e4933221fa60a87e86a3db5e4727530b6f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 29 09:11:08 2018 -0700

    HADOOP-15497. TestTrash should use proper test path to avoid failing on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/fs/TestTrash.java          | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 31ab960f4f931df273481927b897388895d803ba
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 29 11:00:30 2018 -0500

    YARN-8338. TimelineService V1.5 doesn't come up after HADOOP-15406. Contributed by Vinod Kumar Vavilapalli

 hadoop-project/pom.xml                                               | 5 +++++
 .../hadoop-yarn-server-applicationhistoryservice/pom.xml             | 5 +++++
 2 files changed, 10 insertions(+)

commit 438ef4951a38171f193eaf2631da31d0f4bc3c62
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon May 28 17:32:32 2018 -0700

    HADOOP-15455. Incorrect debug message in KMSACL#hasAccess. Contributed by Yuen-Kuei Hsueh.

 .../main/java/org/apache/hadoop/crypto/key/kms/server/KMSACLs.java    | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8fdc993a993728c65084d7dc3ac469059cb1f603
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 16:45:42 2018 -0700

    HADOOP-15498. TestHadoopArchiveLogs (#testGenerateScript, #testPrepareWorkingDir) fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/tools/TestHadoopArchiveLogs.java  | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 9dbf4f01665d5480a70395a24519cbab5d4db0c5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 16:34:02 2018 -0700

    HDFS-13591. TestDFSShell#testSetrepLow fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/TestDFSShell.java     | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 91d7c74e6aa4850922f68bab490b585443e4fccb
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 10:26:47 2018 -0700

    HDFS-13627. TestErasureCodingExerciseAPIs fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/TestErasureCodingExerciseAPIs.java   | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7c343669baf660df3b70d58987d6e68aec54d6fa
Author: Sunil G <sunilg@apache.org>
Date:   Mon May 28 16:32:53 2018 +0530

    YARN-4781. Support intra-queue preemption for fairness ordering policy. Contributed by Eric Payne.

 .../capacity/FifoIntraQueuePreemptionPlugin.java   |  37 ++-
 .../capacity/IntraQueueCandidatesSelector.java     |  40 +++
 .../monitor/capacity/TempAppPerPartition.java      |   9 +
 .../policy/AbstractComparatorOrderingPolicy.java   |   2 -
 ...ionalCapacityPreemptionPolicyMockFramework.java |  12 +-
 ...cityPreemptionPolicyIntraQueueFairOrdering.java | 276 +++++++++++++++++++++
 6 files changed, 366 insertions(+), 10 deletions(-)

commit 61df174e8b3d582183306cabfa2347c8b96322ff
Author: Karthik Palanisamy <karthikshva123@gmail.com>
Date:   Mon May 28 19:41:07 2018 +0900

    HADOOP-15449. Increase default timeout of ZK session to avoid frequent NameNode failover
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../src/main/java/org/apache/hadoop/ha/ZKFailoverController.java        | 2 +-
 hadoop-common-project/hadoop-common/src/main/resources/core-default.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 04757e5864bd4904fd5a59d143fff480814700e4
Author: Takanobu Asanuma <tasanuma@yahoo-corp.jp>
Date:   Mon May 28 19:04:36 2018 +0900

    HDFS-13628. Update Archival Storage doc for Provided Storage
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-hdfs-project/hadoop-hdfs/src/site/markdown/ArchivalStorage.md | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 88cbe57c069a1d2dd3bfb32e3ad742566470a10b
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Mon May 28 12:45:07 2018 +0530

    MAPREDUCE-7097. MapReduce JHS should honor yarn.webapp.filter-entity-list-by-user. Contributed by  Sunil Govindan.

 .../hadoop/mapreduce/v2/hs/webapp/HsJobBlock.java  | 18 +++++++++++++++-
 .../mapreduce/v2/hs/webapp/TestHsJobBlock.java     | 20 ++++++++++++++++--
 .../org/apache/hadoop/yarn/webapp/Controller.java  |  4 ++++
 .../java/org/apache/hadoop/yarn/webapp/View.java   | 24 ++++++++++++++--------
 4 files changed, 55 insertions(+), 11 deletions(-)

commit d14e26b31fe46fb47a8e99a212c70016fd15a4d9
Author: Johan Gustavsson <johan+apache+jira@treasure-data.com>
Date:   Mon May 28 17:29:59 2018 +0900

    HADOOP-15477. Make unjar in RunJar overrideable
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../main/java/org/apache/hadoop/util/RunJar.java   | 17 +++++++---
 .../java/org/apache/hadoop/util/TestRunJar.java    | 37 ++++++++++++++++++++--
 .../org/apache/hadoop/streaming/StreamJob.java     |  4 ++-
 3 files changed, 51 insertions(+), 7 deletions(-)

commit 0cf6e87f9212af10eae39cdcb1fe60e6d8191772
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 26 11:06:22 2018 -0700

    HDDS-78. Add per volume level storage stats in SCM.
    Contributed by  Shashikant Banerjee.

 .../container/placement/metrics/SCMNodeStat.java   |  21 --
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |   8 +
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 230 ++++++++++++++-------
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  87 ++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 141 +++++++++----
 5 files changed, 356 insertions(+), 131 deletions(-)

commit f24c842d52e166e8566337ef93c96438f1c870d8
Author: Wangda Tan <wangda@apache.org>
Date:   Fri May 25 21:53:20 2018 -0700

    YARN-8213. Add Capacity Scheduler performance metrics. (Weiwei Yang via wangda)
    
    Change-Id: Ieea6f3eeb83c90cd74233fea896f0fcd0f325d5f

 .../server/resourcemanager/ResourceManager.java    |   1 +
 .../scheduler/AbstractYarnScheduler.java           |   5 +
 .../scheduler/ResourceScheduler.java               |   5 +
 .../scheduler/capacity/CapacityScheduler.java      |  31 +++++-
 .../capacity/CapacitySchedulerMetrics.java         | 119 +++++++++++++++++++++
 .../TestCapacitySchedulerMetrics.java              | 110 +++++++++++++++++++
 6 files changed, 269 insertions(+), 2 deletions(-)

commit 8605a38514b4f7a2a549c7ecf8e1421e61bb4d67
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 19:43:33 2018 -0700

    HDFS-13620. Randomize the test directory path for TestHDFSFileSystemContract. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/TestHDFSFileSystemContract.java     | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 2a9652e69650973f6158b60ff131215827738db6
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 15:40:46 2018 -0700

    HDDS-113. Rest and Rpc Client should verify resource name using HddsClientUtils.
    Contributed by Lokesh Jain.

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 23 ++++++++++
 .../apache/hadoop/ozone/client/ObjectStore.java    |  9 ----
 .../apache/hadoop/ozone/client/OzoneBucket.java    | 24 +---------
 .../apache/hadoop/ozone/client/OzoneVolume.java    | 18 +-------
 .../hadoop/ozone/client/rest/RestClient.java       | 52 +++++++++-------------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 46 ++++++++-----------
 6 files changed, 64 insertions(+), 108 deletions(-)

commit 13d25289076b39daf481fb1ee15939dbfe4a6b23
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 13:32:34 2018 -0700

    HDFS-13619. TestAuditLoggerWithCommands fails on Windows. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/TestAuditLoggerWithCommands.java     | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 8733012ae35f2762d704f94975a762885d116795
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 13:06:14 2018 -0700

    HDDS-96. Add an option in ozone script to generate a site file with minimally required ozone configs.
    Contributed by Dinesh Chitlangia.

 .../hadoop/hdds/conf/OzoneConfiguration.java       |   6 +-
 hadoop-ozone/common/src/main/bin/ozone             |   4 +
 .../TestGenerateOzoneRequiredConfigurations.java   | 100 ++++++++++++
 .../GenerateOzoneRequiredConfigurations.java       | 174 +++++++++++++++++++++
 .../apache/hadoop/ozone/genconf/package-info.java  |  24 +++
 5 files changed, 305 insertions(+), 3 deletions(-)

commit 1e0d4b1c283fb98a95c60a1723f594befb3c18a9
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 09:10:32 2018 -0700

    HDFS-13618. Fix TestDataNodeFaultInjector test failures on Windows. Contributed by Xiao Liang.

 .../apache/hadoop/hdfs/server/datanode/TestDataNodeFaultInjector.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02322de3f95ba78a22c057037ef61aa3ab1d3824
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 25 09:08:15 2018 -0700

    HADOOP-15473. Configure serialFilter in KeyProvider to avoid UnrecoverableKeyException caused by JDK-8189997. Contributed by Gabor Bota.

 .../org/apache/hadoop/crypto/key/KeyProvider.java  | 18 +++++++++++++++++
 .../hadoop/fs/CommonConfigurationKeysPublic.java   |  7 +++++++
 .../src/main/resources/core-default.xml            | 23 ++++++++++++++++++++++
 3 files changed, 48 insertions(+)

commit 8d5509c68156faaa6641f4e747fc9ff80adccf88
Author: Eric E Payne <ericp@oath.com>
Date:   Fri May 25 16:06:09 2018 +0000

    YARN-8292: Fix the dominant resource preemption cannot happen when some of the resource vector becomes negative. Contributed by Wangda Tan.

 .../util/resource/DefaultResourceCalculator.java   |  15 ++-
 .../util/resource/DominantResourceCalculator.java  |  39 +++++---
 .../yarn/util/resource/ResourceCalculator.java     |  13 ++-
 .../hadoop/yarn/util/resource/Resources.java       |   5 -
 .../AbstractPreemptableResourceCalculator.java     |  58 ++++++++----
 .../capacity/CapacitySchedulerPreemptionUtils.java |  61 ++++++++++--
 .../monitor/capacity/FifoCandidatesSelector.java   |   8 +-
 .../capacity/FifoIntraQueuePreemptionPlugin.java   |   4 +-
 .../capacity/IntraQueueCandidatesSelector.java     |   2 +-
 .../capacity/PreemptableResourceCalculator.java    |   6 +-
 .../monitor/capacity/TempQueuePerPartition.java    |   8 +-
 ...ionalCapacityPreemptionPolicyMockFramework.java |  30 ++++++
 .../TestPreemptionForQueueWithPriorities.java      | 103 ++++++++++++++-------
 ...lCapacityPreemptionPolicyInterQueueWithDRF.java |  60 +++++++++++-
 14 files changed, 312 insertions(+), 100 deletions(-)

commit bddfe796f2f992fc1dcc8a1dd44d64ff2b3c9cf4
Author: Steve Loughran <stevel@apache.org>
Date:   Fri May 25 11:12:47 2018 +0100

    HADOOP-15494. TestRawLocalFileSystemContract fails on Windows.
    Contributed by Anbang Hu.

 .../test/java/org/apache/hadoop/fs/TestRawLocalFileSystemContract.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 86bc6425d425913899f1d951498bd040e453b3d0
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 24 17:07:21 2018 -0700

    YARN-8191. Fair scheduler: queue deletion without RM restart. (Gergo Repas via Haibo Chen)

 .../fair/AllocationFileLoaderService.java          |  16 +-
 .../scheduler/fair/FSLeafQueue.java                |  31 ++
 .../resourcemanager/scheduler/fair/FSQueue.java    |   9 +
 .../scheduler/fair/FairScheduler.java              |  29 +-
 .../scheduler/fair/QueueManager.java               | 155 ++++++++--
 .../fair/TestAllocationFileLoaderService.java      | 100 +++---
 .../scheduler/fair/TestQueueManager.java           | 337 +++++++++++++++++++++
 7 files changed, 596 insertions(+), 81 deletions(-)

commit d9852eb5897a25323ab0302c2c0decb61d310e5e
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 24 16:32:13 2018 -0400

    YARN-8357.  Fixed NPE when YARN service is saved and not deployed.
                Contributed by Chandni Singh

 .../main/java/org/apache/hadoop/yarn/service/client/ServiceClient.java   | 1 +
 1 file changed, 1 insertion(+)

commit 7ff5a40218241ad2380595175a493794129a7402
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 24 16:26:02 2018 -0400

    YARN-8316.  Improved diagnostic message for ATS unavailability for YARN Service.
                Contributed by Billie Rinaldi

 .../java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java   | 2 +-
 .../java/org/apache/hadoop/yarn/client/api/impl/TestYarnClient.java   | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 2d19e7d08f031341078a36fee74860c58de02993
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 11:10:30 2018 -0700

    HDDS-80. Remove SendContainerCommand from SCM. Contributed by Nanda Kumar.

 .../common/statemachine/DatanodeStateMachine.java  |   3 -
 .../commandhandler/ContainerReportHandler.java     | 114 ---------------------
 .../states/endpoint/HeartbeatEndpointTask.java     |   5 -
 .../protocol/commands/SendContainerCommand.java    |  80 ---------------
 .../proto/StorageContainerDatanodeProtocol.proto   |  16 ++-
 .../scm/container/replication/InProgressPool.java  |  57 -----------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   7 --
 7 files changed, 7 insertions(+), 275 deletions(-)

commit c9b63deb533274ca8ef4939f6cd13f728a067f7b
Author: Andrew Wang <wang@apache.org>
Date:   Thu May 24 09:56:23 2018 -0700

    HDFS-13611. Unsafe use of Text as a ConcurrentHashMap key in PBHelperClient.

 .../src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1388de18ad51434569589a8f5b0b05c38fe02ab3
Author: Shane Kumpf <skumpf@apache.org>
Date:   Thu May 24 09:30:39 2018 -0600

    YARN-6919. Add default volume mount list. Contributed by Eric Badger

 .../apache/hadoop/yarn/conf/YarnConfiguration.java |  10 ++
 .../src/main/resources/yarn-default.xml            |  14 +++
 .../linux/runtime/DockerLinuxContainerRuntime.java |  38 ++++++
 .../linux/runtime/TestDockerContainerRuntime.java  | 138 +++++++++++++++++++++
 4 files changed, 200 insertions(+)

commit 774daa8d532f9eeee1fe8e342a8da2cfa65a8629
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu May 24 15:53:42 2018 +0530

    HDDS-45. Removal of old OzoneRestClient. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |  22 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       | 646 -----------------
 .../apache/hadoop/ozone/web/client/OzoneKey.java   |  44 --
 .../hadoop/ozone/web/client/OzoneRestClient.java   | 804 ---------------------
 .../hadoop/ozone/web/client/OzoneVolume.java       | 584 ---------------
 .../hadoop/ozone/web/client/package-info.java      |  34 -
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   3 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  14 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    | 207 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       | 193 +++--
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |  15 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 286 +++++---
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  29 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java | 285 +++-----
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  29 +-
 15 files changed, 548 insertions(+), 2647 deletions(-)

commit c05b5d424b000bab766f57e88a07f2b4e9a56647
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 24 14:19:46 2018 +0530

    YARN-8319. More YARN pages need to honor yarn.resourcemanager.display.per-user-apps. Contributed by Sunil G.

 .../apache/hadoop/yarn/conf/YarnConfiguration.java | 11 +++-
 .../yarn/conf/TestYarnConfigurationFields.java     |  2 +
 .../src/main/resources/yarn-default.xml            |  2 +-
 .../server/nodemanager/webapp/NMWebServices.java   | 63 +++++++++++++++++++-
 .../nodemanager/webapp/TestNMWebServicesApps.java  | 68 ++++++++++++++++++----
 .../server/resourcemanager/ClientRMService.java    | 10 ++--
 .../resourcemanager/webapp/RMWebServices.java      |  8 +--
 .../reader/TimelineReaderWebServices.java          | 33 +++++++++++
 8 files changed, 175 insertions(+), 22 deletions(-)

commit 4cc0c9b0baa93f5a1c0623eee353874e858a7caa
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 24 12:23:47 2018 +0530

    YARN-8346. Upgrading to 3.1 kills running containers with error 'Opportunistic container queue is full'. Contributed by Jason Lowe.

 .../yarn/security/ContainerTokenIdentifier.java    |  4 ++--
 .../yarn/security/TestYARNTokenIdentifier.java     | 25 ++++++++++++++++++++++
 2 files changed, 27 insertions(+), 2 deletions(-)

commit 7a87add4ea4c317aa9377d1fc8e43fb5e7418a46
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu May 24 10:57:35 2018 +0800

    HDFS-13598. Reduce unnecessary byte-to-string transform operation in INodesInPath#toString. Contributed by Gabor Bota.

 .../main/java/org/apache/hadoop/hdfs/server/namenode/INodesInPath.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d9964799544eefcf424fcc178d987525f5356cdf
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed May 23 11:29:55 2018 -0700

    YARN-4599. Set OOM control for memory cgroups. (Miklos Szegedi via Haibo Chen)

 .gitignore                                         |   1 +
 .../apache/hadoop/yarn/conf/YarnConfiguration.java |  26 +-
 .../src/main/resources/yarn-default.xml            |  67 ++-
 .../src/CMakeLists.txt                             |  19 +
 .../resources/CGroupElasticMemoryController.java   | 476 +++++++++++++++++++++
 .../linux/resources/CGroupsHandler.java            |   6 +
 .../linux/resources/CGroupsHandlerImpl.java        |   6 +-
 .../CGroupsMemoryResourceHandlerImpl.java          |  15 -
 .../linux/resources/DefaultOOMHandler.java         | 254 +++++++++++
 .../monitor/ContainersMonitorImpl.java             |  50 +++
 .../executor/ContainerSignalContext.java           |  41 ++
 .../main/native/oom-listener/impl/oom_listener.c   | 171 ++++++++
 .../main/native/oom-listener/impl/oom_listener.h   | 102 +++++
 .../native/oom-listener/impl/oom_listener_main.c   | 104 +++++
 .../oom-listener/test/oom_listener_test_main.cc    | 292 +++++++++++++
 .../linux/resources/DummyRunnableWithContext.java  |  31 ++
 .../TestCGroupElasticMemoryController.java         | 319 ++++++++++++++
 .../TestCGroupsMemoryResourceHandlerImpl.java      |   6 +-
 .../linux/resources/TestDefaultOOMHandler.java     | 307 +++++++++++++
 .../monitor/TestContainersMonitor.java             |   1 +
 .../TestContainersMonitorResourceChange.java       |   3 +-
 .../src/site/markdown/NodeManagerCGroupsMemory.md  | 133 ++++++
 22 files changed, 2391 insertions(+), 39 deletions(-)

commit f09dc73001fd5f3319765fa997f4b0ca9e8f2aff
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 15:59:30 2018 -0700

    YARN-8327. Fix TestAggregatedLogFormat#testReadAcontainerLogs1 on Windows. Contributed by Giovanni Matteo Fumarola.

 .../yarn/logaggregation/TestAggregatedLogFormat.java  | 19 ++++++++++++-------
 1 file changed, 12 insertions(+), 7 deletions(-)

commit d72615611cfa6bd82756270d4b10136ec1e56741
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 14:43:59 2018 -0700

    YARN-8348. Incorrect and missing AfterClass in HBase-tests to fix NPE failures. Contributed by Giovanni Matteo Fumarola.

 .../timelineservice/storage/TestHBaseTimelineStorageApps.java     | 4 +++-
 .../timelineservice/storage/TestHBaseTimelineStorageDomain.java   | 8 ++++++++
 .../timelineservice/storage/TestHBaseTimelineStorageEntities.java | 4 +++-
 .../timelineservice/storage/TestHBaseTimelineStorageSchema.java   | 8 ++++++++
 .../storage/flow/TestHBaseStorageFlowActivity.java                | 4 +++-
 .../timelineservice/storage/flow/TestHBaseStorageFlowRun.java     | 4 +++-
 .../storage/flow/TestHBaseStorageFlowRunCompaction.java           | 4 +++-
 7 files changed, 31 insertions(+), 5 deletions(-)

commit e99e5bf104e9664bc1b43a2639d87355d47a77e2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 14:15:26 2018 -0700

    YARN-8344. Missing nm.stop() in TestNodeManagerResync to fix testKillContainersOnResync. Contributed by Giovanni Matteo Fumarola.

 .../server/nodemanager/TestNodeManagerResync.java  | 87 ++++++++++++----------
 1 file changed, 48 insertions(+), 39 deletions(-)

commit cddbbe5f690e4617413f6e986adc6fa900629f03
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 12:12:08 2018 -0700

    HDFS-13493. Reduce the HttpServer2 thread count on DataNodes. Contributed by Erik Krogen.

 .../hdfs/server/datanode/web/DatanodeHttpServer.java       | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit e30938af1270e079587e7bc06b755f9e93e660a5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 11:55:31 2018 -0700

    YARN-8336. Fix potential connection leak in SchedConfCLI and YarnWebServiceUtils. Contributed by Giovanni Matteo Fumarola.

 .../hadoop/yarn/client/cli/SchedConfCLI.java       | 42 +++++++++++++---------
 .../yarn/webapp/util/YarnWebServiceUtils.java      | 17 ++++++---
 2 files changed, 38 insertions(+), 21 deletions(-)

commit c13dea87d9de7a9872fc8b0c939b41b1666a61e5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 11:36:03 2018 -0700

    HDFS-13587. TestQuorumJournalManager fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/qjournal/MiniJournalCluster.java     | 5 +++++
 .../apache/hadoop/hdfs/qjournal/client/TestQuorumJournalManager.java | 3 ++-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 51ce02bb54d6047a8191624a86d427b0c9445cb1
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed May 23 10:30:12 2018 -0700

    HADOOP-15486. Make NetworkTopology#netLock fair. Contributed by Nanda kumar.

 .../src/main/java/org/apache/hadoop/net/NetworkTopology.java            | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa23d49fc8b9c2537529dbdc13512000e2ab295a
Author: Robert Kanter <rkanter@apache.org>
Date:   Wed May 23 10:23:17 2018 -0700

    HADOOP-15457. Add Security-Related HTTP Response Header in WEBUIs. (kanwaljeets via rkanter)

 .../java/org/apache/hadoop/http/HttpServer2.java   | 79 ++++++++++++++++------
 .../org/apache/hadoop/http/TestHttpServer.java     | 61 +++++++++++++++++
 2 files changed, 121 insertions(+), 19 deletions(-)

commit bc6d9d4c796d3c9d27dbbe3266031bf2adecde4f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed May 23 10:15:40 2018 -0700

    HDFS-13589: Add dfsAdmin command to query if upgrade is finalized. Contributed by Hanisha Koneru

 .../java/org/apache/hadoop/hdfs/DFSClient.java     | 10 +++
 .../apache/hadoop/hdfs/DistributedFileSystem.java  | 10 +++
 .../hadoop/hdfs/protocol/ClientProtocol.java       |  9 ++
 .../apache/hadoop/hdfs/protocol/HdfsConstants.java |  7 ++
 .../ClientNamenodeProtocolTranslatorPB.java        | 17 ++++
 .../src/main/proto/ClientNamenodeProtocol.proto    |  9 ++
 .../server/federation/router/RouterRpcServer.java  |  7 ++
 ...ientNamenodeProtocolServerSideTranslatorPB.java | 17 ++++
 .../hdfs/server/namenode/NameNodeRpcServer.java    |  6 ++
 .../org/apache/hadoop/hdfs/tools/DFSAdmin.java     | 97 ++++++++++++++++++++++
 .../hadoop-hdfs/src/site/markdown/HDFSCommands.md  |  2 +
 .../site/markdown/HDFSHighAvailabilityWithQJM.md   |  2 +
 .../hadoop/hdfs/tools/TestDFSAdminWithHA.java      | 67 +++++++++++++++
 13 files changed, 260 insertions(+)

commit 699a6918aca2b57ae9ad0bff2c3aaf5a776da614
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 23 09:42:21 2018 -0700

    HDDS-110. Checkstyle is not working in the HDDS precommit hook.
    Contributed by Elek, Marton.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c0c9b7a8ef2618b7641a0452d9277abd26815de2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 09:46:35 2018 -0700

    HDFS-13588. Fix TestFsDatasetImpl test failures on Windows. Contributed by Xiao Liang.

 .../hdfs/server/datanode/fsdataset/impl/TestFsDatasetImpl.java    | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit e83b943fed53c8082a699e0601c2f8e8db0f8ffe
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 23 09:29:35 2018 -0700

    HDDS-44. Ozone: start-ozone.sh fail to start datanode because of incomplete classpaths.
    Contributed by Mukul Kumar Singh.

 hadoop-ozone/common/src/main/bin/start-ozone.sh | 116 +++++++++++++++++++++++-
 1 file changed, 111 insertions(+), 5 deletions(-)

commit 63fc5873cee41b883e988ead00fc6f6cf74fae97
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 23 21:07:37 2018 +0530

    HDDS-84. The root directory of ozone.tar.gz should contain the version string. Contributed by Elek, Marton.

 dev-support/bin/ozone-dist-tar-stitching | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f61e3e752eb1cf4a08030da04bc3d6c5a2b3926d
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 23 18:31:03 2018 +0530

    YARN-8297. Incorrect ATS Url used for Wire encrypted cluster.(addendum). Contributed by Sunil G.

 .../src/main/webapp/app/initializers/loader.js               | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 9837ca9cc746573571029f9fb996a1be10b588ab
Author: Shane Kumpf <skumpf@apache.org>
Date:   Wed May 23 06:43:44 2018 -0600

    YARN-8285. Remove unused environment variables from the Docker runtime. Contributed by Eric Badger

 .../linux/runtime/DockerLinuxContainerRuntime.java               | 9 ---------
 1 file changed, 9 deletions(-)

commit 34e8b9f9a86fb03156861482643fba11bdee1dd4
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Wed May 23 19:10:09 2018 +0800

    HDFS-13540. DFSStripedInputStream should only allocate new buffers when reading. Contributed by Xiao Chen.

 .../apache/hadoop/io/ElasticByteBufferPool.java    | 12 ++++++
 .../apache/hadoop/hdfs/DFSStripedInputStream.java  | 12 +++---
 .../hadoop/hdfs/TestDFSStripedInputStream.java     | 45 ++++++++++++++++++++++
 3 files changed, 64 insertions(+), 5 deletions(-)

commit fed2bef647d9a15fe020ad5d3bb89fcb77ed30e6
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 23 14:15:35 2018 +0530

    HDDS-85. Send Container State Info while sending the container report from Datanode to SCM. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../container/common/helpers/ContainerData.java    |  8 ++++
 .../common/impl/ContainerManagerImpl.java          | 45 ++++++++++++++++++++--
 .../common/interfaces/ContainerManager.java        |  2 +-
 .../commandhandler/ContainerReportHandler.java     |  4 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  4 +-
 .../common/impl/TestContainerPersistence.java      |  2 +-
 7 files changed, 57 insertions(+), 9 deletions(-)

commit 745f203e577bacb35b042206db94615141fa5e6f
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed May 23 17:15:57 2018 +0900

    Additional check when unpacking archives. Contributed by Jason Lowe and Akira Ajisaka.

 .../main/java/org/apache/hadoop/fs/FileUtil.java   | 18 +++++++++-
 .../java/org/apache/hadoop/fs/TestFileUtil.java    | 40 ++++++++++++++++++----
 2 files changed, 51 insertions(+), 7 deletions(-)

commit 1d2640b6132e8308c07476badd2d1482be68a298
Author: Andrew Wang <wang@apache.org>
Date:   Tue May 22 23:55:20 2018 -0700

    HDFS-13601. Optimize ByteString conversions in PBHelper.

 .../dev-support/findbugsExcludeFile.xml            |  5 ++
 .../apache/hadoop/hdfs/protocol/DatanodeID.java    | 50 ++++++++++++++--
 .../hadoop/hdfs/protocolPB/PBHelperClient.java     | 67 ++++++++++++++++++----
 .../datanode/TestDataXceiverBackwardsCompat.java   | 10 ++++
 4 files changed, 118 insertions(+), 14 deletions(-)

commit 5a9140690aba295ba1226a3190b52f34347a8372
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 16:51:43 2018 -0700

    HDDS-49. Standalone protocol should use grpc in place of netty.
    Contributed by Mukul Kumar Singh.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 217 +++++++++++++++++++++
 .../hadoop/hdds/scm/XceiverClientManager.java      |  21 +-
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |   8 +-
 .../common/dev-support/findbugsExcludeFile.xml     |   3 +
 hadoop-hdds/common/pom.xml                         |  17 ++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../src/main/proto/DatanodeContainerProtocol.proto |   7 +
 .../common/src/main/resources/ozone-default.xml    |   9 +
 .../container/common/helpers/ContainerMetrics.java |  14 +-
 .../transport/server/GrpcXceiverService.java       |  82 ++++++++
 .../common/transport/server/XceiverServerGrpc.java | 105 ++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  11 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  10 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  67 +++++--
 hadoop-project/pom.xml                             |   1 +
 15 files changed, 540 insertions(+), 36 deletions(-)

commit 3e5f7ea986600e084fcac723b0423e7de1b3bb8a
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Tue May 22 18:10:33 2018 -0700

    YARN-8310. Handle old NMTokenIdentifier, AMRMTokenIdentifier, and ContainerTokenIdentifier formats. Contributed by Robert Kanter.

 .../main/java/org/apache/hadoop/io/IOUtils.java    |  20 ++++
 .../hadoop/yarn/security/AMRMTokenIdentifier.java  |  33 +++++-
 .../yarn/security/ContainerTokenIdentifier.java    |  98 ++++++++++++++---
 .../hadoop/yarn/security/NMTokenIdentifier.java    |  32 +++++-
 .../yarn/security/TestYARNTokenIdentifier.java     | 121 ++++++++++++++++++++-
 5 files changed, 278 insertions(+), 26 deletions(-)

commit 68c7fd8e6092e8436ecf96852c608708f311f262
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 22 15:46:59 2018 -0700

    HDDS-79. Remove ReportState from SCMHeartbeatRequestProto. Contributed by Nanda kumar.

 .../common/impl/ContainerManagerImpl.java          | 14 +---
 .../common/impl/ContainerReportManagerImpl.java    | 43 +++----------
 .../common/interfaces/ContainerManager.java        |  7 --
 .../common/interfaces/ContainerReportManager.java  |  8 +--
 .../common/statemachine/DatanodeStateMachine.java  |  1 -
 .../common/statemachine/StateContext.java          | 38 -----------
 .../states/endpoint/HeartbeatEndpointTask.java     |  3 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  9 ---
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../protocol/StorageContainerNodeProtocol.java     |  5 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  5 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  3 +-
 .../proto/StorageContainerDatanodeProtocol.proto   | 39 ------------
 .../hadoop/ozone/container/common/ScmTestMock.java | 13 +---
 .../container/common/TestDatanodeStateMachine.java |  7 --
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   | 23 +------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 30 +--------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  6 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  5 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  9 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 74 ++++++++++------------
 .../ozone/container/common/TestEndPoint.java       | 11 +---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  5 +-
 24 files changed, 63 insertions(+), 305 deletions(-)

commit 43be9ab44f27ae847e100efdc6810b192202fc55
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 14:29:06 2018 -0700

    HDDS-89. Addendum Patch-1. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 hadoop-ozone/docs/dev-support/bin/generate-site.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b22f56c4719e63bd4f6edc2a075e0bcdb9442255
Author: Robert Kanter <rkanter@apache.org>
Date:   Tue May 22 14:24:38 2018 -0700

    YARN-8273. Log aggregation does not warn if HDFS quota in target directory is exceeded (grepas via rkanter)

 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |  4 ++
 .../yarn/logaggregation/AggregatedLogFormat.java   | 14 +++-
 .../filecontroller/LogAggregationDFSException.java | 45 +++++++++++++
 .../LogAggregationFileController.java              |  4 +-
 .../tfile/LogAggregationTFileController.java       | 13 +++-
 .../logaggregation/TestContainerLogsUtils.java     |  4 +-
 .../logaggregation/AppLogAggregatorImpl.java       | 49 ++++++++++----
 .../logaggregation/TestAppLogAggregatorImpl.java   | 75 +++++++++++++++++++---
 .../nodemanager/webapp/TestNMWebServices.java      |  7 +-
 9 files changed, 183 insertions(+), 32 deletions(-)

commit 83f53e5c6236de30c213dc41878cebfb02597e26
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 22 13:29:21 2018 -0700

    YARN-8332. Incorrect min/max allocation property name in resource types doc. (Weiwei Yang via wangda)
    
    Change-Id: If74f1ceed9c045a2cb2d6593741278b65ac44a9f

 .../hadoop-yarn-site/src/site/markdown/ResourceModel.md      | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit bd15d2396ef0c24fb6b60c6393d16b37651b828e
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 22 13:25:15 2018 -0700

    YARN-8290. SystemMetricsPublisher.appACLsUpdated should be invoked after application information is published to ATS to avoid "User is not set in the application report" Exception. (Eric Yang via wangda)
    
    Change-Id: I0ac6ddd19740d1aa7dd07111cd11af71ddc2fcaf

 .../org/apache/hadoop/yarn/server/resourcemanager/RMAppManager.java  | 5 -----
 .../apache/hadoop/yarn/server/resourcemanager/rmapp/RMAppImpl.java   | 5 +++++
 .../apache/hadoop/yarn/server/resourcemanager/TestAppManager.java    | 4 ----
 .../org/apache/hadoop/yarn/server/resourcemanager/TestRMRestart.java | 1 +
 4 files changed, 6 insertions(+), 9 deletions(-)

commit 523f602f81eafd56e4adfadd70d7c9a672b5813a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 13:20:42 2018 -0700

    HDDS-89. Addendum Patch. Create ozone specific inline documentation as part of the build
    Contributed by Elek, Marton.

 hadoop-dist/pom.xml | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit 60821fb20ecee55735ddd0a379cb64841ccb1e2e
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 11:38:11 2018 -0700

    HDDS-74. Rename name of properties related to configuration tags.
    Contributed by Sandeep Nemuri.

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java    | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 481bfdb94ff2dd3038fd20b1604358ac78e422d4
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 10:49:10 2018 -0700

    HDDS-89. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 .gitignore                                         |   2 +
 dev-support/bin/ozone-dist-layout-stitching        |   4 +
 hadoop-dist/pom.xml                                |   6 +
 hadoop-ozone/docs/README.md                        |  52 ++++
 hadoop-ozone/docs/archetypes/default.md            |  17 ++
 hadoop-ozone/docs/config.toml                      |  23 ++
 .../content/CommandShell.md}                       |   5 +-
 .../content/GettingStarted.md}                     |   7 +-
 .../OzoneMetrics.md => docs/content/Metrics.md}    |   6 +-
 .../markdown/OzoneRest.md => docs/content/Rest.md} |   4 +
 .../OzoneOverview.md => docs/content/_index.md}    |  48 ++--
 hadoop-ozone/docs/dev-support/bin/generate-site.sh |  29 +++
 hadoop-ozone/docs/pom.xml                          |  58 +++++
 hadoop-ozone/docs/static/OzoneOverview.png         | Bin 0 -> 41729 bytes
 hadoop-ozone/docs/static/OzoneOverview.svg         | 225 ++++++++++++++++
 hadoop-ozone/docs/static/SCMBlockDiagram.png       | Bin 0 -> 14714 bytes
 .../themes/ozonedoc/layouts/_default/single.html   |  32 +++
 .../docs/themes/ozonedoc/layouts/index.html        |  21 ++
 .../themes/ozonedoc/layouts/partials/footer.html   |  19 ++
 .../themes/ozonedoc/layouts/partials/header.html   |  31 +++
 .../themes/ozonedoc/layouts/partials/navbar.html   |  33 +++
 .../themes/ozonedoc/layouts/partials/sidebar.html  |  43 +++
 .../ozonedoc/static/css/bootstrap-theme.min.css    |   6 +
 .../static/css/bootstrap-theme.min.css.map         |   1 +
 .../themes/ozonedoc/static/css/bootstrap.min.css   |   6 +
 .../ozonedoc/static/css/bootstrap.min.css.map      |   1 +
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   | 128 +++++++++
 .../static/fonts/glyphicons-halflings-regular.eot  | Bin 0 -> 20127 bytes
 .../static/fonts/glyphicons-halflings-regular.svg  | 288 +++++++++++++++++++++
 .../static/fonts/glyphicons-halflings-regular.ttf  | Bin 0 -> 45404 bytes
 .../static/fonts/glyphicons-halflings-regular.woff | Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       | Bin 0 -> 18028 bytes
 .../themes/ozonedoc/static/js/bootstrap.min.js     |   7 +
 .../docs/themes/ozonedoc/static/js/jquery.min.js   |   5 +
 .../docs/themes/ozonedoc/static/js/ozonedoc.js     |  23 ++
 hadoop-ozone/docs/themes/ozonedoc/theme.toml       |   2 +
 hadoop-ozone/pom.xml                               |   1 +
 hadoop-project/pom.xml                             |   5 +
 38 files changed, 1118 insertions(+), 20 deletions(-)

commit 6176d2b35c85715aae93526236c29540f71ecac8
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 22 13:44:58 2018 -0400

    YARN-7960.  Added security flag no-new-privileges for YARN Docker integration.
                Contributed by Eric Badger

 .../hadoop-yarn/conf/container-executor.cfg        |  1 +
 .../container-executor/impl/utils/docker-util.c    | 12 +++
 .../test/utils/test_docker_util.cc                 | 90 ++++++++++++++++++++++
 .../src/site/markdown/DockerContainers.md          |  1 +
 4 files changed, 104 insertions(+)

commit bcc8e76badc1341a6cf995c8e44fa5e422158de8
Author: Kihwal Lee <kihwal@apache.org>
Date:   Tue May 22 11:19:15 2018 -0500

    HADOOP-15450. Avoid fsync storm triggered by DiskChecker and handle disk full situation. Contributed by Arpit Agarwal.

 .../java/org/apache/hadoop/util/DiskChecker.java   |  46 +++++-
 .../org/apache/hadoop/util/TestDiskChecker.java    | 102 ------------
 .../hadoop/util/TestDiskCheckerWithDiskIo.java     | 173 +++++++++++++++++++++
 3 files changed, 217 insertions(+), 104 deletions(-)

commit 5f11288e41fca2e414dcbea130c7702e29d4d610
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 22 09:27:08 2018 -0500

    YARN-8206. Sending a kill does not immediately kill docker containers. Contributed by Eric Badger

 .../linux/runtime/DockerLinuxContainerRuntime.java |  93 ++++---
 .../linux/runtime/TestDockerContainerRuntime.java  | 301 ++++++++++-----------
 2 files changed, 198 insertions(+), 196 deletions(-)

commit 57c2feb0d3ed0bb4f8642300433a35f5e28071c9
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 22 13:33:31 2018 +0530

    HADOOP-15474. Rename properties introduced for <tags>. Contributed by Zsolt Venczel.

 .../java/org/apache/hadoop/conf/Configuration.java     | 18 +++++++++++++++---
 .../hadoop/fs/CommonConfigurationKeysPublic.java       | 15 +++++++++++++++
 .../hadoop-common/src/main/resources/core-default.xml  | 11 ++++++++++-
 .../java/org/apache/hadoop/conf/TestConfiguration.java |  4 ++--
 4 files changed, 42 insertions(+), 6 deletions(-)

commit 5e88126776e6d682a48f737d8ab1ad0e04d3e767
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 21 16:09:24 2018 -0700

    HDDS-82. Merge ContainerData and ContainerStatus classes. Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../container/common/helpers/ContainerData.java    | 163 +++++++++++++++-
 .../common/impl/ContainerManagerImpl.java          | 144 +++++++-------
 .../container/common/impl/ContainerStatus.java     | 217 ---------------------
 .../RandomContainerDeletionChoosingPolicy.java     |  10 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |  20 +-
 .../ContainerDeletionChoosingPolicy.java           |   3 +-
 .../common/impl/TestContainerPersistence.java      |  19 +-
 8 files changed, 257 insertions(+), 320 deletions(-)

commit 0b4c44bdeef62945b592d5761666ad026b629c0b
Author: Eric E Payne <ericp@oath.com>
Date:   Mon May 21 20:14:58 2018 +0000

    YARN-8179: Preemption does not happen due to natural_termination_factor when DRF is used. Contributed by Kyungwan Nam.

 .../capacity/PreemptableResourceCalculator.java    |  7 ++-
 ...lCapacityPreemptionPolicyInterQueueWithDRF.java | 56 ++++++++++++++++++++++
 2 files changed, 61 insertions(+), 2 deletions(-)

commit 132a547dea4081948c39c149c59d6453003fa277
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 22:57:08 2018 +0530

    HDDS-71. Send ContainerType to Datanode during container creation. Contributed by Bharat Viswanadham.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  2 ++
 .../src/main/proto/DatanodeContainerProtocol.proto |  6 ++++
 .../container/common/helpers/ContainerData.java    | 36 ++++++++++++++++++++++
 .../common/impl/ContainerManagerImpl.java          |  7 +++++
 4 files changed, 51 insertions(+)

commit 73e9120ad79c73703de21e0084591861813f3279
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Mon May 21 12:33:00 2018 -0500

    Skip the proxy user check if the ugi has not been initialized. Contributed by Daryn Sharp

 .../src/main/java/org/apache/hadoop/conf/Configuration.java       | 2 +-
 .../java/org/apache/hadoop/security/UserGroupInformation.java     | 8 ++++++--
 2 files changed, 7 insertions(+), 3 deletions(-)

commit f48fec83d0f2d1a781a141ad7216463c5526321f
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon May 21 08:00:21 2018 -0700

    YARN-8248. Job hangs when a job requests a resource that its queue does not have. (Szilard Nemeth via Haibo Chen)

 .../resourcemanager/scheduler/SchedulerUtils.java  | 159 ++++++++++++----
 .../scheduler/fair/FSAppAttempt.java               |  10 +-
 .../scheduler/fair/FSParentQueue.java              |   3 +
 .../scheduler/fair/FairScheduler.java              | 115 +++++++++---
 .../scheduler/fair/FairSchedulerTestBase.java      |  64 +++++--
 .../scheduler/fair/TestFairScheduler.java          | 205 +++++++++++++++++++++
 6 files changed, 481 insertions(+), 75 deletions(-)

commit 3d2d9dbcaa73fd72d614a8cf5a5be2806dd31537
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon May 21 08:01:51 2018 -0700

    HDDS-87:Fix test failures with uninitialized storageLocation field in storageReport Contributed by Shashikant Banerjee

 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 35 ++++++++++---
 .../hdds/scm/node/TestContainerPlacement.java      | 13 ++---
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 58 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 22 ++++----
 .../ozone/container/common/TestEndPoint.java       | 32 ++++++------
 5 files changed, 92 insertions(+), 68 deletions(-)

commit c97df7712ce35938c2f4ccbbdc60c6671a7a67b0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 19:06:26 2018 +0530

    HDDS-57. TestContainerCloser#testRepeatedClose and TestContainerCloser#testCleanupThreadRuns fail consistently. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/container/closer/TestContainerCloser.java   | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit ba842847c94d31d3f737226d954c566b5d88656b
Author: Steve Loughran <stevel@apache.org>
Date:   Mon May 21 11:02:01 2018 +0100

    HADOOP-15478. WASB: hflush() and hsync() regression.
    Contributed by Thomas Marquardt.

 .../hadoop/fs/azure/PageBlobOutputStream.java      |  13 +-
 .../hadoop/fs/azure/SyncableDataOutputStream.java  |   4 -
 .../fs/azure/ITestOutputStreamSemantics.java       | 385 +++++++++++++++++++++
 3 files changed, 397 insertions(+), 5 deletions(-)

commit a23ff8d88001ad8e4ac4c36fc1f7691d193dc1d0
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 18 17:29:10 2018 -0400

    YARN-7530.  Refactored YARN service API project location.
                Contributed by Chandni Singh

 hadoop-assemblies/src/main/resources/assemblies/hadoop-yarn-dist.xml    | 2 +-
 .../hadoop-yarn-services-api/dev-support/findbugs-exclude.xml           | 0
 .../{ => hadoop-yarn-services}/hadoop-yarn-services-api/pom.xml         | 2 +-
 .../java/org/apache/hadoop/yarn/service/client/ApiServiceClient.java    | 0
 .../org/apache/hadoop/yarn/service/client/SystemServiceManagerImpl.java | 0
 .../main/java/org/apache/hadoop/yarn/service/client/package-info.java   | 0
 .../src/main/java/org/apache/hadoop/yarn/service/webapp/ApiServer.java  | 0
 .../java/org/apache/hadoop/yarn/service/webapp/ApiServerWebApp.java     | 0
 .../main/java/org/apache/hadoop/yarn/service/webapp/package-info.java   | 0
 .../src/main/resources/definition/YARN-Services-Examples.md             | 0
 .../resources/definition/YARN-Simplified-V1-API-Layer-For-Services.yaml | 0
 .../hadoop-yarn-services-api/src/main/resources/log4j-server.properties | 0
 .../hadoop-yarn-services-api/src/main/resources/webapps/api-server/app  | 0
 .../hadoop-yarn-services-api/src/main/webapp/WEB-INF/web.xml            | 0
 .../src/test/java/org/apache/hadoop/yarn/service/ServiceClientTest.java | 0
 .../src/test/java/org/apache/hadoop/yarn/service/TestApiServer.java     | 0
 .../org/apache/hadoop/yarn/service/client/TestApiServiceClient.java     | 0
 .../apache/hadoop/yarn/service/client/TestSystemServiceManagerImpl.java | 0
 .../hadoop-yarn-services-api/src/test/resources/example-app.json        | 0
 .../hadoop-yarn-services-api/src/test/resources/log4j.properties        | 0
 .../src/test/resources/system-services/bad/bad.yarnfile                 | 0
 .../src/test/resources/system-services/sync/user1/example-app1.yarnfile | 0
 .../src/test/resources/system-services/sync/user1/example-app2.yarnfile | 0
 .../src/test/resources/system-services/sync/user1/example-app3.json     | 0
 .../src/test/resources/system-services/sync/user2/example-app1.yarnfile | 0
 .../src/test/resources/system-services/sync/user2/example-app2.yarnfile | 0
 .../hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/pom.xml   | 1 +
 hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/pom.xml        | 1 -
 28 files changed, 3 insertions(+), 3 deletions(-)

commit 89f59113927dd886f09d8fe2c05ff2cd5d1390c1
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 18 11:28:48 2018 -0700

    HADOOP-15154. Abstract new method assertCapability for StreamCapabilities testing. Contributed by Zsolt Venczel.

 .../apache/hadoop/crypto/TestCryptoStreams.java    | 39 ++++++++++++++--------
 .../hadoop/fs/contract/ContractTestUtils.java      | 29 ++++++++++++++++
 2 files changed, 54 insertions(+), 14 deletions(-)

commit 9775ecb2355d7bed3514fcd54bf69e8351c4ab99
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 18 09:46:02 2018 -0700

    HDFS-13593. TestBlockReaderLocalLegacy#testBlockReaderLocalLegacyWithAppend fails on Windows. Contributed by Anbang Hu.

 .../apache/hadoop/hdfs/client/impl/TestBlockReaderLocalLegacy.java | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 57b893de3d36d20f65ee81b5cc3cfef12594b75b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 18 09:36:58 2018 -0700

    HDFS-13592. TestNameNodePrunesMissingStorages#testNameNodePrunesUnreportedStorages does not shut down cluster properly. Contributed by Anbang Hu.

 .../TestNameNodePrunesMissingStorages.java         | 97 ++++++++++++----------
 1 file changed, 53 insertions(+), 44 deletions(-)

commit 6e996867f641b297e3f88068f6d185b709d509b0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri May 18 14:08:46 2018 +0530

    HDDS-76. Modify SCMStorageReportProto to include the data dir paths as well as the StorageType info. Contributed by Shashikant Banerjee.

 .../common/impl/ContainerLocationManagerImpl.java  |  18 +-
 .../common/impl/ContainerManagerImpl.java          |   9 +-
 .../common/impl/ContainerStorageLocation.java      |   9 +
 .../common/impl/StorageLocationReport.java         | 235 ++++++++++++++++++++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  21 +-
 5 files changed, 275 insertions(+), 17 deletions(-)

commit 3159bffce23abf35754da2d7d51de7d8c2631ae3
Author: Arun Suresh <asuresh@apache.org>
Date:   Thu May 17 20:00:52 2018 -0700

    YARN-7900. [AMRMProxy] AMRMClientRelayer for stateful FederationInterceptor. (Botong Huang via asuresh)

 .../yarn/client/api/impl/AMRMClientImpl.java       | 151 ++-------
 .../hadoop/yarn/client}/AMRMClientUtils.java       |  75 ++++-
 .../hadoop/yarn/server/AMRMClientRelayer.java      | 364 +++++++++++++++++++++
 .../failover/FederationProxyProviderUtil.java      |   2 +-
 .../apache/hadoop/yarn/server/package-info.java    |  18 +
 .../yarn/server/scheduler/ResourceRequestSet.java  | 206 ++++++++++++
 .../server/scheduler/ResourceRequestSetKey.java    | 133 ++++++++
 .../yarn/server/scheduler/SchedulerRequestKey.java |   4 +-
 .../yarn/server/uam/UnmanagedAMPoolManager.java    |   2 +-
 .../server/uam/UnmanagedApplicationManager.java    |   2 +-
 .../yarn/server/MockResourceManagerFacade.java     |   2 +-
 .../hadoop/yarn/server/TestAMRMClientRelayer.java  | 275 ++++++++++++++++
 .../amrmproxy/FederationInterceptor.java           |   2 +-
 .../resourcemanager/ApplicationMasterService.java  |   2 +-
 .../TestApplicationMasterLauncher.java             |   2 +-
 15 files changed, 1110 insertions(+), 130 deletions(-)

commit f749517cc78fc761cecff21e8b7f65fb719bfca2
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri May 18 10:43:53 2018 +0800

    HDFS-13573. Javadoc for BlockPlacementPolicyDefault is inaccurate. Contributed by Zsolt Venczel.

 .../server/blockmanagement/BlockPlacementPolicyDefault.java | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 8783613696674aba4ae1739c6e8f48cda0d1c386
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 19:26:44 2018 -0700

    HDFS-13586. Fsync fails on directories on Windows. Contributed by Lukas Majercack.

 .../hadoop-common/src/main/java/org/apache/hadoop/io/IOUtils.java  | 7 +++++++
 1 file changed, 7 insertions(+)

commit 2f2dd22aad4a003228b9efe3b4c506a6922d09d8
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 20:58:13 2018 -0400

    YARN-8296.  Removed unique_component_support from YARN services.
                Contributed by Suma Shivaprasad

 .../src/main/resources/definition/YARN-Services-Examples.md         | 1 -
 .../src/site/markdown/yarn-service/YarnServiceAPI.md                | 3 +--
 .../hadoop-yarn-ui/src/main/webapp/app/models/yarn-servicedef.js    | 4 ----
 .../webapp/app/templates/components/service-component-table.hbs     | 6 ------
 4 files changed, 1 insertion(+), 13 deletions(-)

commit 989cfdc1e0f1c27b35679c668a9bde6a0be845b5
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 20:56:04 2018 -0400

    YARN-8141.  Removed YARN_CONTAINER_RUNTIME_DOCKER_LOCAL_RESOURCE_MOUNTS flag.
                Contributed by Chandni Singh

 .../containerlaunch/TestAbstractLauncher.java      | 54 ++++++++++++++++++++++
 1 file changed, 54 insertions(+)

commit 53b807a6a8486cefe0b036f7893de9f619bd44a1
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 17:03:23 2018 -0700

    HDFS-13560. Insufficient system resources exist to complete the requested service for some tests on Windows. Contributed by Anbang Hu.

 .../src/main/java/org/apache/hadoop/util/Shell.java       | 15 +++++++++++++++
 .../hadoop/hdfs/server/datanode/TestDirectoryScanner.java |  3 ++-
 .../datanode/fsdataset/impl/LazyPersistTestCase.java      |  3 ++-
 .../hadoop/hdfs/server/namenode/TestNameNodeMXBean.java   |  7 +++++--
 4 files changed, 24 insertions(+), 4 deletions(-)

commit a97a2042f210e9db97646baad6f56064d672f447
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 16:53:23 2018 -0700

    HDFS-13556. TestNestedEncryptionZones does not shut down cluster. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/TestNestedEncryptionZones.java   | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 7c485a6701275578cb22392168b2b31726121ceb
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 16:13:28 2018 -0700

    HDDS-38. Add SCMNodeStorage map in SCM class to store storage statistics per Datanode.
    Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  10 +
 .../common/src/main/resources/ozone-default.xml    |  19 ++
 .../container/placement/metrics/SCMNodeStat.java   |  21 ++
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  69 +++++
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 277 +++++++++++++++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 188 ++++++++++++++
 6 files changed, 584 insertions(+)

commit e0367d3b248d47fc95e5df5d772f93663319c3b8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 14:58:09 2018 -0700

    HDDS-73. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../acceptance-test/src/test/compose/docker-config |   1 +
 .../robotframework/acceptance/ozone-shell.robot    | 235 +++++++++++++++++++++
 .../src/test/robotframework/acceptance/ozone.robot |  32 ---
 3 files changed, 236 insertions(+), 32 deletions(-)

commit 65476458fa05656010809be632356e4015b59a17
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 14:48:04 2018 -0700

    HDFS-13554. TestDatanodeRegistration#testForcedRegistration does not shut down cluster. Contributed by Anbang Hu.

 .../hadoop/hdfs/TestDatanodeRegistration.java      | 149 +++++++++++----------
 1 file changed, 78 insertions(+), 71 deletions(-)

commit d45a0b7d73519acb78cd94ac3186bd8481f6c13e
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:29:34 2018 -0400

    YARN-8141.  Removed YARN_CONTAINER_RUNTIME_DOCKER_LOCAL_RESOURCE_MOUNTS flag.
                Contributed by Chandni Singh

 .../service/containerlaunch/AbstractLauncher.java  | 26 ++++++++++------
 .../linux/runtime/DockerLinuxContainerRuntime.java | 35 ++++------------------
 .../linux/runtime/TestDockerContainerRuntime.java  | 31 ++++---------------
 .../src/site/markdown/DockerContainers.md          |  1 -
 4 files changed, 28 insertions(+), 65 deletions(-)

commit 7f083ed8699a720d3fb82e4ec310356902a6ac30
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:16:50 2018 -0400

    YARN-8080.  Add restart policy for YARN services.
                Contributed by Suma Shivaprasad

 .../YARN-Simplified-V1-API-Layer-For-Services.yaml |   8 +
 .../hadoop/yarn/service/ClientAMService.java       |   7 +-
 .../apache/hadoop/yarn/service/ServiceContext.java |   4 +
 .../apache/hadoop/yarn/service/ServiceManager.java |  25 +-
 .../hadoop/yarn/service/ServiceScheduler.java      |  73 +++-
 .../hadoop/yarn/service/api/records/Component.java |  71 +++
 .../service/component/AlwaysRestartPolicy.java     |  82 ++++
 .../hadoop/yarn/service/component/Component.java   | 209 +++++++--
 .../service/component/ComponentRestartPolicy.java  |  45 ++
 .../yarn/service/component/NeverRestartPolicy.java |  82 ++++
 .../service/component/OnFailureRestartPolicy.java  |  87 ++++
 .../component/instance/ComponentInstance.java      |  91 ++--
 .../hadoop/yarn/service/utils/ServiceUtils.java    |  18 +
 .../hadoop/yarn/service/ServiceTestUtils.java      |  46 +-
 .../hadoop/yarn/service/TestServiceManager.java    |   6 +-
 .../yarn/service/component/TestComponent.java      |  99 ++++-
 .../component/TestComponentRestartPolicy.java      | 130 ++++++
 .../component/instance/TestComponentInstance.java  | 484 ++++++++++++++++++++-
 .../site/markdown/yarn-service/YarnServiceAPI.md   |   2 +
 19 files changed, 1447 insertions(+), 122 deletions(-)

commit 7802af6e9a85f033e9515cc7b23c125a0e06c325
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:06:58 2018 -0400

    YARN-8293.  Removed "User Name for service" for deploying secure YARN service.
                Contributed by Sunil G

 .../main/webapp/app/adapters/yarn-servicedef.js    |  4 ++-
 .../main/webapp/app/components/deploy-service.js   |  5 ++++
 .../src/main/webapp/app/initializers/loader.js     | 32 ++++++++++++++++++++++
 .../src/main/webapp/app/services/hosts.js          |  5 ++++
 .../app/templates/components/deploy-service.hbs    | 18 ++++++------
 .../src/main/webapp/config/default-config.js       |  3 +-
 6 files changed, 57 insertions(+), 10 deletions(-)

commit 26f1e22fc9ee326e9c76503d347552faeb6c2d3b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 13:35:09 2018 -0700

    HDFS-13558. TestDatanodeHttpXFrame does not shut down cluster. Contributed by Anbang Hu.

 .../datanode/web/TestDatanodeHttpXFrame.java       | 30 +++++++++++++++-------
 1 file changed, 21 insertions(+), 9 deletions(-)

commit 328f0847e3d98cad8c368d57499f31081c153237
Author: Vinod Kumar Vavilapalli (I am also known as @tshooter.) <vinodkv@apache.org>
Date:   Thu May 17 12:47:10 2018 -0700

    YARN-8128. Documenting the per-node per-app file limit in YARN log aggregation. Contributed by Xuan Gong.

 .../org/apache/hadoop/yarn/conf/YarnConfiguration.java  | 10 ++++++++++
 .../filecontroller/LogAggregationFileController.java    | 17 ++++++-----------
 .../src/main/resources/yarn-default.xml                 |  9 +++++++++
 3 files changed, 25 insertions(+), 11 deletions(-)

commit a2cdffb95acbcb3625ee72ebc8aeb8bf17fa4bc7
Author: Miklos Szegedi <szegedim@apache.org>
Date:   Thu May 17 10:13:43 2018 -0700

    MAPREDUCE-7094. LocalDistributedCacheManager leaves classloaders open, which leaks FDs. Contributed by Adam Szita.

 .../mapred/LocalDistributedCacheManager.java       | 31 ++++++++++++++++++----
 .../org/apache/hadoop/mapred/LocalJobRunner.java   | 14 +++++++---
 2 files changed, 36 insertions(+), 9 deletions(-)

commit cc3600aabdca6e8b14c9fe02fe54073bf4ef7685
Author: Steve Loughran <stevel@apache.org>
Date:   Thu May 17 19:08:05 2018 +0100

    HADOOP-15469. S3A directory committer commit job fails if _temporary directory created under dest.
    Contributed by Steve Loughran.
    
    (cherry picked from commit 170f1040d46f9b1a084e6637def91e9864446acc)

 .../hadoop/fs/s3a/commit/staging/DirectoryStagingCommitter.java   | 7 ++-----
 .../s3a/commit/staging/TestStagingDirectoryOutputCommitter.java   | 8 +++-----
 2 files changed, 5 insertions(+), 10 deletions(-)

commit c0ec061e280c0d3e5299c0735c8b8697e0f31216
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 09:21:57 2018 -0700

    HDFS-13570. TestQuotaByStorageType,TestQuota,TestDFSOutputStream fail on Windows. Contributed by Anbang Hu.

 .../apache/hadoop/hdfs/TestDFSOutputStream.java    |  2 +-
 .../java/org/apache/hadoop/hdfs/TestQuota.java     | 48 ++++++++++++----------
 .../server/namenode/TestQuotaByStorageType.java    | 11 ++---
 3 files changed, 30 insertions(+), 31 deletions(-)

commit 59bde09920fc6a1552eb31e83bbc8fc8a0f2cf22
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:52:00 2018 -0700

    HDDS-3. Send NodeReport and ContainerReport when datanodes register. Contributed by Bharat Viswanadham.

 .../states/datanode/RunningDatanodeState.java      |  1 +
 .../states/endpoint/RegisterEndpointTask.java      | 37 +++++++++++--
 .../protocol/StorageContainerDatanodeProtocol.java |  8 +--
 .../protocol/StorageContainerNodeProtocol.java     |  4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  8 ++-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  9 +++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  2 +
 .../hadoop/ozone/container/common/ScmTestMock.java | 60 +++++++++++++++++++---
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  6 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 16 ++++--
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 23 ++++++++-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  3 +-
 .../ozone/container/common/TestEndPoint.java       | 32 +++++++++---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 15 files changed, 186 insertions(+), 32 deletions(-)

commit 41ae5c50024e3682b61df6f391d0fe63591ac92b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:31:44 2018 -0700

    HDDS-77. Key replication factor and type should be stored per key by Ozone Manager. Contributed by Mukul Kumar Singh.

 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       | 36 ++++++++++++++++++++--
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  2 --
 .../src/main/proto/KeySpaceManagerProtocol.proto   | 10 +++---
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    | 19 +++---------
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  6 ----
 5 files changed, 44 insertions(+), 29 deletions(-)

commit 0ce6290de6a08beab01cb5184d366d97c9abd811
Author: Kihwal Lee <kihwal@apache.org>
Date:   Thu May 17 09:23:24 2018 -0500

    HDFS-13581. DN UI logs link is broken when https is enabled. Contributed by Shashikant Banerjee.

 hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode/datanode.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c95795cd8f649c45f05df1d5faa1dcabd30d7a6e
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 17 16:24:51 2018 +0530

    YARN-8297. Incorrect ATS Url used for Wire encrypted cluster. Contributed by Sunil G.

 .../src/main/webapp/app/initializers/loader.js     | 50 +++++++++++++++++++---
 1 file changed, 44 insertions(+), 6 deletions(-)

commit 454de3b543c8b00a9ab566c7d1c64d7e4cffee0f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 19:23:02 2018 -0700

    HDFS-13559. TestBlockScanner does not close TestContext properly. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/server/datanode/TestBlockScanner.java     | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit be539690477f7fee8f836bf3612cbe7ff6a3506e
Author: Jason Lowe <jlowe@apache.org>
Date:   Wed May 16 16:17:28 2018 -0500

    YARN-8071. Add ability to specify nodemanager environment variables individually. Contributed by Jim Brennan

 .../java/org/apache/hadoop/yarn/util/Apps.java     | 33 ++++++--
 .../src/main/resources/yarn-default.xml            | 11 ++-
 .../containermanager/launcher/ContainerLaunch.java | 15 ++--
 .../launcher/TestContainerLaunch.java              | 94 +++++++++++++++++++++-
 4 files changed, 134 insertions(+), 19 deletions(-)

commit e3b7d7ac1694b8766ae11bc7e8ecf09763bb26db
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed May 16 10:29:38 2018 -0700

    YARN-7933. [atsv2 read acls] Add TimelineWriter#writeDomain. (Rohith Sharma K S via Haibo Chen)

 .../records/timelineservice/TimelineDomain.java    | 178 +++++++++++++++++++++
 .../storage/TestHBaseTimelineStorageDomain.java    | 126 +++++++++++++++
 .../storage/HBaseTimelineWriterImpl.java           |  46 ++++++
 .../storage/domain/DomainTableRW.java              |   2 +-
 .../collector/TimelineCollector.java               |  28 ++++
 .../collector/TimelineCollectorWebService.java     |  50 ++++++
 .../storage/FileSystemTimelineWriterImpl.java      |   9 ++
 .../timelineservice/storage/TimelineWriter.java    |  15 ++
 .../collector/TestTimelineCollector.java           |  32 ++++
 9 files changed, 485 insertions(+), 1 deletion(-)

commit 0fc988e6a3dc6b435cbeea680549c06ef6147e3f
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed May 16 11:28:39 2018 -0700

    HDFS-13512. WebHdfs getFileStatus doesn't return ecPolicy. Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdfs/web/JsonUtilClient.java | 16 ++++++++
 .../java/org/apache/hadoop/hdfs/web/JsonUtil.java  | 19 +++++++++
 .../org/apache/hadoop/hdfs/web/TestJsonUtil.java   | 48 +++++++++++++++++++++-
 3 files changed, 82 insertions(+), 1 deletion(-)

commit 55d5549087183cb9c8d805e33267acabe9537667
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 10:08:49 2018 -0700

    HDFS-13550.TestDebugAdmin#testComputeMetaCommand fails on Windows. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/tools/DebugAdmin.java   | 30 ++++++++++++++--------
 .../apache/hadoop/hdfs/tools/TestDebugAdmin.java   |  2 +-
 2 files changed, 20 insertions(+), 12 deletions(-)

commit 91357c22ef0fb89652dd2898cf488b47234452ce
Author: Eric Yang <eyang@apache.org>
Date:   Wed May 16 12:38:26 2018 -0400

    YARN-8300.  Fixed NPE in DefaultUpgradeComponentsFinder.
                Contributed by Suma Shivaprasad

 .../yarn/service/UpgradeComponentsFinder.java      | 104 +++++++++++----------
 .../TestDefaultUpgradeComponentsFinder.java        |  30 +++++-
 2 files changed, 84 insertions(+), 50 deletions(-)

commit 6b67161ca33881d5f3d7606a57786e9c960759a1
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 09:31:46 2018 -0700

    HDFS-13557. TestDFSAdmin#testListOpenFiles fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/tools/TestDFSAdmin.java    | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d47c09dcb146d0a1cb50486f453a67560812fe5c
Author: Jason Lowe <jlowe@apache.org>
Date:   Wed May 16 09:23:49 2018 -0500

    YARN-8284. get_docker_command refactoring. Contributed by Eric Badger

 .../container-executor/impl/utils/docker-util.c    | 132 ++-------------------
 .../test/utils/test_docker_util.cc                 |  58 ++++-----
 2 files changed, 42 insertions(+), 148 deletions(-)

commit 0a2286033637843a6756e09b9b1acdf12a3d90a4
Author: Dinesh Chitlangia <dineshchitlangia@gmail.com>
Date:   Wed May 16 17:25:31 2018 +0900

    YARN-8123. Skip compiling old hamlet package when the Java version is 10 or upper
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d3b39de89809f5eed06f85f00ab223e2f75e49c
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 15 20:40:39 2018 -0400

    YARN-8081.  Add support to upgrade a component.
                Contributed by Chandni Singh

 .../yarn/service/client/ApiServiceClient.java      |  51 +++++++++-
 .../hadoop/yarn/service/webapp/ApiServer.java      | 112 +++++++++++++++++----
 .../hadoop/yarn/service/ServiceClientTest.java     |  41 +++++---
 .../apache/hadoop/yarn/service/TestApiServer.java  |  71 ++++++++++++-
 .../yarn/service/client/TestApiServiceClient.java  |  12 +++
 .../yarn/service/api/records/ComponentState.java   |   2 +-
 .../hadoop/yarn/service/client/ServiceClient.java  |  11 ++
 .../hadoop/yarn/service/conf/RestApiConstants.java |   2 +
 .../service/exceptions/RestApiErrorMessages.java   |   6 ++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  53 +++++++++-
 .../hadoop/yarn/service/client/TestServiceCLI.java |  18 ++++
 .../hadoop/yarn/client/api/AppAdminClient.java     |  12 +++
 .../hadoop/yarn/client/cli/ApplicationCLI.java     |  17 +++-
 .../apache/hadoop/yarn/client/cli/TestYarnCLI.java |   3 +
 14 files changed, 367 insertions(+), 44 deletions(-)

commit 63480976a008bab0b84f4da08b1099867e5a9a6b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 15:34:54 2018 -0700

    HDFS-13567. TestNameNodeMetrics#testGenerateEDEKTime,TestNameNodeMetrics#testResourceCheck should use a different cluster basedir. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/metrics/TestNameNodeMetrics.java  | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 2d6195c0af4a1840172899ce70bca4ca549eb713
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 11:20:32 2018 -0700

    HDFS-13548. TestResolveHdfsSymlink#testFcResolveAfs fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/fs/TestResolveHdfsSymlink.java      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eaca7980ad2a750f6b0025a706062740c2ddded2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 10:27:36 2018 -0700

    HDFS-11700. TestHDFSServerPorts#testBackupNodePorts doesn't pass on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/TestHDFSServerPorts.java    | 5 +++++
 1 file changed, 5 insertions(+)

commit 92ebd466c75275118107e6ec665cf50e337a29e7
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 10:21:42 2018 -0700

    HDFS-13551. TestMiniDFSCluster#testClusterSetStorageCapacity does not shut down cluster. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/TestMiniDFSCluster.java | 44 ++++++++++++----------
 1 file changed, 25 insertions(+), 19 deletions(-)

commit 07d8505f75ec401e5847fe158dad765ce5175fab
Author: Steve Loughran <stevel@apache.org>
Date:   Tue May 15 16:19:03 2018 +0100

    HADOOP-15466. Correct units in adl.http.timeout.
    Contributed by Sean Mackrory,

 .../hadoop-common/src/main/resources/core-default.xml                 | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b6708374692e6c4d786e2f3f1f45cc7aa1e4e88f
Author: Steve Loughran <stevel@apache.org>
Date:   Tue May 15 16:13:56 2018 +0100

    HADOOP-15442. ITestS3AMetrics.testMetricsRegister can't know metrics source's name.
    Contributed by Sean Mackrory.

 .../src/main/java/org/apache/hadoop/fs/s3a/S3AInstrumentation.java   | 3 ---
 .../src/test/java/org/apache/hadoop/fs/s3a/ITestS3AMetrics.java      | 5 -----
 2 files changed, 8 deletions(-)

commit 2bb647bb91439e82cf7298e963bb5f7f80bbc3cb
Author: Weiwei Yang <wwei@apache.org>
Date:   Tue May 15 17:28:19 2018 +0800

    YARN-8278. DistributedScheduling is not working in HA. Contributed by Bibin A Chundatt.

 .../hadoop/yarn/server/api/ServerRMProxy.java      | 11 +++--
 .../hadoop/yarn/server/api/TestServerRMProxy.java  | 52 ++++++++++++++++++++++
 2 files changed, 60 insertions(+), 3 deletions(-)

commit 58b97c79e34901938d59acc84ed48c1f9344996a
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:17:35 2018 +0530

    YARN-8236. Invalid kerberos principal file name cause NPE in native service. Contributed by Gour Saha.

 .../hadoop/yarn/service/client/ServiceClient.java  | 46 ++++++++++++----------
 .../service/exceptions/RestApiErrorMessages.java   |  2 +
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  | 38 ++++++++++++------
 .../hadoop/yarn/service/TestServiceApiUtil.java    | 41 +++++++++++++++++++
 4 files changed, 93 insertions(+), 34 deletions(-)

commit ffb9210dedb79a56075448dc296251896bed49e6
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:13:04 2018 +0530

    YARN-8166. [UI2] Service page header links are broken. Contributed by Yesha Vora.

 .../src/main/webapp/app/controllers/yarn-component-instance.js          | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 796b2b0ee36e8e9225fb76ae35edc58ad907b737
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:01:28 2018 +0530

    YARN-8266. [UI2] Clicking on application from cluster view should redirect to application attempt page. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/utils/href-address-utils.js      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d00a0c71b5dde31e2cf8fcb96d9d541d41fb879
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon May 14 11:08:42 2018 -0700

    YARN-8130 Race condition when container events are published for KILLED applications. (Rohith Sharma K S via Haibo Chen)

 .../timelineservice/NMTimelineEvent.java           |  12 ++-
 .../timelineservice/NMTimelineEventType.java       |   3 +
 .../timelineservice/NMTimelinePublisher.java       |  23 +++--
 .../timelineservice/TestNMTimelinePublisher.java   | 102 ++++++++++++++++++---
 4 files changed, 113 insertions(+), 27 deletions(-)

commit 6beb25ab7e4f5454dba0315a296081e61753f301
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon May 14 10:12:08 2018 -0700

    HDFS-13544. Improve logging for JournalNode in federated cluster.

 .../hadoop/hdfs/qjournal/server/Journal.java       | 115 ++++++++++++---------
 1 file changed, 64 insertions(+), 51 deletions(-)

commit 6653f4ba2ee21e6deb3736b41381451428f620e0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 14 22:25:03 2018 +0530

    HDDS-19. Update ozone to latest ratis snapshot build (0.1.1-alpha-d7d7061-SNAPSHOT). Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 13 +++++++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 11 ++++++++
 .../common/src/main/resources/ozone-default.xml    | 12 ++++++++
 .../transport/server/ratis/XceiverServerRatis.java | 33 ++++++++++++++++++++--
 hadoop-project/pom.xml                             | 10 ++-----
 5 files changed, 69 insertions(+), 10 deletions(-)

commit 960940e0e08f7839775f2d8a352b444d104d36b4
Author: Xiao Chen <xiao@apache.org>
Date:   Mon May 14 09:28:09 2018 -0700

    HDFS-13539. DFSStripedInputStream NPE when reportCheckSumFailure.

 .../org/apache/hadoop/hdfs/DFSInputStream.java     | 13 ++++++++++-
 .../apache/hadoop/hdfs/DFSStripedInputStream.java  |  8 ++++---
 .../hadoop/hdfs/TestDFSStripedInputStream.java     | 25 ++++++++++++++++++++++
 3 files changed, 42 insertions(+), 4 deletions(-)

commit fc5d49c202354c6f39b33ea3f80f38e85794c6b3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 14 09:09:25 2018 -0700

    HDDS-29. Fix TestStorageContainerManager#testRpcPermission. Contributed by  Mukul Kumar Singh.

 .../hdds/scm/server/SCMClientProtocolServer.java   | 15 ++++++++++--
 .../hdds/scm/server/StorageContainerManager.java   |  9 +-------
 .../hadoop/ozone/TestStorageContainerManager.java  | 27 +++++++++++-----------
 3 files changed, 28 insertions(+), 23 deletions(-)

commit 8a2b5914f3a68148f40f99105acf5dafcc326e89
Author: Naganarasimha <naganarasimha_gr@apache.org>
Date:   Tue May 15 00:03:38 2018 +0800

    YARN-8288. Fix wrong number of table columns in Resource Model doc. Contributed by Weiwei Yang.

 .../hadoop-yarn-site/src/site/markdown/ResourceModel.md      | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 89d0b87ad324db09f14e00031d20635083d576ed
Author: Sunil G <sunilg@apache.org>
Date:   Mon May 14 20:59:31 2018 +0530

    YARN-8271. [UI2] Improve labeling of certain tables. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-tools.js      | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/helpers/node-menu.js           | 4 ++--
 .../hadoop-yarn-ui/src/main/webapp/app/templates/cluster-overview.hbs | 4 ++--
 .../src/main/webapp/app/templates/components/node-menu-panel.hbs      | 4 ++--
 .../app/templates/components/yarn-queue/capacity-queue-info.hbs       | 2 +-
 .../webapp/app/templates/components/yarn-queue/capacity-queue.hbs     | 2 +-
 .../webapp/app/templates/components/yarn-queue/fair-queue-info.hbs    | 2 +-
 .../main/webapp/app/templates/components/yarn-queue/fair-queue.hbs    | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-tools.hbs       | 4 ++--
 9 files changed, 13 insertions(+), 13 deletions(-)

commit f3f544b00475583c4c9fe52be0d2004390979bd0
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Mon May 14 15:14:02 2018 +0800

    Add 2.9.1 release notes and changes documents

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ++++++++++++++++++
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ++++++
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 +++++++++++++++++++++
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 678 insertions(+), 1 deletion(-)

commit 66c9905b5734472ce64863790c208e1f3775c870
Author: sammichen <sammi.chen@intel.com>
Date:   Mon May 14 14:38:40 2018 +0800

    Revert "Add 2.9.1 release notes and changes documents"
    
    This reverts commit e4dc346d651de4c9af05a9616f8fe6369895d8af.

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ------------------
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ------
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 ---------------------
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 1 insertion(+), 678 deletions(-)

commit e4dc346d651de4c9af05a9616f8fe6369895d8af
Author: littlezhou <wei.zhou@intel.com>
Date:   Mon May 14 14:24:01 2018 +0800

    Add 2.9.1 release notes and changes documents

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ++++++++++++++++++
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ++++++
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 +++++++++++++++++++++
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 678 insertions(+), 1 deletion(-)

commit 32cbd0cfd696a8293ac1c726081da9191cacecee
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 13:37:34 2018 -0700

    HDDS-51. Fix TestDeletedBlockLog#testDeletedBlockTransactions.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/block/TestDeletedBlockLog.java  | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 53c8ebcd0285ca91f7d758084cd91df93af0ffb3
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:18:53 2018 -0700

    HDDS-32. Fix TestContainerDeletionChoosingPolicy#testTopNOrderedChoosingPolicy.
    Contributed by Mukul Kumar Singh.

 .../common/impl/TestContainerDeletionChoosingPolicy.java      | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit cd8b9e913e9a27196d5622feab68d679c0b552c5
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:13:13 2018 -0700

    HDDS-53. Fix TestKey#testPutAndGetKeyWithDnRestart.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/ozone/MiniOzoneClusterImpl.java    | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 7e26e1f2166d2238a63a4086061a21e60e253605
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:07:32 2018 -0700

    HDDS-52. Fix TestSCMCli#testInfoContainer.
    Contributed by Mukul Kumar Singh.

 .../src/test/java/org/apache/hadoop/ozone/scm/TestSCMCli.java           | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a5449d36312c3de953e05ba8b3b5acf818a0c7e7
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Sat May 12 12:19:13 2018 -0500

    HADOOP-15441. Log kms url and token service at debug level. Contributed by  Gabor Bota

 .../main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1194ec31d72c3682bf1c97acbfc99c1798fb9c1b
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 09:57:42 2018 -0700

    HDDS-17. Add node to container map class to simplify state in SCM.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/container/ContainerID.java     |   2 +-
 .../hdds/scm/container/states/package-info.java    |   2 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   4 +-
 .../hdds/scm/node/states/Node2ContainerMap.java    | 184 ++++++++++++
 .../hadoop/hdds/scm/node/states/ReportResult.java  |  86 ++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  22 ++
 .../scm/node/states/Node2ContainerMapTest.java     | 308 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  23 ++
 .../ozone/genesis/GenesisMemoryProfiler.java       |   4 +-
 9 files changed, 631 insertions(+), 4 deletions(-)

commit 413285569a897a4747880ee2c1f23a38609d1362
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat May 12 17:40:29 2018 +0530

    HDDS-21. Add support for rename key within a bucket for rest client. Contributed by Lokesh Jain.

 .../hadoop/ozone/client/rest/RestClient.java       | 16 +++++++-
 .../hadoop/ozone/client/rest/headers/Header.java   |  2 +
 .../ozone/client/rest/TestOzoneRestClient.java     | 30 +++++++++++++++
 .../hadoop/ozone/web/handlers/KeyHandler.java      | 45 ++++++++++++++++++++++
 .../apache/hadoop/ozone/web/interfaces/Keys.java   | 31 +++++++++++++++
 5 files changed, 123 insertions(+), 1 deletion(-)

commit 0ff94563b9b62d0426d475dc0f84152b68f1ff0d
Author: Eric Yang <eyang@HW13750.local>
Date:   Fri May 11 22:37:43 2018 -0700

    YARN-8265.  Improve DNS handling on docker IP changes.
                Contributed by Billie Rinaldi

 .../component/instance/ComponentInstance.java      | 45 +++++++++---
 .../apache/hadoop/yarn/service/MockServiceAM.java  | 17 ++++-
 .../apache/hadoop/yarn/service/TestServiceAM.java  | 42 ++++++++++++
 .../linux/runtime/docker/TestDockerClient.java     | 80 ++++++++++++++++++++++
 4 files changed, 173 insertions(+), 11 deletions(-)

commit 6c8e51ca7eaaeef0626658b3c45d446a537e4dc0
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri May 11 18:56:05 2018 -0500

    YARN-7654. Support ENTRY_POINT for docker container. Contributed by Eric Yang

 .../hadoop/yarn/api/ApplicationConstants.java      |   9 +-
 .../service/provider/AbstractProviderService.java  |  91 +++++++++++-----
 .../provider/docker/DockerProviderService.java     |  42 ++++++++
 .../containermanager/launcher/ContainerLaunch.java |  14 +++
 .../linux/runtime/DockerLinuxContainerRuntime.java |  20 ++--
 .../linux/runtime/docker/DockerClient.java         | 115 ++++++++++++--------
 .../linux/runtime/docker/DockerRunCommand.java     |  44 ++++++++
 .../container-executor/impl/container-executor.c   | 116 ++++++++++++++++++++-
 .../container-executor/impl/utils/docker-util.c    |  46 ++++++++
 .../container-executor/impl/utils/docker-util.h    |  14 +++
 .../test/utils/test_docker_util.cc                 |  42 ++++++++
 .../src/site/markdown/DockerContainers.md          |   1 +
 12 files changed, 467 insertions(+), 87 deletions(-)

commit 4b4f24ad5f2b457ad215d469bf28cf9a799812bc
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 13:52:05 2018 -0700

    HDDS-40. Separating packaging of Ozone/HDDS from the main Hadoop.
    Contributed by Elek, Marton.

 .gitignore                                         |   5 +
 dev-support/bin/dist-layout-stitching              |  15 --
 dev-support/bin/ozone-dist-layout-stitching        | 153 +++++++++++++++++++++
 dev-support/bin/ozone-dist-tar-stitching           |  48 +++++++
 hadoop-dist/pom.xml                                | 152 +++++++++++++-------
 hadoop-dist/src/main/compose/ozone/.env            |   2 +-
 .../src/main/compose/ozone/docker-compose.yaml     |   8 +-
 .../hadoop/hdfs/server/namenode/NameNodeUtils.java |   2 +-
 hadoop-ozone/acceptance-test/README.md             |  22 ++-
 .../acceptance-test/dev-support/bin/robot-all.sh   |  18 +++
 .../acceptance-test/dev-support/bin/robot.sh       |  38 +++++
 hadoop-ozone/acceptance-test/pom.xml               |  29 +---
 hadoop-ozone/acceptance-test/src/test/compose/.env |   2 +-
 .../src/test/compose/docker-compose.yaml           |   8 +-
 .../src/test/robotframework/acceptance/ozone.robot |   7 +-
 15 files changed, 394 insertions(+), 115 deletions(-)

commit 50408cfc6987b554f8f8f3d6711f7fa61c6e6d6f
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri May 11 14:07:09 2018 -0700

    YARN-3610. FairScheduler: Add steady-fair-shares to the REST API documentation. (Ray Chiang via Haibo Chen)

 .../src/site/markdown/ResourceManagerRest.md       | 118 +++++++++++++++++++--
 1 file changed, 110 insertions(+), 8 deletions(-)

commit ca612e353fc3e3766868ec0816de035e48b1f5b4
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 11 07:27:35 2018 -0700

    YARN-8243. Flex down should remove instance with largest component instance ID first. Contributed by Gour Saha

 .../apache/hadoop/yarn/service/ServiceManager.java |  5 ++-
 .../apache/hadoop/yarn/service/ServiceMaster.java  | 39 +++++++++------------
 .../hadoop/yarn/service/component/Component.java   | 26 ++++++++------
 .../component/instance/ComponentInstance.java      |  9 +----
 .../yarn/service/TestYarnNativeServices.java       | 40 +++++++++++++++++++++-
 5 files changed, 75 insertions(+), 44 deletions(-)

commit dc912994a1bcb511dfda32a0649cef0c9bdc47d3
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri May 11 14:07:32 2018 -0500

    YARN-8244. TestContainerSchedulerQueuing.testStartMultipleContainers failed. Contributed by Jim Brennan

 .../containermanager/TestContainerManager.java     |  20 ++---
 .../scheduler/TestContainerSchedulerQueuing.java   | 100 +++++++--------------
 2 files changed, 42 insertions(+), 78 deletions(-)

commit ba12e8805e2ae6f125042bfb1d6b3cfc10faf9ed
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:35:21 2018 -0700

    HDDS-25. Simple async event processing for SCM.
    Contributed by Elek, Marton.

 .../apache/hadoop/hdds/server/events/Event.java    |  42 ++++
 .../hadoop/hdds/server/events/EventExecutor.java   |  68 +++++++
 .../hadoop/hdds/server/events/EventHandler.java    |  33 ++++
 .../hadoop/hdds/server/events/EventPublisher.java  |  28 +++
 .../hadoop/hdds/server/events/EventQueue.java      | 213 +++++++++++++++++++++
 .../hdds/server/events/SingleThreadExecutor.java   | 103 ++++++++++
 .../hadoop/hdds/server/events/TypedEvent.java      |  51 +++++
 .../hadoop/hdds/server/events/package-info.java    |  23 +++
 .../hadoop/hdds/server/events/TestEventQueue.java  | 113 +++++++++++
 .../hdds/server/events/TestEventQueueChain.java    |  79 ++++++++
 10 files changed, 753 insertions(+)

commit 1f10a360219c91ac13d31bdb5c8d302b1b45afc3
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri May 11 11:28:05 2018 -0700

    YARN-8268. Fair scheduler: reservable queue is configured both as parent and leaf queue. (Gergo Repas via Haibo Chen)

 .../scheduler/fair/allocation/AllocationFileQueueParser.java   |  5 ++++-
 .../scheduler/fair/TestAllocationFileLoaderService.java        | 10 ++++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)

commit 8f7912e0fee5de608ce8824fa5bd81b01b9a7c38
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 11 14:23:16 2018 -0400

    YARN-8274. Fixed a bug on docker start command.
               Contributed by Jason Lowe

 .../native/container-executor/impl/utils/docker-util.c     | 14 ++++++++++++--
 .../container-executor/test/utils/test_docker_util.cc      |  4 ++--
 2 files changed, 14 insertions(+), 4 deletions(-)

commit c1d64d60f6ef3cb9ed89669501ca5b1efbab3c28
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:08:45 2018 -0700

    HDDS-39. Ozone: Compile Ozone/HDFS/Cblock protobuf files with proto3 compiler using maven protoc plugin.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  | 16 +++----
 .../hadoop/hdds/scm/XceiverClientHandler.java      | 10 ++---
 .../hadoop/hdds/scm/XceiverClientInitializer.java  | 18 ++++----
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 18 ++++----
 .../hdds/scm/client/ContainerOperationClient.java  |  5 ++-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  6 +--
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  8 ++--
 hadoop-hdds/common/pom.xml                         | 52 +++++++++++++++++++++-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  4 +-
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  3 +-
 .../common/helpers/StorageContainerException.java  |  2 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 40 +++++++++--------
 .../ozone/container/common/helpers/ChunkInfo.java  |  2 +-
 .../ozone/container/common/helpers/KeyData.java    |  2 +-
 .../com/google/protobuf/ShadedProtoUtil.java       | 38 ----------------
 .../shaded/com/google/protobuf/package-info.java   | 22 ---------
 .../src/main/proto/DatanodeContainerProtocol.proto |  2 +-
 .../ozone/container/common/helpers/ChunkUtils.java | 36 +++++++--------
 .../container/common/helpers/ContainerData.java    |  4 +-
 .../container/common/helpers/ContainerMetrics.java |  2 +-
 .../container/common/helpers/ContainerUtils.java   |  6 +--
 .../ozone/container/common/helpers/FileUtils.java  |  4 +-
 .../ozone/container/common/helpers/KeyUtils.java   | 10 ++---
 .../container/common/impl/ChunkManagerImpl.java    | 10 ++---
 .../common/impl/ContainerManagerImpl.java          | 42 ++++++++---------
 .../ozone/container/common/impl/Dispatcher.java    | 26 +++++------
 .../container/common/impl/KeyManagerImpl.java      |  6 +--
 .../container/common/interfaces/ChunkManager.java  |  2 +-
 .../common/interfaces/ContainerDispatcher.java     |  4 +-
 .../background/BlockDeletingService.java           |  5 ++-
 .../common/transport/server/XceiverServer.java     | 15 ++++---
 .../transport/server/XceiverServerHandler.java     |  8 ++--
 .../transport/server/XceiverServerInitializer.java | 18 ++++----
 .../server/ratis/ContainerStateMachine.java        | 25 +++++------
 .../scm/cli/container/InfoContainerHandler.java    |  5 ++-
 .../ozone/client/io/ChunkGroupInputStream.java     |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  2 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++---
 .../container/common/TestBlockDeletingService.java |  2 +-
 .../common/impl/TestContainerPersistence.java      |  6 +--
 .../container/metrics/TestContainerMetrics.java    |  8 ++--
 .../container/ozoneimpl/TestOzoneContainer.java    |  3 +-
 .../container/server/TestContainerServer.java      | 10 +++--
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  2 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java | 12 +++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 27 ++++++-----
 hadoop-project/pom.xml                             | 11 +++--
 51 files changed, 292 insertions(+), 287 deletions(-)

commit 3a93af731ee09307b6f07e0fc739d1b5653cf69d
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 10:20:04 2018 -0700

    HDDS-47. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../src/test/robotframework/acceptance/ozone.robot | 24 ++++++++++++++++++++--
 .../hadoop/ozone/client/OzoneClientUtils.java      |  1 +
 2 files changed, 23 insertions(+), 2 deletions(-)

commit d50c4d71dc42576f96ae5c268856fd1a7795f936
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 11 09:47:57 2018 -0700

    HDFS-13542. TestBlockManager#testNeededReplicationWhileAppending fails due to improper cluster shutdown in TestBlockManager#testBlockManagerMachinesArray on Windows. Contributed by Anbang Hu.

 .../server/blockmanagement/TestBlockManager.java   | 155 +++++++++++----------
 1 file changed, 85 insertions(+), 70 deletions(-)

commit a922b9c82cc564e86dc0ef84bcc3597cb7b7c211
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri May 11 14:51:30 2018 +0800

    HDFS-13346. RBF: Fix synchronization of router quota and nameservice quota.

 .../federation/router/RouterAdminServer.java       | 28 +++++++++++++-
 .../federation/router/TestRouterAdminCLI.java      | 10 +++++
 .../server/federation/router/TestRouterQuota.java  | 43 +++++++++++++++++++++-
 3 files changed, 79 insertions(+), 2 deletions(-)

commit 9db9cd95bd0348070a286e69e7965c03c9bd39d6
Author: Weiwei Yang <wwei@apache.org>
Date:   Fri May 11 10:47:04 2018 +0800

    YARN-7003. DRAINING state of queues is not recovered after RM restart. Contributed by Tao Yang.

 .../scheduler/capacity/AbstractCSQueue.java        | 15 ++++++
 .../scheduler/capacity/CapacityScheduler.java      |  7 +++
 .../scheduler/capacity/TestQueueState.java         | 60 ++++++++++++++++++++++
 3 files changed, 82 insertions(+)

commit d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98
Author: Vinod Kumar Vavilapalli (I am also known as @tshooter.) <vinodkv@apache.org>
Date:   Thu May 10 19:03:23 2018 -0700

    YARN-8249. Fixed few REST APIs in RMWebServices to have static-user check. Contributed by Sunil Govindan.

 .../webapp/AHSWebServices.java                     |  18 +-
 .../hadoop/yarn/server/webapp/WebServices.java     |   2 +-
 .../resourcemanager/webapp/RMWebServices.java      | 302 +++++++++------------
 .../resourcemanager/webapp/TestRMWebServices.java  |   2 +-
 ...TestRMWebServicesHttpStaticUserPermissions.java |  12 +-
 5 files changed, 142 insertions(+), 194 deletions(-)

commit 84b305f11a67e6f420e33e1ec30640b8214997e1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 10 17:24:40 2018 -0700

    HDDS-43: Rename hdsl to hdds in hadoop-ozone/acceptance-test/README.md. Contributed by Sandeep Nemuri

 hadoop-ozone/acceptance-test/README.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 30293f6065c9e5b41c07cd670c7a6a1768d1434b
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 17:08:26 2018 -0700

    HDDS-34. Remove .meta file during creation of container
    Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |  5 ---
 .../container/common/helpers/ContainerData.java    | 27 --------------
 .../container/common/helpers/ContainerUtils.java   | 35 +++---------------
 .../common/impl/ContainerManagerImpl.java          | 42 +++-------------------
 .../scm/cli/container/InfoContainerHandler.java    |  3 --
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  2 +-
 6 files changed, 9 insertions(+), 105 deletions(-)

commit db1ab0fc1674177fdbe8f50c557aa4052ce77efc
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 16:27:21 2018 -0700

    HDDS-37. Remove dependency of hadoop-hdds-common and hadoop-hdds-server-scm from hadoop-ozone/tools/pom.xml.
    Contributed by Sandeep Nemuri.

 hadoop-ozone/tools/pom.xml | 12 ------------
 1 file changed, 12 deletions(-)

commit 7369f410202ea0583606aab2b4771c740d45e231
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 10 14:49:58 2018 -0700

    HDDS-16. Remove Pipeline from Datanode Container Protocol protobuf definition. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  4 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     | 12 +++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 12 ++---
 .../ozone/container/common/helpers/ChunkInfo.java  |  5 +-
 .../ozone/container/common/helpers/KeyData.java    |  7 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto | 63 ++++++++++++++--------
 .../container/common/helpers/ContainerData.java    | 19 +++----
 .../ozone/container/common/impl/Dispatcher.java    |  5 --
 .../scm/cli/container/InfoContainerHandler.java    |  5 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  9 ++--
 12 files changed, 85 insertions(+), 68 deletions(-)

commit 48d0b548492a3fc0b072543be81b5e1b0ea1f278
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 12:43:13 2018 -0700

    HDDS-31. Fix TestSCMCli. Contributed by Lokesh Jain.

 .../container/common/helpers/ContainerInfo.java    | 26 +++++++
 .../scm/cli/container/CreateContainerHandler.java  |  8 ++-
 .../scm/cli/container/ListContainerHandler.java    |  8 +--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 80 ++++++++++------------
 4 files changed, 74 insertions(+), 48 deletions(-)

commit f8b540049dbc7916220d6fa95c025c5a854a31f7
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:44:14 2018 -0700

    HDDS-42. Inconsistent module names and descriptions. Contributed by Tsz Wo Nicholas Sze.

 hadoop-hdds/client/pom.xml            | 5 +++--
 hadoop-hdds/common/pom.xml            | 2 +-
 hadoop-hdds/container-service/pom.xml | 4 ++--
 hadoop-hdds/framework/pom.xml         | 4 ++--
 hadoop-hdds/pom.xml                   | 4 ++--
 hadoop-hdds/server-scm/pom.xml        | 4 ++--
 hadoop-hdds/tools/pom.xml             | 4 ++--
 hadoop-ozone/acceptance-test/pom.xml  | 4 ++--
 hadoop-ozone/common/pom.xml           | 2 +-
 hadoop-ozone/integration-test/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml    | 4 ++--
 hadoop-ozone/pom.xml                  | 2 +-
 12 files changed, 22 insertions(+), 21 deletions(-)

commit 7482963f1a250f1791a5164817b608dbf2556433
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:28:35 2018 -0700

    HDDS-30. Fix TestContainerSQLCli. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/scm/TestContainerSQLCli.java      | 23 -------
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    | 73 ++++------------------
 2 files changed, 13 insertions(+), 83 deletions(-)

commit 6341c3a437489737a9c4bf0911b218b0023d8dd9
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 10 11:01:01 2018 -0700

    YARN-7715. Support NM promotion/demotion of running containers. (Miklos Szegedi via Haibo Chen)

 .../resources/CGroupsBlkioResourceHandlerImpl.java |  6 ++
 .../resources/CGroupsCpuResourceHandlerImpl.java   | 75 +++++++++++++---------
 .../CGroupsMemoryResourceHandlerImpl.java          | 73 ++++++++++++---------
 .../resources/NetworkPacketTaggingHandlerImpl.java |  6 ++
 .../linux/resources/ResourceHandler.java           | 16 ++++-
 .../linux/resources/ResourceHandlerChain.java      | 18 ++++++
 .../TrafficControlBandwidthHandlerImpl.java        |  6 ++
 .../resources/fpga/FpgaResourceHandlerImpl.java    |  6 ++
 .../resources/gpu/GpuResourceHandlerImpl.java      |  6 ++
 .../resources/numa/NumaResourceHandlerImpl.java    |  6 ++
 .../scheduler/ContainerScheduler.java              | 30 +++++++++
 .../TestCGroupsCpuResourceHandlerImpl.java         |  1 +
 .../TestCGroupsMemoryResourceHandlerImpl.java      |  1 +
 .../resourceplugin/TestResourcePluginManager.java  |  6 ++
 .../scheduler/TestContainerSchedulerQueuing.java   | 10 +++
 15 files changed, 202 insertions(+), 64 deletions(-)

commit 274eee32841082a734c57f9e383e5e2f02f97f78
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 10 10:42:26 2018 -0700

    MAPREDUCE-7095. Race conditions in closing FadvisedChunkedFile. (Miklos Szegedi via Haibo Chen)

 .../java/org/apache/hadoop/io/ReadaheadPool.java   |  6 ++-
 .../apache/hadoop/mapred/FadvisedChunkedFile.java  | 57 +++++++++++++++-------
 .../hadoop/mapred/TestFadvisedChunkedFile.java     | 55 +++++++++++++++++++++
 3 files changed, 98 insertions(+), 20 deletions(-)

commit 1da8d4190d6e574347ab9d3380513e9401569573
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 10 09:41:16 2018 -0700

    HADOOP-15454. TestRollingFileSystemSinkWithLocal fails on Windows. Contributed by Xiao Liang.

 .../sink/TestRollingFileSystemSinkWithLocal.java      | 19 ++++++++++---------
 1 file changed, 10 insertions(+), 9 deletions(-)

commit c8b53c43644b4ad22d5385c22cad8ed573c0b1ba
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu May 10 09:31:59 2018 -0700

    YARN-8202. DefaultAMSProcessor should properly check units of requested custom resource types against minimum/maximum allocation (snemeth via rkanter)

 .../v2/app/rm/ContainerRequestCreator.java         |  57 +++
 .../v2/app/rm/TestRMContainerAllocator.java        | 534 +++++++++++----------
 .../hadoop/yarn/util/UnitsConversionUtil.java      |  44 +-
 .../resourcetypes/ResourceTypesTestHelper.java     |  93 ++++
 .../hadoop/yarn/server/utils/BuilderUtils.java     |   8 +-
 .../resourcemanager/scheduler/SchedulerUtils.java  |  95 +++-
 .../TestApplicationMasterService.java              | 185 +++++--
 .../scheduler/TestSchedulerUtils.java              | 278 ++++++++++-
 8 files changed, 961 insertions(+), 333 deletions(-)

commit ba051b0686ad5190b43ce64552de5f14d1b1461d
Author: Steve Loughran <stevel@hortonworks.com>
Date:   Thu May 10 18:38:08 2018 +0900

    HADOOP-15354. hadoop-aliyun & hadoop-azure modules to mark hadoop-common as provided
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-tools/hadoop-aliyun/pom.xml | 2 +-
 hadoop-tools/hadoop-azure/pom.xml  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 46e0f2786259ecd25e9a5a1e51b667f9c32e5c56
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 9 21:23:33 2018 -0700

    HDDS-18. Ozone Shell should use RestClient and RpcClient. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  12 +-
 .../src/test/compose/docker-compose.yaml           |   1 +
 .../src/test/robotframework/acceptance/ozone.robot |  13 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |  49 ++--
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  25 +-
 .../OzoneClientException.java}                     |  10 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  86 ++++++
 .../apache/hadoop/ozone/client/OzoneVolume.java    |  26 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   8 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       |  47 ++--
 .../hadoop/ozone/web/client/OzoneRestClient.java   |  43 +--
 .../hadoop/ozone/web/client/OzoneVolume.java       |  23 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 298 ++++++++++++++-------
 .../hadoop/ozone/web/client/TestBuckets.java       |   3 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   3 +-
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  59 ++--
 .../web/ozShell/bucket/CreateBucketHandler.java    |  32 +--
 .../web/ozShell/bucket/DeleteBucketHandler.java    |  20 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |  25 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |  51 ++--
 .../web/ozShell/bucket/UpdateBucketHandler.java    |  41 +--
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |  26 +-
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  46 ++--
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  31 +--
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  48 ++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  49 ++--
 .../web/ozShell/volume/CreateVolumeHandler.java    |  28 +-
 .../web/ozShell/volume/DeleteVolumeHandler.java    |  18 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |  38 +--
 .../web/ozShell/volume/ListVolumeHandler.java      |  58 ++--
 .../web/ozShell/volume/UpdateVolumeHandler.java    |  24 +-
 .../java/org/apache/hadoop/fs/ozone/Constants.java |   6 -
 .../main/java/org/apache/hadoop/fs/ozone/OzFs.java |   3 +-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |   4 +-
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |   3 +-
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |   5 +-
 .../hadoop/fs/ozone/contract/OzoneContract.java    |   6 +-
 38 files changed, 747 insertions(+), 523 deletions(-)

commit 3c95ca4f21dcfcaabdd0694e7d005a45baba953f
Author: Vrushali C <vrushali@apache.org>
Date:   Wed May 9 22:17:48 2018 -0700

    YARN-8247 Incorrect HTTP status code returned by ATSv2 for non-whitelisted users.  Contributed by Rohith Sharma K S

 ...TimelineReaderWhitelistAuthorizationFilter.java | 14 +++---
 ...TimelineReaderWhitelistAuthorizationFilter.java | 58 ++++++++++++++--------
 2 files changed, 44 insertions(+), 28 deletions(-)

commit cc0310a5266c8b8351f338f5fc8087a203c68cac
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Thu May 10 09:15:46 2018 +0530

    YARN-8201. Skip stacktrace of few exception from ClientRMService. Contributed by Bilwa S T.

 .../apache/hadoop/yarn/server/resourcemanager/ClientRMService.java    | 4 ++++
 1 file changed, 4 insertions(+)

commit 914b98a713f70667d4380ac752f6c4de931520d9
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 9 16:52:09 2018 -0700

    HDFS-13537. TestHdfsHelper does not generate jceks path properly for relative path in Windows. Contributed by Xiao Liang.

 .../src/test/java/org/apache/hadoop/test/TestHdfsHelper.java          | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1cfe7506f7e9aff808af4ec0e57639130a6d0f35
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Fri Apr 27 17:17:02 2018 -0600

    HADOOP-15356. Make HTTP timeout configurable in ADLS connector. Contributed by Atul Sikaria and Sean Mackrory.

 .../src/main/resources/core-default.xml            |  9 +++
 .../java/org/apache/hadoop/fs/adl/AdlConfKeys.java |  1 +
 .../org/apache/hadoop/fs/adl/AdlFileSystem.java    | 13 ++++
 .../src/site/markdown/troubleshooting_adl.md       |  9 +++
 .../fs/adl/live/AdlStorageConfiguration.java       | 12 ++--
 .../fs/adl/live/TestAdlSdkConfiguration.java       | 77 ++++++++++++++++++++++
 6 files changed, 117 insertions(+), 4 deletions(-)

commit af4fc2e62805a5bd392214521a93650085b8d020
Author: Eric Yang <eyang@apache.org>
Date:   Wed May 9 13:32:51 2018 -0400

    YARN-8261.  Fixed a bug in creation of localized container directory.
                Contributed by Jason Lowe

 .../containermanager/linux/runtime/docker/DockerClient.java   | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 343b51dcf48459616c49faae3837593fcec5ed15
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 20:20:21 2018 +0530

    HDDS-28. Ozone:Duplicate declaration in hadoop-tools/hadoop-ozone/pom.xml. Contributed by Tsz Wo Nicholas Sze.

 hadoop-dist/pom.xml               | 10 ++++++----
 hadoop-ozone/tools/pom.xml        |  4 ++++
 hadoop-tools/hadoop-ozone/pom.xml | 25 -------------------------
 3 files changed, 10 insertions(+), 29 deletions(-)

commit 208b97e969cda59827890dfd26f53e3b7f20d7de
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 19:06:07 2018 +0530

    HDDS-20. Ozone: Add support for rename key within a bucket for rpc client. Contributed by Lokesh Jain.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |   8 ++
 .../ozone/client/protocol/ClientProtocol.java      |  10 ++
 .../hadoop/ozone/client/rest/RestClient.java       |   6 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  15 +++
 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       |   6 +-
 .../ksm/protocol/KeySpaceManagerProtocol.java      |   9 +-
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  27 +++++
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  20 +++-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  44 ++++++++
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 115 +++++++++++++++++++++
 .../ozone/web/interfaces/StorageHandler.java       |   9 ++
 .../web/localstorage/LocalStorageHandler.java      |   6 ++
 .../web/storage/DistributedStorageHandler.java     |  11 ++
 .../org/apache/hadoop/ozone/ksm/KSMMetrics.java    |  22 ++++
 .../org/apache/hadoop/ozone/ksm/KeyManager.java    |  10 ++
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |  65 ++++++++++++
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  11 ++
 .../hadoop/ozone/ksm/exceptions/KSMException.java  |   2 +
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  26 +++++
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  29 ++----
 20 files changed, 427 insertions(+), 24 deletions(-)

commit cd68c7cc6942970285dce04775e80f75a5d55afa
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:17:04 2018 +0530

    YARN-8260. [UI2] Per-application tracking URL is no longer available in YARN UI2. Contributed by Sunil G.

 .../hadoop-yarn/hadoop-yarn-ui/src/main/webapp/app/models/yarn-app.js | 2 ++
 .../src/main/webapp/app/serializers/yarn-app-timeline.js              | 4 +++-
 .../hadoop-yarn-ui/src/main/webapp/app/serializers/yarn-app.js        | 4 +++-
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-app.hbs         | 3 +++
 4 files changed, 11 insertions(+), 2 deletions(-)

commit 9acfaee1f080245744f191a7fd080f91413249a6
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:04:31 2018 +0530

    YARN-8264. [UI2] GPU Info tab disappears if we click any sub link under List of Applications or List of Containers. Contributed by Sunil G.

 .../hadoop-yarn-ui/src/main/webapp/app/routes/yarn-node-container.js    | 1 +
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-node-app.hbs      | 2 +-
 .../src/main/webapp/app/templates/yarn-node-container.hbs               | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

commit eb7b256cc2c74e1b461e45444179584668d34ac6
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:00:43 2018 +0530

    YARN-8239. [UI2] Clicking on Node Manager UI under AM container info / App Attempt page goes to old RM UI. Contributed by Sunil G.

 .../hadoop/yarn/server/metrics/AppAttemptMetricsConstants.java      | 5 +++++
 .../server/resourcemanager/metrics/TimelineServiceV2Publisher.java  | 4 ++++
 .../resourcemanager/metrics/TestSystemMetricsPublisherForV2.java    | 3 +++
 .../hadoop-yarn-ui/src/main/webapp/app/components/timeline-view.js  | 6 ++++--
 .../hadoop-yarn-ui/src/main/webapp/app/models/yarn-container.js     | 6 ++++++
 .../src/main/webapp/app/models/yarn-timeline-appattempt.js          | 4 ++++
 .../src/main/webapp/app/models/yarn-timeline-container.js           | 6 ++++++
 .../src/main/webapp/app/serializers/yarn-container.js               | 1 +
 .../src/main/webapp/app/serializers/yarn-timeline-appattempt.js     | 6 +++---
 .../src/main/webapp/app/serializers/yarn-timeline-container.js      | 3 ++-
 .../src/main/webapp/app/templates/components/container-table.hbs    | 2 +-
 11 files changed, 39 insertions(+), 7 deletions(-)

commit 809135082a04208f586ba7fbce705668eb559007
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 10:21:41 2018 +0530

    HDDS-33. Ozone : Fix the test logic in TestKeySpaceManager#testDeleteKey. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/ksm/TestKeySpaceManager.java    | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 8981674bbcff0663af820f3e87a3eaea5789968a
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 8 18:58:42 2018 -0700

    HADOOP-15420 s3guard ITestS3GuardToolLocal failures in diff tests (Gabor Bota)

 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  | 16 ++++-
 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 68 ++++++++++++++++++++++
 .../fs/s3a/s3guard/ITestS3GuardToolLocal.java      | 68 ----------------------
 3 files changed, 83 insertions(+), 69 deletions(-)

commit 69aac696d9d4e32a55ba9b6992f41a9ad13424f1
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 8 15:29:46 2018 -0700

    HADOOP-13649 s3guard: implement time-based (TTL) expiry for LocalMetadataStore (Gabor Bota)

 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  |  93 ++++++++++------
 .../apache/hadoop/fs/s3a/s3guard/LruHashMap.java   |  50 ---------
 .../fs/s3a/s3guard/TestLocalMetadataStore.java     | 121 ++++++++++++++++-----
 3 files changed, 153 insertions(+), 111 deletions(-)

commit 1ef0a1db1d6a412b2a26782329a8325635866d0a
Author: Billie Rinaldi <billie@apache.org>
Date:   Tue May 8 13:49:41 2018 -0700

    YARN-7894. Improve ATS response for DShell DS_CONTAINER when container launch fails. Contributed by Chandni Singh

 .../distributedshell/ApplicationMaster.java        | 98 ++++++++++++++++++----
 .../distributedshell/TestDistributedShell.java     | 10 +++
 2 files changed, 93 insertions(+), 15 deletions(-)

commit a2ea7564209dce896a5badee3949ee41e4bc00bf
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 8 15:30:36 2018 -0500

    YARN-8207. Docker container launch use popen have risk of shell expansion. Contributed by Eric Yang.

 .../container-executor/impl/container-executor.c   | 118 ++--
 .../container-executor/impl/container-executor.h   |   5 +
 .../container-executor/impl/utils/docker-util.c    | 611 ++++++++++-----------
 .../container-executor/impl/utils/docker-util.h    |  38 +-
 .../container-executor/impl/utils/string-utils.c   |  24 +
 .../container-executor/impl/utils/string-utils.h   |   4 +
 .../test/utils/test_docker_util.cc                 | 463 +++++++++-------
 7 files changed, 674 insertions(+), 589 deletions(-)

commit 6b96a73bb0f0ad1c877a062b19091e3e15a33ec4
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 8 11:34:45 2018 -0700

    YARN-8232. RMContainer lost queue name when RM HA happens. (Hu Ziqian via wangda)
    
    Change-Id: Ia21e1da6871570c993bbedde76ce32929e95970f

 .../scheduler/AbstractYarnScheduler.java           |  6 ++-
 .../scheduler/TestAbstractYarnScheduler.java       | 60 ++++++++++++++++++----
 2 files changed, 54 insertions(+), 12 deletions(-)

commit d72c16516184479e82a73d3e211e2883be779908
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 8 18:11:33 2018 +0530

    HDDS-23. Remove SCMNodeAddressList from SCMRegisterRequestProto. Contributed by Nanda Kumar.

 .../container/common/states/endpoint/RegisterEndpointTask.java   | 3 +--
 .../hadoop/ozone/protocol/StorageContainerDatanodeProtocol.java  | 7 +++----
 .../StorageContainerDatanodeProtocolClientSideTranslatorPB.java  | 3 +--
 .../StorageContainerDatanodeProtocolServerSideTranslatorPB.java  | 9 +--------
 .../src/main/proto/StorageContainerDatanodeProtocol.proto        | 1 -
 .../org/apache/hadoop/ozone/container/common/ScmTestMock.java    | 4 +---
 .../apache/hadoop/hdds/scm/server/SCMDatanodeProtocolServer.java | 7 +++----
 .../org/apache/hadoop/ozone/container/common/TestEndPoint.java   | 4 +---
 8 files changed, 11 insertions(+), 27 deletions(-)

commit 7450583721757b8af2945ebd9be1a9efed11444c
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Tue May 8 12:28:54 2018 +0530

    YARN-8253. HTTPS Ats v2 api call fails with 'bad HTTP parsed'. Contributed by Charan Hebri.

 .../yarn/server/timelineservice/reader/TimelineReaderServer.java | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 2916c90500643f82aabcedd74b349938d8c86518
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 8 11:37:03 2018 +0530

    YARN-8251. [UI2] Clicking on Application link at the header goes to Diagnostics Tab instead of AppAttempt Tab. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-app-attempt.js  | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-app.js          | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9832265e1deeefaa6d58f9f62052c8ef6a8e82b7
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 8 10:35:19 2018 +0530

    YARN-5151. [UI2] Support kill application from new YARN UI. Contributed by Gergely Novk.

 .../src/main/webapp/app/adapters/yarn-app.js       | 13 ++++++--
 .../src/main/webapp/app/controllers/yarn-app.js    | 35 ++++++++++++++++++++
 .../src/main/webapp/app/templates/yarn-app.hbs     | 37 ++++++++++++++++++----
 3 files changed, 76 insertions(+), 9 deletions(-)

commit 08ea90e1e4cd5d4860668a1368f0b0396fbe83e0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 7 18:24:00 2018 -0700

    HDDS-27. Fix TestStorageContainerManager#testBlockDeletionTra;nsactions. Contributed by Xiaoyu Yao.

 .../java/org/apache/hadoop/ozone/TestStorageContainerManager.java  | 1 -
 .../org/apache/hadoop/ozone/TestStorageContainerManagerHelper.java | 7 +++----
 2 files changed, 3 insertions(+), 5 deletions(-)

commit 696a4be0daac00dd3bb64801d9fbe659aef9e089
Author: Xiao Chen <xiao@apache.org>
Date:   Mon May 7 15:34:22 2018 -0700

    HDFS-12981. renameSnapshot a Non-Existent snapshot to itself should throw error. Contributed by Kitti Nanasi.

 .../namenode/snapshot/DirectorySnapshottableFeature.java |  6 +++---
 .../org/apache/hadoop/hdfs/TestSnapshotCommands.java     |  5 +++++
 .../server/namenode/snapshot/TestSnapshotRename.java     | 16 ++++++++++++++++
 3 files changed, 24 insertions(+), 3 deletions(-)

commit 3a43ac2851f5dea4deb8a1dfebf9bf65fc57bd76
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon May 7 14:42:18 2018 -0700

    HDDS-1. Remove SCM Block DB. Contributed by Xiaoyu Yao.

 .../src/main/java/org/apache/hadoop/util/Time.java |  12 +
 .../hadoop/hdds/scm/XceiverClientManager.java      |  17 +-
 .../hdds/scm/client/ContainerOperationClient.java  | 121 +++---
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  13 +-
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  18 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  59 +++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  46 ++-
 .../container/common/helpers/AllocatedBlock.java   |  20 +-
 .../container/common/helpers/ContainerInfo.java    |  22 +-
 .../common/helpers/DeleteBlockResult.java          |  16 +-
 .../scm/container/common/helpers/Pipeline.java     |  18 +-
 .../container/common/helpers/PipelineChannel.java  |   2 +
 .../scm/protocol/ScmBlockLocationProtocol.java     |  12 -
 .../protocol/StorageContainerLocationProtocol.java |  26 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |  46 +--
 ...inerLocationProtocolClientSideTranslatorPB.java |  60 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  66 ++--
 .../org/apache/hadoop/ozone/common/BlockGroup.java |  26 +-
 .../ozone/common/DeleteBlockGroupResult.java       |  13 +-
 .../ozone/container/common/helpers/KeyData.java    |  41 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  38 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |  30 +-
 .../java/org/apache/hadoop/utils/LevelDBStore.java |   4 +-
 .../apache/hadoop/utils/MetadataKeyFilters.java    |  20 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   1 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  82 ++--
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  36 +-
 .../proto/StorageContainerLocationProtocol.proto   |  16 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  13 +-
 .../ozone/container/common/helpers/ChunkUtils.java |  20 +-
 .../container/common/helpers/ContainerData.java    |  33 +-
 .../container/common/helpers/ContainerReport.java  |  19 +-
 .../container/common/helpers/ContainerUtils.java   |  14 +-
 .../helpers/DeletedContainerBlocksSummary.java     |  19 +-
 .../ozone/container/common/helpers/FileUtils.java  |   3 +-
 .../ozone/container/common/helpers/KeyUtils.java   |   6 +-
 .../container/common/impl/ChunkManagerImpl.java    |  76 ++--
 .../common/impl/ContainerManagerImpl.java          | 210 ++++++-----
 .../ozone/container/common/impl/Dispatcher.java    | 121 +++---
 .../container/common/impl/KeyManagerImpl.java      |  66 ++--
 .../RandomContainerDeletionChoosingPolicy.java     |   4 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |   4 +-
 .../container/common/interfaces/ChunkManager.java  |  19 +-
 .../ContainerDeletionChoosingPolicy.java           |   2 +-
 .../common/interfaces/ContainerManager.java        |  76 ++--
 .../container/common/interfaces/KeyManager.java    |  17 +-
 .../background/BlockDeletingService.java           |   8 +-
 .../commandhandler/CloseContainerHandler.java      |   9 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |   9 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |   2 +-
 .../server/ratis/ContainerStateMachine.java        |  21 +-
 .../container/common/utils/ContainerCache.java     |  36 +-
 .../protocol/commands/CloseContainerCommand.java   |  14 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   9 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   2 +-
 .../apache/hadoop/hdds/scm/block/BlockManager.java |  12 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 171 ++-------
 .../block/DatanodeDeletedBlockTransactions.java    |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  24 +-
 .../hdds/scm/container/ContainerMapping.java       |  80 ++--
 .../hdds/scm/container/ContainerStateManager.java  |  12 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  33 +-
 .../hdds/scm/container/closer/ContainerCloser.java |  16 +-
 .../scm/container/replication/InProgressPool.java  |  10 +-
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   |   2 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  15 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |   8 +-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  20 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  47 +--
 .../hdds/scm/server/StorageContainerManager.java   |   9 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  34 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  56 +--
 .../hdds/scm/container/TestContainerMapping.java   |  79 ++--
 .../scm/container/closer/TestContainerCloser.java  |  25 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   9 +-
 .../ozone/container/common/TestEndPoint.java       |   7 +-
 .../replication/TestContainerSupervisor.java       |  32 +-
 .../testutils/ReplicationDatanodeStateManager.java |  11 +-
 .../scm/cli/container/CloseContainerHandler.java   |  26 +-
 .../scm/cli/container/ContainerCommandHandler.java |   1 -
 .../scm/cli/container/CreateContainerHandler.java  |  22 +-
 .../scm/cli/container/DeleteContainerHandler.java  |  26 +-
 .../scm/cli/container/InfoContainerHandler.java    |  31 +-
 .../scm/cli/container/ListContainerHandler.java    |  12 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  25 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  35 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  11 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfo.java      |  41 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfoGroup.java |   2 +-
 .../apache/hadoop/ozone/web/handlers/UserArgs.java |   8 +-
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  11 +-
 .../scm/container/TestContainerStateManager.java   | 124 +++---
 .../hadoop/ozone/TestContainerOperations.java      |  10 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   3 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  64 ++--
 .../ozone/TestStorageContainerManagerHelper.java   |  33 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  10 +-
 .../ozone/container/ContainerTestHelper.java       | 180 ++++-----
 .../container/common/TestBlockDeletingService.java |  25 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  19 +-
 .../common/impl/TestContainerPersistence.java      | 419 ++++++++++-----------
 .../commandhandler/TestCloseContainerHandler.java  |  14 +-
 .../container/metrics/TestContainerMetrics.java    |  14 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 142 +++----
 .../ozoneimpl/TestOzoneContainerRatis.java         |   3 +-
 .../container/server/TestContainerServer.java      |  18 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   8 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   8 -
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |   2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  24 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  40 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  68 ++--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 210 +++++------
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |   5 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  86 ++---
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  19 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   5 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |  10 +-
 .../hadoop/ozone/ksm/KeyDeletingService.java       |   3 +-
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |   6 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   2 +-
 .../hadoop/ozone/ksm/OpenKeyCleanupService.java    |   3 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  10 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 170 ++++++---
 .../ozone/genesis/BenchMarkRocksDbStore.java       |  14 +-
 127 files changed, 2059 insertions(+), 2402 deletions(-)

commit a3a1552c33d5650fbd0a702369fccd21b8c9d3e2
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 4 20:29:20 2018 -0700

    Revert "HADOOP-14445. Delegation tokens are not shared between KMS instances. Contributed by Xiao Chen and Rushabh S Shah."
    
    This reverts commit 583fa6ed48ad3df40bcaa9c591d5ccd07ce3ea81.
    
     Conflicts:
            hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSTokenRenewer.java
            hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java

 .../hadoop/crypto/key/kms/KMSClientProvider.java   | 214 ++++-----
 .../hadoop/crypto/key/kms/KMSDelegationToken.java  |  22 +-
 .../crypto/key/kms/KMSLegacyTokenRenewer.java      |  56 ---
 .../hadoop/crypto/key/kms/KMSTokenRenewer.java     | 103 ----
 .../apache/hadoop/crypto/key/kms/package-info.java |  18 -
 .../hadoop/fs/CommonConfigurationKeysPublic.java   |  10 -
 .../web/DelegationTokenAuthenticatedURL.java       |  21 +-
 .../web/DelegationTokenAuthenticationHandler.java  |   8 +-
 .../web/DelegationTokenAuthenticator.java          |   2 +-
 .../main/java/org/apache/hadoop/util/KMSUtil.java  |  45 +-
 .../apache/hadoop/util/KMSUtilFaultInjector.java   |  49 --
 ...rg.apache.hadoop.security.token.TokenIdentifier |   1 -
 .../org.apache.hadoop.security.token.TokenRenewer  |   3 +-
 .../src/main/resources/core-default.xml            |  20 -
 .../crypto/key/kms/TestKMSClientProvider.java      | 162 -------
 .../kms/TestLoadBalancingKMSClientProvider.java    |  67 +--
 .../java/org/apache/hadoop/util/TestKMSUtil.java   |  65 ---
 .../hadoop/crypto/key/kms/server/TestKMS.java      | 519 ++++-----------------
 18 files changed, 205 insertions(+), 1180 deletions(-)

commit 118bd7580583e31bf643b642a2fbc9556177b906
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 4 20:19:34 2018 -0700

    Revert "HDFS-13430. Fix TestEncryptionZonesWithKMS failure due to HADOOP-14445."
    
    This reverts commit 650359371175fba416331e73aa03d2a96ccb90e5.

 .../src/test/java/org/apache/hadoop/hdfs/TestEncryptionZones.java      | 3 ---
 1 file changed, 3 deletions(-)

commit 5b11b9fd413470e134ecdc7c50468f8c7b39fa50
Author: Steve Loughran <stevel@apache.org>
Date:   Mon May 7 11:54:08 2018 +0100

    HADOOP-15446. WASB: PageBlobInputStream.skip breaks HBASE replication.
    Contributed by Thomas Marquardt

 .../hadoop/fs/azure/PageBlobInputStream.java       | 123 +++--
 .../hadoop/fs/azure/ITestPageBlobInputStream.java  | 527 +++++++++++++++++++++
 2 files changed, 605 insertions(+), 45 deletions(-)

commit 67f239c42f676237290d18ddbbc9aec369267692
Author: Weiwei Yang <wwei@apache.org>
Date:   Mon May 7 11:33:14 2018 +0800

    YARN-8025. UsersManangers#getComputedResourceLimitForActiveUsers throws NPE due to preComputedActiveUserLimit is empty. Contributed by Tao Yang.

 .../server/resourcemanager/scheduler/capacity/UsersManager.java  | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit e9159db62367920c34616179aa4ced46d1ed22e1
Author: Abhishek Modi <abmodi90@gmail.com>
Date:   Mon May 7 01:15:14 2018 +0900

    MAPREDUCE-7093. Use assertEquals instead of assertTrue(a == b) in TestMapReduceJobControlWithMocks
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../jobcontrol/TestMapReduceJobControlWithMocks.java  | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit a732acd8730277df4d9b97b97101bc2bc768800f
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Fri May 4 16:37:47 2018 -0700

    HDFS-5926 Documentation should clarify dfs.datanode.du.reserved impact from reserved disk capacity (Gabor Bota)

 hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml | 3 +++
 1 file changed, 3 insertions(+)

commit 6a69239d867070ee85d79026542033ac661c4c1c
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 4 14:59:59 2018 -0700

    YARN-8163. Add support for Node Labels in opportunistic scheduling. Contributed by Abhishek Modi.

 .../server/api/protocolrecords/RemoteNode.java     | 40 +++++++++++++++++++++-
 .../protocolrecords/impl/pb/RemoteNodePBImpl.java  | 19 ++++++++++
 .../scheduler/OpportunisticContainerAllocator.java | 38 +++++++++++++++++---
 .../proto/yarn_server_common_service_protos.proto  |  1 +
 .../TestOpportunisticContainerAllocator.java       | 37 ++++++++++++++++++++
 .../OpportunisticContainerAllocatorAMService.java  | 12 +++++++
 ...stOpportunisticContainerAllocatorAMService.java | 10 ++++--
 7 files changed, 149 insertions(+), 8 deletions(-)

commit 4cdbdce752e192b45c2b9756c2d4bd24ceffdabd
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Fri May 4 15:36:13 2018 -0500

    HADOOP-14841 Kms client should disconnect if unable to get output stream from connection. Contributed by Rushabh S Shah

 .../org/apache/hadoop/crypto/key/kms/KMSClientProvider.java | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit 96c843f64bb424cd7544be0ccda16a6755c086de
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Fri May 4 11:34:37 2018 -0700

    HADOOP-15444 ITestS3GuardToolDynamo should only run with -Ddynamo (Aaron Fabbri)

 .../apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolDynamoDB.java   | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 8cdb032aff4237d8d3970057d82290e4e32c4040
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 4 12:36:31 2018 -0400

    YARN-8223.  Improved yarn auxiliary service to load jar file from HDFS.
                Contributed by Zian Chen

 .../markdown/PluggableShuffleAndPluggableSort.md   | 44 ++++++++++++++++++++++
 .../nodemanager/containermanager/AuxServices.java  | 19 +++++++++-
 2 files changed, 61 insertions(+), 2 deletions(-)

commit 6795f8072ffbe6138857e77d51af173f33e4e5c1
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 4 09:27:07 2018 -0700

    YARN-8079. Support static and archive unmodified local resources in service AM. Contributed by Suma Shivaprasad

 .../YARN-Simplified-V1-API-Layer-For-Services.yaml |   2 +
 .../yarn/service/api/records/ConfigFile.java       |   3 +-
 .../yarn/service/conf/YarnServiceConstants.java    |   1 +
 .../service/provider/AbstractClientProvider.java   |  23 ++-
 .../service/provider/AbstractProviderService.java  |   4 +
 .../yarn/service/provider/ProviderUtils.java       |  91 ++++++++++--
 .../yarn/service/provider/TestProviderUtils.java   | 164 +++++++++++++++++++++
 .../providers/TestAbstractClientProvider.java      |  44 ++++++
 .../site/markdown/yarn-service/YarnServiceAPI.md   |   4 +-
 9 files changed, 321 insertions(+), 15 deletions(-)

commit 502914ca32ac02b19116fd681eb8301b92fccbb3
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 4 08:53:55 2018 -0700

    YARN-7818. Remove privileged operation warnings during container launch for the ContainerRuntimes. Contributed by Shane Kumpf

 .../linux/runtime/DefaultLinuxContainerRuntime.java        |  5 +++--
 .../linux/runtime/DockerLinuxContainerRuntime.java         | 14 +++++++-------
 2 files changed, 10 insertions(+), 9 deletions(-)
