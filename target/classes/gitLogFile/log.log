commit ff06bd1be83a2a6d2ee39cb002e91499720a7243
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Wed Aug 8 22:42:52 2018 +0530

    YARN-8601. Print ExecutionType in Container report CLI. Contributed by Bilwa S T.

 .../src/main/java/org/apache/hadoop/yarn/client/cli/ApplicationCLI.java | 2 ++
 .../src/test/java/org/apache/hadoop/yarn/client/cli/TestYarnCLI.java    | 1 +
 2 files changed, 3 insertions(+)

commit 36c0d742d484f8bf01d7cb01c7b1c9e3627625dc
Author: MÃ¡rton Elek <elek@apache.org>
Date:   Wed Aug 8 17:27:57 2018 +0200

    HDFS-13447. Fix Typos - Node Not Chosen. Contributed by Beluga Behr.

 .../hdfs/server/blockmanagement/BlockPlacementPolicyDefault.java      | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5b898c176ffb41e6fa3c605feb8ed3fcb60a5fe8
Author: Sunil G <sunilg@apache.org>
Date:   Wed Aug 8 19:48:49 2018 +0530

    Revert "YARN-8633. Update DataTables version in yarn-common in line with JQuery 3 upgrade. Contributed by Akhil PB."
    
    This reverts commit 64901abdfac72c22f6b002ff45b1107174e82207.

 LICENSE.txt                                        |   2 +-
 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |   8 +-
 .../apache/hadoop/yarn/webapp/view/JQueryUI.java   |   4 +-
 .../static/dt-1.10.7/js/jquery.dataTables.min.js   | 160 ---------------------
 .../{dt-1.10.7 => dt-1.9.4}/css/demo_page.css      |   0
 .../{dt-1.10.7 => dt-1.9.4}/css/demo_table.css     |   0
 .../static/{dt-1.10.7 => dt-1.9.4}/css/jui-dt.css  |   0
 .../images/Sorting icons.psd                       | Bin
 .../images/back_disabled.jpg                       | Bin
 .../images/back_enabled.jpg                        | Bin
 .../{dt-1.10.7 => dt-1.9.4}/images/favicon.ico     | Bin
 .../images/forward_disabled.jpg                    | Bin
 .../images/forward_enabled.jpg                     | Bin
 .../{dt-1.10.7 => dt-1.9.4}/images/sort_asc.png    | Bin
 .../images/sort_asc_disabled.png                   | Bin
 .../{dt-1.10.7 => dt-1.9.4}/images/sort_both.png   | Bin
 .../{dt-1.10.7 => dt-1.9.4}/images/sort_desc.png   | Bin
 .../images/sort_desc_disabled.png                  | Bin
 .../static/dt-1.9.4/js/jquery.dataTables.min.js    | 157 ++++++++++++++++++++
 19 files changed, 164 insertions(+), 167 deletions(-)

commit 64901abdfac72c22f6b002ff45b1107174e82207
Author: Sunil G <sunilg@apache.org>
Date:   Wed Aug 8 19:43:29 2018 +0530

    YARN-8633. Update DataTables version in yarn-common in line with JQuery 3 upgrade. Contributed by Akhil PB.

 LICENSE.txt                                        |   2 +-
 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |   8 +-
 .../apache/hadoop/yarn/webapp/view/JQueryUI.java   |   4 +-
 .../{dt-1.9.4 => dt-1.10.7}/css/demo_page.css      |   0
 .../{dt-1.9.4 => dt-1.10.7}/css/demo_table.css     |   0
 .../static/{dt-1.9.4 => dt-1.10.7}/css/jui-dt.css  |   0
 .../images/Sorting icons.psd                       | Bin
 .../images/back_disabled.jpg                       | Bin
 .../images/back_enabled.jpg                        | Bin
 .../{dt-1.9.4 => dt-1.10.7}/images/favicon.ico     | Bin
 .../images/forward_disabled.jpg                    | Bin
 .../images/forward_enabled.jpg                     | Bin
 .../{dt-1.9.4 => dt-1.10.7}/images/sort_asc.png    | Bin
 .../images/sort_asc_disabled.png                   | Bin
 .../{dt-1.9.4 => dt-1.10.7}/images/sort_both.png   | Bin
 .../{dt-1.9.4 => dt-1.10.7}/images/sort_desc.png   | Bin
 .../images/sort_desc_disabled.png                  | Bin
 .../static/dt-1.10.7/js/jquery.dataTables.min.js   | 160 +++++++++++++++++++++
 .../static/dt-1.9.4/js/jquery.dataTables.min.js    | 157 --------------------
 19 files changed, 167 insertions(+), 164 deletions(-)

commit 2ec97abb2e93c1a8127e7a146c08e26454b583fa
Author: Ewan Higgs <ewan.higgs@wdc.com>
Date:   Wed Aug 8 13:50:23 2018 +0200

    HADOOP-15576. S3A Multipart Uploader to work with S3Guard and encryption Originally contributed by Ewan Higgs with refinements by Steve Loughran.

 .../hadoop/fs/FileSystemMultipartUploader.java     |  69 +++--
 .../org/apache/hadoop/fs/MultipartUploader.java    |  32 ++-
 .../main/java/org/apache/hadoop/fs/PartHandle.java |   8 +-
 .../main/java/org/apache/hadoop/fs/PathHandle.java |   9 +-
 .../fs/AbstractSystemMultipartUploaderTest.java    | 143 ----------
 .../AbstractContractMultipartUploaderTest.java     | 300 +++++++++++++++++++++
 .../TestLocalFSContractMultipartUploader.java}     |  50 +---
 .../hadoop/fs/TestHDFSMultipartUploader.java       |  76 ------
 .../hdfs/TestHDFSContractMultipartUploader.java    |  58 ++++
 .../apache/hadoop/fs/s3a/S3AMultipartUploader.java | 177 ++++++++----
 .../apache/hadoop/fs/s3a/WriteOperationHelper.java |   4 +
 .../org.apache.hadoop.fs.MultipartUploaderFactory  |   0
 .../s3a/ITestS3AContractMultipartUploader.java     | 116 ++++++++
 .../org/apache/hadoop/fs/s3a/S3ATestConstants.java |   5 +
 .../fs/s3a/TestS3AMultipartUploaderSupport.java    |  84 ++++++
 .../staging/TestStagingPartitionedJobCommit.java   |   4 +-
 .../fs/s3a/scale/AbstractSTestS3AHugeFiles.java    |   4 +-
 .../hadoop-aws/src/test/resources/contract/s3a.xml |   5 +
 18 files changed, 787 insertions(+), 357 deletions(-)

commit 4203bc738c11aaf083b6d407c6d6b7f4f22fe0d3
Author: Vinayakumar B <vinayakumarb@apache.org>
Date:   Wed Aug 8 12:42:20 2018 +0530

    HDFS-13785. EC: 'removePolicy' is not working for built-in/system Erasure Code policies. Contributed by Ayush Saxena

 .../java/org/apache/hadoop/hdfs/tools/ECAdmin.java |  4 ++--
 .../src/site/markdown/HDFSErasureCoding.md         |  4 ++--
 .../src/test/resources/testErasureCodingConf.xml   | 22 +++++++++++++++++++++-
 3 files changed, 25 insertions(+), 5 deletions(-)

commit 6677717c689cc94a15f14c3466242e23652d473b
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Aug 7 22:04:41 2018 -0700

    HDFS-13728. Disk Balancer should not fail if volume usage is greater than capacity. Contributed by Stephen O'Donnell.

 .../diskbalancer/datamodel/DiskBalancerVolume.java      | 17 ++++++++++++-----
 .../hadoop/hdfs/server/diskbalancer/TestDataModels.java | 16 ++++++++++++++++
 2 files changed, 28 insertions(+), 5 deletions(-)

commit 2b0f9772417d205e8df16bac6921c2bb8bdcf740
Author: Vinayakumar B <vinayakumarb@apache.org>
Date:   Wed Aug 8 07:47:10 2018 +0530

    HDFS-13786. EC: Display erasure coding policy for sub-directories is not working. Contributed by Ayush Saxena.

 .../server/namenode/ContentSummaryComputationContext.java  |  2 ++
 .../org/apache/hadoop/hdfs/TestErasureCodingPolicies.java  | 14 ++++++++++++++
 2 files changed, 16 insertions(+)

commit 7862f1523f0591a0b163bcecf07af842de4b3a8b
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Tue Aug 7 13:55:59 2018 -0600

    HADOOP-15400. Improve S3Guard documentation on Authoritative Mode implementation. (Contributed by Gabor Bota)

 .../src/site/markdown/tools/hadoop-aws/s3guard.md  | 51 ++++++++++++++++++++--
 1 file changed, 47 insertions(+), 4 deletions(-)

commit 38784f95fecd02c2f94344c1967cccf0799ec074
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Aug 7 16:40:33 2018 -0700

    HDDS-124. Validate all required configs needed for ozone-site.xml and reflect the changes in ozone-default.xml
    Contributed by Dinesh Chitlangia.

 hadoop-hdds/common/src/main/resources/ozone-default.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0f8cb127cd759cdc6422d19d8b28f21198ddfd61
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Aug 7 16:11:37 2018 -0700

    HDFS-13799. TestEditLogTailer#testTriggersLogRollsForAllStandbyNN fails due to missing synchronization
                between rollEditsRpcExecutor and tailerThread shutdown. Contributed by Hrishikesh Gadre.

 .../java/org/apache/hadoop/hdfs/server/namenode/ha/EditLogTailer.java  | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d838179d8dc257e582e8c7bb1cf312d4c0d3f733
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Tue Aug 7 15:33:16 2018 -0700

    YARN-8626. Create HomePolicyManager that sends all the requests to the home subcluster. Contributed by Inigo Goiri.

 .../amrmproxy/AbstractAMRMProxyPolicy.java         |   8 ++
 .../amrmproxy/BroadcastAMRMProxyPolicy.java        |   7 --
 .../policies/amrmproxy/HomeAMRMProxyPolicy.java    |  74 ++++++++++++++
 .../policies/amrmproxy/RejectAMRMProxyPolicy.java  |   8 --
 .../policies/manager/HomePolicyManager.java        |  61 ++++++++++++
 .../amrmproxy/TestHomeAMRMProxyPolicy.java         | 110 +++++++++++++++++++++
 .../policies/manager/TestHomePolicyManager.java    |  39 ++++++++
 .../utils/FederationPoliciesTestUtil.java          |  16 ++-
 8 files changed, 305 insertions(+), 18 deletions(-)

commit 861095f761b40171e0dc25f769f486d910cc3e88
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Aug 7 13:01:13 2018 -0700

    YARN-8407. Container launch exception in AM log should be printed in ERROR level. (Yesha Vora via wangda)
    
    Change-Id: I154e873df1df3503a09c41d6b3874ca195af91d9

 .../component/instance/ComponentInstance.java      | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

commit c0599151bb438d3dc0c6a54af93b2670770daefd
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Aug 7 12:37:32 2018 -0700

    YARN-7089. Mark the log-aggregation-controller APIs as public. (Zian Chen via wangda)
    
    Change-Id: I37851bdc5935d623a27d0973a206c997258716eb

 .../logaggregation/filecontroller/LogAggregationFileController.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d4258fcad71eabe2de3cf829cde36840200ab9b6
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Aug 7 12:36:55 2018 -0700

    YARN-8629. Container cleanup fails while trying to delete Cgroups. (Suma Shivaprasad via wangda)
    
    Change-Id: I392ef4f8baa84d5d7b1f2e438c560b5426b6d4f2

 .../linux/resources/CGroupsHandlerImpl.java        | 26 +++++++++++++---------
 1 file changed, 16 insertions(+), 10 deletions(-)

commit b1a59b164412fbd9f641a7e992a7d1a3fd0f1a10
Author: Virajith Jalaparti <virajith@apache.org>
Date:   Tue Aug 7 10:15:28 2018 -0700

    HDFS-13796. Allow verbosity of InMemoryLevelDBAliasMapServer to be configurable.

 .../src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java      | 2 ++
 .../hdfs/server/aliasmap/InMemoryLevelDBAliasMapServer.java      | 8 +++++++-
 .../hadoop-hdfs/src/main/resources/hdfs-default.xml              | 9 +++++++++
 3 files changed, 18 insertions(+), 1 deletion(-)

commit 6ed8593d180fe653f78f0a210478555338c4685a
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Aug 7 16:09:53 2018 +0530

    HDDS-301. ozone command shell does not contain subcommand to run ozoneFS commands. Contributed by Nilotpal Nandi.

 hadoop-common-project/hadoop-common/src/main/bin/hadoop-functions.sh  | 1 +
 .../acceptance-test/src/test/acceptance/ozonefs/ozonefs.robot         | 4 ++--
 .../acceptance-test/src/test/acceptance/ozonefs/ozonesinglenode.robot | 4 ++--
 hadoop-ozone/common/src/main/bin/ozone                                | 4 ++++
 hadoop-ozone/common/src/main/shellprofile.d/hadoop-ozone.sh           | 1 +
 5 files changed, 10 insertions(+), 4 deletions(-)

commit 900c0e114f391f4dbf21a0e08a63c2cf22659eb7
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Aug 7 15:03:14 2018 +0530

    HDDS-230. ContainerStateMachine should implement readStateMachineData api to read data from Containers if required during replication. Contributed by Mukul Kumar Singh.

 .../server/ratis/ContainerStateMachine.java        | 142 ++++++++++++++++++---
 .../transport/server/ratis/XceiverServerRatis.java |  10 +-
 .../java/org/apache/hadoop/ozone/om/OMMetrics.java |   2 +-
 hadoop-project/pom.xml                             |   2 +-
 4 files changed, 129 insertions(+), 27 deletions(-)

commit 2e4e02b4df59f94b26567660638d58ad9ebc121e
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Aug 7 09:32:51 2018 +0800

    HDFS-13792. Fix FSN read/write lock metrics name. Contributed by Chao Sun.

 hadoop-common-project/hadoop-common/src/site/markdown/Metrics.md | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit ca20e0d7e9767a7362dddfea8ec19548947d3fd7
Author: Eric Yang <eyang@apache.org>
Date:   Mon Aug 6 12:37:59 2018 -0400

    YARN-8624. Updated verbiage around entry point support.
               Contributed by Craig Condit

 .../hadoop-yarn-site/src/site/markdown/DockerContainers.md | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit bcfc9851f4c6d37d9a119c16ea7d4d253d3b9614
Author: Shane Kumpf <skumpf@apache.org>
Date:   Fri Aug 3 18:20:49 2018 -0600

    YARN-8287. Update documentation and yarn-default related to the Docker runtime. Contributed by Craig Condit

 .../src/main/resources/yarn-default.xml            | 13 +++--
 .../src/site/markdown/DockerContainers.md          | 66 +++++++++++++++++++---
 2 files changed, 64 insertions(+), 15 deletions(-)

commit 48673bc2a8b81e8e3df4e6a2d8502ce7e3fde2f4
Author: Steve Loughran <stevel@apache.org>
Date:   Fri Aug 3 16:06:00 2018 -0700

    HADOOP-15626. FileContextMainOperationsBaseTest.testBuilderCreateAppendExistingFile fails on filesystems without append.
    Contributed by Steve Loughran.

 .../fs/s3a/fileContext/ITestS3AFileContextMainOperations.java       | 6 ++++++
 1 file changed, 6 insertions(+)

commit 2b18bb4f37b9eec504b084e11384ec5ede4e0779
Author: Takanobu Asanuma <tasanuma@apache.org>
Date:   Fri Aug 3 23:38:05 2018 +0900

    HDFS-11610. sun.net.spi.nameservice.NameService has moved to a new location. Contributed by Akira Ajisaka.

 hadoop-hdfs-project/hadoop-hdfs/pom.xml | 19 ++++++++++++++++++-
 1 file changed, 18 insertions(+), 1 deletion(-)

commit 3426f4062ae0867c1ff5c71bd4e3dcb2f1affb89
Author: Sunil G <sunilg@apache.org>
Date:   Fri Aug 3 19:28:16 2018 +0530

    YARN-8615. [UI2] Resource Usage tab shows only memory related info. No info available for vcores/gpu. Contributed by Akhil PB.

 .../per-app-memusage-by-nodes-stacked-barchart.js  | 12 ++-
 ...er-app-ncontainers-by-nodes-stacked-barchart.js |  2 -
 ...per-app-vcoreusage-by-nodes-stacked-barchart.js | 85 ++++++++++++++++++++++
 .../main/webapp/app/templates/yarn-app/charts.hbs  |  8 ++
 4 files changed, 98 insertions(+), 9 deletions(-)

commit 29417dbbf4f6e3881baaaa97408b335c32fe6708
Author: Sunil G <sunilg@apache.org>
Date:   Fri Aug 3 19:12:34 2018 +0530

    YARN-8620. [UI2] YARN Services UI new submission failures are not debuggable. Contributed by Akhil PB.

 .../src/main/webapp/app/adapters/yarn-servicedef.js           | 11 ++++++++++-
 .../src/main/webapp/app/controllers/yarn-app.js               | 10 ++++++++--
 .../src/main/webapp/app/controllers/yarn-deploy-service.js    |  8 ++++++--
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-app.hbs | 10 ++++++----
 4 files changed, 30 insertions(+), 9 deletions(-)

commit 022592ae7941607091fa85e4a9e8608ba53f3814
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Fri Aug 3 13:59:34 2018 +0530

    YARN-8608. [UI2] No information available per application appAttempt about 'Total Outstanding Resource Requests'. Contributed by Akhil PB.

 .../main/webapp/app/controllers/yarn-app/info.js   | 45 +++++++++++++++-------
 .../src/main/webapp/app/templates/yarn-app.hbs     | 11 ++++--
 .../main/webapp/app/templates/yarn-app/info.hbs    | 19 +++++++--
 3 files changed, 53 insertions(+), 22 deletions(-)

commit 33482d35e802ac3468317b844122b347fe486861
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Fri Aug 3 13:58:41 2018 +0530

    YARN-8603. [UI2] Latest run application should be listed first in the RM UI. Contributed by Akhil PB.

 .../src/main/webapp/app/controllers/app-table-columns.js           | 7 +++++++
 .../src/main/webapp/app/controllers/yarn-apps/apps.js              | 4 +++-
 .../hadoop-yarn-ui/src/main/webapp/app/serializers/yarn-app.js     | 2 +-
 3 files changed, 11 insertions(+), 2 deletions(-)

commit db465afb5cf57cce653182b2ae85aa6328f84fdf
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Aug 3 14:53:04 2018 +0530

    HDDS-300. Create a config for volume choosing policy. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |  4 ++
 .../common/src/main/resources/ozone-default.xml    | 11 ++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  | 14 +++++--
 .../container/keyvalue/TestKeyValueHandler.java    | 46 +++++++++++++++++++++-
 4 files changed, 70 insertions(+), 5 deletions(-)

commit 40ab8ee597d730fa2a8a386ef25b0dbecd4e839c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Aug 2 16:48:21 2018 -0700

    HDDS-312. Add blockIterator to Container. Contributed by Bharat Viswanadham.

 .../container/common/interfaces/Container.java     |  8 +++
 .../container/keyvalue/KeyValueContainer.java      |  8 ++-
 .../container/keyvalue/TestKeyValueContainer.java  | 58 ++++++++++++++++++++--
 3 files changed, 69 insertions(+), 5 deletions(-)

commit 889df6f1949921371d6d55dff93d3818d03be3bb
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Aug 2 10:10:12 2018 -0700

    YARN-7948. Enable fair scheduler to refresh maximum allocation for multiple resource types. (Szilard Nemeth via Haibo Chen)

 .../scheduler/fair/FairScheduler.java              |   9 +-
 .../TestFairSchedulerWithMultiResourceTypes.java   | 127 +++++++++++++++++++++
 2 files changed, 135 insertions(+), 1 deletion(-)

commit 12a095a496dd59066d73a7a6c24129b5b6a9d650
Author: Sunil G <sunilg@apache.org>
Date:   Thu Aug 2 22:29:21 2018 +0530

    YARN-7159. Normalize unit of resource objects in RM to avoid unit conversion in critical path. Contributed by Manikandan R.

 .../yarn/api/records/ResourceInformation.java      |  2 +-
 .../hadoop/yarn/util/resource/ResourceUtils.java   |  7 ++
 .../hadoop/yarn/conf/TestResourceInformation.java  |  2 +-
 .../yarn/api/records/impl/pb/ResourcePBImpl.java   | 14 +++-
 .../util/resource/DominantResourceCalculator.java  | 65 ++++------------
 .../hadoop/yarn/util/resource/Resources.java       | 43 ++---------
 .../apache/hadoop/yarn/api/TestResourcePBImpl.java | 90 ++++++++++++++++++++++
 .../yarn/util/resource/TestResourceUtils.java      | 40 ++++++++++
 .../resources/resource-types/node-resources-3.xml  | 33 ++++++++
 .../resourcemanager/TestClientRMService.java       | 88 +++++++++++++++++++++
 .../fair/TestFairSchedulerConfiguration.java       |  2 +-
 11 files changed, 291 insertions(+), 95 deletions(-)

commit 7526815e3234ca352854ecfb142a13f1a188d5bd
Author: Jason Lowe <jlowe@apache.org>
Date:   Thu Aug 2 10:43:48 2018 -0500

    YARN-8263. DockerClient still touches hadoop.tmp.dir. Contributed by Craig Condit

 .../server/nodemanager/LinuxContainerExecutor.java |  6 +--
 .../linux/runtime/DockerLinuxContainerRuntime.java | 17 ++++---
 .../linux/runtime/docker/DockerClient.java         | 53 ----------------------
 .../linux/runtime/docker/DockerCommand.java        |  6 +--
 .../runtime/docker/DockerCommandExecutor.java      | 15 ++----
 .../linux/runtime/docker/DockerInspectCommand.java |  3 +-
 .../linux/runtime/docker/DockerRmCommand.java      |  3 +-
 .../linux/runtime/docker/TestDockerClient.java     |  2 +-
 .../runtime/docker/TestDockerCommandExecutor.java  | 20 ++++----
 9 files changed, 30 insertions(+), 95 deletions(-)

commit 5033d7da8f6f703d8774492c42e31e9b9cb692a5
Author: Sunil G <sunilg@apache.org>
Date:   Thu Aug 2 20:09:24 2018 +0530

    YARN-8318. [UI2] IP address in component page shows N/A. Contributed by Yesha Vora.

 .../src/main/webapp/app/templates/yarn-component-instance/info.hbs      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e83719c830dd4927c8eef26062c56c0d62b2f04f
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Aug 2 19:02:25 2018 +0530

    HDDS-290. putKey is failing with KEY_ALLOCATION_ERROR. Contributed by Xiaoyu Yao.

 hadoop-dist/src/main/compose/ozone/docker-config   |  1 +
 .../test/acceptance/ozonefs/ozonesinglenode.robot  | 49 ++++++++++++++++++++++
 .../org/apache/hadoop/ozone/web/ozShell/Shell.java |  4 ++
 .../ozone/web/ozShell/keys/PutKeyHandler.java      | 16 +++++--
 4 files changed, 66 insertions(+), 4 deletions(-)

commit 7c368575a319f5ba98019418166524bac982086f
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu Aug 2 17:34:17 2018 +0530

    HDDS-304. Process ContainerAction from datanode heartbeat in SCM. Contributed by Nanda Kumar.

 .../scm/container/ContainerActionsHandler.java     | 60 +++++++++++++++++++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 16 ++++-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 22 +++++++
 .../hdds/scm/server/StorageContainerManager.java   |  3 +
 .../scm/container/TestContainerActionsHandler.java | 68 ++++++++++++++++++++++
 5 files changed, 168 insertions(+), 1 deletion(-)

commit 97870ec1f6e40ee863333f29411d71b6c687bbed
Author: Sunil G <sunilg@apache.org>
Date:   Thu Aug 2 16:10:54 2018 +0530

    YARN-8592. [UI2] rmip:port/ui2 endpoint shows a blank page in windows OS and Chrome browser. Contributed by Akhil PB.

 .../hadoop-yarn-ui/src/main/webapp/app/utils/date-utils.js | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit 1ea81169bad5bd6433348ef8e5e7ac12c5a9cb5e
Author: Sunil G <sunilg@apache.org>
Date:   Thu Aug 2 12:41:06 2018 +0530

    YARN-8594. [UI2] Display current logged in user. Contributed by Akhil PB.

 .../main/webapp/app/adapters/cluster-user-info.js  | 29 +++++++++++++++
 .../src/main/webapp/app/controllers/application.js | 10 ++++-
 .../main/webapp/app/models/cluster-user-info.js    | 24 ++++++++++++
 .../src/main/webapp/app/routes/application.js      |  6 ++-
 .../webapp/app/serializers/cluster-user-info.js    | 43 ++++++++++++++++++++++
 .../src/main/webapp/app/styles/app.scss            | 12 +++++-
 .../src/main/webapp/app/templates/application.hbs  | 15 ++++++--
 7 files changed, 132 insertions(+), 7 deletions(-)

commit 41da2050bdec14709a86fa8a5cf7da82415fd989
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Aug 2 11:35:22 2018 +0530

    HDDS-310. VolumeSet shutdown hook fails on datanode restart. Contributed by Bharat Viswanadham.

 .../hadoop/ozone/container/common/volume/VolumeSet.java   | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 735b4925569541fb8e65dc0c668ccc2aa2ffb30b
Author: Sunil G <sunilg@apache.org>
Date:   Thu Aug 2 08:34:09 2018 +0530

    YARN-8593. Add RM web service endpoint to get user information. Contributed by Akhil PB.

 .../server/resourcemanager/ResourceManager.java    |  4 ++
 .../server/resourcemanager/webapp/RMWSConsts.java  |  3 +
 .../webapp/RMWebServiceProtocol.java               | 10 ++++
 .../resourcemanager/webapp/RMWebServices.java      | 12 ++++
 .../webapp/dao/ClusterUserInfo.java                | 64 ++++++++++++++++++++++
 .../resourcemanager/webapp/TestRMWebServices.java  | 21 +++++++
 .../webapp/DefaultRequestInterceptorREST.java      |  8 +++
 .../router/webapp/FederationInterceptorREST.java   |  6 ++
 .../server/router/webapp/RouterWebServices.java    | 12 ++++
 .../router/webapp/MockRESTRequestInterceptor.java  |  6 ++
 .../webapp/PassThroughRESTRequestInterceptor.java  |  6 ++
 11 files changed, 152 insertions(+)

commit 23f394240e1568a38025e63e9dc0842e8c5235f7
Author: Eric Yang <eyang@apache.org>
Date:   Wed Aug 1 20:41:43 2018 -0400

    YARN-8610.  Fixed initiate upgrade error message.
                Contributed by Chandni Singh

 .../main/java/org/apache/hadoop/yarn/service/client/ServiceClient.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f2e29acbfa0b7e1fcecbdcf3e791c96114b456a5
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed Aug 1 12:32:01 2018 -0700

    HADOOP-15476. fix logging for split-dns multihome . Contributed by Ajay Kumar.

 .../hadoop-common/src/main/java/org/apache/hadoop/ipc/Client.java   | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 603a57476ce0bf9514f0432a235f29432ca4c323
Author: Shane Kumpf <skumpf@apache.org>
Date:   Wed Aug 1 12:22:01 2018 -0600

    YARN-8600. RegistryDNS hang when remote lookup does not reply. Contributed by Eric Yang

 .../hadoop/registry/server/dns/LookupTask.java     | 39 ++++++++++++++++++++++
 .../hadoop/registry/server/dns/RegistryDNS.java    | 21 +++++++++---
 .../registry/server/dns/TestRegistryDNS.java       |  8 +++++
 3 files changed, 63 insertions(+), 5 deletions(-)

commit 67c65da261464a0dccb63dc27668109a52e05714
Author: Billie Rinaldi <billie@apache.org>
Date:   Wed Aug 1 08:51:18 2018 -0700

    YARN-8403. Change the log level for fail to download resource from INFO to ERROR. Contributed by Eric Yang

 .../localizer/ResourceLocalizationService.java           | 16 +++++++++++-----
 .../localizer/TestResourceLocalizationService.java       |  3 +++
 2 files changed, 14 insertions(+), 5 deletions(-)

commit d920b9db77be44adc4f8a2a0c2df889af82be04f
Author: Sunil G <sunilg@apache.org>
Date:   Wed Aug 1 14:27:54 2018 +0530

    YARN-8595. [UI2] Container diagnostic information is missing from container page. Contributed by Akhil PB.

 .../src/main/webapp/app/models/yarn-app-attempt.js |  1 +
 .../webapp/app/models/yarn-timeline-container.js   |  1 +
 .../webapp/app/serializers/yarn-app-attempt.js     |  3 +-
 .../app/serializers/yarn-timeline-container.js     |  6 +--
 .../src/main/webapp/app/styles/app.scss            |  9 +++++
 .../app/templates/components/app-attempt-table.hbs |  6 +++
 .../app/templates/components/timeline-view.hbs     | 44 +++++++++++++++-------
 7 files changed, 51 insertions(+), 19 deletions(-)

commit a48a0cc7fd8e7ac1c07b260e6078077824f27c35
Author: Sunil G <sunilg@apache.org>
Date:   Wed Aug 1 12:17:18 2018 +0530

    YARN-8606. Opportunistic scheduling does not work post RM failover. Contributed by Bibin A Chundatt.

 .../OpportunisticContainerAllocatorAMService.java  |  4 +-
 .../server/resourcemanager/ResourceManager.java    | 37 ++++++++++++------
 .../yarn/server/resourcemanager/TestRMHA.java      | 44 ++++++++++++++++++++++
 3 files changed, 72 insertions(+), 13 deletions(-)

commit 5cc8e99147276a059979813f7fd323dd7d77b248
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Jul 31 17:48:44 2018 -0700

    YARN-8522. Application fails with InvalidResourceRequestException. (Zian Chen via wangda)
    
    Change-Id: I34dd7fa49bd4d10580c4a78051033b1068d28f1e

 .../pb/ApplicationSubmissionContextPBImpl.java     | 87 ++++++++++++----------
 1 file changed, 46 insertions(+), 41 deletions(-)

commit f4db753bb6b4648c583722dbe8108973c23ba06f
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Aug 1 09:02:43 2018 +0530

    HDDS-226. Client should update block length in OM while committing the key. Contributed by Shashikant Banerjee.

 .../ozone/client/io/ChunkGroupOutputStream.java    | 22 +++++++++++++-
 .../apache/hadoop/ozone/om/helpers/OmKeyArgs.java  | 26 +++++++++++++---
 .../apache/hadoop/ozone/om/helpers/OmKeyInfo.java  | 29 ++++++++++++++++--
 .../hadoop/ozone/om/helpers/OmKeyLocationInfo.java |  6 +++-
 ...OzoneManagerProtocolClientSideTranslatorPB.java |  8 ++++-
 .../src/main/proto/OzoneManagerProtocol.proto      |  1 +
 .../ozone/client/rpc/TestOzoneRpcClient.java       | 35 ++++++++++++++++++++++
 .../hadoop/ozone/om/TestOmBlockVersioning.java     | 13 +++++++-
 .../org/apache/hadoop/ozone/om/KeyManagerImpl.java |  4 +++
 ...OzoneManagerProtocolServerSideTranslatorPB.java |  5 +++-
 10 files changed, 138 insertions(+), 11 deletions(-)

commit 6310c0d17d6422a595f856a55b4f1fb82be43739
Author: Sunil G <sunilg@apache.org>
Date:   Wed Aug 1 08:33:01 2018 +0530

    YARN-8397. Potential thread leak in ActivitiesManager. Contributed by Rohith Sharma K S.

 .../scheduler/activities/ActivitiesManager.java      | 20 +++++++++++++++-----
 .../scheduler/capacity/CapacityScheduler.java        |  1 +
 2 files changed, 16 insertions(+), 5 deletions(-)

commit 40f9b0c5c13f40921b6976589543a04efa489f93
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue Jul 31 15:21:38 2018 -0700

    HDFS-13322 fuse dfs - uid persists when switching between ticket caches.  Contributed by Istvan Fajth.

 .../src/main/native/fuse-dfs/fuse_connect.c             | 17 +++++++++++++----
 1 file changed, 13 insertions(+), 4 deletions(-)

commit c835fc08adf556d2f848f2f241155cbfe3375695
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Tue Jul 31 16:26:09 2018 -0700

    HDDS-271. Create a block iterator to iterate blocks in a container. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/utils/MetaStoreIterator.java |   2 +-
 .../container/common/interfaces/BlockIterator.java |  57 +++++
 .../container/keyvalue/KeyValueBlockIterator.java  | 148 +++++++++++
 .../keyvalue/TestKeyValueBlockIterator.java        | 275 +++++++++++++++++++++
 4 files changed, 481 insertions(+), 1 deletion(-)

commit c7ebcd76bf3dd14127336951f2be3de772e7826a
Author: Eric Yang <eyang@apache.org>
Date:   Tue Jul 31 18:01:02 2018 -0400

    YARN-8579.  Recover NMToken of previous attempted component data.
                Contributed by Gour Saha

 .../apache/hadoop/yarn/service/ServiceScheduler.java   |  1 +
 .../scheduler/SchedulerApplicationAttempt.java         |  3 ++-
 .../resourcemanager/scheduler/fair/FairScheduler.java  |  8 ++++++--
 .../applicationsmanager/TestAMRestart.java             | 18 ++++++++++++++----
 4 files changed, 23 insertions(+), 7 deletions(-)

commit 4b540bbfcf02d828052999215c6135603d98f5db
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Jul 31 12:07:51 2018 -0700

    YARN-8418. App local logs could leaked if log aggregation fails to initialize for the app. (Bibin A Chundatt via wangda)
    
    Change-Id: I29a23ca4b219b48c92e7975cd44cddb8b0e04104

 .../LogAggregationFileController.java              |  7 ++
 .../server/nodemanager/NodeStatusUpdaterImpl.java  |  1 +
 .../containermanager/ContainerManager.java         |  1 +
 .../containermanager/ContainerManagerImpl.java     | 13 +++-
 .../logaggregation/AppLogAggregator.java           |  8 +++
 .../logaggregation/AppLogAggregatorImpl.java       | 15 ++++
 .../logaggregation/LogAggregationService.java      | 83 ++++++++++++++++++----
 .../containermanager/loghandler/LogHandler.java    |  7 ++
 .../loghandler/NonAggregatingLogHandler.java       |  9 +++
 .../loghandler/event/LogHandlerEventType.java      |  4 +-
 .../event/LogHandlerTokenUpdatedEvent.java         | 26 +++++++
 .../server/nodemanager/DummyContainerManager.java  |  7 ++
 .../logaggregation/TestLogAggregationService.java  | 34 ++++++---
 13 files changed, 187 insertions(+), 28 deletions(-)

commit 8aa93a575e896c609b97ddab58853b1eb95f0dee
Author: Haibo Chen <haibochen@apache.org>
Date:   Tue Jul 31 11:32:40 2018 -0700

    YARN-8605. TestDominantResourceFairnessPolicy.testModWhileSorting is flaky. (Wilfred Spiegelenburg via Haibo Chen)

 .../TestDominantResourceFairnessPolicy.java        | 38 +++++++---------------
 1 file changed, 12 insertions(+), 26 deletions(-)

commit 9fea5c9ee76bd36f273ae93afef5f3ef3c477a53
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue Jul 31 09:36:34 2018 -0700

    YARN-8175. Add support for Node Labels in SLS. Contributed by Abhishek Modi.

 .../java/org/apache/hadoop/yarn/sls/SLSRunner.java | 93 ++++++++++++++++------
 .../hadoop/yarn/sls/appmaster/AMSimulator.java     |  9 ++-
 .../hadoop/yarn/sls/appmaster/MRAMSimulator.java   |  5 +-
 .../yarn/sls/appmaster/StreamAMSimulator.java      |  5 +-
 .../hadoop/yarn/sls/conf/SLSConfiguration.java     |  1 +
 .../hadoop/yarn/sls/nodemanager/NMSimulator.java   | 13 ++-
 .../org/apache/hadoop/yarn/sls/utils/SLSUtils.java | 58 +++++++++-----
 .../hadoop/yarn/sls/appmaster/TestAMSimulator.java | 35 +++++++-
 .../apache/hadoop/yarn/sls/utils/TestSLSUtils.java | 64 ++++++++++-----
 .../src/test/resources/nodes-with-resources.json   |  8 +-
 .../apache/hadoop/yarn/client/cli/RMAdminCLI.java  | 71 +----------------
 .../hadoop/yarn/client/util/YarnClientUtils.java   | 77 ++++++++++++++++++
 12 files changed, 301 insertions(+), 138 deletions(-)

commit b28bdc7e8b488ef0df62a92bcfe7eb74bbe177c1
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 31 19:50:40 2018 +0530

    HDDS-279. DeleteBlocks command should not be sent for open containers. Contributed by Lokesh Jain.

 .../block/DatanodeDeletedBlockTransactions.java    | 18 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  8 +-
 .../org/apache/hadoop/ozone/OzoneTestUtils.java    | 92 ++++++++++++++++++++++
 .../hadoop/ozone/TestStorageContainerManager.java  |  8 ++
 .../container/common/TestBlockDeletingService.java | 17 +++-
 .../commandhandler/TestBlockDeletion.java          | 47 +++++------
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  3 +
 7 files changed, 152 insertions(+), 41 deletions(-)

commit 7631e0adaefcccdbee693089b4c391bea4107a19
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 31 17:27:51 2018 +0530

    HDDS-305. Datanode StateContext#addContainerActionIfAbsent will add container action even if there already is a ContainerAction. Contributed by Nanda kumar.

 .../hadoop/ozone/container/common/impl/HddsDispatcher.java  | 13 +------------
 .../src/main/proto/StorageContainerDatanodeProtocol.proto   |  2 +-
 .../common/states/endpoint/TestHeartbeatEndpointTask.java   |  5 +----
 3 files changed, 3 insertions(+), 17 deletions(-)

commit 3e06a5dcea8224ba71aec284df23b47d536bb06d
Author: Jonathan Hung <jhung@linkedin.com>
Date:   Mon Jul 30 17:41:01 2018 -0700

    YARN-7974. Allow updating application tracking url after registration. Contributed by Jonathan Hung

 .../yarn/api/protocolrecords/AllocateRequest.java  | 47 ++++++++++++-
 .../src/main/proto/yarn_service_protos.proto       |  1 +
 .../apache/hadoop/yarn/client/api/AMRMClient.java  | 11 ++++
 .../yarn/client/api/async/AMRMClientAsync.java     | 11 ++++
 .../client/api/async/impl/AMRMClientAsyncImpl.java |  5 ++
 .../yarn/client/api/impl/AMRMClientImpl.java       | 11 ++++
 .../yarn/client/api/impl/TestAMRMClient.java       | 77 ++++++++++++++++++++++
 .../impl/pb/AllocateRequestPBImpl.java             | 27 +++++++-
 .../resourcemanager/DefaultAMSProcessor.java       |  2 +-
 .../rmapp/attempt/RMAppAttemptImpl.java            | 20 ++++++
 .../event/RMAppAttemptStatusupdateEvent.java       | 11 ++++
 .../TestApplicationMasterService.java              | 34 ++++++++++
 .../yarn/server/resourcemanager/TestRMRestart.java | 45 +++++++++++++
 13 files changed, 298 insertions(+), 4 deletions(-)

commit ee53602a8179e76f4102d9062d0bebe8bb09d875
Author: Tsz Wo Nicholas Sze <szetszwo@apache.org>
Date:   Mon Jul 30 15:00:29 2018 -0700

    HDDS-293. Reduce memory usage and object creation in KeyData.

 .../ozone/container/common/helpers/KeyData.java    |  84 ++++++++++-----
 .../common/impl/OpenContainerBlockMap.java         |   2 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |   3 -
 .../container/common/helpers/TestKeyData.java      | 119 +++++++++++++++++++++
 4 files changed, 179 insertions(+), 29 deletions(-)

commit 2b39ad26984d641bad57db2cfcc0b7515ef95f46
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Mon Jul 30 23:25:19 2018 +0530

    YARN-8584. Several typos in Log Aggregation related classes. Contributed by Szilard Nemeth.

 .../AggregatedLogDeletionService.java              |  4 ++--
 .../yarn/logaggregation/AggregatedLogFormat.java   |  8 +++----
 .../LogAggregationFileController.java              |  6 ++---
 .../ifile/IndexedFileAggregatedLogsBlock.java      |  6 ++---
 .../ifile/LogAggregationIndexedFileController.java | 26 +++++++++++-----------
 .../tfile/LogAggregationTFileController.java       |  2 +-
 .../TestAggregatedLogDeletionService.java          |  6 ++---
 .../logaggregation/AppLogAggregatorImpl.java       |  2 +-
 .../logaggregation/LogAggregationService.java      |  6 ++---
 .../tracker/NMLogAggregationStatusTracker.java     |  4 ++--
 10 files changed, 35 insertions(+), 35 deletions(-)

commit e8f952ef06ae05d2b504300d6f19beb8a052b6f1
Author: Chen Liang <cliang@apache.org>
Date:   Mon Jul 30 10:25:07 2018 -0700

    HADOOP-15637. LocalFs#listLocatedStatus does not filter out hidden .crc files. Contributed by Erik Krogen.

 .../main/java/org/apache/hadoop/fs/ChecksumFs.java | 37 +++++++++++++++++++++
 .../fs/FileContextMainOperationsBaseTest.java      | 38 ++++++++++++++++++++++
 2 files changed, 75 insertions(+)

commit 3517a47897457c11096ab57a4cb0b096a838a3ec
Author: Nanda kumar <nanda@apache.org>
Date:   Mon Jul 30 21:18:42 2018 +0530

    HDDS-287. Add Close ContainerAction to Datanode#StateContext when the container gets full. Contributed by Nanda kumar.

 .../container/common/impl/HddsDispatcher.java      |  63 ++++++++-
 .../common/statemachine/DatanodeStateMachine.java  |   2 +-
 .../common/statemachine/StateContext.java          |  14 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   6 +-
 .../container/common/impl/TestHddsDispatcher.java  | 152 +++++++++++++++++++++
 .../ozone/container/common/impl/package-info.java  |  22 +++
 .../container/common/interfaces/TestHandler.java   |   4 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../ozone/container/common/TestEndPoint.java       |  12 +-
 .../common/impl/TestCloseContainerHandler.java     |   2 +-
 .../container/metrics/TestContainerMetrics.java    |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../container/server/TestContainerServer.java      |   2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   6 +-
 14 files changed, 270 insertions(+), 21 deletions(-)

commit 952dc2fd557f9aaf0f144ee32d0b7731a84bad73
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 30 18:45:58 2018 +0530

    HDDS-302. Fix javadoc and add implementation details in ContainerStateMachine. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 30 ++------------------
 .../java/org/apache/hadoop/hdds/HddsUtils.java     | 33 ++++++++++++++++++++++
 .../server/ratis/ContainerStateMachine.java        | 14 ++++++++-
 3 files changed, 49 insertions(+), 28 deletions(-)

commit 3108d27edde941d153a58f71fb1096cce2995531
Author: Brahma Reddy Battula <brahma@apache.org>
Date:   Mon Jul 30 15:50:04 2018 +0530

    HDFS-12716. 'dfs.datanode.failed.volumes.tolerated' to support minimum number of volumes to be available. Contributed by Ranith Sardar and usharani

 .../hadoop/hdfs/server/datanode/DataNode.java      |  7 ++--
 .../datanode/checker/DatasetVolumeChecker.java     |  6 ++--
 .../datanode/checker/StorageLocationChecker.java   | 28 ++++++++++-----
 .../datanode/fsdataset/impl/FsDatasetImpl.java     | 40 +++++++++++++++++-----
 .../src/main/resources/hdfs-default.xml            |  2 ++
 .../TestDataNodeVolumeFailureToleration.java       |  6 +++-
 6 files changed, 68 insertions(+), 21 deletions(-)

commit 63e08ec071852640babea9e39780327a0907712a
Author: Sunil G <sunilg@apache.org>
Date:   Mon Jul 30 14:48:04 2018 +0530

    YARN-8591. [ATSv2] NPE while checking for entity acl in non-secure cluster. Contributed by Rohith Sharma K S.

 .../yarn/server/timelineservice/reader/TimelineReaderWebServices.java | 3 ++-
 .../timelineservice/reader/TestTimelineReaderWebServicesBasicAcl.java | 4 ++++
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 0857f116b754d83d3c540cd6f989087af24fef27
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Mon Jul 30 10:53:44 2018 +0800

    HADOOP-15607. AliyunOSS: fix duplicated partNumber issue in AliyunOSSBlockOutputStream. Contributed by Jinhu Wu.

 .../fs/aliyun/oss/AliyunOSSBlockOutputStream.java  | 59 +++++++++++++---------
 .../fs/aliyun/oss/AliyunOSSFileSystemStore.java    |  2 +
 .../aliyun/oss/TestAliyunOSSBlockOutputStream.java | 12 ++++-
 3 files changed, 49 insertions(+), 24 deletions(-)

commit 007e6f51135adb5864f6bfc258010fd09576387b
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jul 28 14:50:43 2018 -0700

    HDDS-248. Refactor DatanodeContainerProtocol.proto Contributed by Hanisha Koneru.

 .../hdds/scm/storage/ContainerProtocolCalls.java   | 37 ++++++---
 .../src/main/proto/DatanodeContainerProtocol.proto | 96 ++++++++++------------
 .../container/common/impl/HddsDispatcher.java      | 51 +-----------
 .../CloseContainerCommandHandler.java              |  8 +-
 .../server/ratis/ContainerStateMachine.java        |  6 +-
 .../container/keyvalue/KeyValueContainerData.java  |  9 --
 .../ozone/container/keyvalue/KeyValueHandler.java  | 16 ++--
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 12 ++-
 .../scm/cli/container/InfoContainerHandler.java    |  1 -
 .../ozone/container/ContainerTestHelper.java       | 59 +++++++------
 .../common/impl/TestCloseContainerHandler.java     | 18 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 19 +++--
 13 files changed, 148 insertions(+), 186 deletions(-)

commit feb795b58d2a3c20bdbddea1638a83f6637d3fc9
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Jul 29 01:02:24 2018 +0530

    HDDS-273. DeleteLog entries should be purged only after corresponding DNs commit the transaction. Contributed by Lokesh Jain.

 .../commandhandler/DeleteBlocksCommandHandler.java |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   2 +-
 .../block/DatanodeDeletedBlockTransactions.java    |  47 +++--
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |  23 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java | 123 +++++++----
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  19 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java | 232 +++++++++++----------
 8 files changed, 256 insertions(+), 206 deletions(-)

commit 6b038f82da8fa8c1c4f1e1bf448eacc6dd523044
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat Jul 28 22:04:11 2018 +0530

    HDDS-246. Datanode should throw BlockNotCommittedException for uncommitted blocks to Ozone Client. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../common/impl/OpenContainerBlockMap.java         | 12 ++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  | 12 ++++--
 .../ozone/scm/TestCommittedBlockLengthAPI.java     | 45 +++++++++++++++++-----
 4 files changed, 57 insertions(+), 13 deletions(-)

commit 3d586841aba99c7df98b2b4d3e48ec0144bad086
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Sat Jul 28 20:52:39 2018 +0530

    YARN-8558. NM recovery level db not cleaned up properly on container finish. Contributed by Bibin A Chundatt.

 .../nodemanager/recovery/NMLeveldbStateStoreService.java   | 14 ++++++++++----
 .../recovery/TestNMLeveldbStateStoreService.java           |  7 +++++++
 2 files changed, 17 insertions(+), 4 deletions(-)

commit 59adeb8d7f2f04bc56d37b2a2e65596fee6e4894
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu Jul 26 10:25:47 2018 -0600

    HADOOP-15636. Follow-up from HADOOP-14918; restoring test under new name. Contributed by Gabor Bota.

 .../fs/s3a/s3guard/ITestDynamoDBMetadataStore.java | 649 +++++++++++++++++++++
 1 file changed, 649 insertions(+)

commit ed9d60e888d0acfd748fda7f66249f5b79a3ed6d
Author: Eric Yang <eyang@apache.org>
Date:   Fri Jul 27 19:33:58 2018 -0400

    YARN-8508.  Release GPU resource for killed container.
                Contributed by Chandni Singh

 .../server/nodemanager/LinuxContainerExecutor.java | 34 +++++++++++-----------
 .../nodemanager/TestLinuxContainerExecutor.java    |  9 +++++-
 2 files changed, 25 insertions(+), 18 deletions(-)

commit 79091cf76f6e966f64ac1d65e43e95782695e678
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jul 27 15:23:57 2018 -0700

    YARN-8596. Allow SQLFederationStateStore to submit the same app in the same subcluster. Contributed by Giovanni Matteo Fumarola.

 .../store/impl/SQLFederationStateStore.java           | 14 +++++++-------
 .../store/impl/FederationStateStoreBaseTest.java      | 19 +++++++++++++++++++
 2 files changed, 26 insertions(+), 7 deletions(-)

commit 2cccf4061cc4021c48e29879700dbc94f832b7d1
Author: Robert Kanter <rkanter@apache.org>
Date:   Fri Jul 27 14:35:03 2018 -0700

    YARN-8517. getContainer and getContainers ResourceManager REST API methods are not documented (snemeth via rkanter)

 .../InvalidResourceRequestException.java           |  36 ++
 .../resourcemanager/DefaultAMSProcessor.java       |  23 +-
 .../resourcemanager/scheduler/SchedulerUtils.java  |  55 +-
 .../scheduler/TestSchedulerUtils.java              | 630 +++++++++++----------
 4 files changed, 430 insertions(+), 314 deletions(-)

commit fecbac499e2ae6b3334773a997d454a518f43e01
Author: Robert Kanter <rkanter@apache.org>
Date:   Fri Jul 27 14:32:34 2018 -0700

    YARN-8566. Add diagnostic message for unschedulable containers (snemeth via rkanter)

 .../src/site/markdown/ResourceManagerRest.md       | 285 +++++++++++++++++++++
 1 file changed, 285 insertions(+)

commit b429f19d32d8f60a3535e047ef10cfb3edeb54c8
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri Jul 27 11:30:19 2018 -0700

    YARN-8571. Validate service principal format prior to launching yarn service. Contributed by Eric Yang

 .../service/exceptions/RestApiErrorMessages.java   |  4 ++++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  | 10 +++++++++
 .../hadoop/yarn/service/TestServiceApiUtil.java    | 25 ++++++++++++++++++++++
 3 files changed, 39 insertions(+)

commit 1c40bc283645db5a661dc9f004a0bf34832a0902
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Jul 27 10:14:01 2018 -0700

    HDFS-13765. Fix javadoc for FSDirMkdirOp#createParentDirectories. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/hdfs/server/namenode/FSDirMkdirOp.java    | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 3cc7ce816e4ffb7287aa05cc5e00b2e058b4a2a4
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jul 27 07:12:21 2018 -0700

    HDDS-270. Move generic container util functions to ContianerUtils.
    Contributed by Hanisha Koneru.

 .../container/common/helpers/ContainerUtils.java   | 34 +++++++++++++---------
 .../container/common/interfaces/Container.java     |  6 ++++
 .../container/keyvalue/KeyValueContainer.java      | 22 +++++++++-----
 .../helpers/KeyValueContainerLocationUtil.java     | 17 -----------
 .../ozone/container/ozoneimpl/ContainerReader.java | 27 ++++++-----------
 .../container/keyvalue/TestKeyValueContainer.java  | 24 +++++----------
 .../common/impl/TestContainerPersistence.java      | 13 ++++-----
 7 files changed, 62 insertions(+), 81 deletions(-)

commit 64e739e344ac474046d4f4ecf0865dd92be13762
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jul 27 06:11:56 2018 -0700

    HDFS-13727. Log full stack trace if DiskBalancer exits with an unhandled exception.
    Contributed by Gabor Bota.

 .../src/main/java/org/apache/hadoop/hdfs/tools/DiskBalancerCLI.java   | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 8d3c068e59fdddd18e3f8260713fee83c458aa1d
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jul 26 20:02:13 2018 -0400

    YARN-8429. Improve diagnostic message when artifact is not set properly.
               Contributed by Gour Saha

 .../service/exceptions/RestApiErrorMessages.java   |  6 +-
 .../service/provider/AbstractClientProvider.java   | 14 ++---
 .../defaultImpl/DefaultClientProvider.java         | 22 +++++---
 .../provider/docker/DockerClientProvider.java      | 15 ++---
 .../provider/tarball/TarballClientProvider.java    | 27 +++++----
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  4 +-
 .../hadoop/yarn/service/TestServiceApiUtil.java    |  9 ++-
 .../providers/TestAbstractClientProvider.java      | 29 +++++-----
 .../providers/TestDefaultClientProvider.java       | 66 ++++++++++++++++++++++
 9 files changed, 138 insertions(+), 54 deletions(-)

commit 77721f39e26b630352a1f4087524a3fbd21ff06e
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jul 26 18:35:36 2018 -0400

    HADOOP-15593.  Fixed NPE in UGI spawnAutoRenewalThreadForUserCreds.
                   Contributed by Gabor Bota

 .../hadoop/security/UserGroupInformation.java      | 179 +++++++++++++--------
 .../hadoop/security/TestUserGroupInformation.java  |  38 +++++
 2 files changed, 148 insertions(+), 69 deletions(-)

commit 40fad32824d2f8f960c779d78357e62103453da0
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jul 26 18:22:57 2018 -0400

    YARN-8545.  Return allocated resource to RM for failed container.
                Contributed by Chandni Singh

 .../hadoop/yarn/service/ServiceScheduler.java      |  3 +-
 .../hadoop/yarn/service/component/Component.java   | 42 ++++++++++++----------
 .../component/instance/ComponentInstance.java      | 21 +++++++----
 .../component/instance/ComponentInstanceEvent.java |  2 ++
 .../containerlaunch/ContainerLaunchService.java    | 12 +++++--
 .../apache/hadoop/yarn/service/MockServiceAM.java  | 34 +++++++++++++++++-
 .../apache/hadoop/yarn/service/TestServiceAM.java  | 35 ++++++++++++++++++
 .../yarn/service/component/TestComponent.java      |  3 +-
 .../component/instance/TestComponentInstance.java  | 26 +++++++-------
 9 files changed, 135 insertions(+), 43 deletions(-)

commit d70d84570575574b7e3ad0f00baf54f1dde76d97
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 26 13:17:37 2018 -0700

    HDDS-291. Initialize hadoop metrics system in standalone hdds datanodes. Contributed by Elek Marton.

 .../src/main/java/org/apache/hadoop/ozone/HddsDatanodeService.java      | 2 ++
 .../ozone/container/common/statemachine/SCMConnectionManager.java       | 2 +-
 2 files changed, 3 insertions(+), 1 deletion(-)

commit fd31cb6cfeef0c7e9bb0a054cb0f78853df8976f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 26 13:15:27 2018 -0700

    HDDS-277. PipelineStateMachine should handle closure of pipelines in SCM. Contributed by Mukul Kumar Singh.

 .../container/common/helpers/ContainerInfo.java    |   7 +-
 .../scm/container/CloseContainerEventHandler.java  |  28 ++--
 .../hdds/scm/container/ContainerMapping.java       |  16 ++-
 .../hdds/scm/container/ContainerStateManager.java  |  11 ++
 .../scm/container/states/ContainerStateMap.java    |   2 +-
 .../hdds/scm/pipelines/Node2PipelineMap.java       |  33 +++--
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  31 +++--
 .../hdds/scm/pipelines/PipelineSelector.java       |  70 ++++++++--
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  14 +-
 .../standalone/StandaloneManagerImpl.java          |  13 +-
 .../hdds/scm/server/StorageContainerManager.java   |   2 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |   4 +-
 .../container/TestCloseContainerEventHandler.java  |  13 +-
 .../hdds/scm/container/TestContainerMapping.java   |   4 +-
 .../scm/container/closer/TestContainerCloser.java  |   4 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   3 +-
 .../hdds/scm/pipeline/TestPipelineClose.java       | 152 +++++++++++++++++++++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   4 +-
 18 files changed, 331 insertions(+), 80 deletions(-)

commit be150a17b15d15f5de6d4839d5e805e8d6c57850
Author: Xiao Chen <xiao@apache.org>
Date:   Thu Jul 26 10:23:30 2018 -0700

    HDFS-13622. mkdir should print the parent directory in the error message when parent directories do not exist. Contributed by Shweta.

 .../src/main/java/org/apache/hadoop/fs/shell/Mkdir.java     | 13 ++++++++-----
 .../src/test/java/org/apache/hadoop/hdfs/TestDFSShell.java  |  8 ++++++++
 .../hadoop-hdfs/src/test/resources/testHDFSConf.xml         |  4 ++--
 3 files changed, 18 insertions(+), 7 deletions(-)

commit a19229594e48fad9f50dbdb1f0b2fcbf7443ce66
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 26 19:00:23 2018 +0530

    HDDS-201. Add name for LeaseManager. Contributed by Sandeep Nemuri.

 .../org/apache/hadoop/ozone/lease/LeaseManager.java | 14 +++++++++-----
 .../apache/hadoop/ozone/lease/TestLeaseManager.java | 21 ++++++++++-----------
 .../hadoop/hdds/server/events/TestEventWatcher.java |  2 +-
 .../hadoop/hdds/scm/container/ContainerMapping.java |  4 ++--
 .../hadoop/hdds/scm/pipelines/PipelineSelector.java |  4 ++--
 .../hdds/scm/server/StorageContainerManager.java    |  3 ++-
 .../replication/TestReplicationManager.java         |  4 ++--
 7 files changed, 28 insertions(+), 24 deletions(-)

commit 9089790cabb4771198be0fe64c1317a3ff1c80f1
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu Jul 26 18:08:28 2018 +0800

    HADOOP-15611. Log more details for FairCallQueue. Contributed by Ryan Wu.

 .../src/main/java/org/apache/hadoop/ipc/DecayRpcScheduler.java    | 8 ++++++++
 .../java/org/apache/hadoop/ipc/WeightedRoundRobinMultiplexer.java | 3 +++
 2 files changed, 11 insertions(+)

commit f93ecf5c1e0b3db27424963814fc01ec43eb76e0
Author: Eric Yang <eyang@apache.org>
Date:   Wed Jul 25 18:49:30 2018 -0400

    YARN-8330.  Improved publishing ALLOCATED events to ATS.
                Contributed by Suma Shivaprasad

 .../rmcontainer/RMContainerImpl.java               | 64 ++++++++++++----------
 .../rmcontainer/TestRMContainerImpl.java           | 11 +++-
 2 files changed, 43 insertions(+), 32 deletions(-)

commit e95c5e9f62452ee848875ec2f8642eab4992cd23
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Wed Jul 25 11:04:18 2018 -0700

    HDFS-11060. make DEFAULT_MAX_CORRUPT_FILEBLOCKS_RETURNED configurable. Contributed by Lantao Jin.

 .../src/main/java/org/apache/hadoop/hdfs/DFSConfigKeys.java      | 3 +++
 .../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java     | 8 ++++++--
 .../hadoop-hdfs/src/main/resources/hdfs-default.xml              | 9 +++++++++
 .../hadoop/hdfs/server/namenode/TestListCorruptFileBlocks.java   | 2 +-
 4 files changed, 19 insertions(+), 3 deletions(-)

commit 9485c9aee6e9bb935c3e6ae4da81d70b621781de
Author: Eric E Payne <ericp@oath.com>
Date:   Wed Jul 25 16:22:04 2018 +0000

    YARN-4606. CapacityScheduler: applications could get starved because computation of #activeUsers considers pending apps. Contributed by Manikandan R

 .../scheduler/capacity/UsersManager.java           |  27 ++++-
 .../scheduler/capacity/TestCapacityScheduler.java  | 128 +++++++++++++++++++++
 .../capacity/TestContainerAllocation.java          |  43 +++++++
 3 files changed, 197 insertions(+), 1 deletion(-)

commit 5f0b924360b345f491c2d6693882f1069c7f3508
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Jul 25 21:09:11 2018 +0530

    HADOOP-15395. DefaultImpersonationProvider fails to parse proxy user config if username has . in it. Contributed by Ajay Kumar.

 .../authorize/DefaultImpersonationProvider.java    |   4 +-
 .../TestDefaultImpersonationProvider.java          | 100 +++++++++++++++++++++
 2 files changed, 102 insertions(+), 2 deletions(-)

commit 3c4fbc635e8ed81cfbec00793a3767bb47f6d176
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 20:27:03 2018 +0530

    HDDS-288. Fix bugs in OpenContainerBlockMap. Contributed by Tsz Wo Nicholas Sze.

 .../common/impl/OpenContainerBlockMap.java         | 139 ++++++++-------------
 .../ozone/container/keyvalue/KeyValueHandler.java  |  10 +-
 .../common/impl/TestCloseContainerHandler.java     |  30 ++---
 3 files changed, 73 insertions(+), 106 deletions(-)

commit 3d3158cea4580eb2e3b2af635c3a7d30f4dbb873
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Wed Jul 25 16:19:14 2018 +0530

    YARN-8577. Fix the broken anchor in SLS site-doc. Contributed by Weiwei Yang.

 hadoop-tools/hadoop-sls/src/site/markdown/SchedulerLoadSimulator.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b507f83e15b47163724d550dfeb41627f26fd551
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 18:55:26 2018 +0530

    HDDS-266. Integrate checksum into .container file. Contributed by Hanisha Koneru.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +-
 .../container/common/helpers/ContainerUtils.java   |  59 +++++++++-
 .../ozone/container/common/impl/ContainerData.java |  66 ++++++++++-
 .../container/common/impl/ContainerDataYaml.java   |  98 +++++++++++-----
 .../container/keyvalue/KeyValueContainer.java      | 121 ++++++-------------
 .../container/keyvalue/KeyValueContainerData.java  |  30 ++---
 .../helpers/KeyValueContainerLocationUtil.java     |  32 ++---
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 130 ++++-----------------
 .../ozone/container/ozoneimpl/ContainerReader.java |  92 ++++++++-------
 .../common/impl/TestContainerDataYaml.java         | 107 ++++++++++++-----
 .../container/keyvalue/TestKeyValueContainer.java  |  21 ++--
 .../src/test/resources/additionalfields.container  |   3 +-
 .../test/resources/incorrect.checksum.container    |  11 ++
 .../src/test/resources/incorrect.container         |   3 +-
 hadoop-hdds/pom.xml                                |   1 +
 .../common/impl/TestContainerPersistence.java      |   8 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   7 ++
 17 files changed, 430 insertions(+), 361 deletions(-)

commit 43db0cb518375eb767401fa525ea6b5026ed9a8a
Author: Nanda kumar <nanda@apache.org>
Date:   Wed Jul 25 18:11:35 2018 +0530

    HDDS-285. Create a generic Metadata Iterator. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/utils/LevelDBStore.java |   5 +
 .../apache/hadoop/utils/LevelDBStoreIterator.java  |  64 +++++++
 .../org/apache/hadoop/utils/MetaStoreIterator.java |  39 ++++
 .../org/apache/hadoop/utils/MetadataStore.java     |  55 ++++++
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   5 +
 .../apache/hadoop/utils/RocksDBStoreIterator.java  |  66 +++++++
 .../org/apache/hadoop/utils/TestMetadataStore.java | 206 +++++++++++++--------
 7 files changed, 366 insertions(+), 74 deletions(-)

commit 5be9f4a5d05c9cb99348719fe35626b1de3055db
Author: Weiwei Yang <wwei@apache.org>
Date:   Wed Jul 25 17:35:27 2018 +0800

    YARN-8546. Resource leak caused by a reserved container being released more than once under async scheduling. Contributed by Tao Yang.

 .../scheduler/common/fica/FiCaSchedulerApp.java    | 15 ++++
 .../TestCapacitySchedulerAsyncScheduling.java      | 89 ++++++++++++++++++++++
 2 files changed, 104 insertions(+)

commit 955f795101c1a0ae176b4cebda3ffbe9850dd687
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed Jul 25 14:15:54 2018 +0530

    HDDS-203. Add getCommittedBlockLength API in datanode. Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/hdds/client/BlockID.java     |  20 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  28 +++
 .../ozone/container/common/helpers/KeyData.java    |  27 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto |  17 +-
 .../container/common/impl/HddsDispatcher.java      |   2 +
 .../ozone/container/keyvalue/KeyValueHandler.java  |  34 ++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  20 +++
 .../container/keyvalue/impl/KeyManagerImpl.java    |  27 +++
 .../container/keyvalue/interfaces/KeyManager.java  |   7 +
 .../ozone/scm/TestCommittedBlockLengthAPI.java     | 191 +++++++++++++++++++++
 10 files changed, 368 insertions(+), 5 deletions(-)

commit 81d59506e539673edde12e19c0df5c2edd9d02ad
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Jul 24 21:45:14 2018 -0700

    HADOOP-15609. Retry KMS calls when SSLHandshakeException occurs. Contributed by Kitti Nanasi.

 .../key/kms/LoadBalancingKMSClientProvider.java    | 17 +++--
 .../kms/TestLoadBalancingKMSClientProvider.java    | 79 ++++++++++++++++++++++
 2 files changed, 92 insertions(+), 4 deletions(-)

commit 26864471c24bf389ab8fc913decc3d069404688b
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Jul 24 21:42:00 2018 -0700

    HDFS-13761. Add toString Method to AclFeature Class. Contributed by Shweta.

 .../main/java/org/apache/hadoop/hdfs/server/namenode/AclFeature.java | 5 +++++
 1 file changed, 5 insertions(+)

commit 849c45db187224095b13fe297a4d7377fbb9d2cd
Author: Daniel Templeton <templedf@apache.org>
Date:   Tue Jul 24 15:34:19 2018 -0700

    HDFS-13448. HDFS Block Placement - Ignore Locality for First Block Replica
    (Contributed by BELUGA BEHR via Daniel Templeton)
    
    Change-Id: I965d1cfa642ad24296038b83e3d5c9983545267d

 .../main/java/org/apache/hadoop/fs/CreateFlag.java |  9 ++-
 .../java/org/apache/hadoop/hdfs/AddBlockFlag.java  | 11 ++-
 .../org/apache/hadoop/hdfs/DFSOutputStream.java    |  3 +
 .../apache/hadoop/hdfs/DistributedFileSystem.java  | 11 +++
 .../src/main/proto/ClientNamenodeProtocol.proto    |  1 +
 .../BlockPlacementPolicyDefault.java               |  4 +-
 .../hdfs/server/namenode/FSDirWriteFileOp.java     | 30 +++++---
 .../hdfs/server/namenode/TestFSDirWriteFileOp.java | 79 ++++++++++++++++++++++
 8 files changed, 134 insertions(+), 14 deletions(-)

commit 6bec03cfc8bdcf6aa3df9c22231ab959ba31f2f5
Author: Gera Shegalov <gera@apache.org>
Date:   Tue Jul 17 00:05:39 2018 -0700

    HADOOP-15612. Improve exception when tfile fails to load LzoCodec. (gera)

 .../apache/hadoop/io/file/tfile/Compression.java   | 31 +++++++++++++-------
 .../hadoop/io/file/tfile/TestCompression.java      | 34 +++++++++++++++++++++-
 2 files changed, 53 insertions(+), 12 deletions(-)

commit ea2c6c8c9a55813a19b3dbd0d29747d6a7739030
Author: Haibo Chen <haibochen@apache.org>
Date:   Tue Jul 24 12:46:15 2018 -0700

    YARN-7133. Clean up lock-try order in fair scheduler. (Szilard Nemeth via Haibo Chen)

 .../scheduler/fair/FairScheduler.java              | 36 +++++++++++-----------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit e673dd1d4d78b66e7b6705ec6dc3679d2347d704
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Tue Jul 24 18:36:49 2018 +0530

    YARN-8541. RM startup failure on recovery after user deletion. Contributed by Bibin A Chundatt.

 .../yarn/server/resourcemanager/RMAppManager.java  | 48 +++++++++++-----------
 .../placement/PlacementManager.java                |  9 ----
 .../TestWorkPreservingRMRestart.java               | 48 ++++++++++++++++++++++
 .../placement/TestPlacementManager.java            | 20 ++++-----
 4 files changed, 80 insertions(+), 45 deletions(-)

commit cd0b9f13805affcc91a2cba42b176bb9031378eb
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 24 10:16:53 2018 -0700

    HDDS-282. Consolidate logging in scm/container-service. Contributed by Elek Marton.

 .../ozone/container/common/statemachine/EndpointStateMachine.java | 4 ++--
 .../container/common/states/endpoint/RegisterEndpointTask.java    | 3 +--
 .../keyvalue/statemachine/background/BlockDeletingService.java    | 8 +++++---
 .../java/org/apache/hadoop/hdds/server/events/EventQueue.java     | 3 +--
 .../java/org/apache/hadoop/hdds/server/events/TypedEvent.java     | 6 ++++--
 5 files changed, 13 insertions(+), 11 deletions(-)

commit 35ce6eb1f526ce3db7e015fb1761eee15604100c
Author: Sunil G <sunilg@apache.org>
Date:   Tue Jul 24 22:20:06 2018 +0530

    YARN-7748. TestContainerResizing.testIncreaseContainerUnreservedWhenApplicationCompleted fails due to multiple container fail events. Contributed by Weiwei Yang.

 .../scheduler/capacity/TestContainerResizing.java      | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

commit 773d312f7412d5050c106ed3a1cd0d1934bfa2e0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jul 24 21:23:20 2018 +0530

    HDDS-272. TestBlockDeletingService is failing with DiskOutOfSpaceException. Contributed by Lokesh Jain.

 .../ozone/container/keyvalue/KeyValueHandler.java  |  2 +-
 .../background/BlockDeletingService.java           |  9 +--
 .../testutils/BlockDeletingServiceTestImpl.java    |  3 +-
 .../container/common/TestBlockDeletingService.java | 90 +++++++++++++---------
 4 files changed, 60 insertions(+), 44 deletions(-)

commit ff7c2eda34c2c40ad71b50df6462a661bd213fbd
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Tue Jul 24 16:17:20 2018 +0530

    YARN-8548. AllocationRespose proto setNMToken initBuilder not done. Contributed by Bilwa S T.

 .../impl/pb/AllocateResponsePBImpl.java              |  1 +
 .../server/resourcemanager/recovery/TestProtos.java  | 20 ++++++++++++++++++++
 2 files changed, 21 insertions(+)

commit 84612788339392fcda1aef0e27c43f5c6b2a19e5
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Tue Jul 24 13:09:17 2018 +0530

    YARN-8544. [DS] AM registration fails when hadoop authorization is enabled. Contributed by Bibin A Chundatt.

 .../hadoop-common/src/main/conf/hadoop-policy.xml  | 20 +++++++++++++++++
 .../hadoop-yarn/dev-support/findbugs-exclude.xml   |  4 ++++
 .../apache/hadoop/yarn/conf/YarnConfiguration.java |  7 ++++++
 .../yarn/conf/TestYarnConfigurationFields.java     |  4 ++++
 .../nodemanager/amrmproxy/AMRMProxyService.java    |  8 +++++++
 .../collectormanager/NMCollectorService.java       |  2 +-
 .../containermanager/ContainerManagerImpl.java     |  2 +-
 .../localizer/ResourceLocalizationService.java     |  2 +-
 .../security/authorize/NMPolicyProvider.java       | 25 ++++++++++++++++++++--
 .../security/authorize/RMPolicyProvider.java       |  3 +++
 10 files changed, 72 insertions(+), 5 deletions(-)

commit 16f9aee5f55bc37c1bb243708ee9b3f97e5a5b83
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 24 12:09:15 2018 +0530

    HDDS-262. Send SCM healthy and failed volumes in the heartbeat. Contributed by Bharat Viswanadham.

 .../ozone/container/common/volume/HddsVolume.java  | 81 ++++++++++++++++------
 .../ozone/container/common/volume/VolumeSet.java   | 28 ++++++--
 .../container/common/volume/TestVolumeSet.java     | 35 ++++++++--
 3 files changed, 111 insertions(+), 33 deletions(-)

commit 2ced3efe94eecc3e6076be1f0341bf6a2f2affab
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 23 21:29:44 2018 -0700

    HDDS-258. Helper methods to generate NodeReport and ContainerReport for testing. Contributed by Nanda Kumar.

 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  27 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 372 ++++++++++++++++-----
 .../command/TestCommandStatusReportHandler.java    |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |   4 +-
 .../hdds/scm/container/TestContainerMapping.java   |   4 +-
 .../scm/container/closer/TestContainerCloser.java  |   2 +-
 .../TestSCMContainerPlacementCapacity.java         |   2 +-
 .../TestSCMContainerPlacementRandom.java           |   2 +-
 .../replication/TestReplicationManager.java        |   7 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   4 -
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  80 ++---
 .../hdds/scm/node/TestNodeReportHandler.java       |  19 +-
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  13 +-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |   4 +-
 .../ozone/container/common/TestEndPoint.java       |  74 ++--
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |  20 +-
 .../container/metrics/TestContainerMetrics.java    |   2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   2 +-
 .../container/server/TestContainerServer.java      |   4 +-
 19 files changed, 406 insertions(+), 238 deletions(-)

commit 17a87977f29ced49724f561a68565217c8cb4e94
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Jul 24 11:15:47 2018 +0800

    HDFS-13583. RBF: Router admin clrQuota is not synchronized with nameservice. Contributed by Dibyendu Karmakar.

 .../hdfs/server/federation/router/Quota.java       |  9 +++++++-
 .../federation/router/RouterAdminServer.java       |  8 +++++--
 .../federation/router/RouterQuotaManager.java      |  4 ++--
 .../router/RouterQuotaUpdateService.java           |  2 +-
 .../server/federation/router/RouterQuotaUsage.java |  4 ++--
 .../federation/store/records/MountTable.java       |  4 ++--
 .../store/records/impl/pb/MountTablePBImpl.java    |  4 ++--
 .../hadoop/hdfs/tools/federation/RouterAdmin.java  |  8 +++----
 .../server/federation/router/TestRouterAdmin.java  |  8 +++++++
 .../federation/router/TestRouterAdminCLI.java      | 16 +++++++++----
 .../server/federation/router/TestRouterQuota.java  | 26 +++++++++++++++++++---
 .../federation/router/TestRouterQuotaManager.java  | 20 ++++++++---------
 .../federation/store/records/TestMountTable.java   |  4 ++--
 13 files changed, 82 insertions(+), 35 deletions(-)

commit 8688a0c7f88f2adf1a7fce695e06f3dd1f745080
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 23 20:12:04 2018 -0400

    YARN-8380.  Support bind propagation options for mounts in docker runtime.
                Contributed by Billie Rinaldi

 .../linux/runtime/DockerLinuxContainerRuntime.java |  37 +--
 .../linux/runtime/docker/DockerRunCommand.java     |  18 +-
 .../container-executor/impl/utils/docker-util.c    | 196 +++++++++-------
 .../test/utils/test_docker_util.cc                 | 133 ++++++-----
 .../linux/runtime/TestDockerContainerRuntime.java  | 259 ++++++++++-----------
 .../gpu/TestNvidiaDockerV1CommandPlugin.java       |   2 +-
 .../src/site/markdown/DockerContainers.md          |  13 +-
 7 files changed, 349 insertions(+), 309 deletions(-)

commit 17e26163ec1b71cd13a6a82150aca94283f10ed1
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jul 23 11:18:25 2018 -0700

    HADOOP-15586. Fix wrong log statement in AbstractService. (Szilard Nemeth via Haibo Chen)

 .../src/main/java/org/apache/hadoop/service/AbstractService.java        | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9d3c39e9dd88b8f32223c01328581bb68507d415
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jul 23 11:06:44 2018 -0700

    YARN-6966. NodeManager metrics may return wrong negative values when NM restart. (Szilard Nemeth via Haibo Chen)

 .../containermanager/ContainerManagerImpl.java     |  2 +-
 .../scheduler/ContainerScheduler.java              | 16 ++++--
 .../recovery/NMLeveldbStateStoreService.java       | 32 +++++++-----
 .../recovery/NMNullStateStoreService.java          |  2 +-
 .../nodemanager/recovery/NMStateStoreService.java  |  3 +-
 .../containermanager/BaseContainerManagerTest.java |  2 +-
 .../TestContainerManagerRecovery.java              | 57 ++++++++++++++++++++++
 .../scheduler/TestContainerSchedulerRecovery.java  | 46 ++++++++++++-----
 .../metrics/TestNodeManagerMetrics.java            |  4 +-
 .../recovery/NMMemoryStateStoreService.java        | 16 +++++-
 .../recovery/TestNMLeveldbStateStoreService.java   | 21 +++++++-
 11 files changed, 163 insertions(+), 38 deletions(-)

commit 3a9e25edf53187f16ec9f9f6075e850b74b3b91f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jul 23 10:13:53 2018 -0700

    HDDS-199. Implement ReplicationManager to handle underreplication of closed containers. Contributed by Elek Marton.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   7 +
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |   1 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../hadoop/hdds/server/events/EventWatcher.java    |   4 +-
 .../hadoop/hdds/server/events/TypedEvent.java      |   5 +
 .../hdds/server/events/TestEventWatcher.java       |   6 +-
 .../algorithms/ContainerPlacementPolicy.java       |   5 +-
 .../placement/algorithms/SCMCommonPolicy.java      |   8 +-
 .../algorithms/SCMContainerPlacementCapacity.java  |  16 +-
 .../algorithms/SCMContainerPlacementRandom.java    |   7 +-
 .../replication/ReplicationCommandWatcher.java     |  56 +++++
 .../container/replication/ReplicationManager.java  | 242 +++++++++++++++++++++
 .../container/replication/ReplicationQueue.java    |  29 ++-
 .../container/replication/ReplicationRequest.java  |   3 +-
 .../scm}/container/replication/package-info.java   |   4 +-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  31 +++
 .../hdds/scm/server/StorageContainerManager.java   |  42 +++-
 .../TestSCMContainerPlacementCapacity.java         | 106 +++++++++
 .../TestSCMContainerPlacementRandom.java           |  86 ++++++++
 .../replication/TestReplicationManager.java        | 215 ++++++++++++++++++
 .../replication/TestReplicationQueue.java          |  14 +-
 .../scm}/container/replication/package-info.java   |   2 +-
 .../placement/TestContainerPlacement.java          |   5 +-
 23 files changed, 857 insertions(+), 47 deletions(-)

commit 84d7bf1eeff6b9418361afa4aa713e5e6f771365
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 23 12:57:01 2018 -0400

    YARN-8360. Improve YARN service restart policy and node manager auto restart policy.
               Contributed by Suma Shivaprasad

 .../service/component/AlwaysRestartPolicy.java     |  5 ++
 .../service/component/ComponentRestartPolicy.java  |  2 +
 .../yarn/service/component/NeverRestartPolicy.java |  5 ++
 .../service/component/OnFailureRestartPolicy.java  |  5 ++
 .../service/provider/AbstractProviderService.java  | 29 ++++++----
 .../hadoop/yarn/service/ServiceTestUtils.java      |  2 +-
 .../containerlaunch/TestAbstractLauncher.java      | 66 ++++++++++++++++++++++
 7 files changed, 101 insertions(+), 13 deletions(-)

commit bbe2f6225ea500651de04c064f7b847be18e5b66
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon Jul 23 09:12:47 2018 +0530

    HDDS-181. CloseContainer should commit all pending open Keys on a datanode. Contributed by Shashikant Banerjee.

 .../ozone/container/common/helpers/KeyData.java    |  20 +-
 .../common/impl/OpenContainerBlockMap.java         | 167 +++++++++++++
 .../ozone/container/keyvalue/KeyValueHandler.java  |  69 +++++-
 .../common/impl/TestCloseContainerHandler.java     | 260 +++++++++++++++++++++
 4 files changed, 504 insertions(+), 12 deletions(-)

commit 9fa9e301b0471f38530a3cb596b00064436d311d
Author: Nanda kumar <nanda@apache.org>
Date:   Sat Jul 21 18:46:31 2018 +0530

    HDDS-249. Fail if multiple SCM IDs on the DataNode and add SCM ID check after version request. Contributed by Bharat Viswanadham.

 .../states/endpoint/VersionEndpointTask.java       | 27 +++++++++--
 .../container/common/utils/HddsVolumeUtil.java     | 56 ++++++++++++++++++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 22 ++++++---
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../hadoop/ozone/container/common/ScmTestMock.java | 27 ++++++++++-
 .../container/common/TestDatanodeStateMachine.java | 14 +++---
 .../ozone/container/common/TestEndPoint.java       | 49 +++++++++++++++++++
 7 files changed, 177 insertions(+), 20 deletions(-)

commit 993ec026d10c7566fd358c022c061bca118c92f0
Author: Xiao Chen <xiao@apache.org>
Date:   Thu Jul 19 14:25:38 2018 -0700

    HADOOP-15596. Stack trace should not be printed out when running hadoop key commands. Contributed by Kitti Nanasi.

 .../org/apache/hadoop/crypto/key/KeyShell.java     | 32 ++++++++++++++--------
 .../key/kms/LoadBalancingKMSClientProvider.java    |  2 +-
 .../java/org/apache/hadoop/tools/CommandShell.java |  6 +++-
 3 files changed, 27 insertions(+), 13 deletions(-)

commit 1622a4b810eaf9c4fe9f9ad6bef6b49db7bec16f
Author: Eric Yang <eyang@apache.org>
Date:   Fri Jul 20 19:46:35 2018 -0400

    YARN-8301.  Added YARN service upgrade instructions.
                Contributed by Chandni Singh

 .../src/site/markdown/yarn-service/Overview.md     |   4 +-
 .../site/markdown/yarn-service/ServiceUpgrade.md   | 197 +++++++++++++++++++++
 2 files changed, 198 insertions(+), 3 deletions(-)

commit 347c9550135ea10fd84d5007124452bf5f2d6619
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:37:13 2018 -0700

    HDDS-260. Support in Datanode for sending ContainerActions to SCM. Contributed by Nanda kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   6 +
 .../common/src/main/resources/ozone-default.xml    |  10 +
 .../common/statemachine/StateContext.java          |  55 +++-
 .../states/endpoint/HeartbeatEndpointTask.java     |  33 ++-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 ---
 .../states/endpoint/TestHeartbeatEndpointTask.java | 300 +++++++++++++++++++++
 .../common/states/endpoint/package-info.java       |  18 ++
 8 files changed, 414 insertions(+), 53 deletions(-)

commit 9be25e347683d26e0575458c7f470c76fd4d951b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:22:02 2018 -0700

    HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 +
 .../scm/container/common/helpers/Pipeline.java     |   7 +
 .../common/src/main/resources/ozone-default.xml    |  12 ++
 .../hdds/scm/container/ContainerMapping.java       |   4 +
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 +
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 +++----
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 ++++++++++++++++++---
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 +---
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 ++
 10 files changed, 273 insertions(+), 100 deletions(-)

commit d2acf8d560950f06ffbf5c217fbfab76cd70d5da
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 14:20:18 2018 -0700

    Revert "HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh."
    
    This reverts commit 6837121a43231f854b0b22ad20330012439313ce.(Mixed with HDDS-260)

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 -
 .../scm/container/common/helpers/Pipeline.java     |   7 -
 .../common/src/main/resources/ozone-default.xml    |  12 -
 .../common/statemachine/StateContext.java          |  52 +---
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 +++
 .../states/endpoint/TestHeartbeatEndpointTask.java | 302 ---------------------
 .../common/states/endpoint/package-info.java       |  18 --
 .../hdds/scm/container/ContainerMapping.java       |   4 -
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 -
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 +++--
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 ++-------------
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 ++-
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 -
 16 files changed, 146 insertions(+), 668 deletions(-)

commit c7ae55675ed56cb18266425c02674a5a87561e0c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 13:12:07 2018 -0700

    HDDS-275. Add message output for succeeded -deleteVolume CLI. Contributed by Nilotpal Nandi.

 .../src/test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java   | 2 ++
 .../org/apache/hadoop/ozone/web/ozShell/volume/DeleteVolumeHandler.java | 1 +
 2 files changed, 3 insertions(+)

commit 6837121a43231f854b0b22ad20330012439313ce
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 13:03:25 2018 -0700

    HDDS-239. Add PipelineStateManager to track pipeline state transition. Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   5 +
 .../scm/container/common/helpers/Pipeline.java     |   7 +
 .../common/src/main/resources/ozone-default.xml    |  12 +
 .../common/statemachine/StateContext.java          |  52 +++-
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   4 +-
 .../common/report/TestReportPublisher.java         |  41 ---
 .../states/endpoint/TestHeartbeatEndpointTask.java | 302 +++++++++++++++++++++
 .../common/states/endpoint/package-info.java       |  18 ++
 .../hdds/scm/container/ContainerMapping.java       |   4 +
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   1 +
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  64 ++---
 .../hdds/scm/pipelines/PipelineSelector.java       | 212 +++++++++++++--
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  33 +--
 .../standalone/StandaloneManagerImpl.java          |  21 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    |  14 +
 16 files changed, 668 insertions(+), 146 deletions(-)

commit ba25d27ddb8d32abf5e1314a51eec7cad789b316
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 20 12:41:52 2018 -0700

    HDDS-257. Hook up VolumeSet#shutdown from HddsDispatcher#shutdown. Contributed by Hanisha Koneru

 .../container/common/impl/HddsDispatcher.java      |  2 ++
 .../ozone/container/common/volume/HddsVolume.java  |  2 --
 .../ozone/container/common/volume/VolumeInfo.java  |  8 +++++++
 .../ozone/container/common/volume/VolumeSet.java   | 18 ++++++++++++++-
 .../ozone/container/common/volume/VolumeUsage.java | 17 --------------
 .../container/common/volume/TestVolumeSet.java     | 26 +++++++++++++++++++---
 6 files changed, 50 insertions(+), 23 deletions(-)

commit de894d34f6739685f32cd63a0e26b0e45bcf5c8c
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Fri Jul 20 11:36:42 2018 -0700

    HDDS-250. Cleanup ContainerData.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  5 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |  2 +-
 .../container/common/helpers/ContainerUtils.java   | 21 -------
 .../ozone/container/common/impl/ContainerData.java | 64 ++--------------------
 .../container/keyvalue/KeyValueContainer.java      |  6 +-
 .../container/keyvalue/KeyValueContainerData.java  | 56 +++++--------------
 .../helpers/KeyValueContainerLocationUtil.java     | 18 +++---
 .../background/BlockDeletingService.java           |  8 +--
 .../ozone/container/ozoneimpl/ContainerReader.java | 30 +++++-----
 .../common/impl/TestContainerDataYaml.java         |  4 +-
 .../src/test/resources/additionalfields.container  |  4 +-
 .../src/test/resources/incorrect.container         |  4 +-
 .../common/impl/TestContainerPersistence.java      | 15 +++--
 13 files changed, 71 insertions(+), 166 deletions(-)

commit 89a0f80741beb5a998f143849e797d780332048b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 11:03:33 2018 -0700

    HDDS-256. Adding CommandStatusReport Handler. Contributed by Ajay Kumar.

 .../scm/command/CommandStatusReportHandler.java    | 129 +++++++++++++++++++
 .../hadoop/hdds/scm/command/package-info.java      |  26 ++++
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  24 ++++
 .../hdds/scm/server/StorageContainerManager.java   |   4 +
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  18 +++
 .../command/TestCommandStatusReportHandler.java    | 137 +++++++++++++++++++++
 .../hadoop/hdds/scm/command/package-info.java      |  22 ++++
 7 files changed, 360 insertions(+)

commit 8a6bb8409c2dc695c0ffc70df0528d7f8bd5d795
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri Jul 20 10:46:28 2018 -0700

    YARN-6964. Fair scheduler misuses Resources operations. (Daniel Templeton and Szilard Nemeth via Haibo Chen)

 .../hadoop/yarn/util/resource/Resources.java       | 20 +++++-
 .../scheduler/SchedulerApplicationAttempt.java     | 11 +---
 .../allocator/RegularContainerAllocator.java       |  4 +-
 .../scheduler/fair/AllocationConfiguration.java    |  2 +-
 .../scheduler/fair/FSAppAttempt.java               |  3 +-
 .../scheduler/fair/FSLeafQueue.java                |  9 +--
 .../scheduler/fair/policies/FairSharePolicy.java   | 76 +++++++++++-----------
 .../scheduler/TestSchedulerApplicationAttempt.java | 58 +++++++++++++++++
 .../scheduler/fair/FakeSchedulable.java            | 22 ++++---
 9 files changed, 140 insertions(+), 65 deletions(-)

commit 5c19ee3994af06bbc85f3575e3e4421babc0ba5c
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Jul 20 22:12:40 2018 +0530

    HDDS-264. 'oz' subcommand reference is not present in 'ozone' command help. Contributed by Sandeep Nemuri.

 hadoop-ozone/common/src/main/bin/ozone | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 68b57ad32cb0978ad5cd20b5fdc821f087a2c9dc
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 20 09:07:58 2018 -0700

    HDDS-259. Implement ContainerReportPublisher and NodeReportPublisher. Contributed by Nanda kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     | 26 ++++++++++++++++--
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  5 ----
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  5 ----
 .../common/src/main/resources/ozone-default.xml    | 26 ++++++++++++++----
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java | 13 +++++----
 .../report/CommandStatusReportPublisher.java       | 24 +++++++++++++---
 .../common/report/ContainerReportPublisher.java    | 25 +++++++++++++----
 .../common/report/NodeReportPublisher.java         | 32 ++++++++++++++++++++--
 .../container/common/report/ReportPublisher.java   | 14 ++++++++--
 .../common/report/TestReportPublisher.java         | 11 ++------
 .../hdds/scm/container/closer/ContainerCloser.java | 12 ++++----
 .../scm/container/closer/TestContainerCloser.java  |  8 +++---
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 17 ++++++------
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  5 ++--
 .../hadoop/ozone/TestStorageContainerManager.java  |  8 +++---
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  5 ++--
 16 files changed, 162 insertions(+), 74 deletions(-)

commit e9c44ecfc6ca9d02b2073f16eeadfd7f4a490799
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 20 21:39:45 2018 +0530

    HDDS-269. Refactor IdentifiableEventPayload to use a long ID. Contributed by Ajay Kumar.

 .../common/statemachine/StateContext.java          |  4 +-
 .../commandhandler/CommandHandler.java             |  6 +--
 .../protocol/commands/CloseContainerCommand.java   |  6 +--
 .../protocol/commands/DeleteBlocksCommand.java     |  6 +--
 .../commands/ReplicateContainerCommand.java        |  6 +--
 .../ozone/protocol/commands/ReregisterCommand.java |  2 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java | 16 +++---
 .../hadoop/hdds/server/events/EventWatcher.java    | 47 ++++++++---------
 .../server/events/IdentifiableEventPayload.java    |  4 +-
 .../hdds/server/events/TestEventWatcher.java       | 61 ++++++++++------------
 10 files changed, 75 insertions(+), 83 deletions(-)

commit cbf20264838f536382a9d8c4cd2144faf6875c3a
Author: Weiwei Yang <wwei@apache.org>
Date:   Fri Jul 20 22:32:11 2018 +0800

    YARN-8528. Final states in ContainerAllocation might be modified externally causing unexpected allocation results. Contributed by Xintong Song.

 .../capacity/allocator/ContainerAllocation.java    |  2 +-
 .../allocator/RegularContainerAllocator.java       | 10 ++---
 .../scheduler/capacity/TestCapacityScheduler.java  | 48 ++++++++++++++++++++++
 3 files changed, 54 insertions(+), 6 deletions(-)

commit 7b25fb949bf6f02df997beeca7df46c9e84c8d96
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Jul 20 17:28:57 2018 +0800

    HDFS-13743. RBF: Router throws NullPointerException due to the invalid initialization of MountTableResolver. Contributed by Takanobu Asanuma.

 .../federation/resolver/MountTableResolver.java    | 28 +++++---
 .../resolver/TestInitializeMountTableResolver.java | 82 ++++++++++++++++++++++
 2 files changed, 102 insertions(+), 8 deletions(-)

commit e6873dfde057e63ce5efa91f3061db3ee1b2e236
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Jul 19 16:27:11 2018 -0700

    YARN-7300. DiskValidator is not used in LocalDirAllocator. (Szilard Nemeth via Haibo Chen)

 .../org/apache/hadoop/fs/LocalDirAllocator.java    | 28 +++++++++++++++++-----
 .../nodemanager/LocalDirsHandlerService.java       | 27 +++++++++++++++------
 2 files changed, 42 insertions(+), 13 deletions(-)

commit f354f47f9959d8a79baee690858af3e160494c32
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Jul 19 15:34:12 2018 -0700

    YARN-6995. Improve use of ResourceNotFoundException in resource types code. (Daniel Templeton and Szilard Nemeth via Haibo Chen)

 .../apache/hadoop/yarn/api/records/Resource.java   | 22 +++++-----------
 .../yarn/exceptions/ResourceNotFoundException.java | 29 ++++++++++++++++------
 .../yarn/api/records/impl/pb/ResourcePBImpl.java   | 10 +++-----
 .../hadoop/yarn/util/resource/Resources.java       |  6 ++---
 4 files changed, 34 insertions(+), 33 deletions(-)

commit b3b4d4ccb53fdf8dacc66e912822b34f8b3bf215
Author: Wangda Tan <wangda@apache.org>
Date:   Thu Jul 19 12:03:24 2018 -0700

    MAPREDUCE-7118. Distributed cache conflicts breaks backwards compatability. (Jason Lowe via wangda)
    
    Change-Id: I89ab4852b4ad305fec19812e8931c59d96581376

 .../mapreduce/v2/util/LocalResourceBuilder.java      |  8 +++-----
 .../apache/hadoop/mapreduce/v2/util/TestMRApps.java  | 20 ++++++++++++++++++--
 2 files changed, 21 insertions(+), 7 deletions(-)

commit 2564884757fbf4df7718f814cc448f7f23dad875
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Jul 19 13:21:57 2018 -0700

    YARN-8436. FSParentQueue: Comparison method violates its general contract. (Wilfred Spiegelenburg via Haibo Chen)

 .../scheduler/fair/FSParentQueue.java              | 30 ++++-----
 .../scheduler/fair/FakeSchedulable.java            |  4 ++
 .../TestDominantResourceFairnessPolicy.java        | 77 ++++++++++++++++++++++
 3 files changed, 93 insertions(+), 18 deletions(-)

commit 45d9568aaaf532a6da11bd7c1844ff81bf66bab1
Author: Steve Loughran <stevel@apache.org>
Date:   Thu Jul 19 12:31:19 2018 -0700

    HADOOP-15547/ WASB: improve listStatus performance.
    Contributed by Thomas Marquardt.
    
    (cherry picked from commit 749fff577ed9afb4ef8a54b8948f74be083cc620)

 .../hadoop-azure/dev-support/findbugs-exclude.xml  |  10 +
 hadoop-tools/hadoop-azure/pom.xml                  |  12 +
 .../fs/azure/AzureNativeFileSystemStore.java       | 182 +++++-----
 .../org/apache/hadoop/fs/azure/FileMetadata.java   |  77 +++--
 .../hadoop/fs/azure/NativeAzureFileSystem.java     | 376 +++++++++------------
 .../hadoop/fs/azure/NativeFileSystemStore.java     |  15 +-
 .../org/apache/hadoop/fs/azure/PartialListing.java |  61 ----
 .../hadoop/fs/azure/ITestListPerformance.java      | 196 +++++++++++
 8 files changed, 514 insertions(+), 415 deletions(-)

commit 5836e0a46bf9793e0a61bb8ec46536f4a67d38d7
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jul 19 12:30:38 2018 -0400

    YARN-8501. Reduce complexity of RMWebServices getApps method.
               Contributed by Szilard Nemeth

 .../hadoop/yarn/server/webapp/WebServices.java     |   2 +-
 .../webapp/ApplicationsRequestBuilder.java         | 231 +++++++++
 .../resourcemanager/webapp/RMWebServices.java      | 145 +-----
 .../webapp/TestApplicationsRequestBuilder.java     | 529 +++++++++++++++++++++
 4 files changed, 777 insertions(+), 130 deletions(-)

commit ccf2db7fc2688d262df3309007cb12a4dfedc179
Author: Kihwal Lee <kihwal@apache.org>
Date:   Thu Jul 19 11:13:37 2018 -0500

    HADOOP-15614. TestGroupsCaching.testExceptionOnBackgroundRefreshHandled reliably fails. Contributed by Weiwei Yang.

 .../org/apache/hadoop/security/TestGroupsCaching.java   | 17 +++++++++++------
 1 file changed, 11 insertions(+), 6 deletions(-)

commit ba1ab08fdae96ad7c9c4f4bf8672abd741b7f758
Author: Eric Yang <eyang@apache.org>
Date:   Wed Jul 18 20:09:43 2018 -0400

    HADOOP-15610.  Fixed pylint version for Hadoop docker image.
                   Contributed by Jack Bearden

 dev-support/docker/Dockerfile | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit c492eaccc21bb53d0d40214290b2fa9c493e2955
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 11:46:26 2018 -0700

    HDDS-255. Fix TestOzoneConfigurationFields for missing hdds.command.status.report.interval in config classes. Contributed by Sandeep Nemuri.

 .../java/org/apache/hadoop/ozone/TestOzoneConfigurationFields.java     | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 129269f98926775ccb5046d9dd41b58f1013211d
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 11:05:42 2018 -0700

    HDDS-207. ozone listVolume command accepts random values as argument. Contributed by Lokesh Jain.

 .../src/test/acceptance/basic/ozone-shell.robot             |  8 +++++---
 .../org/apache/hadoop/ozone/ozShell/TestOzoneShell.java     | 12 ++++++++++--
 .../java/org/apache/hadoop/ozone/web/ozShell/Shell.java     |  1 +
 .../hadoop/ozone/web/ozShell/volume/ListVolumeHandler.java  | 13 ++++++++++++-
 4 files changed, 28 insertions(+), 6 deletions(-)

commit d5d444732bf5c3f3cfc681f8d87e0681a7471f2f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jul 18 09:38:43 2018 -0700

    HDDS-241. Handle Volume in inconsistent state. Contributed by Hanisha Koneru.

 .../ozone/container/common/volume/HddsVolume.java  | 45 +++++++++++--
 .../ozone/container/common/volume/VolumeSet.java   | 14 ++--
 .../container/common/volume/TestVolumeSet.java     | 78 ++++++++++++++++++----
 .../container/ozoneimpl/TestOzoneContainer.java    | 18 +++--
 4 files changed, 129 insertions(+), 26 deletions(-)

commit 1af87df242c4286474961078d306a5692f85debc
Author: Yiqun Lin <yqlin@apache.org>
Date:   Tue Jul 17 10:45:08 2018 +0800

    HDFS-13733. RBF: Add Web UI configurations and descriptions to RBF document. Contributed by Takanobu Asanuma.

 .../src/site/markdown/HDFSRouterFederation.md                | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 0a1e922f3d8eca4e852be57124ec1bcafaadb289
Author: Konstantin V Shvachko <shv@apache.org>
Date:   Mon Jul 16 18:20:24 2018 -0700

    Fix potential FSImage corruption. Contributed by Ekanth Sethuramalingam & Arpit Agarwal.

 .../hdfs/server/namenode/AclEntryStatusFormat.java |  6 +-
 .../server/namenode/INodeWithAdditionalFields.java |  4 +-
 .../hadoop/hdfs/server/namenode/XAttrFormat.java   | 67 ++++++++++++++--------
 3 files changed, 49 insertions(+), 28 deletions(-)

commit d2153577181f900ee6d8bf67d254e408bbaad243
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon Jul 16 15:45:55 2018 -0700

    HDFS-13485. DataNode WebHDFS endpoint throws NPE. Contributed by Siyao Meng.

 .../java/org/apache/hadoop/security/token/Token.java   |  5 +++++
 .../org/apache/hadoop/security/token/TestToken.java    | 18 ++++++++++++++++++
 2 files changed, 23 insertions(+)

commit 121865c3f96166e2190ed54b433ebcf8d053b91c
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 16 17:41:23 2018 -0400

    YARN-8299.  Added CLI and REST API for query container status.
                Contributed by Chandni Singh

 .../yarn/service/client/ApiServiceClient.java      |  74 ++++++----
 .../hadoop/yarn/service/webapp/ApiServer.java      |  67 +++++++--
 .../hadoop/yarn/service/ClientAMProtocol.java      |   5 +
 .../hadoop/yarn/service/ClientAMService.java       |  14 ++
 .../hadoop/yarn/service/client/ServiceClient.java  |  47 +++++++
 .../component/instance/ComponentInstance.java      |  41 +++++-
 .../hadoop/yarn/service/conf/RestApiConstants.java |   5 +-
 .../pb/client/ClientAMProtocolPBClientImpl.java    |  13 ++
 .../pb/service/ClientAMProtocolPBServiceImpl.java  |  13 ++
 .../hadoop/yarn/service/utils/FilterUtils.java     |  81 +++++++++++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |   9 ++
 .../src/main/proto/ClientAMProtocol.proto          |  12 ++
 .../yarn/service/MockRunningServiceContext.java    | 154 +++++++++++++++++++++
 .../hadoop/yarn/service/client/TestServiceCLI.java |  25 +++-
 .../yarn/service/client/TestServiceClient.java     |  54 +++++++-
 .../yarn/service/component/TestComponent.java      | 133 +-----------------
 .../component/instance/TestComponentInstance.java  |  46 +++---
 .../hadoop/yarn/service/utils/TestFilterUtils.java | 102 ++++++++++++++
 .../hadoop/yarn/client/cli/ApplicationCLI.java     |  68 ++++++++-
 .../apache/hadoop/yarn/client/cli/TestYarnCLI.java |   6 +-
 .../hadoop/yarn/client/api/AppAdminClient.java     |   6 +
 21 files changed, 773 insertions(+), 202 deletions(-)

commit efb4e274e505736cb9771a5654a0fc82bbd5396f
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 16 17:38:49 2018 -0400

    YARN-8538.  Fixed memory leaks in container-executor and test cases.
                Contributed by Billie Rinaldi

 .../native/container-executor/impl/configuration.c |   3 +
 .../src/main/native/container-executor/impl/main.c |   4 +-
 .../impl/modules/cgroups/cgroups-operations.c      |   2 +
 .../container-executor/impl/utils/docker-util.c    | 234 +++++++++++----------
 .../test/modules/cgroups/test-cgroups-module.cc    |   8 +
 .../test/modules/fpga/test-fpga-module.cc          |  24 ++-
 .../test/modules/gpu/test-gpu-module.cc            |  24 ++-
 .../container-executor/test/test_configuration.cc  |  34 ++-
 .../native/container-executor/test/test_util.cc    |   5 +
 .../test/utils/test-string-utils.cc                |   6 +
 .../test/utils/test_docker_util.cc                 | 128 +++++++----
 11 files changed, 307 insertions(+), 165 deletions(-)

commit d2874e04173613b1a3d44eabf8d449c8a3920fa4
Author: Xiao Chen <xiao@apache.org>
Date:   Mon Jul 16 13:19:24 2018 -0700

    HDFS-13690. Improve error message when creating encryption zone while KMS is unreachable. Contributed by Kitti Nanasi.

 .../org/apache/hadoop/crypto/key/kms/KMSClientProvider.java   | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 0c7a578927032d5d1ef3469283d7d1fb7dee2a56
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon Jul 16 11:32:45 2018 -0700

    HADOOP-15598. DataChecksum calculate checksum is contented on hashtable synchronization. Contributed by Prasanth Jayachandran.

 .../src/main/java/org/apache/hadoop/util/NativeCrc32.java             | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 238ffff99907290fb2cf791a1ad28ff7f78952f4
Author: Wangda Tan <wangda@apache.org>
Date:   Mon Jul 16 10:58:00 2018 -0700

    YARN-8524. Single parameter Resource / LightWeightResource constructor looks confusing. (Szilard Nemeth via wangda)
    
    Change-Id: I4ae97548b5b8d76a6bcebb2d3d70bf8e0be3c125

 .../apache/hadoop/yarn/api/records/Resource.java   | 11 -------
 .../yarn/api/records/impl/LightWeightResource.java | 16 ----------
 .../hadoop/yarn/util/resource/Resources.java       | 23 +++++++++++++-
 .../hadoop/yarn/util/resource/TestResources.java   | 36 ++++++++++++++++++++++
 .../scheduler/fair/ConfigurableResource.java       |  8 ++++-
 5 files changed, 65 insertions(+), 29 deletions(-)

commit a2e49f41a8bcc03ce0a85b294d0b86fee7e86f31
Author: Wangda Tan <wangda@apache.org>
Date:   Mon Jul 16 10:57:37 2018 -0700

    YARN-8361. Change App Name Placement Rule to use App Name instead of App Id for configuration. (Zian Chen via wangda)
    
    Change-Id: I17e5021f8f611a9c5e3bd4b38f25e08585afc6b1

 .../placement/AppNameMappingPlacementRule.java     | 18 +++++----
 .../placement/TestAppNameMappingPlacementRule.java | 43 +++++++++++-----------
 .../placement/TestPlacementManager.java            |  7 ++--
 .../src/site/markdown/CapacityScheduler.md         |  6 +--
 4 files changed, 38 insertions(+), 36 deletions(-)

commit 752dcce5f4cf0f6ebcb40a61f622f1a885c4bda7
Author: Wangda Tan <wangda@apache.org>
Date:   Mon Jul 16 10:54:41 2018 -0700

    YARN-8511. When AM releases a container, RM removes allocation tags before it is released by NM. (Weiwei Yang via wangda)
    
    Change-Id: I6f9f409f2ef685b405cbff547dea9623bf3322d9

 .../hadoop/yarn/sls/nodemanager/NodeInfo.java      |   6 ++
 .../hadoop/yarn/sls/scheduler/RMNodeWrapper.java   |   6 ++
 .../rmcontainer/RMContainerImpl.java               |   5 -
 .../yarn/server/resourcemanager/rmnode/RMNode.java |   6 ++
 .../server/resourcemanager/rmnode/RMNodeImpl.java  |   5 +
 .../resourcemanager/scheduler/SchedulerNode.java   |  15 +++
 .../yarn/server/resourcemanager/MockNodes.java     |   5 +
 .../rmcontainer/TestRMContainerImpl.java           |  16 +++-
 .../scheduler/TestAbstractYarnScheduler.java       | 104 +++++++++++++++++++++
 9 files changed, 162 insertions(+), 6 deletions(-)

commit 88b2794244d19b6432253eb649a375e5bcdcf964
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon Jul 16 10:51:23 2018 -0700

    HDFS-13524. Occasional "All datanodes are bad" error in TestLargeBlock#testLargeBlockSize. Contributed by Siyao Meng.

 .../src/test/java/org/apache/hadoop/hdfs/TestLargeBlock.java        | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 359ea4e18147af5677c6d88265e26de6b6c72999
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jul 16 09:46:21 2018 -0700

    HDFS-13475. RBF: Admin cannot enforce Router enter SafeMode. Contributed by Chao Sun.

 .../hdfs/server/federation/router/Router.java      |  7 +++
 .../federation/router/RouterAdminServer.java       | 32 +++++++++---
 .../server/federation/router/RouterRpcServer.java  | 26 +---------
 .../federation/router/RouterSafemodeService.java   | 44 +++++++++++++---
 .../federation/router/TestRouterAdminCLI.java      |  7 +--
 .../federation/router/TestRouterSafemode.java      | 58 ++++++++++++++++++----
 6 files changed, 121 insertions(+), 53 deletions(-)

commit 937ef39b3ff90f72392b7a319e4346344db34e03
Author: Eric E Payne <ericp@oath.com>
Date:   Mon Jul 16 16:24:21 2018 +0000

    YARN-8421: when moving app, activeUsers is increased, even though app does not have outstanding request. Contributed by Kyungwan Nam

 .../scheduler/AppSchedulingInfo.java               |  4 +-
 .../scheduler/TestSchedulerApplicationAttempt.java | 44 ++++++++++++++++++++++
 2 files changed, 47 insertions(+), 1 deletion(-)

commit 5074ca93afb4fbd1c367852ba55d1e89b38a2133
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jul 15 10:47:20 2018 -0700

    HDDS-254. Fix TestStorageContainerManager#testBlockDeletingThrottling. Contributed by Lokesh Jain

 .../src/test/java/org/apache/hadoop/ozone/MiniOzoneClusterImpl.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0927bc4f76c6803be31855835a9191ab7ed47bc7
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sun Jul 15 10:34:00 2018 -0700

    HDDS-251. Integrate BlockDeletingService in KeyValueHandler. Contributed by Lokesh Jain

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  5 +-
 .../common/src/main/resources/ozone-default.xml    |  4 +-
 .../ozone/container/common/impl/ContainerSet.java  | 16 ++++--
 .../container/common/interfaces/Container.java     |  2 +-
 .../ContainerDeletionChoosingPolicy.java           |  1 -
 .../ozone/container/keyvalue/KeyValueHandler.java  | 24 +++++++++
 .../background/BlockDeletingService.java           | 11 +++-
 .../container/common/TestBlockDeletingService.java | 26 ++++++---
 .../impl/TestContainerDeletionChoosingPolicy.java  | 62 +++++++++-------------
 .../commandhandler/TestBlockDeletion.java          | 14 +++--
 .../TestCloseContainerByPipeline.java              | 18 +++----
 .../commandhandler/TestCloseContainerHandler.java  | 12 ++---
 .../ozone/om/TestContainerReportWithKeys.java      | 11 ++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 -
 14 files changed, 117 insertions(+), 91 deletions(-)

commit 4523cc5637bc3558aa5796150b358ca8471773bb
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Sun Jul 15 13:53:53 2018 +0530

    YARN-8434. Update federation documentation of Nodemanager configurations. Contributed by Bibin A Chundatt.

 .../hadoop-yarn/hadoop-yarn-site/src/site/markdown/Federation.md         | 1 -
 1 file changed, 1 deletion(-)

commit 103f2eeb57dbadd9abbbc25a05bb7c79b48fdc17
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Fri Jul 13 11:44:24 2018 -0700

    HDDS-210. Make "-file" argument optional for ozone getKey command. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java | 12 ++++++++++++
 .../apache/hadoop/ozone/web/ozShell/keys/GetKeyHandler.java  |  9 ++++++---
 2 files changed, 18 insertions(+), 3 deletions(-)

commit 88625f5cd90766136a9ebd76a8d84b45a37e6c99
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Fri Jul 13 11:42:12 2018 -0400

    HADOOP-15531. Use commons-text instead of commons-lang in some classes to fix deprecation warnings. Contributed by Takanobu Asanuma.

 hadoop-client-modules/hadoop-client-minicluster/pom.xml        |  4 ++++
 hadoop-common-project/hadoop-common/pom.xml                    |  5 +++++
 .../java/org/apache/hadoop/conf/ReconfigurationServlet.java    |  2 +-
 .../hadoop/hdfs/qjournal/server/GetJournalEditServlet.java     |  2 +-
 .../hadoop/hdfs/server/diskbalancer/command/Command.java       |  6 +++---
 .../hadoop/hdfs/server/diskbalancer/command/PlanCommand.java   |  4 ++--
 .../hadoop/hdfs/server/diskbalancer/command/ReportCommand.java | 10 +++++-----
 .../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java   |  2 +-
 .../src/main/java/org/apache/hadoop/hdfs/tools/CacheAdmin.java |  2 +-
 .../src/test/java/org/apache/hadoop/hdfs/TestDecommission.java |  4 ++--
 .../test/java/org/apache/hadoop/hdfs/tools/TestDFSAdmin.java   |  4 ++--
 .../org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java    |  2 +-
 .../org/apache/hadoop/mapreduce/v2/app/webapp/TasksBlock.java  |  2 +-
 .../org/apache/hadoop/mapreduce/v2/hs/webapp/HsJobsBlock.java  |  2 +-
 .../org/apache/hadoop/mapreduce/v2/hs/webapp/HsTaskPage.java   |  2 +-
 hadoop-project/pom.xml                                         |  5 +++++
 .../main/java/org/apache/hadoop/yarn/client/cli/TopCLI.java    |  3 ++-
 .../src/main/java/org/apache/hadoop/yarn/state/Graph.java      |  2 +-
 .../java/org/apache/hadoop/yarn/webapp/hamlet/HamletImpl.java  |  2 +-
 .../java/org/apache/hadoop/yarn/webapp/hamlet2/HamletImpl.java |  2 +-
 .../main/java/org/apache/hadoop/yarn/webapp/view/JQueryUI.java |  2 +-
 .../main/java/org/apache/hadoop/yarn/webapp/view/TextView.java |  2 +-
 .../org/apache/hadoop/yarn/server/webapp/AppAttemptBlock.java  |  2 +-
 .../java/org/apache/hadoop/yarn/server/webapp/AppBlock.java    |  2 +-
 .../java/org/apache/hadoop/yarn/server/webapp/AppsBlock.java   |  2 +-
 .../server/resourcemanager/webapp/FairSchedulerAppsBlock.java  |  2 +-
 .../yarn/server/resourcemanager/webapp/RMAppAttemptBlock.java  |  2 +-
 .../hadoop/yarn/server/resourcemanager/webapp/RMAppBlock.java  |  2 +-
 .../hadoop/yarn/server/resourcemanager/webapp/RMAppsBlock.java |  2 +-
 .../org/apache/hadoop/yarn/server/router/webapp/AppsBlock.java |  4 ++--
 30 files changed, 52 insertions(+), 37 deletions(-)

commit 17118f446c2387aa796849da8b69a845d9d307d3
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri Jul 13 10:05:25 2018 -0500

    YARN-8515. container-executor can crash with SIGPIPE after nodemanager restart. Contributed by Jim Brennan

 .../src/main/native/container-executor/impl/main.c                  | 6 ++++++
 1 file changed, 6 insertions(+)

commit d18507209e268aa5be0d3e56cec23de24107e7d9
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 13 19:50:52 2018 +0530

    HDDS-232. Parallel unit test execution for HDDS/Ozone. Contributed by Arpit Agarwal.

 .../common/report/TestReportPublisher.java         |  2 +-
 hadoop-hdds/pom.xml                                | 49 ++++++++++++++++++++++
 hadoop-ozone/pom.xml                               | 49 ++++++++++++++++++++++
 3 files changed, 99 insertions(+), 1 deletion(-)

commit 1fe5b938435ab49e40cffa66f4dd16ddf1592405
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jul 13 17:18:42 2018 +0530

    HDDS-253. SCMBlockDeletingService should publish events for delete blocks to EventQueue. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/block/BlockManagerImpl.java  | 10 ++++++----
 .../hadoop/hdds/scm/block/SCMBlockDeletingService.java      | 13 +++++++++----
 .../hadoop/hdds/scm/server/StorageContainerManager.java     |  2 +-
 .../org/apache/hadoop/hdds/scm/block/TestBlockManager.java  |  2 +-
 .../org/apache/hadoop/ozone/scm/TestContainerSQLCli.java    |  3 +--
 5 files changed, 18 insertions(+), 12 deletions(-)

commit 3f3f72221ffd11cc6bfa0e010e3c5b0e14911102
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 12 22:02:57 2018 -0700

    HDDS-238. Add Node2Pipeline Map in SCM to track ratis/standalone pipelines. Contributed by Mukul Kumar Singh.

 .../container/common/helpers/ContainerInfo.java    |  11 ++
 .../hdds/scm/container/ContainerMapping.java       |  11 +-
 .../hdds/scm/container/ContainerStateManager.java  |   6 +
 .../scm/container/states/ContainerStateMap.java    |  36 +++++-
 .../hdds/scm/pipelines/Node2PipelineMap.java       | 121 +++++++++++++++++++++
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  22 ++--
 .../hdds/scm/pipelines/PipelineSelector.java       |  24 +++-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  11 +-
 .../standalone/StandaloneManagerImpl.java          |   7 +-
 .../hdds/scm/pipeline/TestNode2PipelineMap.java    | 117 ++++++++++++++++++++
 10 files changed, 343 insertions(+), 23 deletions(-)

commit f89e265905f39c8e51263a3946a8b8e6ab4ebad9
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 21:34:32 2018 -0700

    HDDS-187. Command status publisher for datanode.
    Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdds/HddsConfigKeys.java     |   8 +
 .../java/org/apache/hadoop/hdds/HddsIdFactory.java |  53 +++++++
 .../common/src/main/resources/ozone-default.xml    |   9 ++
 .../org/apache/hadoop/utils/TestHddsIdFactory.java |  77 ++++++++++
 .../report/CommandStatusReportPublisher.java       |  71 +++++++++
 .../container/common/report/ReportPublisher.java   |   9 ++
 .../common/report/ReportPublisherFactory.java      |   4 +
 .../common/statemachine/DatanodeStateMachine.java  |   2 +
 .../common/statemachine/StateContext.java          |  70 +++++++++
 .../CloseContainerCommandHandler.java              |   5 +-
 .../commandhandler/CommandHandler.java             |  11 ++
 .../commandhandler/DeleteBlocksCommandHandler.java | 166 +++++++++++----------
 .../ReplicateContainerCommandHandler.java          |   7 +-
 .../protocol/commands/CloseContainerCommand.java   |  36 +++--
 .../ozone/protocol/commands/CommandStatus.java     | 141 +++++++++++++++++
 .../protocol/commands/DeleteBlocksCommand.java     |  13 +-
 .../commands/ReplicateContainerCommand.java        |  20 ++-
 .../ozone/protocol/commands/ReregisterCommand.java |  10 ++
 .../hadoop/ozone/protocol/commands/SCMCommand.java |  19 +++
 .../proto/StorageContainerDatanodeProtocol.proto   |  21 +++
 .../hadoop/ozone/container/common/ScmTestMock.java |  33 +++-
 .../common/report/TestReportPublisher.java         |  75 +++++++++-
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   |  57 ++++---
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |  23 ++-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  25 +++-
 .../ozone/container/common/TestEndPoint.java       | 111 +++++++++++++-
 26 files changed, 935 insertions(+), 141 deletions(-)

commit 87eeb26e7200fa3be0ca62ebf163985b58ad309e
Author: Xiao Chen <xiao@apache.org>
Date:   Thu Jul 12 20:19:14 2018 -0700

    HDFS-13663. Should throw exception when incorrect block size is set. Contributed by Shweta.

 .../org/apache/hadoop/hdfs/server/datanode/BlockRecoveryWorker.java   | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1bc106a738a6ce4f7ed025d556bb44c1ede022e3
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu Jul 12 16:38:46 2018 -0700

    YARN-8518. test-container-executor test_is_empty() is broken (Jim_Brennan via rkanter)

 .../container-executor/test/test-container-executor.c      | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 556d9b36be4b0b759646b8f6030c9e693b97bdb8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 12:09:31 2018 -0700

    HDDS-234. Add SCM node report handler.
    Contributed by Ajay Kumar.

 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  9 ++
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 19 ++++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 11 +++
 .../hadoop/hdds/scm/container/MockNodeManager.java | 11 +++
 .../hdds/scm/node/TestNodeReportHandler.java       | 95 ++++++++++++++++++++++
 .../testutils/ReplicationNodeManagerMock.java      | 10 +++
 6 files changed, 152 insertions(+), 3 deletions(-)

commit 5ee90efed385db4bf235816145b30a0f691fc91b
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 12 10:43:24 2018 -0700

    HDDS-228. Add the ReplicaMaps to ContainerStateManager.
    Contributed by Ajay Kumar.

 .../hdds/scm/container/ContainerStateManager.java  | 34 +++++++++
 .../scm/container/states/ContainerStateMap.java    | 86 ++++++++++++++++++++++
 .../scm/container/TestContainerStateManager.java   | 79 ++++++++++++++++++++
 3 files changed, 199 insertions(+)

commit a08812a1b10df059b26f6a216e6339490298ba28
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu Jul 12 16:46:02 2018 +0200

    HADOOP-15349. S3Guard DDB retryBackoff to be more informative on limits exceeded. Contributed by Gabor Bota.

 .../java/org/apache/hadoop/fs/s3a/s3guard/DynamoDBMetadataStore.java   | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 4f3f9391b035d7f7e285c332770c6c1ede9a5a85
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu Jul 12 16:45:07 2018 +0200

    HADOOP-15316. GenericTestUtils can exceed maxSleepTime. Contributed by Adam Antal.

 .../src/test/java/org/apache/hadoop/test/GenericTestUtils.java          | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b37074be5ab35c238e18bb9c3b89db6d7f8d0986
Author: Xiao Chen <xiao@apache.org>
Date:   Wed Jul 11 20:54:37 2018 -0700

    HDFS-12837. Intermittent failure in TestReencryptionWithKMS.

 .../hdfs/server/namenode/ReencryptionHandler.java  |  4 +-
 .../hdfs/server/namenode/TestReencryption.java     | 61 ++++++++++++----------
 2 files changed, 37 insertions(+), 28 deletions(-)

commit 632aca5793d391c741c0bce3d2e70ae6e03fe306
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jul 11 12:08:50 2018 -0700

    HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event
    and corresponding event handlers in SCM.
    Contributed by Nanda Kumar.
    
    Recommitting after making sure that patch is clean.

 .../scm/container/CloseContainerEventHandler.java  |  7 ++-
 .../hdds/scm/container/ContainerMapping.java       |  5 ---
 .../hdds/scm/container/ContainerReportHandler.java | 47 ++++++++++++++++++++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  9 +---
 .../hdds/scm/container/closer/ContainerCloser.java |  1 -
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 22 ++++++++++
 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  | 11 +++++
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 +++++++++++++++++++++
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  4 +-
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 32 +++++++++++++-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 24 ++++++----
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ++++++++++++++++++
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 20 +++++++--
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 18 +++-----
 .../hdds/scm/server/StorageContainerManager.java   | 51 ++++++++++++++++------
 .../hadoop/hdds/scm/container/MockNodeManager.java |  9 ++++
 .../container/TestCloseContainerEventHandler.java  |  2 +
 .../hdds/scm/node/TestContainerPlacement.java      | 12 ++++-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 11 ++++-
 .../server/TestSCMDatanodeHeartbeatDispatcher.java |  8 +++-
 .../testutils/ReplicationNodeManagerMock.java      |  7 +++
 23 files changed, 417 insertions(+), 59 deletions(-)

commit b56785873a4ec9f6f5617e4252888b23837604e2
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jul 11 12:03:42 2018 -0700

    Revert "HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event"
    This reverts commit a47ec5dac4a1cdfec788ce3296b4f610411911ea.
    There was a spurious file in this commit. Revert to clean it.

 .../hdds/scm/container/ContainerReportHandler.java | 47 --------------------
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ------------------
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 ---------------------
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ------------------
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ------------------
 hadoop-ozone/common/src/main/bin/ozone-config.sh   | 51 ----------------------
 6 files changed, 274 deletions(-)

commit 418cc7f3aeabedc57c94aa9d4c4248c1476ac90e
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Jul 11 14:46:43 2018 -0400

    HDFS-13729. Fix broken links to RBF documentation. Contributed by Gabor Bota.

 hadoop-hdfs-project/hadoop-hdfs/src/site/markdown/HDFSCommands.md     | 4 ++--
 .../hadoop-hdfs/src/site/markdown/HdfsProvidedStorage.md              | 2 +-
 hadoop-project/src/site/markdown/index.md.vm                          | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 162228e8db937d4bdb9cf61d15ed555f1c96368f
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Wed Jul 11 10:02:08 2018 -0700

    HDFS-13723. Occasional "Should be different group" error in TestRefreshUserMappings#testGroupMappingRefresh. Contributed by Siyao Meng.

 .../main/java/org/apache/hadoop/security/Groups.java  |  5 ++++-
 .../hadoop/security/TestRefreshUserMappings.java      | 19 +++++++++++++------
 2 files changed, 17 insertions(+), 7 deletions(-)

commit d36ed94ee06945fe9122970b196968fd1c997dcc
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Jul 11 10:53:08 2018 -0400

    HADOOP-15594. Exclude commons-lang3 from hadoop-client-minicluster. Contributed by Takanobu Asanuma.

 hadoop-client-modules/hadoop-client-minicluster/pom.xml | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 2ae13d41dcd4f49e6b4ebc099e5f8bb8280b9872
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Jul 11 22:11:59 2018 +0800

    HDFS-13726. RBF: Fix RBF configuration links. Contributed by Takanobu Asanuma.

 .../hadoop-hdfs-rbf/src/site/markdown/HDFSRouterFederation.md         | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 52e1bc8539ce769f47743d8b2d318a54c3887ba0
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Wed Jul 11 16:19:51 2018 +0530

    YARN-8491. TestServiceCLI#testEnableFastLaunch fail when umask is 077. Contributed by K G Bakthavachalam.

 .../java/org/apache/hadoop/yarn/service/client/TestServiceCLI.java  | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 7f1d3d0e9dbe328fae0d43421665e0b6907b33fe
Author: Sunil G <sunilg@apache.org>
Date:   Wed Jul 11 12:26:32 2018 +0530

    YARN-8512. ATSv2 entities are not published to HBase from second attempt onwards. Contributed by Rohith Sharma K S.

 .../containermanager/ContainerManagerImpl.java     |  69 ++++++++++----
 .../application/ApplicationImpl.java               |   7 +-
 .../containermanager/BaseContainerManagerTest.java |  25 +++++
 .../TestContainerManagerRecovery.java              | 106 +++++++++++++++++++--
 4 files changed, 180 insertions(+), 27 deletions(-)

commit a47ec5dac4a1cdfec788ce3296b4f610411911ea
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 10 15:58:47 2018 -0700

    HDDS-242. Introduce NEW_NODE, STALE_NODE and DEAD_NODE event
    and corresponding event handlers in SCM.
    Contributed by Nanda Kumar.

 .../hdds/scm/container/ContainerReportHandler.java | 47 ++++++++++++++++++++
 .../hadoop/hdds/scm/node/DeadNodeHandler.java      | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/NewNodeHandler.java       | 50 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/NodeReportHandler.java    | 42 ++++++++++++++++++
 .../hadoop/hdds/scm/node/StaleNodeHandler.java     | 42 ++++++++++++++++++
 hadoop-ozone/common/src/main/bin/ozone-config.sh   | 51 ++++++++++++++++++++++
 6 files changed, 274 insertions(+)

commit 4e59b9278463e4f8ccce7100d4582e896154beb8
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jul 10 14:07:23 2018 -0700

    HDDS-208. ozone createVolume command ignores the first character of the volume name argument. Contributed by Lokesh Jain.

 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 26 +++++++++++++++++++---
 .../web/ozShell/volume/CreateVolumeHandler.java    | 10 ++++-----
 2 files changed, 28 insertions(+), 8 deletions(-)

commit 5d0f01e1fe988616d53120bad0cb69a825a4dde0
Author: Allen Wittenauer <aw@apache.org>
Date:   Tue Jul 10 12:17:44 2018 -0700

    HDFS-13722. HDFS Native Client Fails Compilation on Ubuntu 18.04 (contributed by Jack Bearden)

 .../src/main/native/libhdfspp/lib/rpc/request.cc                        | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 82ac3aa6d0a83235cfac2805a444dd26efe5f9ce
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Tue Jul 10 10:36:17 2018 -0700

    YARN-8502. Use path strings consistently for webservice endpoints in RMWebServices. Contributed by Szilard Nemeth.

 .../hadoop/yarn/server/resourcemanager/webapp/RMWSConsts.java       | 3 +++
 .../hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java    | 6 +++---
 2 files changed, 6 insertions(+), 3 deletions(-)

commit d503f65b6689b19278ec2a0cf9da5a8762539de8
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu Jul 5 13:52:00 2018 -0600

    HADOOP-15541. [s3a] Shouldn't try to drain stream before aborting
    connection in case of timeout.

 .../org/apache/hadoop/fs/s3a/S3AInputStream.java   | 24 ++++++++++++++--------
 1 file changed, 16 insertions(+), 8 deletions(-)

commit 705e2c1f7cba51496b0d019ecedffbe5fb55c28b
Author: Sunil G <sunilg@apache.org>
Date:   Tue Jul 10 20:11:47 2018 +0530

    YARN-8473. Containers being launched as app tears down can leave containers in NEW state. Contributed by Jason Lowe.

 .../application/ApplicationImpl.java               | 36 ++++++++++++---
 .../application/TestApplication.java               | 53 +++++++++++++++++-----
 2 files changed, 71 insertions(+), 18 deletions(-)

commit ca8b80bf59c0570bb9172208d3a6c993a6854514
Author: Steve Loughran <stevel@apache.org>
Date:   Tue Jul 10 10:43:59 2018 +0100

    HADOOP-15384. distcp numListstatusThreads option doesn't get to -delete scan.
    Contributed by Steve Loughran.

 .../main/java/org/apache/hadoop/tools/DistCpOptions.java    |  5 ++++-
 .../java/org/apache/hadoop/tools/mapred/CopyCommitter.java  | 13 +++++++++++--
 .../hadoop/tools/contract/AbstractContractDistCpTest.java   |  2 +-
 3 files changed, 16 insertions(+), 4 deletions(-)

commit 9bd5bef297b036b19f7be0c42c5477808ef8c070
Merge: 3584baf2642 2403231c8c3
Author: Arpit Agarwal <arp@apache.org>
Date:   Mon Jul 9 13:22:58 2018 -0700

    Merge remote-tracking branch 'apache/trunk' into HDDS-48

commit 3584baf2642816a453402a717a05d16754a6ac52
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 9 12:30:59 2018 -0700

    HDDS-48. Fix branch after merging from trunk.

 .../commandhandler/TestBlockDeletion.java          | 32 ++++++++++++----------
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  4 +--
 2 files changed, 19 insertions(+), 17 deletions(-)

commit 2403231c8c3685ba08cd6bdf715d281cae611e45
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 13:04:44 2018 -0700

    HDDS-240. Implement metrics for EventQueue.
    Contributed by Elek, Marton.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 ++++++++++++---------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 +++++--
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 +------
 3 files changed, 91 insertions(+), 87 deletions(-)

commit 3c0a66abe632277e89fccd8dced9e71ca5d87df0
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 13:03:57 2018 -0700

    Revert "HDDS-224. Create metrics for Event Watcher."
    
    This reverts commit cb5e225868a069d6d16244b462ebada44465dce8.
    The JIRA number is wrong, reverting to fix it.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 +++++++++------------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 ++-----
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 ++++++-
 3 files changed, 87 insertions(+), 91 deletions(-)

commit cb5e225868a069d6d16244b462ebada44465dce8
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 12:52:39 2018 -0700

    HDDS-224. Create metrics for Event Watcher.
    Contributed b Elek, Marton.

 .../hadoop/hdds/server/events/EventQueue.java      | 108 ++++++++++++---------
 .../hdds/server/events/SingleThreadExecutor.java   |  35 +++++--
 .../hadoop/hdds/server/events/TestEventQueue.java  |  35 +------
 3 files changed, 91 insertions(+), 87 deletions(-)

commit 4a08ddfa68a405bfd97ffd96fafc1e3d48d20d7e
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Mon Jul 9 15:43:38 2018 -0400

    HADOOP-15568. fix some typos in the .sh comments. Contributed by Steve Loughran.

 hadoop-common-project/hadoop-common/src/main/conf/hadoop-env.sh     | 6 +++---
 .../hadoop-common/src/main/conf/hadoop-metrics2.properties          | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ea9b608237e7f2cf9b1e36b0f78c9674ec84096f
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Mon Jul 9 12:27:36 2018 -0700

    YARN-7899. [AMRMProxy] Stateful FederationInterceptor for pending requests. Contributed by Botong Huang.

 .../apache/hadoop/yarn/client/AMRMClientUtils.java |  91 -------------
 .../hadoop/yarn/server/AMRMClientRelayer.java      |   9 +-
 .../yarn/server/uam/UnmanagedAMPoolManager.java    |  16 +++
 .../server/uam/UnmanagedApplicationManager.java    |  40 +++---
 .../yarn/server/MockResourceManagerFacade.java     |  13 +-
 .../amrmproxy/FederationInterceptor.java           | 146 +++++++++++++++++----
 .../nodemanager/amrmproxy/BaseAMRMProxyTest.java   |   2 +
 .../amrmproxy/TestFederationInterceptor.java       |  17 +++
 8 files changed, 192 insertions(+), 142 deletions(-)

commit c275a9a6a07b2bd889bdba4d05b420027f430b34
Merge: 44e19fc7f70 83cd84b70ba
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 9 12:13:03 2018 -0700

    Merge trunk into HDDS-48

commit e12d93bfc1a0efd007bc84758e60b5149c3aa663
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jul 9 12:02:20 2018 -0700

    HDDS-224. Create metrics for Event Watcher.
    Contributed by Elek, Marton.

 hadoop-hdds/framework/pom.xml                      |   5 +
 .../hadoop/hdds/server/events/EventWatcher.java    |  43 ++++++++-
 .../hdds/server/events/EventWatcherMetrics.java    |  79 +++++++++++++++
 .../hdds/server/events/TestEventWatcher.java       | 107 ++++++++++++++++++---
 4 files changed, 220 insertions(+), 14 deletions(-)

commit 895845e9b0d7ac49da36b5cf773c6330afe4f3e0
Author: Xiao Chen <xiao@apache.org>
Date:   Mon Jul 9 12:06:25 2018 -0700

    HADOOP-15581. Set default jetty log level to INFO in KMS. Contributed by Kitti Nanasi.

 hadoop-common-project/hadoop-kms/src/main/conf/kms-log4j.properties  | 4 +++-
 hadoop-common-project/hadoop-kms/src/test/resources/log4j.properties | 4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit def9d94a40e1ff71a0dc5a4db1f042e2704cb84d
Author: Xiao Chen <xiao@apache.org>
Date:   Mon Jul 9 12:00:32 2018 -0700

    HADOOP-15591. KMSClientProvider should log KMS DT acquisition at INFO level. Contributed by Kitti Nanasi.

 .../main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 83cd84b70bac7b613eb4b2901d5ffe40098692eb
Author: Wangda Tan <wangda@apache.org>
Date:   Mon Jul 9 11:30:08 2018 -0700

    YARN-8506. Make GetApplicationsRequestPBImpl thread safe. (wangda)
    
    Change-Id: If304567abb77a01b686d82c769bdf50728484163

 .../impl/pb/GetApplicationsRequestPBImpl.java      | 44 +++++++++++-----------
 1 file changed, 22 insertions(+), 22 deletions(-)

commit 0838fe833738e04f5e6f6408e97866d77bebbf30
Author: Robert Kanter <rkanter@apache.org>
Date:   Mon Jul 9 10:37:20 2018 -0700

    Only mount non-empty directories for cgroups (miklos.szegedi@cloudera.com via rkanter)

 .../container-executor/impl/container-executor.c   | 30 +++++++++++++++++++++-
 .../test/test-container-executor.c                 | 20 +++++++++++++++
 2 files changed, 49 insertions(+), 1 deletion(-)

commit 44e19fc7f70b5c19f2b626fe247aea5d51ada51c
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Jul 9 09:33:09 2018 -0700

    HDDS-213. Single lock to synchronize KeyValueContainer#update.

 .../ozone/container/common/impl/ContainerData.java |  28 +++--
 .../container/common/impl/ContainerDataYaml.java   |  10 +-
 .../container/keyvalue/KeyValueContainer.java      | 124 ++++++++-------------
 .../ozone/container/ozoneimpl/ContainerReader.java |  37 +++---
 4 files changed, 87 insertions(+), 112 deletions(-)

commit eecb5baaaaa54599aeae758abd4007e55e5b531f
Author: Andrew Wang <wang@apache.org>
Date:   Mon Jul 9 15:17:21 2018 +0200

    HDFS-13719. Docs around dfs.image.transfer.timeout are misleading. Contributed by Kitti Nansi.

 .../hadoop-hdfs/src/main/resources/hdfs-default.xml         | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 43f7fe8aae0eca89cce4d67bfc4965fe8ce63e38
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Jul 9 15:06:07 2018 +0800

    HDFS-13710. RBF: setQuota and getQuotaUsage should check the dfs.federation.router.quota.enable. Contributed by yanghuafeng.

 .../hdfs/server/federation/router/Quota.java       |  8 ++
 .../server/federation/router/RouterRpcServer.java  |  1 -
 .../federation/router/TestDisableRouterQuota.java  | 94 ++++++++++++++++++++++
 3 files changed, 102 insertions(+), 1 deletion(-)

commit 7a68ac607c52c8a28dcd75a367ae77331787a3b4
Author: Yiqun Lin <yqlin@apache.org>
Date:   Mon Jul 9 14:27:34 2018 +0800

    HDFS-13674. Improve documentation on Metrics. Contributed by Chao Sun.

 .../hadoop-common/src/site/markdown/Metrics.md     | 39 +++++++++++++---------
 1 file changed, 24 insertions(+), 15 deletions(-)

commit 790c563511161c901b7b667e787baca8725f9249
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jul 8 11:27:54 2018 -0700

    HDDS-235. Fix TestOzoneAuditLogger#verifyDefaultLogLevel.
    Contributed by Xiaoyu Yao.

 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 46 +++++++++++++++-------
 1 file changed, 31 insertions(+), 15 deletions(-)

commit 2f51cd60ef082cd0360fe46e9d2a4ec9b8ed979a
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jul 8 11:11:21 2018 -0700

    HDDS-217. Move all SCMEvents to a package.
    Contributed by Anu Engineer.

 .../scm/container/CloseContainerEventHandler.java  | 13 ++--
 .../apache/hadoop/hdds/scm/events/SCMEvents.java   | 80 ++++++++++++++++++++++
 .../hadoop/hdds/scm/events/package-info.java       | 23 +++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  5 +-
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 11 ++-
 .../hdds/scm/server/StorageContainerManager.java   |  7 +-
 .../container/TestCloseContainerEventHandler.java  | 27 ++++----
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 10 +--
 .../server/TestSCMDatanodeHeartbeatDispatcher.java | 20 +++---
 9 files changed, 147 insertions(+), 49 deletions(-)

commit 936e0df0d344f13eea97fe624b154e8356cdea7c
Author: Xiao Chen <xiao@apache.org>
Date:   Fri Jul 6 20:45:27 2018 -0700

    HDFS-13721. NPE in DataNode due to uninitialized DiskBalancer.

 .../apache/hadoop/hdfs/server/datanode/DataNode.java  | 19 +++++++++++++------
 .../hdfs/server/diskbalancer/TestDiskBalancer.java    |  5 +++++
 2 files changed, 18 insertions(+), 6 deletions(-)

commit cb9574a337f2012f2ab59c2abf300567562bf3a3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 16:26:40 2018 -0700

    HDDS-237. Add updateDeleteTransactionId. Contributed by Bharat Viswanadham and Lokesh Jain

 .../ozone/container/common/impl/ContainerData.java  | 21 +++++++++++++++++++++
 .../container/common/interfaces/Container.java      |  6 ++++++
 .../ozone/container/keyvalue/KeyValueContainer.java |  5 +++++
 3 files changed, 32 insertions(+)

commit ba683204498c97654be4727ab9e128c433a45498
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Fri Jul 6 15:19:01 2018 -0700

    YARN-8302. ATS v2 should handle HBase connection issue properly. Contributed by Billie Rinaldi.

 .../apache/hadoop/yarn/conf/YarnConfiguration.java |   7 +
 .../storage/TestTimelineReaderHBaseDown.java       | 220 +++++++++++++++++++++
 .../storage/HBaseTimelineReaderImpl.java           |  93 +++++++++
 3 files changed, 320 insertions(+)

commit e899c4cc01df3b657893314adcdbb411dfbf3764
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 15:02:40 2018 -0700

    HDDS-211. Add a create container Lock. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/HddsDispatcher.java  |  4 +++-
 .../ozone/container/common/interfaces/Handler.java   |  8 +++-----
 .../ozone/container/keyvalue/KeyValueHandler.java    | 20 +++++++++++++++++---
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java   |  7 -------
 4 files changed, 23 insertions(+), 16 deletions(-)

commit 0247cb6318507afe06816e337a19f396afc53efa
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Fri Jul 6 14:59:49 2018 -0700

    HDFS-13121. NPE when request file descriptors when SC read. Contributed by Zsolt Venczel.

 .../hdfs/client/impl/BlockReaderFactory.java       |  5 ++
 .../hdfs/shortcircuit/TestShortCircuitCache.java   | 89 ++++++++++++++++++++++
 2 files changed, 94 insertions(+)

commit 061b168529a9cd5d6a3a482c890bacdb49186368
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Jul 6 12:09:05 2018 -0700

    HDDS-167. Rename KeySpaceManager to OzoneManager. Contributed by Arpit Agarwal.

 .gitignore                                         |   4 +
 dev-support/bin/ozone-dist-layout-stitching        |   2 +-
 .../hadoop-common/src/main/conf/hadoop-env.sh      |   6 +-
 .../src/main/compose/ozone/docker-compose.yaml     |   6 +-
 hadoop-dist/src/main/compose/ozone/docker-config   |   2 +-
 hadoop-dist/src/main/compose/ozoneperf/README.md   |   4 +-
 .../src/main/compose/ozoneperf/docker-compose.yaml |   6 +-
 .../src/main/compose/ozoneperf/docker-config       |   2 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   2 +-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  22 +-
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  10 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |   6 +-
 .../common/src/main/resources/ozone-default.xml    | 120 ++++-----
 .../src/main/resources/webapps/static/ozone.js     |   4 +-
 .../resources/webapps/static/templates/config.html |   4 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   2 +-
 .../scm/container/states/ContainerStateMap.java    |   6 +-
 .../apache/hadoop/hdds/scm/node/CommandQueue.java  |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |   2 +-
 .../apache/hadoop/hdds/scm/cli/OzoneBaseCLI.java   |   2 +-
 .../src/test/acceptance/basic/basic.robot          |   6 +-
 .../src/test/acceptance/basic/docker-compose.yaml  |   8 +-
 .../src/test/acceptance/basic/docker-config        |   4 +-
 .../src/test/acceptance/basic/ozone-shell.robot    |  18 +-
 .../src/test/acceptance/commonlib.robot            |   4 +-
 .../test/acceptance/ozonefs/docker-compose.yaml    |   8 +-
 .../src/test/acceptance/ozonefs/docker-config      |   4 +-
 .../src/test/acceptance/ozonefs/ozonefs.robot      |   6 +-
 .../org/apache/hadoop/ozone/client/BucketArgs.java |   4 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |  86 ++++---
 .../org/apache/hadoop/ozone/client/OzoneKey.java   |   2 +-
 .../org/apache/hadoop/ozone/client/VolumeArgs.java |   4 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  24 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  54 ++--
 .../client/rest/DefaultRestServerSelector.java     |   2 +-
 .../hadoop/ozone/client/rest/RestClient.java       |  15 +-
 .../ozone/client/rest/RestServerSelector.java      |   2 +-
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 142 ++++++-----
 .../hadoop/ozone/client/TestHddsClientUtils.java   |  24 +-
 hadoop-ozone/common/pom.xml                        |   2 +-
 hadoop-ozone/common/src/main/bin/ozone             |   9 +-
 hadoop-ozone/common/src/main/bin/start-ozone.sh    |  16 +-
 hadoop-ozone/common/src/main/bin/stop-ozone.sh     |  16 +-
 .../hadoop/ozone/{KsmUtils.java => OmUtils.java}   |  51 ++--
 .../apache/hadoop/ozone/freon/OzoneGetConf.java    |  16 +-
 .../org/apache/hadoop/ozone/ksm/KSMConfigKeys.java |  81 ------
 .../org/apache/hadoop/ozone/om/OMConfigKeys.java   |  81 ++++++
 .../helpers/OmBucketArgs.java}                     |  46 ++--
 .../helpers/OmBucketInfo.java}                     |  42 ++--
 .../KsmKeyArgs.java => om/helpers/OmKeyArgs.java}  |  14 +-
 .../KsmKeyInfo.java => om/helpers/OmKeyInfo.java}  |  64 ++---
 .../helpers/OmKeyLocationInfo.java}                |  20 +-
 .../helpers/OmKeyLocationInfoGroup.java}           |  42 ++--
 .../helpers/OmOzoneAclMap.java}                    |  16 +-
 .../helpers/OmVolumeArgs.java}                     |  40 +--
 .../ozone/{ksm => om}/helpers/OpenKeySession.java  |   8 +-
 .../ozone/{ksm => om}/helpers/ServiceInfo.java     |  20 +-
 .../ozone/{ksm => om}/helpers/VolumeArgs.java      |   2 +-
 .../ozone/{ksm => om}/helpers/package-info.java    |   2 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 .../protocol/OzoneManagerProtocol.java}            |  68 ++---
 .../ozone/{ksm => om}/protocol/package-info.java   |   2 +-
 ...zoneManagerProtocolClientSideTranslatorPB.java} | 180 ++++++-------
 .../protocolPB/OzoneManagerProtocolPB.java}        |  12 +-
 .../ozone/{ksm => om}/protocolPB/package-info.java |   2 +-
 .../{KSMPBHelper.java => OMPBHelper.java}          |  10 +-
 ...erProtocol.proto => OzoneManagerProtocol.proto} |  14 +-
 hadoop-ozone/docs/content/GettingStarted.md        |  18 +-
 hadoop-ozone/docs/content/Metrics.md               |  10 +-
 hadoop-ozone/docs/content/_index.md                |  12 +-
 hadoop-ozone/docs/static/OzoneOverview.svg         |   2 +-
 .../org/apache/hadoop/ozone/MiniOzoneCluster.java  |  24 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  66 ++---
 .../hadoop/ozone/TestOzoneConfigurationFields.java |   4 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  18 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  12 +-
 .../ozone/client/rest/TestOzoneRestClient.java     |   6 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  18 +-
 .../commandhandler/TestBlockDeletion.java          |  45 ++--
 .../TestCloseContainerByPipeline.java              |  35 ++-
 .../commandhandler/TestCloseContainerHandler.java  |  14 +-
 .../{ksm => om}/TestContainerReportWithKeys.java   |  12 +-
 .../TestMultipleContainerReadWrite.java            |   2 +-
 .../TestOmBlockVersioning.java}                    |  68 ++---
 .../TestKSMMetrcis.java => om/TestOmMetrics.java}  | 193 +++++++-------
 .../TestKSMSQLCli.java => om/TestOmSQLCli.java}    |  16 +-
 .../TestOzoneManager.java}                         | 185 +++++++-------
 .../TestOzoneManagerRestInterface.java}            |  32 +--
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  14 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |   3 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |  12 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  58 ++---
 .../webapps/{ksm => ozoneManager}/.gitkeep         |   0
 .../hdfs/server/datanode/ObjectStoreHandler.java   |  33 ++-
 .../ozone/web/handlers/KeyProcessTemplate.java     |   4 +-
 .../ozone/web/handlers/VolumeProcessTemplate.java  |   4 +-
 .../web/storage/DistributedStorageHandler.java     | 153 ++++++------
 .../hadoop/ozone/{ksm => om}/BucketManager.java    |  20 +-
 .../ozone/{ksm => om}/BucketManagerImpl.java       |  80 +++---
 .../ozone/{ksm => om}/KeyDeletingService.java      |  20 +-
 .../hadoop/ozone/{ksm => om}/KeyManager.java       |  42 ++--
 .../hadoop/ozone/{ksm => om}/KeyManagerImpl.java   | 140 +++++------
 .../ozone/{ksm/KSMMXBean.java => om/OMMXBean.java} |   6 +-
 .../OMMetadataManager.java}                        |  38 +--
 .../{ksm/KSMMetrics.java => om/OMMetrics.java}     |  22 +-
 .../{ksm/KSMStorage.java => om/OMStorage.java}     |  46 ++--
 .../OmMetadataManagerImpl.java}                    | 126 +++++-----
 .../ozone/{ksm => om}/OpenKeyCleanupService.java   |  10 +-
 .../KeySpaceManager.java => om/OzoneManager.java}  | 277 ++++++++++-----------
 .../OzoneManagerHttpServer.java}                   |  30 +--
 .../ozone/{ksm => om}/ServiceListJSONServlet.java  |  14 +-
 .../hadoop/ozone/{ksm => om}/VolumeManager.java    |  18 +-
 .../ozone/{ksm => om}/VolumeManagerImpl.java       |  89 ++++---
 .../exceptions/OMException.java}                   |  22 +-
 .../ozone/{ksm => om}/exceptions/package-info.java |   4 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 ...zoneManagerProtocolServerSideTranslatorPB.java} | 180 ++++++-------
 .../hadoop/ozone/protocolPB/package-info.java      |   2 +-
 .../main/webapps/{ksm => ozoneManager}/index.html  |  12 +-
 .../main/webapps/{ksm => ozoneManager}/main.css    |   0
 .../main/webapps/{ksm => ozoneManager}/main.html   |   0
 .../om-metrics.html}                               |   2 +-
 .../{ksm/ksm.js => ozoneManager/ozoneManager.js}   |  14 +-
 .../ozone/{ksm => om}/TestBucketManagerImpl.java   | 129 +++++-----
 .../hadoop/ozone/{ksm => om}/TestChunkStreams.java |   2 +-
 .../TestOzoneManagerHttpServer.java}               |  16 +-
 .../hadoop/ozone/{ksm => om}/package-info.java     |   4 +-
 .../hadoop/fs/ozone/contract/OzoneContract.java    |   4 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  48 ++--
 130 files changed, 2013 insertions(+), 1998 deletions(-)

commit e4bf38cf50943565796c00f8b5711a2882813488
Author: Sunil G <sunilg@apache.org>
Date:   Fri Jul 6 12:05:32 2018 -0700

    YARN-8492. ATSv2 HBase tests are failing with ClassNotFoundException. Contributed by Rohith Sharma K S.

 .../hadoop-yarn-server-timelineservice-hbase-tests/pom.xml     | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 498e3bfb6b93bf542e5581d83e64e920983fe87e
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu Jul 5 14:19:05 2018 -0700

    HADOOP-15571. Multiple FileContexts created with the same configuration object should be allowed to have different umask. Contributed by Vinod Kumar Vavilapalli.

 .../java/org/apache/hadoop/fs/FileContext.java     |  9 +++--
 .../java/org/apache/hadoop/fs/TestFileContext.java | 44 +++++++++++++++++++++-
 .../yarn/logaggregation/AggregatedLogFormat.java   |  6 +--
 3 files changed, 49 insertions(+), 10 deletions(-)

commit a129e3e74e16ed039d637dc1499dc3e5df317d94
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu Jul 5 10:54:19 2018 -0700

    YARN-7451. Add missing tests to verify the presence of custom resources of RM apps and scheduler webservice endpoints (snemeth via rkanter)

 .../server/resourcemanager/webapp/dao/AppInfo.java |   2 +-
 .../resourcemanager/webapp/dao/SchedulerInfo.java  |   8 +-
 .../fair/TestFairSchedulerConfiguration.java       |   9 +-
 .../resourcemanager/webapp/TestRMWebServices.java  |  31 +--
 .../webapp/TestRMWebServicesApps.java              |  14 +-
 .../TestRMWebServicesAppsCustomResourceTypes.java  | 242 ++++++++++++++++++
 .../webapp/TestRMWebServicesCapacitySched.java     |  30 ++-
 .../TestRMWebServicesConfigurationMutation.java    |   5 +
 .../webapp/TestRMWebServicesFairScheduler.java     |  95 ++++----
 .../TestRMWebServicesSchedulerActivities.java      |   2 +-
 .../CustomResourceTypesConfigurationProvider.java  | 138 +++++++++++
 .../FairSchedulerJsonVerifications.java            | 139 +++++++++++
 .../FairSchedulerXmlVerifications.java             | 153 ++++++++++++
 ...ebServicesFairSchedulerCustomResourceTypes.java | 271 +++++++++++++++++++++
 .../webapp/helper/AppInfoJsonVerifications.java    | 123 ++++++++++
 .../webapp/helper/AppInfoXmlVerifications.java     | 132 ++++++++++
 .../webapp/helper/BufferedClientResponse.java      |  57 +++++
 .../helper/JsonCustomResourceTypeTestcase.java     |  77 ++++++
 .../helper/ResourceRequestsJsonVerifications.java  | 252 +++++++++++++++++++
 .../helper/ResourceRequestsXmlVerifications.java   | 215 ++++++++++++++++
 .../helper/XmlCustomResourceTypeTestCase.java      | 112 +++++++++
 21 files changed, 2020 insertions(+), 87 deletions(-)

commit 9edc74f64a31450af3c55c0dadf352862e4b359d
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Jul 5 10:42:39 2018 -0700

    YARN-7556. Fair scheduler configuration should allow resource types in the minResources and maxResources properties. (Daniel Templeton and Szilard Nemeth via Haibo Chen)

 .../hadoop-yarn/dev-support/findbugs-exclude.xml   |  17 +-
 .../apache/hadoop/yarn/api/records/Resource.java   |  13 ++
 .../yarn/api/records/impl/LightWeightResource.java |  23 ++-
 .../scheduler/fair/ConfigurableResource.java       |  69 +++++++-
 .../scheduler/fair/FairSchedulerConfiguration.java | 174 ++++++++++++++++++---
 .../fair/allocation/AllocationFileQueueParser.java |   2 +-
 .../fair/TestFairSchedulerConfiguration.java       | 151 ++++++++++++++----
 .../src/site/markdown/FairScheduler.md             |   6 +-
 8 files changed, 385 insertions(+), 70 deletions(-)

commit 7dcf5878a40bcaff815527af85bfd1302bae6d32
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jul 6 11:01:33 2018 -0700

    HDDS-204. Modify Integration tests for new ContainerIO classes. Contributed by Bharat Viswanadham

 .../ozone/container/keyvalue/KeyValueHandler.java  |  8 ++++
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 10 -----
 .../ozone/container/ozoneimpl/ContainerReader.java | 18 ++++++--
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  2 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 51 +---------------------
 .../TestGenerateOzoneRequiredConfigurations.java   |  5 ++-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  2 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +
 8 files changed, 31 insertions(+), 67 deletions(-)

commit 2c2351e87b60d3e8b50b94e9ca5ab78d7afae783
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 5 15:23:39 2018 -0700

    HDDS-182:CleanUp Reimplemented classes. Contributed by Hansiha Koneru

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   10 +
 .../ozone/container/common/helpers/ChunkUtils.java |  343 ------
 .../container/common/helpers/ContainerData.java    |  512 ---------
 .../container/common/helpers/ContainerUtils.java   |  179 +---
 .../ozone/container/common/helpers/KeyUtils.java   |  148 ---
 .../container/common/impl/ChunkManagerImpl.java    |  233 ----
 .../ozone/container/common/impl/ContainerData.java |  131 ++-
 .../container/common/impl/ContainerDataYaml.java   |   29 +-
 .../common/impl/ContainerLocationManagerImpl.java  |  158 ---
 .../common/impl/ContainerManagerImpl.java          | 1115 --------------------
 .../ozone/container/common/impl/ContainerSet.java  |   19 +-
 .../common/impl/ContainerStorageLocation.java      |  212 ----
 .../ozone/container/common/impl/Dispatcher.java    |  695 ------------
 .../container/common/impl/KeyManagerImpl.java      |  204 ----
 .../RandomContainerDeletionChoosingPolicy.java     |    1 -
 ...TopNOrderedContainerDeletionChoosingPolicy.java |    1 -
 .../container/common/interfaces/ChunkManager.java  |   73 --
 .../container/common/interfaces/Container.java     |    1 -
 .../ContainerDeletionChoosingPolicy.java           |    3 +-
 .../common/interfaces/ContainerManager.java        |  267 -----
 .../container/common/interfaces/KeyManager.java    |   73 --
 .../ozone/container/common/volume/VolumeSet.java   |   13 +-
 .../container/keyvalue/KeyValueContainer.java      |   36 +-
 .../container/keyvalue/KeyValueContainerData.java  |   80 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |    2 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |   18 +-
 .../ozone/container/keyvalue/helpers/KeyUtils.java |   19 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    |   48 +-
 .../container/keyvalue/impl/ChunkManagerImpl.java  |   10 +-
 .../background/BlockDeletingService.java           |   35 +-
 .../statemachine/background/package-info.java      |    2 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |    2 +-
 .../common/TestKeyValueContainerData.java          |    2 +-
 .../common/impl/TestContainerDataYaml.java         |    6 +-
 .../container/common/impl/TestContainerSet.java    |   10 +-
 .../volume/TestRoundRobinVolumeChoosingPolicy.java |    6 +-
 .../container/common/volume/TestVolumeSet.java     |    6 +-
 .../container/keyvalue/TestKeyValueContainer.java  |   20 +-
 .../container/keyvalue/TestKeyValueHandler.java    |   11 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |    2 +-
 .../testutils/BlockDeletingServiceTestImpl.java    |    9 +-
 .../src/test/resources/additionalfields.container  |    2 +-
 .../src/test/resources/incorrect.container         |    2 +-
 .../ozone/container/ContainerTestHelper.java       |    2 +
 .../container/common/TestBlockDeletingService.java |  118 +--
 .../impl/TestContainerDeletionChoosingPolicy.java  |   63 +-
 .../common/impl/TestContainerPersistence.java      |  478 ++++-----
 .../container/metrics/TestContainerMetrics.java    |    3 +-
 .../container/server/TestContainerServer.java      |   14 +-
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |   44 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   24 +-
 51 files changed, 696 insertions(+), 4798 deletions(-)

commit 39ad98903a5f042573b97a2e5438bc57af7cc7a1
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jul 5 12:22:18 2018 -0700

    Revert "Merge branch 'trunk' of https://git-wip-us.apache.org/repos/asf/hadoop into trunk"
    
    This reverts commit c163d1797ade0f47d35b4a44381b8ef1dfec5b60, reversing
    changes made to 0d9804dcef2eab5ebf84667d9ca49bb035d9a731.

 .../hadoop-yarn/dev-support/findbugs-exclude.xml   |  17 +-
 .../apache/hadoop/yarn/api/records/Resource.java   |  13 -
 .../yarn/api/records/impl/LightWeightResource.java |  23 +-
 .../scheduler/fair/ConfigurableResource.java       |  69 +-----
 .../scheduler/fair/FairSchedulerConfiguration.java | 174 ++-----------
 .../fair/allocation/AllocationFileQueueParser.java |   2 +-
 .../server/resourcemanager/webapp/dao/AppInfo.java |   2 +-
 .../resourcemanager/webapp/dao/SchedulerInfo.java  |   8 +-
 .../fair/TestFairSchedulerConfiguration.java       | 160 +++---------
 .../resourcemanager/webapp/TestRMWebServices.java  |  31 ++-
 .../webapp/TestRMWebServicesApps.java              |  14 +-
 .../TestRMWebServicesAppsCustomResourceTypes.java  | 242 ------------------
 .../webapp/TestRMWebServicesCapacitySched.java     |  30 +--
 .../TestRMWebServicesConfigurationMutation.java    |   5 -
 .../webapp/TestRMWebServicesFairScheduler.java     |  95 ++++----
 .../TestRMWebServicesSchedulerActivities.java      |   2 +-
 .../CustomResourceTypesConfigurationProvider.java  | 138 -----------
 .../FairSchedulerJsonVerifications.java            | 139 -----------
 .../FairSchedulerXmlVerifications.java             | 153 ------------
 ...ebServicesFairSchedulerCustomResourceTypes.java | 271 ---------------------
 .../webapp/helper/AppInfoJsonVerifications.java    | 123 ----------
 .../webapp/helper/AppInfoXmlVerifications.java     | 132 ----------
 .../webapp/helper/BufferedClientResponse.java      |  57 -----
 .../helper/JsonCustomResourceTypeTestcase.java     |  77 ------
 .../helper/ResourceRequestsJsonVerifications.java  | 252 -------------------
 .../helper/ResourceRequestsXmlVerifications.java   | 215 ----------------
 .../helper/XmlCustomResourceTypeTestCase.java      | 112 ---------
 .../src/site/markdown/FairScheduler.md             |   6 +-
 28 files changed, 157 insertions(+), 2405 deletions(-)

commit a404164939c898aaf1ced90747b1011ed722e99a
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jul 5 11:26:00 2018 -0700

    HDDS-229:Remove singleton for Handler. Contributed by Bharat Viswanadham

 .../ozone/container/common/interfaces/Handler.java |  2 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 22 ++++------------------
 2 files changed, 5 insertions(+), 19 deletions(-)

commit c163d1797ade0f47d35b4a44381b8ef1dfec5b60
Merge: 0d9804dcef2 99febe7fd50
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Thu Jul 5 10:55:05 2018 -0700

    Merge branch 'trunk' of https://git-wip-us.apache.org/repos/asf/hadoop into trunk

commit 0d9804dcef2eab5ebf84667d9ca49bb035d9a731
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Thu Jul 5 10:54:31 2018 -0700

    YARN-8435. Fix NPE when the same client simultaneously contact for the first time Yarn Router. Contributed by Rang Jiaheng.

 .../router/clientrm/RouterClientRMService.java     | 53 +++++++++---------
 .../router/rmadmin/RouterRMAdminService.java       | 51 +++++++++--------
 .../server/router/webapp/RouterWebServices.java    | 48 ++++++++--------
 .../router/clientrm/TestRouterClientRMService.java | 60 ++++++++++++++++++++
 .../router/rmadmin/TestRouterRMAdminService.java   | 60 ++++++++++++++++++++
 .../router/webapp/TestRouterWebServices.java       | 65 ++++++++++++++++++++++
 6 files changed, 259 insertions(+), 78 deletions(-)

commit 99febe7fd50c31c0f5dd40fa7f376f2c1f64f8c3
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu Jul 5 10:54:19 2018 -0700

    YARN-7451. Add missing tests to verify the presence of custom resources of RM apps and scheduler webservice endpoints (snemeth via rkanter)

 .../server/resourcemanager/webapp/dao/AppInfo.java |   2 +-
 .../resourcemanager/webapp/dao/SchedulerInfo.java  |   8 +-
 .../fair/TestFairSchedulerConfiguration.java       |   9 +-
 .../resourcemanager/webapp/TestRMWebServices.java  |  31 +--
 .../webapp/TestRMWebServicesApps.java              |  14 +-
 .../TestRMWebServicesAppsCustomResourceTypes.java  | 242 ++++++++++++++++++
 .../webapp/TestRMWebServicesCapacitySched.java     |  30 ++-
 .../TestRMWebServicesConfigurationMutation.java    |   5 +
 .../webapp/TestRMWebServicesFairScheduler.java     |  95 ++++----
 .../TestRMWebServicesSchedulerActivities.java      |   2 +-
 .../CustomResourceTypesConfigurationProvider.java  | 138 +++++++++++
 .../FairSchedulerJsonVerifications.java            | 139 +++++++++++
 .../FairSchedulerXmlVerifications.java             | 153 ++++++++++++
 ...ebServicesFairSchedulerCustomResourceTypes.java | 271 +++++++++++++++++++++
 .../webapp/helper/AppInfoJsonVerifications.java    | 123 ++++++++++
 .../webapp/helper/AppInfoXmlVerifications.java     | 132 ++++++++++
 .../webapp/helper/BufferedClientResponse.java      |  57 +++++
 .../helper/JsonCustomResourceTypeTestcase.java     |  77 ++++++
 .../helper/ResourceRequestsJsonVerifications.java  | 252 +++++++++++++++++++
 .../helper/ResourceRequestsXmlVerifications.java   | 215 ++++++++++++++++
 .../helper/XmlCustomResourceTypeTestCase.java      | 112 +++++++++
 21 files changed, 2020 insertions(+), 87 deletions(-)

commit 17262470246232d0f0651d627a4961e55b1efe6a
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu Jul 5 10:42:39 2018 -0700

    YARN-7556. Fair scheduler configuration should allow resource types in the minResources and maxResources properties. (Daniel Templeton and Szilard Nemeth via Haibo Chen)

 .../hadoop-yarn/dev-support/findbugs-exclude.xml   |  17 +-
 .../apache/hadoop/yarn/api/records/Resource.java   |  13 ++
 .../yarn/api/records/impl/LightWeightResource.java |  23 ++-
 .../scheduler/fair/ConfigurableResource.java       |  69 +++++++-
 .../scheduler/fair/FairSchedulerConfiguration.java | 174 ++++++++++++++++++---
 .../fair/allocation/AllocationFileQueueParser.java |   2 +-
 .../fair/TestFairSchedulerConfiguration.java       | 151 ++++++++++++++----
 .../src/site/markdown/FairScheduler.md             |   6 +-
 8 files changed, 385 insertions(+), 70 deletions(-)

commit 71df8c27c9a0e326232d3baf16414a63b5ea5a4b
Author: Nanda kumar <nanda@apache.org>
Date:   Thu Jul 5 02:11:10 2018 +0530

    HDDS-212. Introduce NodeStateManager to manage the state of Datanodes in SCM. Contributed by Nanda kumar.

 .../hdds/scm/client/ContainerOperationClient.java  |   8 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      |  13 +-
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 -
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |   5 +-
 .../protocol/StorageContainerLocationProtocol.java |   5 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |   8 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |   8 +-
 .../proto/StorageContainerLocationProtocol.proto   |  19 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  13 +-
 .../common/src/main/resources/ozone-default.xml    |  11 -
 .../org/apache/hadoop/hdds/scm/HddsServerUtil.java |  11 -
 .../protocol/StorageContainerNodeProtocol.java     |   4 +-
 .../apache/hadoop/hdds/scm/node/DatanodeInfo.java  | 109 ++++
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   |  98 ----
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |  16 +-
 .../hadoop/hdds/scm/node/NodeStateManager.java     | 575 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 506 ++----------------
 .../node/states/NodeAlreadyExistsException.java    |  45 ++
 .../hadoop/hdds/scm/node/states/NodeException.java |  44 ++
 .../scm/node/states/NodeNotFoundException.java     |  49 ++
 .../hadoop/hdds/scm/node/states/NodeStateMap.java  | 281 ++++++++++
 .../hdds/scm/server/SCMClientProtocolServer.java   |  60 +--
 .../scm/server/SCMDatanodeHeartbeatDispatcher.java |   2 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   2 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  58 +--
 .../hdds/scm/node/TestContainerPlacement.java      |  10 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 176 ++-----
 .../testutils/ReplicationNodeManagerMock.java      |  37 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   4 +-
 .../hadoop/ozone/scm/node/TestQueryNode.java       |  19 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   6 +-
 31 files changed, 1288 insertions(+), 918 deletions(-)

commit 3b637155a47d2aa93284969a96208347a647083d
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Jul 4 15:03:24 2018 +0800

    HDFS-13528. RBF: If a directory exceeds quota limit then quota usage is not refreshed for other mount entries. Contributed by Dibyendu Karmakar.

 .../hdfs/server/federation/router/Quota.java       |   2 +-
 .../router/RouterQuotaUpdateService.java           |  43 ++++-
 .../server/federation/router/TestRouterQuota.java  | 212 ++++++++++++++++++++-
 3 files changed, 243 insertions(+), 14 deletions(-)

commit 7ca4f0cefa220c752920822c8d16469ab3b09b37
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 3 13:30:19 2018 -0700

    HDDS-175. Refactor ContainerInfo to remove Pipeline object from it.
    Contributed by Ajay Kumar.

 .../hdds/scm/client/ContainerOperationClient.java  | 109 +++++++++++---
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  38 ++++-
 .../container/common/helpers/ContainerInfo.java    | 167 ++++++++++++++-------
 .../common/helpers/ContainerWithPipeline.java      | 131 ++++++++++++++++
 .../protocol/StorageContainerLocationProtocol.java |  13 +-
 ...inerLocationProtocolClientSideTranslatorPB.java |  26 +++-
 ...inerLocationProtocolServerSideTranslatorPB.java |  25 ++-
 .../proto/StorageContainerLocationProtocol.proto   |  15 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |   9 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  80 +++++-----
 .../block/DatanodeDeletedBlockTransactions.java    |  11 +-
 .../scm/container/CloseContainerEventHandler.java  |  26 +++-
 .../hdds/scm/container/ContainerMapping.java       | 128 +++++++++++++---
 .../hdds/scm/container/ContainerStateManager.java  |  30 +++-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  26 +++-
 .../hdds/scm/container/closer/ContainerCloser.java |  15 +-
 .../scm/container/states/ContainerStateMap.java    |   7 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  27 +++-
 .../hdds/scm/pipelines/PipelineSelector.java       |  16 ++
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   1 +
 .../standalone/StandaloneManagerImpl.java          |   1 +
 .../hdds/scm/server/SCMClientProtocolServer.java   |  14 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  15 +-
 .../container/TestCloseContainerEventHandler.java  |  31 ++--
 .../hdds/scm/container/TestContainerMapping.java   |  27 ++--
 .../scm/container/closer/TestContainerCloser.java  |  18 ++-
 .../hdds/scm/node/TestContainerPlacement.java      |   6 +-
 .../scm/cli/container/CloseContainerHandler.java   |  10 +-
 .../scm/cli/container/DeleteContainerHandler.java  |   9 +-
 .../scm/cli/container/InfoContainerHandler.java    |  11 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  15 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |   9 +-
 .../hadoop/ozone/protocolPB/OzonePBHelper.java     |  30 ++++
 .../scm/container/TestContainerStateManager.java   | 161 +++++++++++---------
 .../hadoop/ozone/TestContainerOperations.java      |  11 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |   6 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  10 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |   4 +-
 .../TestCloseContainerByPipeline.java              |  21 ++-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |   6 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  36 ++---
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 135 ++++++++---------
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  62 ++++----
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  14 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  16 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  63 +++-----
 47 files changed, 1139 insertions(+), 504 deletions(-)

commit 93ac01cb59b99b84b4f1ff26c089dcb5ce1b7c89
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue Jul 3 13:50:11 2018 -0700

    HADOOP-15215 s3guard set-capacity command to fail on read/write of 0 (Gabor Bota)

 .../org/apache/hadoop/fs/s3a/s3guard/S3GuardTool.java  | 10 ++++++++++
 .../fs/s3a/s3guard/AbstractS3GuardToolTestBase.java    | 18 ++++++++++++++++++
 2 files changed, 28 insertions(+)

commit c0ef7e7680d882e2182f48f033109678a48742ab
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jul 3 11:38:14 2018 -0700

    HDDS-198. Create AuditLogger mechanism to be used by OM, SCM and Datanode.
    Contributed by Dinesh Chitlangia.

 hadoop-hdds/common/pom.xml                         |  18 +++
 .../org/apache/hadoop/ozone/audit/AuditAction.java |  30 +++++
 .../hadoop/ozone/audit/AuditEventStatus.java       |  36 ++++++
 .../org/apache/hadoop/ozone/audit/AuditLogger.java | 128 ++++++++++++++++++++
 .../apache/hadoop/ozone/audit/AuditLoggerType.java |  37 ++++++
 .../org/apache/hadoop/ozone/audit/AuditMarker.java |  38 ++++++
 .../org/apache/hadoop/ozone/audit/Auditable.java   |  32 +++++
 .../apache/hadoop/ozone/audit/package-info.java    | 123 +++++++++++++++++++
 .../org/apache/hadoop/ozone/audit/DummyAction.java |  51 ++++++++
 .../org/apache/hadoop/ozone/audit/DummyEntity.java |  57 +++++++++
 .../hadoop/ozone/audit/TestOzoneAuditLogger.java   | 131 +++++++++++++++++++++
 .../apache/hadoop/ozone/audit/package-info.java    |  23 ++++
 .../common/src/test/resources/log4j2.properties    |  76 ++++++++++++
 .../org/apache/hadoop/ozone/audit/OMAction.java    |  51 ++++++++
 .../apache/hadoop/ozone/audit/package-info.java    |  22 ++++
 15 files changed, 853 insertions(+)

commit 51654a3962bcd0482c0e1dd32765e9533e3f9158
Author: Sunil G <sunilg@apache.org>
Date:   Tue Jul 3 09:59:20 2018 -0700

    YARN-8459. Improve Capacity Scheduler logs to debug invalid states. Contributed by Wangda Tan.

 .../scheduler/capacity/CapacityScheduler.java      | 39 ++++++++++++++--------
 .../scheduler/capacity/ParentQueue.java            | 36 +++++++++++++-------
 .../allocator/AbstractContainerAllocator.java      | 13 +++++---
 .../scheduler/common/fica/FiCaSchedulerApp.java    |  5 +++
 4 files changed, 63 insertions(+), 30 deletions(-)

commit e1f4b3b560a9ec2b34bb9ffbfe71fd3b0ac48120
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 3 09:53:41 2018 -0700

    HDDS-176. Add keyCount and container maximum size to ContainerData. Contributed by Bharat Viswanadham.

 .../ozone/container/common/impl/ContainerData.java | 50 +++++++++++++++++++++-
 .../container/common/impl/ContainerDataYaml.java   | 10 +++--
 .../states/endpoint/VersionEndpointTask.java       |  3 --
 .../container/keyvalue/KeyValueContainer.java      |  8 +---
 .../container/keyvalue/KeyValueContainerData.java  | 20 ++++++---
 .../ozone/container/keyvalue/KeyValueHandler.java  | 14 +++---
 .../keyvalue/helpers/KeyValueContainerUtil.java    |  1 +
 .../container/keyvalue/impl/KeyManagerImpl.java    |  6 +++
 .../container/keyvalue/impl/package-info.java      | 22 ++++++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 21 ++++++---
 .../common/TestKeyValueContainerData.java          |  8 +++-
 .../common/impl/TestContainerDataYaml.java         |  6 ++-
 .../container/common/impl/TestContainerSet.java    |  4 +-
 .../container/keyvalue/TestChunkManagerImpl.java   |  2 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |  7 ++-
 .../container/keyvalue/TestKeyValueContainer.java  |  2 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  2 +-
 .../src/test/resources/additionalfields.container  |  1 +
 .../src/test/resources/incorrect.container         |  1 +
 19 files changed, 147 insertions(+), 41 deletions(-)

commit 44b091a8d776db954db1f9ddbba91f7b9445c8ec
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Tue Jul 3 09:50:25 2018 -0700

    HDDS-205. Add metrics to HddsDispatcher. Contributed by Bharat Viswanadham.

 .../container/common/helpers/ContainerMetrics.java |  2 +-
 .../ozone/container/common/impl/Dispatcher.java    |  2 +-
 .../container/common/impl/HddsDispatcher.java      | 24 +++++++--
 .../ozone/container/common/interfaces/Handler.java | 14 +++--
 .../ozone/container/keyvalue/KeyValueHandler.java  | 41 ++++++++++++---
 .../container/keyvalue/TestKeyValueHandler.java    | 13 +++--
 .../container/metrics/TestContainerMetrics.java    | 59 +++++++++++++---------
 7 files changed, 110 insertions(+), 45 deletions(-)

commit 344f324710522ffb27852c1a673c4f7d3d6eac4b
Author: Andrew Wang <wang@apache.org>
Date:   Tue Jul 3 11:07:45 2018 +0200

    HDFS-13712. BlockReaderRemote.read() logging improvement. Contributed by Gergo Repas.

 .../apache/hadoop/hdfs/client/impl/BlockReaderRemote.java  | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit d9ba6f3656e8dc97d2813181e27d12e52dca4328
Author: Junping Du <junping_du@apache.org>
Date:   Tue Jul 3 14:46:44 2018 +0800

    yarn.resourcemanager.fail-fast is used inconsistently. Contributed by Yuanbo Liu.

 .../conf/capacity-scheduler.xml                                | 10 ++++++++++
 .../resourcemanager/scheduler/capacity/CapacityScheduler.java  |  6 +++---
 .../scheduler/capacity/CapacitySchedulerConfiguration.java     | 10 ++++++++++
 .../server/resourcemanager/TestWorkPreservingRMRestart.java    |  2 ++
 4 files changed, 25 insertions(+), 3 deletions(-)

commit 59a3038bc3d7913dca3de971026bc32cef536a2d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jul 2 21:43:18 2018 -0700

    HDFS-13715:diskbalancer does not work if one of the blockpools are empty on a Federated cluster. Contributed by Bharat Viswanadham

 .../hadoop/hdfs/server/datanode/DiskBalancer.java  | 29 ++++++---
 .../datanode/fsdataset/impl/FsDatasetImpl.java     |  8 +++
 .../hdfs/server/diskbalancer/TestDiskBalancer.java | 75 ++++++++++++++++++++--
 3 files changed, 96 insertions(+), 16 deletions(-)

commit 7296b644f7c44400f03995668573a4cfd2ee552c
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jul 2 16:36:25 2018 -0700

    HDFS-13714. Fix TestNameNodePrunesMissingStorages test failures on Windows. Contributed by Lukas Majercak.

 .../server/blockmanagement/TestNameNodePrunesMissingStorages.java    | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit fa9ef15ecd6dc30fb260e1c342a2b51505d39b6b
Author: Sunil G <sunilg@apache.org>
Date:   Mon Jul 2 15:34:37 2018 -0700

    YARN-8415. TimelineWebServices.getEntity should throw ForbiddenException instead of 404 when ACL checks fail. Contributed by Suma Shivaprasad.

 .../hadoop/yarn/server/timeline/RollingLevelDBTimelineStore.java   | 6 ++++++
 .../apache/hadoop/yarn/server/timeline/TimelineDataManager.java    | 7 ++++++-
 .../hadoop/yarn/server/timeline/webapp/TimelineWebServices.java    | 4 ++++
 .../yarn/server/timeline/webapp/TestTimelineWebServices.java       | 2 +-
 4 files changed, 17 insertions(+), 2 deletions(-)

commit 53e267fa7232add3c21174382d91b2607aa6becf
Author: Shane Kumpf <skumpf@apache.org>
Date:   Mon Jul 2 16:18:32 2018 -0600

    YARN-8485. Priviledged container app launch is failing intermittently. Contributed by Eric Yang

 .../src/main/native/container-executor/impl/utils/docker-util.c         | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ab2f8343a9810c9ec8b0920215a0897e7f671aba
Author: Nanda kumar <nanda@apache.org>
Date:   Tue Jul 3 00:51:16 2018 +0530

    HDDS-206. Ozone shell command doesn't respect KSM port set in ozone-site.xml. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/client/OzoneClientFactory.java    | 13 ++++++------
 .../java/org/apache/hadoop/ozone/KsmUtils.java     | 24 ++++++++++++++--------
 2 files changed, 23 insertions(+), 14 deletions(-)

commit 1804a31515e541b3371925aa895589919b54d443
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jul 2 10:48:20 2018 -0700

    HDFS-13536. [PROVIDED Storage] HA for InMemoryAliasMap. Contributed by Virajith Jalaparti.

 .../java/org/apache/hadoop/hdfs/DFSUtilClient.java |   4 +-
 .../hadoop/hdfs/client/HdfsClientConfigKeys.java   |   3 +
 .../ha/ConfiguredFailoverProxyProvider.java        |   9 +-
 .../ha/InMemoryAliasMapFailoverProxyProvider.java  |  38 +++
 .../java/org/apache/hadoop/hdfs/DFSConfigKeys.java |   5 +-
 .../main/java/org/apache/hadoop/hdfs/DFSUtil.java  |  37 +-
 .../org/apache/hadoop/hdfs/NameNodeProxies.java    |  15 +-
 ...moryAliasMapProtocolClientSideTranslatorPB.java |  95 ++++--
 .../server/aliasmap/InMemoryAliasMapProtocol.java  |   5 +
 .../aliasmap/InMemoryLevelDBAliasMapServer.java    |  19 +-
 .../impl/InMemoryLevelDBAliasMapClient.java        |  80 +++--
 .../src/main/resources/hdfs-default.xml            |  22 +-
 .../org/apache/hadoop/hdfs/MiniDFSCluster.java     |  13 +-
 .../org/apache/hadoop/hdfs/MiniDFSNNTopology.java  |   2 +-
 .../impl/TestInMemoryLevelDBAliasMapClient.java    |   7 +
 .../namenode/ITestProvidedImplementation.java      | 371 ++++++++++++++++++---
 16 files changed, 615 insertions(+), 110 deletions(-)

commit 5cc2541a163591181b80bf2ec42c1e7e7f8929f5
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jul 2 13:37:51 2018 -0400

    YARN-8465. Fixed docker container status for node manager restart.
               Contributed by Shane Kumpf

 .../linux/runtime/DockerLinuxContainerRuntime.java             |  4 ++--
 .../containermanager/runtime/ContainerExecutionException.java  |  6 ++++++
 .../linux/runtime/TestDockerContainerRuntime.java              | 10 ++++++++--
 3 files changed, 16 insertions(+), 4 deletions(-)

commit fef20a446f7bf9f29e0f0ee690987fb6fc78a031
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon Jul 2 09:41:15 2018 -0700

    HDFS-13635. Incorrect message when block is not found. Contributed by Gabor Bota.

 .../apache/hadoop/hdfs/server/datanode/ReplicaNotFoundException.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f51da9c4d1423c2ac92eb4f40e973264e7e968cc
Author: Andrew Wang <wang@apache.org>
Date:   Mon Jul 2 18:31:21 2018 +0200

    HADOOP-15554. Improve JIT performance for Configuration parsing. Contributed by Todd Lipcon.

 .../java/org/apache/hadoop/conf/Configuration.java | 458 +++++++++++++--------
 1 file changed, 276 insertions(+), 182 deletions(-)

commit 5d748bd056a32f2c6922514cd0c5b31d866a9919
Author: Andrew Wang <wang@apache.org>
Date:   Mon Jul 2 12:11:06 2018 +0200

    HDFS-13702. Remove HTrace hooks from DFSClient to reduce CPU usage. Contributed by Todd Lipcon.

 .../java/org/apache/hadoop/hdfs/DFSClient.java     | 19 -----
 .../org/apache/hadoop/hdfs/DFSInputStream.java     | 44 ++--------
 .../hdfs/client/impl/BlockReaderFactory.java       | 16 +---
 .../hadoop/hdfs/client/impl/BlockReaderLocal.java  | 93 +++++++++-------------
 .../hdfs/client/impl/BlockReaderLocalLegacy.java   | 44 +++++-----
 .../hadoop/hdfs/client/impl/BlockReaderRemote.java | 19 +----
 .../datanode/erasurecode/StripedBlockReader.java   |  2 +-
 .../hadoop/hdfs/server/namenode/NamenodeFsck.java  |  1 -
 .../hdfs/client/impl/BlockReaderTestUtil.java      |  2 -
 .../hdfs/client/impl/TestBlockReaderLocal.java     |  2 -
 .../blockmanagement/TestBlockTokenWithDFS.java     |  2 -
 .../server/datanode/TestDataNodeVolumeFailure.java |  2 -
 12 files changed, 68 insertions(+), 178 deletions(-)

commit 6ba99741086170b83c38d3e7e715d9e8046a1e00
Author: Andrew Wang <wang@apache.org>
Date:   Mon Jul 2 12:02:19 2018 +0200

    HDFS-13703. Avoid allocation of CorruptedBlocks hashmap when no corrupted blocks are hit. Contributed by Todd Lipcon.

 .../src/main/java/org/apache/hadoop/hdfs/DFSInputStream.java  |  2 +-
 .../src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java   | 11 ++++++-----
 .../java/org/apache/hadoop/hdfs/server/datanode/DataNode.java |  2 +-
 3 files changed, 8 insertions(+), 7 deletions(-)

commit d40121845e0e1ace6b349180ced53292353dbb7c
Author: Nanda kumar <nanda@apache.org>
Date:   Sun Jul 1 17:11:46 2018 +0530

    HADOOP-15574: Suppress build error if there are no docs after excluding private annotations. Contributed by Takanobu Asanuma.

 .../tools/ExcludePrivateAnnotationsStandardDoclet.java              | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit cdb084426bc27a9f902da0b6927a3354a307dd82
Author: Giovanni Matteo Fumarola <gifuma@apache.com>
Date:   Fri Jun 29 11:47:30 2018 -0700

    YARN-8481. AMRMProxyPolicies should accept heartbeat response from new/unknown subclusters. Contributed by Botong Huang.

 .../policies/amrmproxy/BroadcastAMRMProxyPolicy.java          | 11 -----------
 .../federation/policies/amrmproxy/RejectAMRMProxyPolicy.java  |  4 ----
 .../amrmproxy/TestBroadcastAMRMProxyFederationPolicy.java     | 11 +++--------
 3 files changed, 3 insertions(+), 23 deletions(-)

commit d36f6b9e93e4c30d24d0e837cb00bd24ffa8f274
Author: Eric E Payne <ericp@oath.com>
Date:   Fri Jun 29 18:18:32 2018 +0000

    HADOOP-15548: Randomize local dirs. Contributed by Jim Brennan.

 .../org/apache/hadoop/fs/LocalDirAllocator.java    |  7 ++-
 .../apache/hadoop/fs/TestLocalDirAllocator.java    | 59 ++++++++++++++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)

commit 100470140d86eede0fa240a9aa93226f274ee4f5
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri Jun 29 13:06:28 2018 -0500

    YARN-8451. Multiple NM heartbeat thread created when a slow NM resync with RM. Contributed by Botong Huang

 .../yarn/server/nodemanager/NodeManager.java       | 66 ++++++++++++++--------
 .../server/nodemanager/TestNodeManagerResync.java  | 56 ++++++++++++++++++
 2 files changed, 98 insertions(+), 24 deletions(-)

commit a820738e347854aed7cdaa7758d9c0830df624e3
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Fri Jun 29 10:21:25 2018 -0700

    YARN-8469. [UI2] URL needs to be trimmed to handle index.html redirection while accessing via knox. Contributed by Sunil Govindan.

 .../hadoop-yarn-ui/src/main/webapp/app/initializers/loader.js  | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 469b29c0817b7bf1902c9195c4f8d031a909e1c9
Author: Sunil G <sunilg@apache.org>
Date:   Fri Jun 29 10:02:53 2018 -0700

    YARN-8455. Add basic ACL check for all ATS v2 REST APIs. Contributed by Rohith Sharma K S.

 .../reader/TimelineFromIdConverter.java            |  93 ++++++++++
 .../reader/TimelineReaderWebServices.java          | 198 +++++++++++++++++----
 .../TestTimelineReaderWebServicesBasicAcl.java     | 154 ++++++++++++++++
 3 files changed, 407 insertions(+), 38 deletions(-)

commit 73746c5da76d5e39df131534a1ec35dfc5d2529b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 29 09:56:13 2018 -0700

    HDFS-13707. [PROVIDED Storage] Fix failing integration tests in ITestProvidedImplementation. Contributed by Virajith Jalaparti.

 .../server/common/blockaliasmap/impl/TextFileRegionAliasMap.java     | 5 +++--
 .../hadoop/hdfs/server/namenode/ITestProvidedImplementation.java     | 2 +-
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 23ebe0f4f0073816b0639bed5800e77b08b63681
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 17:10:10 2018 -0700

    HDDS-169:Add Volume IO Stats. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/ContainerData.java |  20 +++
 .../ozone/container/common/volume/HddsVolume.java  |   6 +
 .../container/common/volume/VolumeIOStats.java     | 139 +++++++++++++++++++++
 .../container/keyvalue/KeyValueContainer.java      |   1 +
 .../container/keyvalue/helpers/ChunkUtils.java     |  30 +++--
 .../container/keyvalue/impl/ChunkManagerImpl.java  |  26 ++--
 .../container/keyvalue/TestChunkManagerImpl.java   | 111 +++++++++++-----
 .../container/keyvalue/TestKeyManagerImpl.java     |  29 +++--
 8 files changed, 308 insertions(+), 54 deletions(-)

commit e4d7227aad586f055b47bdc90c65361f9fb23146
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jun 29 04:37:16 2018 +0530

    HDDS-178: DN should update transactionId on block delete. Contributed by Lokesh Jain.

 .../common/impl/ContainerManagerImpl.java          |   7 +-
 .../common/interfaces/ContainerManager.java        |   2 +
 .../commandhandler/DeleteBlocksCommandHandler.java |  29 ++-
 .../commandhandler/TestBlockDeletion.java          | 211 +++++++++++++++++++++
 4 files changed, 243 insertions(+), 6 deletions(-)

commit 852ca6b432a801df51f957a9b169483008e3c744
Author: Nanda kumar <nanda@apache.org>
Date:   Fri Jun 29 04:11:39 2018 +0530

    HDDS-185: TestCloseContainerByPipeline#testCloseContainerViaRatis fail intermittently. Contributed by Shashikant Banerjee.

 .../TestCloseContainerByPipeline.java              | 65 +++++++++++++++++++---
 1 file changed, 58 insertions(+), 7 deletions(-)

commit 84ac6bb1b1974ed7746c55ec79486525b1cca19b
Merge: c1045251680 291194302cc
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:57:23 2018 -0700

    Merge branch 'trunk' into HDDS-48

commit c10452516804eed793e575dedcd1ee7758ec1f4c
Merge: 52d1d9603ec d3fa83a44b0
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:28:23 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit 52d1d9603ecc03dbe3ef5fafa60377ef461ecca3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 14:07:52 2018 -0700

    HDDS-183:Integrate Volumeset, ContainerSet and HddsDispatcher. Contributed by Bharat Viswanadham

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../ozone/container/common/impl/ContainerData.java |   1 +
 .../impl/ContainerDataYaml.java}                   |  96 ++---
 .../ozone/container/common/impl/Dispatcher.java    |  11 +
 .../container/common/impl/HddsDispatcher.java      |  28 +-
 .../common/interfaces/ContainerDispatcher.java     |  14 +
 .../ozone/container/common/interfaces/Handler.java |  15 +-
 .../common/statemachine/DatanodeStateMachine.java  |   4 +-
 .../background/BlockDeletingService.java           |   1 +
 .../commandhandler/DeleteBlocksCommandHandler.java |  56 ++-
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  34 +-
 .../ozone/container/common/volume/HddsVolume.java  |   6 +
 .../ozone/container/common/volume/VolumeSet.java   |  48 +++
 .../container/keyvalue/KeyValueContainer.java      |  52 +--
 .../container/keyvalue/KeyValueContainerData.java  |  22 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  |  22 +-
 .../keyvalue/helpers/KeyValueContainerUtil.java    | 134 +++++++
 .../ozone/container/ozoneimpl/ContainerReader.java | 157 ++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  | 396 +++++++++------------
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 +
 .../ozone/container/common/SCMTestUtils.java       |  13 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   4 +
 .../common/TestKeyValueContainerData.java          |   3 +-
 ...eyValueYaml.java => TestContainerDataYaml.java} |  25 +-
 .../container/common/impl/TestContainerSet.java    |   6 +-
 .../container/common/interfaces/TestHandler.java   |   8 +-
 .../container/keyvalue/TestChunkManagerImpl.java   |   3 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |   3 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  10 +-
 .../container/keyvalue/TestKeyValueHandler.java    |   8 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 108 ++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   4 +
 .../ozone/container/common/TestEndPoint.java       |  20 +-
 .../ozone/TestStorageContainerManagerHelper.java   |  11 +-
 .../TestCloseContainerByPipeline.java              |   6 +-
 .../commandhandler/TestCloseContainerHandler.java  |   6 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  13 +-
 .../container/server/TestContainerServer.java      |  10 +
 .../ozone/ksm/TestContainerReportWithKeys.java     |  14 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  22 +-
 41 files changed, 954 insertions(+), 448 deletions(-)

commit 291194302cc1a875d6d94ea93cf1184a3f1fc2cc
Author: Sunil G <sunilg@apache.org>
Date:   Thu Jun 28 10:23:31 2018 -0700

    YARN-8379. Improve balancing resources in already satisfied queues by using Capacity Scheduler preemption. Contributed by Zian Chen.

 .../AbstractPreemptableResourceCalculator.java     |  21 +-
 .../CapacitySchedulerPreemptionContext.java        |   2 +
 .../capacity/CapacitySchedulerPreemptionUtils.java |  23 +-
 .../monitor/capacity/FifoCandidatesSelector.java   |  45 ++--
 .../capacity/IntraQueueCandidatesSelector.java     |   9 +-
 .../capacity/PreemptableResourceCalculator.java    |   7 +-
 .../capacity/PreemptionCandidatesSelector.java     |  11 +
 .../ProportionalCapacityPreemptionPolicy.java      | 129 ++++++++---
 .../QueuePriorityContainerCandidateSelector.java   |  16 +-
 .../ReservedContainerCandidatesSelector.java       |  16 +-
 .../monitor/capacity/TempQueuePerPartition.java    |   8 +-
 .../capacity/CapacitySchedulerConfiguration.java   |  17 ++
 .../TestPreemptionForQueueWithPriorities.java      |  58 +++++
 ...alCapacityPreemptionPolicyPreemptToBalance.java | 254 +++++++++++++++++++++
 .../TestCapacitySchedulerSurgicalPreemption.java   | 111 +++++++++
 15 files changed, 637 insertions(+), 90 deletions(-)

commit 13579f9296ddb087ff5fd24061f3aaf17741e6c9
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 28 10:13:30 2018 -0700

    HDDS-173. Refactor Dispatcher and implement Handler for new ContainerIO design.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  24 +-
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  12 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  20 +-
 .../common/src/main/resources/ozone-default.xml    |  33 ++
 .../ozone/container/common/helpers/ChunkUtils.java |   5 +-
 .../container/common/helpers/ContainerUtils.java   | 169 +++---
 .../ozone/container/common/helpers/KeyUtils.java   |   5 +-
 .../ozone/container/common/impl/ContainerSet.java  |   7 +-
 .../ozone/container/common/impl/Dispatcher.java    |  49 +-
 .../container/common/impl/HddsDispatcher.java      | 180 ++++++
 .../container/common/interfaces/Container.java     |  15 +
 .../ozone/container/common/interfaces/Handler.java |  71 +++
 .../server/ratis/ContainerStateMachine.java        |   5 +-
 .../ozone/container/common/volume/VolumeSet.java   |  11 +-
 .../container/keyvalue/KeyValueContainer.java      |  29 +-
 .../impl => keyvalue}/KeyValueContainerData.java   |  47 +-
 .../ozone/container/keyvalue/KeyValueHandler.java  | 643 +++++++++++++++++++++
 .../{common/impl => keyvalue}/KeyValueYaml.java    |  15 +-
 .../container/keyvalue/helpers/ChunkUtils.java     |  50 +-
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  35 +-
 .../KeyValueContainerLocationUtil.java             |   2 +-
 .../{ => helpers}/KeyValueContainerUtil.java       |  35 +-
 .../helpers/SmallFileUtils.java}                   |  36 +-
 .../keyvalue/{ => impl}/ChunkManagerImpl.java      |   4 +-
 .../keyvalue/{ => impl}/KeyManagerImpl.java        |  20 +-
 .../container/keyvalue/interfaces/KeyManager.java  |   4 +-
 .../common/TestKeyValueContainerData.java          |  36 +-
 .../container/common/impl/TestContainerSet.java    |  12 +-
 .../container/common/impl/TestKeyValueYaml.java    |   2 +
 .../container/common/interfaces/TestHandler.java   |  91 +++
 .../container/keyvalue/TestChunkManagerImpl.java   |   3 +-
 .../container/keyvalue/TestKeyManagerImpl.java     |   7 +-
 .../container/keyvalue/TestKeyValueContainer.java  |  10 +-
 .../container/keyvalue/TestKeyValueHandler.java    | 246 ++++++++
 .../ozone/client/io/ChunkGroupInputStream.java     |   6 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  50 --
 .../ozone/container/ContainerTestHelper.java       |  25 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |   6 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  12 +-
 39 files changed, 1678 insertions(+), 354 deletions(-)

commit 384764cdeac6490bc47fa0eb7b936baa4c0d3230
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jun 28 12:39:49 2018 -0400

    YARN-8409.  Fixed NPE in ActiveStandbyElectorBasedElectorService.
                Contributed by Chandni Singh

 .../org/apache/hadoop/ha/ActiveStandbyElector.java |  5 ++++-
 .../org/apache/hadoop/ha/ZKFailoverController.java |  2 +-
 .../resourcemanager/TestRMEmbeddedElector.java     | 22 ++++++++++++++++++++++
 3 files changed, 27 insertions(+), 2 deletions(-)

commit d3fa83a44b01c85f39bfb4deaf2972912ac61ca3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 28 09:21:56 2018 -0700

    HDFS-13705:The native ISA-L library loading failure should be made warning rather than an error message. Contributed by Shashikant Banerjee.

 .../main/java/org/apache/hadoop/io/erasurecode/ErasureCodeNative.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 85627e2cba91a61d675d20cdb35e188c6c81e3f2
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 27 23:31:32 2018 -0700

    HDDS-195. Create generic CommandWatcher utility.
    Contributed by Elek, Marton.

 .../hadoop/hdds/server/events/EventWatcher.java    | 157 +++++++++++++++
 .../server/events/IdentifiableEventPayload.java    |  30 +++
 .../hdds/server/events/EventHandlerStub.java       |  38 ++++
 .../hdds/server/events/TestEventWatcher.java       | 220 +++++++++++++++++++++
 4 files changed, 445 insertions(+)

commit ddbff7c8d3f1851e5c5fa9bc33637e859d7d8ccf
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Thu Jun 28 14:58:40 2018 +0900

    HADOOP-14313. Replace/improve Hadoop's byte[] comparator. Contributed by Vikas Vishwakarma.

 NOTICE.txt                                         |  8 ++++
 .../org/apache/hadoop/io/FastByteComparisons.java  | 44 +++++++++-------------
 2 files changed, 25 insertions(+), 27 deletions(-)

commit 2b2399d623539ab68e71a38fa9fbfc9a405bddb8
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Thu Jun 28 14:29:40 2018 +0900

    HADOOP-15495. Upgrade commons-lang version to 3.7 in hadoop-common-project and hadoop-tools. Contributed by Takanobu Asanuma.

 .../hadoop-client-minicluster/pom.xml              |  8 ---
 hadoop-common-project/hadoop-common/pom.xml        |  5 --
 .../apache/hadoop/conf/ReconfigurationServlet.java | 42 +++++++-------
 .../org/apache/hadoop/crypto/key/KeyProvider.java  |  4 +-
 .../org/apache/hadoop/crypto/key/KeyShell.java     |  2 +-
 .../main/java/org/apache/hadoop/fs/FsShell.java    |  3 +-
 .../src/main/java/org/apache/hadoop/fs/Path.java   |  2 +-
 .../java/org/apache/hadoop/fs/shell/Count.java     |  2 +-
 .../apache/hadoop/io/ElasticByteBufferPool.java    |  2 +-
 .../org/apache/hadoop/io/erasurecode/ECSchema.java |  4 +-
 .../io/nativeio/SharedFileDescriptorFactory.java   |  2 +-
 .../java/org/apache/hadoop/ipc/CallerContext.java  |  4 +-
 .../org/apache/hadoop/ipc/DecayRpcScheduler.java   |  4 +-
 .../java/org/apache/hadoop/ipc/FairCallQueue.java  |  4 +-
 .../apache/hadoop/metrics2/MetricsJsonBuilder.java |  2 +-
 .../apache/hadoop/metrics2/lib/MethodMetric.java   |  2 +-
 .../hadoop/metrics2/lib/MutableMetricsFactory.java |  2 +-
 .../hadoop/metrics2/lib/MutableQuantiles.java      |  2 +-
 .../metrics2/lib/MutableRollingAverages.java       |  2 +-
 .../apache/hadoop/metrics2/lib/MutableStat.java    |  2 +-
 .../metrics2/sink/RollingFileSystemSink.java       |  2 +-
 .../java/org/apache/hadoop/net/TableMapping.java   |  2 +-
 .../org/apache/hadoop/net/unix/DomainSocket.java   |  2 +-
 .../hadoop/net/unix/DomainSocketWatcher.java       |  2 +-
 .../security/ShellBasedUnixGroupsMapping.java      |  2 +-
 .../hadoop/security/alias/CredentialShell.java     |  2 +-
 .../hadoop/security/http/CrossOriginFilter.java    |  2 +-
 .../hadoop/security/token/DtFileOperations.java    |  2 +-
 .../java/org/apache/hadoop/tools/TableListing.java |  6 +-
 .../java/org/apache/hadoop/util/StringUtils.java   | 64 +++++++++++++++++++++-
 .../org/apache/hadoop/conf/TestConfiguration.java  |  2 +-
 .../hadoop/conf/TestConfigurationFieldsBase.java   |  2 +-
 .../hadoop/crypto/random/TestOsSecureRandom.java   |  2 +-
 .../java/org/apache/hadoop/fs/FSTestWrapper.java   |  2 +-
 .../apache/hadoop/fs/FileContextTestHelper.java    |  1 -
 .../hadoop/fs/TestDFCachingGetSpaceUsed.java       |  2 +-
 .../hadoop/fs/TestFileSystemStorageStatistics.java | 18 +++---
 .../apache/hadoop/fs/shell/TestCopyFromLocal.java  | 10 ++--
 .../nativeio/TestSharedFileDescriptorFactory.java  |  2 +-
 .../org/apache/hadoop/ipc/TestProtoBufRpc.java     |  2 +-
 .../java/org/apache/hadoop/ipc/TestSaslRPC.java    |  2 +-
 .../java/org/apache/hadoop/net/TestNetUtils.java   |  2 +-
 .../apache/hadoop/net/unix/TestDomainSocket.java   |  2 +-
 ...egationTokenAuthenticationHandlerWithMocks.java |  2 +-
 .../launcher/AbstractServiceLauncherTestBase.java  |  2 +-
 .../org/apache/hadoop/test/GenericTestUtils.java   |  4 +-
 .../hadoop/util/TestShutdownHookManager.java       |  2 +-
 .../org/apache/hadoop/util/TestSignalLogger.java   |  2 +-
 .../hdfs/server/namenode/FSNamesystemLock.java     |  2 +-
 hadoop-project/pom.xml                             |  5 --
 .../fs/aliyun/oss/AliyunCredentialsProvider.java   |  2 +-
 .../hadoop/fs/aliyun/oss/AliyunOSSFileSystem.java  |  2 +-
 .../fs/aliyun/oss/AliyunOSSFileSystemStore.java    |  2 +-
 .../hadoop/fs/aliyun/oss/AliyunOSSUtils.java       |  2 +-
 .../hadoop/fs/aliyun/oss/AliyunOSSTestUtils.java   |  2 +-
 .../hadoop/fs/s3a/AWSCredentialProviderList.java   |  2 +-
 .../hadoop/fs/s3a/BasicAWSCredentialsProvider.java |  2 +-
 .../org/apache/hadoop/fs/s3a/S3AFileSystem.java    |  4 +-
 .../org/apache/hadoop/fs/s3a/S3AInputStream.java   |  2 +-
 .../java/org/apache/hadoop/fs/s3a/S3AUtils.java    |  2 +-
 .../fs/s3a/SimpleAWSCredentialsProvider.java       |  2 +-
 .../fs/s3a/TemporaryAWSCredentialsProvider.java    |  2 +-
 .../fs/s3a/auth/AssumedRoleCredentialProvider.java |  2 +-
 .../fs/s3a/commit/files/SinglePendingCommit.java   |  2 +-
 .../hadoop/fs/s3a/commit/files/SuccessData.java    |  2 +-
 .../fs/s3a/commit/magic/MagicCommitTracker.java    |  2 +-
 .../apache/hadoop/fs/s3a/commit/staging/Paths.java |  2 +-
 .../fs/s3a/s3guard/DynamoDBClientFactory.java      |  2 +-
 .../fs/s3a/s3guard/DynamoDBMetadataStore.java      |  2 +-
 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  |  2 +-
 .../apache/hadoop/fs/s3a/s3guard/S3GuardTool.java  |  2 +-
 .../apache/hadoop/fs/s3native/S3xLoginHelper.java  |  4 +-
 .../hadoop/fs/s3a/ITestS3AConfiguration.java       |  4 +-
 .../ITestS3AEncryptionSSEKMSUserDefinedKey.java    |  2 +-
 ...ptionSSEKMSUserDefinedKeyBlockOutputStream.java |  2 +-
 .../org/apache/hadoop/fs/s3a/S3ATestUtils.java     |  2 +-
 .../hadoop/fs/s3a/commit/AbstractCommitITest.java  |  2 +-
 .../org/apache/hadoop/fs/adl/AdlFileSystem.java    |  2 +-
 .../hadoop/fs/adl/TestAzureADTokenProvider.java    |  2 +-
 .../fs/azure/AzureNativeFileSystemStore.java       |  2 +-
 .../hadoop/fs/azure/BlockBlobAppendStream.java     |  2 +-
 .../hadoop/fs/azure/ClientThrottlingAnalyzer.java  |  2 +-
 .../hadoop/fs/azure/NativeAzureFileSystem.java     |  2 +-
 .../hadoop/fs/azure/PageBlobOutputStream.java      |  2 +-
 .../hadoop/fs/azure/RemoteWasbAuthorizerImpl.java  |  2 +-
 .../fs/azure/SecureWasbRemoteCallHelper.java       |  2 +-
 .../hadoop/fs/azure/ITestBlobDataValidation.java   |  2 +-
 .../fs/azure/ITestNativeAzureFileSystemAppend.java |  2 +-
 .../hadoop/fs/azure/MockStorageInterface.java      | 12 ++--
 .../TestNativeAzureFileSystemBlockCompaction.java  |  2 +-
 .../fs/azure/integration/AzureTestUtils.java       |  2 +-
 .../org/apache/hadoop/tools/DistCpOptions.java     |  2 +-
 .../org/apache/hadoop/tools/OptionsParser.java     |  2 +-
 .../org/apache/hadoop/tools/mapred/CopyMapper.java |  2 +-
 .../hadoop/mapred/gridmix/ClusterSummarizer.java   |  2 +-
 .../hadoop/mapred/gridmix/ExecutionSummarizer.java |  4 +-
 .../apache/hadoop/mapred/gridmix/JobFactory.java   |  2 +-
 .../mapred/gridmix/RandomTextDataGenerator.java    |  2 +-
 .../translator/impl/BaseLogParser.java             |  1 -
 .../anonymization/WordListAnonymizerUtility.java   |  2 +-
 .../util/MapReduceJobPropertiesParser.java         |  2 +-
 .../hadoop/streaming/TestUnconsumedInput.java      |  2 +-
 102 files changed, 207 insertions(+), 168 deletions(-)

commit 8752a48564028cb5892c19e29d4e5b984d70c076
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 27 14:18:25 2018 -0700

    HDDS-193. Make Datanode heartbeat dispatcher in SCM event based.
    Contributed by Elek, Marton.

 .../scm/server/SCMDatanodeHeartbeatDispatcher.java | 126 ++++++++++
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  14 +-
 .../hdds/scm/server/StorageContainerManager.java   |   4 +-
 .../report/SCMDatanodeContainerReportHandler.java  |  76 -------
 .../report/SCMDatanodeHeartbeatDispatcher.java     | 189 ---------------
 .../report/SCMDatanodeNodeReportHandler.java       |  43 ----
 .../server/report/SCMDatanodeReportHandler.java    |  83 -------
 .../report/SCMDatanodeReportHandlerFactory.java    |  82 -------
 .../hdds/scm/server/report/package-info.java       |  57 -----
 .../server/TestSCMDatanodeHeartbeatDispatcher.java | 119 ++++++++++
 .../TestSCMDatanodeContainerReportHandler.java     |  34 ---
 .../report/TestSCMDatanodeHeartbeatDispatcher.java | 138 -----------
 .../report/TestSCMDatanodeNodeReportHandler.java   |  36 ---
 .../TestSCMDatanodeReportHandlerFactory.java       |  51 -----
 .../hdds/scm/server/report/package-info.java       |  21 --
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    | 253 ---------------------
 16 files changed, 254 insertions(+), 1072 deletions(-)

commit 18932717c42382ed8842de7719ec6d20c1765366
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 26 18:28:47 2018 -0700

    HDDS-94. Change ozone datanode command to start the standalone datanode plugin.
    Contributed by  Sandeep Nemuri.

 hadoop-dist/src/main/compose/ozone/docker-compose.yaml      | 12 ------------
 hadoop-dist/src/main/compose/ozone/docker-config            |  5 -----
 hadoop-dist/src/main/compose/ozoneperf/docker-compose.yaml  | 13 -------------
 hadoop-dist/src/main/compose/ozoneperf/docker-config        |  5 -----
 .../java/org/apache/hadoop/ozone/HddsDatanodeService.java   | 13 ++++++++++++-
 .../src/test/acceptance/basic/docker-compose.yaml           | 12 ------------
 .../acceptance-test/src/test/acceptance/basic/docker-config |  5 -----
 .../acceptance-test/src/test/acceptance/commonlib.robot     |  1 -
 .../src/test/acceptance/ozonefs/docker-compose.yaml         | 12 ------------
 .../src/test/acceptance/ozonefs/docker-config               |  5 -----
 hadoop-ozone/common/src/main/bin/ozone                      |  9 +++------
 11 files changed, 15 insertions(+), 77 deletions(-)

commit 1e30547642c7c6c014745862dd06f90f091f90b6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:56:45 2018 -0700

    HDDS-170. Fix TestBlockDeletingService#testBlockDeletionTimeout. Contributed by Lokesh Jain.

 .../main/java/org/apache/hadoop/utils/BackgroundService.java  |  2 +-
 .../common/statemachine/background/BlockDeletingService.java  |  8 ++++----
 .../hadoop/ozone/container/ozoneimpl/OzoneContainer.java      |  2 +-
 .../container/testutils/BlockDeletingServiceTestImpl.java     |  4 ++--
 .../ozone/container/common/TestBlockDeletingService.java      | 11 +++++++----
 5 files changed, 15 insertions(+), 12 deletions(-)

commit e9ec3d78f520a8543dc77d763d4b358aa608bae8
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:35:30 2018 -0700

    HDDS-186. Create under replicated queue. Contributed by Ajay Kumar.

 .../container/replication/ReplicationQueue.java    |  76 ++++++++++++
 .../container/replication/ReplicationRequest.java  | 106 ++++++++++++++++
 .../ozone/container/replication/package-info.java  |  23 ++++
 .../replication/TestReplicationQueue.java          | 134 +++++++++++++++++++++
 .../ozone/container/replication/package-info.java  |  23 ++++
 5 files changed, 362 insertions(+)

commit 56a4cdb9804daea7164155a5b1b4eba44a11b705
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:28:00 2018 -0700

    HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 --
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 -
 .../common/src/main/resources/ozone-default.xml    |  47 ---
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 ---------------------
 .../scm/container/replication/InProgressPool.java  | 255 ----------------
 .../scm/container/replication/PeriodicPool.java    | 119 --------
 .../scm/container/replication/package-info.java    |  23 --
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 -
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 -----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 --
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ----------------
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 -
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ----------
 .../testutils/ReplicationNodeManagerMock.java      |   5 -
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 --------
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 --
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 -----
 18 files changed, 3 insertions(+), 1596 deletions(-)

commit 0d6fe5f36be5b19aab89d995866e526c5feec758
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 13:25:45 2018 -0700

    Revert "HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton"
    
    This reverts commit aaf03cc459a34af284f9735453aefd4ddb430d67.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 ++
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 +
 .../common/src/main/resources/ozone-default.xml    |  47 +++
 .../container/replication/ReplicationQueue.java    |  78 -----
 .../container/replication/ReplicationReqMsg.java   | 107 -------
 .../ozone/container/replication/package-info.java  |  23 --
 .../replication/TestReplicationQueue.java          | 134 --------
 .../ozone/container/replication/package-info.java  |  23 --
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 +++++++++++++++++++++
 .../scm/container/replication/InProgressPool.java  | 255 ++++++++++++++++
 .../scm/container/replication/PeriodicPool.java    | 119 ++++++++
 .../scm/container/replication/package-info.java    |  23 ++
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 +
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 +++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 ++
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ++++++++++++++++
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 +
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ++++++++++
 .../testutils/ReplicationNodeManagerMock.java      |   5 +
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 ++++++++
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 ++
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 +++++
 23 files changed, 1596 insertions(+), 368 deletions(-)

commit aaf03cc459a34af284f9735453aefd4ddb430d67
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 27 12:39:15 2018 -0700

    HDDS-194. Remove NodePoolManager and node pool handling from SCM. Contributed by Elek Marton

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |  26 --
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   1 -
 .../common/src/main/resources/ozone-default.xml    |  47 ---
 .../container/replication/ReplicationQueue.java    |  78 +++++
 .../container/replication/ReplicationReqMsg.java   | 107 +++++++
 .../ozone/container/replication/package-info.java  |  23 ++
 .../replication/TestReplicationQueue.java          | 134 ++++++++
 .../ozone/container/replication/package-info.java  |  23 ++
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../container/replication/ContainerSupervisor.java | 340 ---------------------
 .../scm/container/replication/InProgressPool.java  | 255 ----------------
 .../scm/container/replication/PeriodicPool.java    | 119 --------
 .../scm/container/replication/package-info.java    |  23 --
 .../apache/hadoop/hdds/scm/node/NodeManager.java   |   6 -
 .../hadoop/hdds/scm/node/NodePoolManager.java      |  71 -----
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  23 --
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   | 269 ----------------
 .../hadoop/hdds/scm/container/MockNodeManager.java |   6 -
 .../hdds/scm/node/TestSCMNodePoolManager.java      | 160 ----------
 .../testutils/ReplicationNodeManagerMock.java      |   5 -
 .../testutils/ReplicationNodePoolManagerMock.java  | 133 --------
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  31 --
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |  74 -----
 23 files changed, 368 insertions(+), 1596 deletions(-)

commit fbaff369e9b9022723a7b2c6f25e71122a8f8a15
Author: Sunil G <sunilg@apache.org>
Date:   Wed Jun 27 10:35:15 2018 -0700

    YARN-8401. [UI2] new ui is not accessible with out internet connection. Contributed by Bibin A Chundatt.

 .../hadoop-yarn/hadoop-yarn-ui/src/main/webapp/WEB-INF/web.xml      | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit bedc4fe0799cf3b161100acc521fc62a97793427
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Jun 26 19:27:17 2018 -0700

    YARN-8464. Async scheduling thread could be interrupted when there are no NodeManagers in cluster. (Sunil G via wangda)
    
    Change-Id: I4f5f856373378685713e77752ba6cf0988a66065

 .../scheduler/capacity/CapacityScheduler.java          | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit ada8f63d0b3739d245300461387b0516dc92ccf9
Author: Wangda Tan <wangda@apache.org>
Date:   Tue Jun 26 19:25:57 2018 -0700

    YARN-8423. GPU does not get released even though the application gets killed. (Sunil G via wangda)
    
    Change-Id: I570db7d60f8c6c21762dd618a9207d1107c486a0

 .../containermanager/container/Container.java      |  6 ++
 .../containermanager/container/ContainerImpl.java  | 11 ++++
 .../linux/resources/gpu/GpuResourceAllocator.java  | 68 +++++++++++++++++++++-
 .../resources/gpu/GpuResourceHandlerImpl.java      |  1 -
 .../server/nodemanager/webapp/MockContainer.java   |  3 +
 5 files changed, 85 insertions(+), 4 deletions(-)

commit 62d83ca5360cf803ecf6780caf192462d0092009
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Tue Jun 26 15:21:35 2018 -0700

    YARN-8461. Support strict memory control on individual container with elastic control memory mechanism. Contributed by Haibo Chen.

 .../CGroupsMemoryResourceHandlerImpl.java          |  24 +++++
 .../linux/resources/MemoryResourceHandler.java     |  10 ++
 .../monitor/ContainersMonitorImpl.java             | 108 +++++++++++++--------
 .../TestCGroupsMemoryResourceHandlerImpl.java      |  43 ++++++++
 4 files changed, 142 insertions(+), 43 deletions(-)

commit b69ba0f3307a90500aeb0c5db9e582fcda60b501
Author: Eric Yang <eyang@apache.org>
Date:   Tue Jun 26 17:34:57 2018 -0400

    YARN-8108.  Added option to disable loading existing filters to prevent
                security filter from initialize twice.
                Contributed by Sunil Govindan

 .../main/java/org/apache/hadoop/yarn/webapp/WebApps.java   | 14 +++++++++++---
 .../yarn/server/resourcemanager/ResourceManager.java       |  2 +-
 2 files changed, 12 insertions(+), 4 deletions(-)

commit 3e586330eb2c7db0b884fe328b171fb27ce545fa
Author: Eric Yang <eyang@apache.org>
Date:   Tue Jun 26 14:25:15 2018 -0400

    YARN-8214.  Change default RegistryDNS port.
                Contributed by Billie Rinaldi

 .../apache/hadoop/registry/client/api/RegistryConstants.java   |  2 +-
 .../src/site/markdown/yarn-service/RegistryDNS.md              | 10 +++++-----
 .../src/site/markdown/yarn-service/ServiceDiscovery.md         |  6 +++---
 3 files changed, 9 insertions(+), 9 deletions(-)

commit 238fe00ad2692154f6a382f35735169ee5e4af2c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 25 21:12:05 2018 -0700

    HDDS-192:Create new SCMCommand to request a replication of a container. Contributed by Elek Marton

 .../common/statemachine/DatanodeStateMachine.java  |  3 +
 .../ReplicateContainerCommandHandler.java          | 67 +++++++++++++++
 .../states/endpoint/HeartbeatEndpointTask.java     | 12 +++
 .../commands/ReplicateContainerCommand.java        | 94 ++++++++++++++++++++++
 .../proto/StorageContainerDatanodeProtocol.proto   | 12 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 11 +++
 .../TestReplicateContainerHandler.java             | 71 ++++++++++++++++
 7 files changed, 269 insertions(+), 1 deletion(-)

commit 35ec9401e829bfa10994790659a26b0babacae35
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Mon Jun 25 09:23:11 2018 -0700

    YARN-8438. TestContainer.testKillOnNew flaky on trunk. Contributed by Szilard Nemeth.

 .../nodemanager/containermanager/container/TestContainer.java     | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 7a3c6e9c3cd9ffdc71946fd12f5c3d59718c4939
Author: Todd Lipcon <todd@apache.org>
Date:   Mon Jun 25 15:36:45 2018 -0700

    HADOOP-15550. Avoid static initialization of ObjectMappers

 .../hadoop/crypto/key/kms/KMSClientProvider.java   |  7 ++-----
 .../web/DelegationTokenAuthenticator.java          |  8 ++------
 .../org/apache/hadoop/util/HttpExceptionUtils.java | 12 ++---------
 .../org/apache/hadoop/util/JsonSerialization.java  | 24 ++++++++++++++++++++++
 .../crypto/key/kms/server/KMSJSONWriter.java       |  6 ++----
 .../apache/hadoop/hdfs/web/WebHdfsFileSystem.java  |  7 ++-----
 .../ConfRefreshTokenBasedAccessTokenProvider.java  |  8 +++-----
 .../oauth2/CredentialBasedAccessTokenProvider.java |  8 +++-----
 .../org/apache/hadoop/mapreduce/JobSubmitter.java  |  8 +++-----
 .../apache/hadoop/fs/azure/security/JsonUtils.java |  4 ++--
 10 files changed, 45 insertions(+), 47 deletions(-)

commit c687a6617d73293019d8d91ac48bbfd2ccca3b40
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Mon Jun 25 11:04:34 2018 -0600

    HADOOP-15423. Merge fileCache and dirCache into ine single cache in LocalMetadataStore. Contributed by Gabor Bota.

 .../hadoop/fs/s3a/s3guard/LocalMetadataEntry.java  |  81 +++++++
 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  | 247 ++++++++++++---------
 .../fs/s3a/s3guard/MetadataStoreTestBase.java      |   2 +-
 .../fs/s3a/s3guard/TestLocalMetadataStore.java     |  33 ++-
 4 files changed, 240 insertions(+), 123 deletions(-)

commit a55d6bba71c81c1c4e9d8cd11f55c78f10a548b0
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon Jun 25 13:05:22 2018 -0700

    HDDS-191. Queue SCMCommands via EventQueue in SCM.
    Contributed by Elek, Marton.

 .../protocol/commands/CommandForDatanode.java      | 45 ++++++++++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 20 +++++++++-
 .../hdds/scm/server/StorageContainerManager.java   |  8 +++-
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 39 +++++++++++++++++++
 4 files changed, 110 insertions(+), 2 deletions(-)

commit 4ffe68a6f70ce01a5654da8991b4cdb35ae0bf1f
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Mon Jun 25 10:38:03 2018 -0700

    YARN-8457. Compilation is broken with -Pyarn-ui.

 .../hadoop-yarn/hadoop-yarn-ui/src/main/webapp/.bowerrc                | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit abc3e4bad905efde5a4881e8a072c68f6e910ade
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 25 09:50:27 2018 -0700

    HADOOP-15458. TestLocalFileSystem#testFSOutputStreamBuilder fails on Windows. Contributed by Xiao Liang.

 .../org/apache/hadoop/fs/TestLocalFileSystem.java  | 23 +++++++++++-----------
 1 file changed, 12 insertions(+), 11 deletions(-)

commit 1ba4e62304a70d53f1a4f76995b6e1fac3107922
Author: Steve Loughran <stevel@apache.org>
Date:   Mon Jun 25 14:38:33 2018 +0100

    HADOOP-14396. Add builder interface to FileContext.
    Contributed by  Lei (Eddy) Xu.

 .../hadoop/fs/FSDataOutputStreamBuilder.java       | 22 ++++++++
 .../java/org/apache/hadoop/fs/FileContext.java     | 66 ++++++++++++++++++++++
 .../main/java/org/apache/hadoop/fs/Options.java    |  3 +
 .../fs/FileContextMainOperationsBaseTest.java      | 44 ++++++++++++++-
 4 files changed, 134 insertions(+), 1 deletion(-)

commit 440140cea6718229094a3d2b97b9b9bd28b95d9b
Author: Weiwei Yang <wwei@apache.org>
Date:   Mon Jun 25 09:15:31 2018 +0800

    YARN-8443. Total #VCores in cluster metrics is wrong when CapacityScheduler reserved some containers. Contributed by Tao Yang.

 .../yarn/server/resourcemanager/webapp/dao/ClusterMetricsInfo.java      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e16e5b307d6c4404db0698b9d128e5bf4aa16a8a
Author: Anu Engineer <aengineer@apache.org>
Date:   Sun Jun 24 01:05:04 2018 -0700

    HDDS-177. Create a releasable ozonefs artifact
    Contributed by Marton, Elek.

 dev-support/bin/ozone-dist-layout-stitching        |  4 +-
 hadoop-dist/pom.xml                                |  5 ++
 .../test/acceptance/ozonefs/docker-compose.yaml    | 71 ++++++++++++++++++++++
 .../src/test/acceptance/ozonefs/docker-config      | 39 ++++++++++++
 .../src/test/acceptance/ozonefs/ozonefs.robot      | 39 ++++++++++++
 .../hadoop-ozone => hadoop-ozone/ozonefs}/pom.xml  | 55 ++++++++++++++---
 .../java/org/apache/hadoop/fs/ozone/Constants.java |  0
 .../main/java/org/apache/hadoop/fs/ozone/OzFs.java |  0
 .../apache/hadoop/fs/ozone/OzoneFSInputStream.java |  0
 .../hadoop/fs/ozone/OzoneFSOutputStream.java       |  0
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  0
 .../org/apache/hadoop/fs/ozone/package-info.java   |  0
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |  0
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |  0
 .../ozone/contract/ITestOzoneContractCreate.java   |  0
 .../ozone/contract/ITestOzoneContractDelete.java   |  0
 .../ozone/contract/ITestOzoneContractDistCp.java   |  0
 .../contract/ITestOzoneContractGetFileStatus.java  |  0
 .../fs/ozone/contract/ITestOzoneContractMkdir.java |  0
 .../fs/ozone/contract/ITestOzoneContractOpen.java  |  0
 .../ozone/contract/ITestOzoneContractRename.java   |  0
 .../ozone/contract/ITestOzoneContractRootDir.java  |  0
 .../fs/ozone/contract/ITestOzoneContractSeek.java  |  0
 .../hadoop/fs/ozone/contract/OzoneContract.java    |  0
 .../ozonefs}/src/test/resources/contract/ozone.xml |  0
 .../ozonefs}/src/test/resources/log4j.properties   |  0
 hadoop-ozone/pom.xml                               |  1 +
 hadoop-project/pom.xml                             |  6 +-
 hadoop-tools/hadoop-tools-dist/pom.xml             | 15 -----
 hadoop-tools/pom.xml                               | 11 ----
 30 files changed, 209 insertions(+), 37 deletions(-)

commit ca14fec02fb14e1b708f266bc715e84ae9784d6f
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat Jun 23 15:49:44 2018 -0700

    HDDS-184. Upgrade common-langs version to 3.7 in hadoop-tools/hadoop-ozone.
    Contributed by Takanobu Asanuma.

 .../hadoop/ozone/genconf/TestGenerateOzoneRequiredConfigurations.java   | 2 +-
 .../src/main/java/org/apache/hadoop/fs/ozone/OzoneFileSystem.java       | 2 +-
 .../test/java/org/apache/hadoop/fs/ozone/TestOzoneFSInputStream.java    | 2 +-
 .../test/java/org/apache/hadoop/fs/ozone/TestOzoneFileInterfaces.java   | 2 +-
 .../test/java/org/apache/hadoop/fs/ozone/contract/OzoneContract.java    | 2 +-
 5 files changed, 5 insertions(+), 5 deletions(-)

commit 8a32bc39eb210fca8052c472601e24c2446b4cc2
Author: Eric Yang <eyang@apache.org>
Date:   Fri Jun 22 19:12:48 2018 -0400

    YARN-8326.  Removed exit code file check for launched container.
                Contributed by Shane Kumpf

 .../containermanager/launcher/ContainerLaunch.java    | 19 -------------------
 1 file changed, 19 deletions(-)

commit 1cdce86d33d4b73ba6dd4136c966eb7e822b6f36
Author: Yufei Gu <yufei_gu@apple.com>
Date:   Fri Jun 22 14:02:32 2018 -0700

    YARN-8184. Too many metrics if containerLocalizer/ResourceLocalizationService uses ReadWriteDiskValidator. Contributed by Yufei Gu

 .../nodemanager/containermanager/localizer/ContainerLocalizer.java   | 5 +----
 .../containermanager/localizer/ResourceLocalizationService.java      | 5 +----
 2 files changed, 2 insertions(+), 8 deletions(-)

commit ae055622edeb3cbf82baa6ed952fc2abc84c021e
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Fri Jun 22 13:05:41 2018 -0700

    MAPREDUCE-7114. Make FrameworkUploader symlink ignore improvement. Contributed by Gergo Repas.

 .../apache/hadoop/mapred/uploader/FrameworkUploader.java    |  2 +-
 .../hadoop/mapred/uploader/TestFrameworkUploader.java       | 13 +++++++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)

commit 55fad6a3de3125d9e7e2e9a5f8fa5b1b22a1de60
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Fri Jun 22 11:36:36 2018 -0600

    HADOOP-15416. Clear error message in S3Guard diff if source not found. Contributed by Gabor Bota.

 .../src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardTool.java   | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 6432128622d64f3f9dd638b9c254c77cdf5408aa
Author: Eric E Payne <ericp@oath.com>
Date:   Fri Jun 22 17:15:29 2018 +0000

    YARN-8444: NodeResourceMonitor crashes on bad swapFree value. Contributed by Jim Brennan.

 .../java/org/apache/hadoop/util/SysInfoLinux.java  | 19 ++++++-
 .../org/apache/hadoop/util/TestSysInfoLinux.java   | 60 ++++++++++++++++++++++
 2 files changed, 77 insertions(+), 2 deletions(-)

commit 30728aced4a6b05394b3fc8c613f39fade9cf3c2
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri Jun 22 10:50:54 2018 +0800

    HDFS-13692. StorageInfoDefragmenter floods log when compacting StorageInfo TreeSet. Contributed by Bharat Viswanadham.

 .../org/apache/hadoop/hdfs/server/blockmanagement/BlockManager.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 99948565cb5d5706241d7a8fc591e1617c499e03
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 21 18:24:10 2018 -0700

    YARN-8412. Move ResourceRequest.clone logic everywhere into a proper API. Contributed by Botong Huang.

 .../hadoop/yarn/api/records/ResourceRequest.java     | 20 ++++++++++++++++++++
 .../hadoop/yarn/client/api/impl/AMRMClientImpl.java  | 11 +----------
 .../client/api/impl/TestAMRMClientOnRMRestart.java   |  6 +-----
 .../apache/hadoop/yarn/server/AMRMClientRelayer.java |  8 +-------
 .../amrmproxy/LocalityMulticastAMRMProxyPolicy.java  | 10 +---------
 .../yarn/server/scheduler/ResourceRequestSet.java    | 14 ++------------
 .../hadoop/yarn/server/utils/BuilderUtils.java       | 12 ------------
 .../placement/LocalityAppPlacementAllocator.java     | 10 ++--------
 .../yarn/server/resourcemanager/Application.java     | 10 ++++------
 .../yarn/server/resourcemanager/TestAppManager.java  | 18 ++----------------
 10 files changed, 34 insertions(+), 85 deletions(-)

commit 59de9679540f6d0edfb34cf9f88e52b51d94b4f4
Author: Todd Lipcon <todd@apache.org>
Date:   Thu Jun 21 10:32:52 2018 -0700

    HADOOP-15549. Upgrade to commons-configuration 2.1 regresses task CPU consumption

 .../org/apache/hadoop/metrics2/impl/MetricsConfig.java    | 15 ++++++---------
 1 file changed, 6 insertions(+), 9 deletions(-)

commit 9f15483c5d7c94251f4c84e0155449188f202779
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jun 21 11:18:14 2018 -0400

    YARN-8445.  Improved error message for duplicated service and component names.
                Contributed by Chandni Singh

 .../yarn/service/exceptions/RestApiErrorMessages.java  |  2 ++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java      |  5 +++++
 .../apache/hadoop/yarn/service/TestServiceApiUtil.java | 18 ++++++++++++++++++
 3 files changed, 25 insertions(+)

commit 43541a18907d2303b708ae27a9a2cb5df891da4f
Author: Todd Lipcon <todd@apache.org>
Date:   Wed Jun 20 12:38:59 2018 -0700

    HADOOP-15551. Avoid use of Arrays.stream in Configuration.addTags

 .../src/main/java/org/apache/hadoop/conf/Configuration.java       | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 32f867a6a907c05a312657139d295a92756d98ef
Author: Xiao Chen <xiao@apache.org>
Date:   Wed Jun 20 15:58:01 2018 -0700

    HDFS-13682. Cannot create encryption zone after KMS auth token expires.

 .../hadoop/crypto/key/kms/KMSClientProvider.java   |  9 ++++--
 .../hadoop/security/UserGroupInformation.java      |  4 ++-
 .../hdfs/TestSecureEncryptionZoneWithKMS.java      | 34 ++++++++++++++++++++--
 3 files changed, 41 insertions(+), 6 deletions(-)

commit b089a06793d94d42b7da1b7566e366ceb748e081
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Wed Jun 20 16:10:36 2018 -0600

    HADOOP-14918. Remove the Local Dynamo DB test option. Contributed by Gabor Bota.

 hadoop-project/pom.xml                             |   5 -
 hadoop-tools/hadoop-aws/pom.xml                    |  42 +-
 .../java/org/apache/hadoop/fs/s3a/Constants.java   |  11 +
 .../fs/s3a/s3guard/DynamoDBMetadataStore.java      |   1 +
 .../apache/hadoop/fs/s3a/AbstractS3ATestBase.java  |  21 +-
 .../org/apache/hadoop/fs/s3a/S3ATestConstants.java |   1 -
 .../org/apache/hadoop/fs/s3a/S3ATestUtils.java     |  34 +-
 .../fs/s3a/commit/staging/StagingTestBase.java     |  30 +-
 .../fs/s3a/s3guard/DynamoDBLocalClientFactory.java | 160 ------
 .../fs/s3a/s3guard/MetadataStoreTestBase.java      |   4 +-
 .../fs/s3a/s3guard/TestDynamoDBMetadataStore.java  | 589 ---------------------
 11 files changed, 73 insertions(+), 825 deletions(-)

commit d6ee4290df10ad3e0b087c21accd602508e0a197
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 12:04:44 2018 -0700

    MAPREDUCE-7113. Typos in test names in TestTaskAttempt: "testAppDiognostic". Contributed by Szilard Nemeth.

 .../org/apache/hadoop/mapreduce/v2/app/job/impl/TestTaskAttempt.java  | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 46f90581641feec37e285964df983d221bee5e1d
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 11:58:18 2018 -0700

    YARN-8441. Typo in CSQueueUtils local variable names: queueGuranteedResource. Contributed by Szilard Nemeth.

 .../scheduler/capacity/CSQueueUtils.java               | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 388fafa004dc405a4e10f4487cff7c5a714af32f
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 11:55:43 2018 -0700

    YARN-8442. Strange characters and missing spaces in FairScheduler documentation. Contributed by Szilard Nemeth.

 .../hadoop-yarn/hadoop-yarn-site/src/site/markdown/FairScheduler.md     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bbbc7cc426f71ad0fe4174efcd25e5ac3f62b501
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 11:40:56 2018 -0700

    YARN-7449. Split up class TestYarnClient to TestYarnClient and TestYarnClientImpl. Contributed by Szilard Nemeth.

 .../yarn/client/api/impl/TestYarnClient.java       | 337 +++++----------------
 .../yarn/client/api/impl/TestYarnClientImpl.java   | 254 ++++++++++++++++
 2 files changed, 324 insertions(+), 267 deletions(-)

commit 55432b09810b59ee361d0d4a8958efabb49fab3c
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 11:36:12 2018 -0700

    YARN-8440. Typo in YarnConfiguration javadoc: "Miniumum request grant-able..". Contributed by Szilard Nemeth.

 .../src/main/java/org/apache/hadoop/yarn/conf/YarnConfiguration.java    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a9e969570f23b627f9571819f388916d8fd7ec9
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Wed Jun 20 10:29:12 2018 -0700

    YARN-8391. Investigate AllocationFileLoaderService.reloadListener locking issue. Contributed by Szilard Nemeth.

 .../resourcemanager/scheduler/fair/AllocationFileLoaderService.java   | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 4939ffedb151ce1550fcdd7ac04c79d8d0195891
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed Jun 20 10:35:52 2018 -0700

    YARN-8437. Build oom-listener fails on older versions. (Miklos Szegedi via Haibo Chen)

 .../src/CMakeLists.txt                             |  4 +--
 .../oom-listener/test/oom_listener_test_main.cc    | 33 +++++++++++-----------
 2 files changed, 19 insertions(+), 18 deletions(-)

commit 2d87592fc6a56bfe77dd3c11953caea2b701c846
Author: Eric Yang <eyang@apache.org>
Date:   Tue Jun 19 13:38:13 2018 -0400

    HADOOP-15527.  Improve delay check for stopping processes.
                   Fixed script location.
                   Contributed by Vinod Kumar Vavilapalli

 .../hadoop-common}/src/test/scripts/process_with_sigterm_trap.sh          | 0
 1 file changed, 0 insertions(+), 0 deletions(-)

commit f386e78a4bc74e7c247b179c7d4ec27310fda4d3
Author: Dedunu Dhananjaya <dedunumax@gmail.com>
Date:   Mon Apr 23 09:34:57 2018 +0000

    YARN-7668. Remove unused variables from ContainerLocalizer
    
    This closes #364
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../nodemanager/containermanager/localizer/ContainerLocalizer.java      | 2 --
 1 file changed, 2 deletions(-)

commit 1e94e5977f9075af2f74e30a3b8e52f7ded67863
Author: Vidura Mudalige <vidura.mudalige@kohls.com>
Date:   Thu Jun 14 21:23:01 2018 +0530

    MAPREDUCE-7063. Fix log level inconsistency in CombineFileInputFormat.java
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../org/apache/hadoop/mapreduce/lib/input/CombineFileInputFormat.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2c87ec5affefeb1dc794c4eaae685a4e544f1841
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jun 18 14:28:22 2018 -0400

    HADOOP-15527.  Improve delay check for stopping processes.
                   Contributed by Vinod Kumar Vavilapalli

 .../src/test/scripts/process_with_sigterm_trap.sh  | 24 ++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit fba9d7cd746cd7b659d2fd9d2bfa23266be9009b
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Mon Jun 18 10:17:07 2018 -0700

    HDFS-13621. Upgrade commons-lang version to 3.7 in hadoop-hdfs-project. Contributed by Takanobu Asanuma.

 .../src/main/java/org/apache/hadoop/fs/XAttr.java            |  4 ++--
 .../main/java/org/apache/hadoop/hdfs/ExtendedBlockId.java    |  4 ++--
 .../apache/hadoop/hdfs/client/impl/BlockReaderFactory.java   |  2 +-
 .../hadoop/hdfs/protocol/AddErasureCodingPolicyResponse.java |  4 ++--
 .../org/apache/hadoop/hdfs/protocol/CacheDirectiveInfo.java  |  4 ++--
 .../java/org/apache/hadoop/hdfs/protocol/CachePoolInfo.java  |  4 ++--
 .../java/org/apache/hadoop/hdfs/protocol/EncryptionZone.java |  4 ++--
 .../org/apache/hadoop/hdfs/protocol/ErasureCodingPolicy.java |  4 ++--
 .../apache/hadoop/hdfs/protocol/ErasureCodingPolicyInfo.java |  4 ++--
 .../java/org/apache/hadoop/hdfs/protocol/ExtendedBlock.java  |  2 +-
 .../apache/hadoop/hdfs/shortcircuit/DfsClientShmManager.java |  2 +-
 .../apache/hadoop/hdfs/shortcircuit/ShortCircuitCache.java   |  2 +-
 .../org/apache/hadoop/hdfs/shortcircuit/ShortCircuitShm.java |  4 ++--
 .../server/namenode/ha/TestRequestHedgingProxyProvider.java  |  2 +-
 hadoop-hdfs-project/hadoop-hdfs-nfs/pom.xml                  |  5 -----
 .../hdfs/server/federation/router/ConnectionPoolId.java      |  2 +-
 .../hdfs/server/federation/router/RemoteLocationContext.java |  2 +-
 .../federation/store/driver/impl/StateStoreFileImpl.java     |  2 +-
 .../hdfs/server/federation/store/records/MountTable.java     |  2 +-
 hadoop-hdfs-project/hadoop-hdfs/pom.xml                      |  5 -----
 .../java/org/apache/hadoop/hdfs/protocol/CacheDirective.java |  2 +-
 .../hadoop/hdfs/qjournal/server/GetJournalEditServlet.java   |  4 ++--
 .../java/org/apache/hadoop/hdfs/qjournal/server/Journal.java | 12 ++++++------
 .../apache/hadoop/hdfs/server/datanode/DirectoryScanner.java |  2 +-
 .../hdfs/server/datanode/fsdataset/impl/FsDatasetCache.java  |  2 +-
 .../hadoop/hdfs/server/diskbalancer/command/Command.java     |  4 ++--
 .../hadoop/hdfs/server/diskbalancer/command/PlanCommand.java |  4 ++--
 .../hdfs/server/diskbalancer/command/ReportCommand.java      |  4 ++--
 .../hadoop/hdfs/server/namenode/EncryptionZoneManager.java   |  4 ++--
 .../hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java    |  2 +-
 .../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java |  6 +++---
 .../hadoop/hdfs/server/namenode/INodeAttributeProvider.java  |  2 +-
 .../hadoop/hdfs/server/namenode/startupprogress/Step.java    |  6 +++---
 .../hadoop/hdfs/server/namenode/top/metrics/TopMetrics.java  |  2 +-
 .../main/java/org/apache/hadoop/hdfs/tools/CacheAdmin.java   |  2 +-
 .../main/java/org/apache/hadoop/hdfs/util/EnumCounters.java  |  2 +-
 .../org/apache/hadoop/fs/TestEnhancedByteBufferAccess.java   |  4 ++--
 .../src/test/java/org/apache/hadoop/fs/TestGlobPaths.java    |  2 +-
 .../hadoop/fs/TestWebHdfsFileContextMainOperations.java      |  2 +-
 .../src/test/java/org/apache/hadoop/hdfs/DFSTestUtil.java    |  4 ++--
 .../src/test/java/org/apache/hadoop/hdfs/TestDFSShell.java   |  2 +-
 .../test/java/org/apache/hadoop/hdfs/TestDecommission.java   |  2 +-
 .../java/org/apache/hadoop/hdfs/TestFsShellPermission.java   |  2 +-
 .../java/org/apache/hadoop/hdfs/TestHDFSPolicyProvider.java  |  2 +-
 .../org/apache/hadoop/hdfs/TestLeaseRecoveryStriped.java     |  2 +-
 .../protocol/datatransfer/sasl/SaslDataTransferTestCase.java |  2 +-
 .../org/apache/hadoop/hdfs/server/balancer/TestBalancer.java |  2 +-
 .../hadoop/hdfs/server/datanode/SimulatedFSDataset.java      |  2 +-
 .../server/diskbalancer/command/TestDiskBalancerCommand.java |  2 +-
 .../apache/hadoop/hdfs/server/namenode/FSImageTestUtil.java  |  2 +-
 .../apache/hadoop/hdfs/server/namenode/NameNodeAdapter.java  |  2 +-
 .../apache/hadoop/hdfs/server/namenode/TestAuditLogger.java  |  2 +-
 .../hadoop/hdfs/server/namenode/TestCacheDirectives.java     |  2 +-
 .../hdfs/server/namenode/TestEditLogJournalFailures.java     |  2 +-
 .../hadoop/hdfs/shortcircuit/TestShortCircuitCache.java      |  2 +-
 .../test/java/org/apache/hadoop/hdfs/tools/TestDFSAdmin.java |  2 +-
 .../src/test/java/org/apache/hadoop/tracing/TestTracing.java |  2 +-
 57 files changed, 80 insertions(+), 90 deletions(-)

commit 2a4632d3d7b82980d10cc90cdfc52afd866cebb8
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sun Jun 17 23:48:33 2018 -0700

    HDDS-141. Remove PipeLine Class from SCM and move the data field in the Pipeline to ContainerInfo. Contributed by Shashikant Banerjee.

 .../container/common/helpers/ContainerInfo.java    |  32 +++++
 .../scm/container/common/helpers/Pipeline.java     | 142 ++++++++++++---------
 .../container/common/helpers/PipelineChannel.java  | 124 ------------------
 hadoop-hdds/common/src/main/proto/hdds.proto       |   8 +-
 .../hdds/scm/container/closer/ContainerCloser.java |   6 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  67 +++++-----
 .../hdds/scm/pipelines/PipelineSelector.java       |  11 +-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |  13 +-
 .../standalone/StandaloneManagerImpl.java          |   8 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |   8 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  19 +--
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  11 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |   6 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   4 +-
 15 files changed, 191 insertions(+), 276 deletions(-)

commit f34744603ee93e082e7ba148df1400af5ac7c30c
Author: Chris Douglas <cdouglas@apache.org>
Date:   Sun Jun 17 23:12:18 2018 -0700

    HADOOP-15533. Make WASB listStatus messages consistent. Contributed by Esfandiar Manii

 .../src/main/java/org/apache/hadoop/fs/azure/NativeAzureFileSystem.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 980031bb043dd026a6bf42b0e71d304ac89294a5
Author: Chris Douglas <cdouglas@apache.org>
Date:   Sun Jun 17 11:54:26 2018 -0700

    HADOOP-13186. Multipart Uploader API. Contributed by Ewan Higgs

 .../java/org/apache/hadoop/fs/BBPartHandle.java    |  58 ++++++++
 .../java/org/apache/hadoop/fs/BBUploadHandle.java  |  57 ++++++++
 .../hadoop/fs/FileSystemMultipartUploader.java     | 132 ++++++++++++++++++
 .../hadoop/fs/LocalFileSystemPathHandle.java       | 100 ++++++++++++++
 .../org/apache/hadoop/fs/MultipartUploader.java    |  90 +++++++++++++
 .../apache/hadoop/fs/MultipartUploaderFactory.java |  65 +++++++++
 .../main/java/org/apache/hadoop/fs/PartHandle.java |  45 +++++++
 .../org/apache/hadoop/fs/RawLocalFileSystem.java   |  61 ++++++++-
 .../fs/UnsupportedMultipartUploaderException.java  |  41 ++++++
 .../java/org/apache/hadoop/fs/UploadHandle.java    |  47 +++++++
 .../hadoop-common/src/main/proto/FSProtos.proto    |   8 ++
 .../org.apache.hadoop.fs.MultipartUploaderFactory  |  16 +++
 .../fs/AbstractSystemMultipartUploaderTest.java    | 143 ++++++++++++++++++++
 .../fs/TestLocalFileSystemMultipartUploader.java   |  65 +++++++++
 .../contract/AbstractContractPathHandleTest.java   |   6 +
 .../rawlocal/TestRawlocalContractPathHandle.java   |  40 ++++++
 .../src/test/resources/contract/rawlocal.xml       |   5 +
 .../hadoop/hdfs/DFSMultipartUploaderFactory.java   |  40 ++++++
 .../org.apache.hadoop.fs.MultipartUploaderFactory  |  16 +++
 .../hadoop/fs/TestHDFSMultipartUploader.java       |  76 +++++++++++
 .../apache/hadoop/fs/s3a/S3AMultipartUploader.java | 150 +++++++++++++++++++++
 .../org.apache.hadoop.fs.MultipartUploaderFactory  |  15 +++
 .../org.apache.hadoop.fs.MultipartUploader         |  16 +++
 23 files changed, 1290 insertions(+), 2 deletions(-)

commit 3905fdb793e6370243d05d0c3036ca69898fe3fb
Author: Surendra Singh Lilhore <surendralilhore@apache.org>
Date:   Sun Jun 17 12:12:01 2018 +0530

    HADOOP-15523. Shell command timeout given is in seconds whereas it is taken as millisec while scheduling. Contributed by Bilwa S T.

 .../hadoop/fs/CommonConfigurationKeysPublic.java   |  4 +--
 .../security/ShellBasedUnixGroupsMapping.java      | 10 +++---
 .../main/java/org/apache/hadoop/util/Shell.java    |  2 +-
 .../security/TestShellBasedUnixGroupsMapping.java  | 39 +++++++++++++++++++---
 4 files changed, 43 insertions(+), 12 deletions(-)

commit 8762e9cf10fa100dd5f7fd695f5e52b75a94c5d4
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 15 16:49:06 2018 -0700

    HDFS-13681. Fix TestStartup.testNNFailToStartOnReadOnlyNNDir test failure on Windows. Contributed by Xiao Liang.

 .../java/org/apache/hadoop/hdfs/server/namenode/TestStartup.java | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit d31a3ce767d3bb68bdbb4f36d45600eab9f4f8b7
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 15 15:59:19 2018 -0700

    HDFS-13686. Add overall metrics for FSNamesystemLock. Contributed by Lukas Majercak.

 .../hadoop/hdfs/server/namenode/FSNamesystemLock.java   | 17 ++++++++++++-----
 .../hdfs/server/namenode/TestFSNamesystemLock.java      | 10 ++++++++--
 2 files changed, 20 insertions(+), 7 deletions(-)

commit 1da3b556591fffaae0751c4f7fceda34d2314fda
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Tue May 1 08:56:10 2018 -0600

    HADOOP-15504. Upgrade Maven Core and Maven Wagon dependencies.

 hadoop-maven-plugins/pom.xml                       | 38 +++++++++++++++++-----
 .../maven/plugin/resourcegz/ResourceGzMojo.java    |  2 +-
 pom.xml                                            |  2 +-
 3 files changed, 31 insertions(+), 11 deletions(-)

commit ca192cb7c9d76163391e88461716938fdb41c4d3
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri Jun 15 14:35:33 2018 -0700

    HDDS-160:Refactor KeyManager, ChunkManager. Contributed by Bharat Viswanadham

 .../container/common/interfaces/ChunkManager.java  |   2 +-
 .../ozone/container/keyvalue/ChunkManagerImpl.java | 240 +++++++++++++++++
 .../ozone/container/keyvalue/KeyManagerImpl.java   | 188 +++++++++++++
 .../container/keyvalue/helpers/ChunkUtils.java     | 295 +++++++++++++++++++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  37 ++-
 .../keyvalue/interfaces/ChunkManager.java          |  80 ++++++
 .../container/keyvalue/interfaces/KeyManager.java  |  76 ++++++
 .../container/keyvalue/TestChunkManagerImpl.java   | 237 +++++++++++++++++
 .../container/keyvalue/TestKeyManagerImpl.java     | 179 +++++++++++++
 9 files changed, 1331 insertions(+), 3 deletions(-)

commit 308a1591f9f41597f4e7cc17bca06c66d6efc0a2
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 15 10:23:58 2018 -0700

    HDDS-172. The numbers of operation should be integer in KSM UI.
    Contributed by Takanobu Asanuma.

 hadoop-ozone/ozone-manager/src/main/webapps/ksm/ksm.js | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit c966a3837af1c1a1c4a441f491b0d76d5c9e5d78
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Fri Jun 15 13:35:50 2018 -0700

    HDFS-13174. hdfs mover -p /path times out after 20 min. Contributed by Istvan Fajth.

 .../java/org/apache/hadoop/hdfs/DFSConfigKeys.java |  4 +-
 .../hadoop/hdfs/server/balancer/Balancer.java      |  6 +-
 .../hadoop/hdfs/server/balancer/Dispatcher.java    | 30 +++++---
 .../src/main/resources/hdfs-default.xml            | 10 +++
 .../hadoop/hdfs/server/balancer/TestBalancer.java  | 79 ++++++++++++++++++++++
 .../apache/hadoop/hdfs/server/mover/TestMover.java | 46 +++++++++++++
 6 files changed, 163 insertions(+), 12 deletions(-)

commit eebeb6033fd09791fcbff626f128a98e393f0a88
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 15 13:07:54 2018 -0700

    HDFS-13676. TestEditLogRace fails on Windows. Contributed by Zuoming Zhang.

 .../org/apache/hadoop/hdfs/server/namenode/TestEditLogRace.java     | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 43d994e4a6dfd1c24eafb909d6f8a0663b20769a
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 15 10:33:28 2018 -0700

    HDFS-13673. TestNameNodeMetrics fails on Windows. Contributed by Zuoming Zhang.

 .../hadoop/hdfs/server/namenode/metrics/TestNameNodeMetrics.java      | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit b272b71095eb8929b60128835ef1078fe946b231
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 15 09:40:45 2018 -0700

    HADOOP-15537. Clean up ContainerLaunch and ContainerExecutor pre-HADOOP-15528. Contributed by Giovanni Matteo Fumarola.

 .../yarn/server/nodemanager/ContainerExecutor.java |  4 +++-
 .../containermanager/launcher/ContainerLaunch.java | 27 +---------------------
 .../launcher/ContainerRelaunch.java                |  1 -
 .../launcher/TestContainerLaunch.java              |  2 --
 4 files changed, 4 insertions(+), 30 deletions(-)

commit 3e37a9a70ba93430da1b47f2a8b50358348396b0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri Jun 15 14:58:20 2018 +0530

    HDFS-13679. Fix Typo in javadoc for ScanInfoPerBlockPool#addAll. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/hdfs/server/datanode/DirectoryScanner.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 998e2850a3ceb961d66b9d3398a1afaad63a5cd8
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 14 20:54:54 2018 -0700

    HDDS-155:Implement KeyValueContainer and adopt new disk layout for the containers. Contributed by Bharat Viswanadham

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   3 +
 .../org/apache/hadoop/ozone/common/Storage.java    |   3 +-
 .../src/main/proto/DatanodeContainerProtocol.proto |   5 +
 .../container/common/impl/KeyValueContainer.java   |  78 ---
 .../common/impl/KeyValueContainerData.java         |  21 +
 .../container/common/interfaces/Container.java     |  17 +-
 .../container/keyvalue/KeyValueContainer.java      | 544 +++++++++++++++++++++
 .../keyvalue/KeyValueContainerLocationUtil.java    | 140 ++++++
 .../container/keyvalue/KeyValueContainerUtil.java  | 148 ++++++
 .../ozone/container/keyvalue/helpers/KeyUtils.java |  82 ++++
 .../container/keyvalue/helpers/package-info.java   |  21 +
 .../ozone/container/keyvalue/package-info.java     |  21 +
 .../container/common/impl/TestContainerSet.java    |   8 +-
 .../container/keyvalue/TestKeyValueContainer.java  | 281 +++++++++++
 14 files changed, 1285 insertions(+), 87 deletions(-)

commit 020dd61988b1d47971e328174135d54baf5d41aa
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jun 14 14:14:24 2018 -0700

    HDDS-146. Refactor the structure of the acceptance tests.
    Contributed by  Elek, Marton.

 .../acceptance-test/dev-support/bin/robot-all.sh   |   2 +-
 .../dev-support/bin/robot-dnd-all.sh               |  63 +++++
 .../acceptance-test/dev-support/bin/robot.sh       |   9 +-
 .../acceptance-test/dev-support/docker/Dockerfile  |  21 ++
 .../dev-support/docker/docker-compose.yaml         |  23 ++
 hadoop-ozone/acceptance-test/pom.xml               |   1 +
 .../src/test/{compose => acceptance/basic}/.env    |   2 +-
 .../src/test/acceptance/basic/basic.robot          |  50 ++++
 .../basic}/docker-compose.yaml                     |   0
 .../{compose => acceptance/basic}/docker-config    |   4 +-
 .../src/test/acceptance/basic/ozone-shell.robot    |  85 +++++++
 .../ozone.robot => acceptance/commonlib.robot}     |  67 ++----
 .../src/test/acceptance/ozonefs/.env               |  17 ++
 .../robotframework/acceptance/ozone-shell.robot    | 256 ---------------------
 start-build-env.sh                                 |   8 +-
 15 files changed, 296 insertions(+), 312 deletions(-)

commit 5d7449d2b8bcd0963d172fc30df784279671176f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 14 13:43:14 2018 -0700

    HDFS-13675. Speed up TestDFSAdminWithHA. Contributed by Lukas Majercak.

 .../test/java/org/apache/hadoop/hdfs/tools/TestDFSAdminWithHA.java   | 5 +++++
 1 file changed, 5 insertions(+)

commit 9a5552bf762880c38a233597b7c6e9ea09441108
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Thu Jun 14 13:28:41 2018 -0700

    HDDS-156. Implement HDDSVolume to manage volume state

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   5 +
 .../container/common/DataNodeLayoutVersion.java    |  80 +++++
 .../common/helpers/DatanodeVersionFile.java        |  95 ++++++
 .../ozone/container/common/impl/VolumeSet.java     | 251 ----------------
 .../common/interfaces/VolumeChoosingPolicy.java    |   4 +-
 .../container/common/utils/HddsVolumeUtil.java     | 163 ++++++++++
 .../ozone/container/common/volume/HddsVolume.java  | 330 +++++++++++++++++++++
 .../RoundRobinVolumeChoosingPolicy.java            |   9 +-
 .../common/{impl => volume}/VolumeInfo.java        |  78 ++---
 .../ozone/container/common/volume/VolumeSet.java   | 309 +++++++++++++++++++
 .../common/{impl => volume}/VolumeUsage.java       |  11 +-
 .../container/common/volume/package-info.java      |  21 ++
 .../common/TestDatanodeLayOutVersion.java          |  38 +++
 .../common/helpers/TestDatanodeVersionFile.java    | 134 +++++++++
 .../impl/TestRoundRobinVolumeChoosingPolicy.java   | 100 -------
 .../container/common/volume/TestHddsVolume.java    | 145 +++++++++
 .../volume/TestRoundRobinVolumeChoosingPolicy.java | 131 ++++++++
 .../{interfaces => volume}/TestVolumeSet.java      |  42 +--
 18 files changed, 1517 insertions(+), 429 deletions(-)

commit 361ffb26bebf2491bbe3219ef4a83eb753660018
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 14 13:14:25 2018 -0700

    YARN-8426:Upgrade jquery-ui to 1.12.1 in YARN. Contributed by Sunil Govindan

 hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/pom.xml  |  2 +-
 .../java/org/apache/hadoop/yarn/webapp/view/JQueryUI.java   |  2 +-
 .../webapps/static/jquery/jquery-ui-1.12.1.custom.min.js    | 13 +++++++++++++
 .../webapps/static/jquery/jquery-ui-1.9.1.custom.min.js     |  6 ------
 4 files changed, 15 insertions(+), 8 deletions(-)

commit 9591765040b85927ac69179ab46383eef9560a28
Author: Eric Yang <eyang@apache.org>
Date:   Thu Jun 14 15:54:21 2018 -0400

    YARN-8410.  Fixed a bug in A record lookup by CNAME record.
                Contributed by Shane Kumpf

 .../hadoop/registry/server/dns/RegistryDNS.java    | 29 ++++++++++++++++++----
 .../registry/server/dns/TestRegistryDNS.java       | 23 ++++++++++++++---
 2 files changed, 44 insertions(+), 8 deletions(-)

commit 8d4926f38bf53b32453cd2bc7322c8818f752f85
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 14 09:58:50 2018 -0700

    HDFS-13563. TestDFSAdminWithHA times out on Windows. Contributed by Lukas Majercak.

 .../test/java/org/apache/hadoop/hdfs/tools/TestDFSAdminWithHA.java | 7 +++++++
 1 file changed, 7 insertions(+)

commit 418cff4820ba73cdbfd09fc5879b8b3aa4e62d5f
Merge: 7e228e54c56 9119b3cf8f8
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Jun 14 09:38:20 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit 9119b3cf8f883aa2d5df534afc0c50249fed03c6
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu Jun 14 12:38:10 2018 +0530

    YARN-8155. Improve ATSv2 client logging in RM and NM publisher. Contributed by Abhishek Modi.

 .../timelineservice/NMTimelinePublisher.java       | 42 ++++++++++++++++++----
 .../metrics/TimelineServiceV2Publisher.java        |  8 +++--
 .../collector/TimelineCollectorWebService.java     | 19 +++++++---
 3 files changed, 56 insertions(+), 13 deletions(-)

commit ddd09d59f3d9825f068026622720914e04c2e1d6
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 20:18:22 2018 -0700

    HDDS-163. Add Datanode heartbeat dispatcher in SCM.
    Contributed by Nandakumar.

 .../container/common/report/ReportManager.java     |   3 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 119 ++++++-------
 .../report/SCMDatanodeContainerReportHandler.java  |  76 +++++++++
 .../report/SCMDatanodeHeartbeatDispatcher.java     | 189 +++++++++++++++++++++
 .../report/SCMDatanodeNodeReportHandler.java       |  43 +++++
 .../server/report/SCMDatanodeReportHandler.java    |  83 +++++++++
 .../report/SCMDatanodeReportHandlerFactory.java    |  82 +++++++++
 .../hdds/scm/server/report/package-info.java       |  57 +++++++
 .../TestSCMDatanodeContainerReportHandler.java     |  34 ++++
 .../report/TestSCMDatanodeHeartbeatDispatcher.java | 138 +++++++++++++++
 .../report/TestSCMDatanodeNodeReportHandler.java   |  36 ++++
 .../TestSCMDatanodeReportHandlerFactory.java       |  51 ++++++
 .../hdds/scm/server/report/package-info.java       |  21 +++
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  20 ++-
 14 files changed, 875 insertions(+), 77 deletions(-)

commit 7547740e5c65edaa6c6f8aa1c8debabbdfb0945e
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 17:50:42 2018 -0700

    HDDS-161. Add functionality to queue ContainerClose command from SCM Heartbeat Response to Ratis.
    Contributed by Shashikant Banerjee.

 .../common/statemachine/DatanodeStateMachine.java  |   9 +
 .../CloseContainerCommandHandler.java              |  21 +-
 .../commandhandler/CommandDispatcher.java          |   4 +
 .../common/transport/server/XceiverServer.java     |   7 +
 .../common/transport/server/XceiverServerGrpc.java |   9 +
 .../common/transport/server/XceiverServerSpi.java  |   7 +
 .../transport/server/ratis/XceiverServerRatis.java |  56 +++++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  62 +++++-
 .../protocol/commands/CloseContainerCommand.java   |  12 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../scm/container/CloseContainerEventHandler.java  |   3 +-
 .../hdds/scm/container/closer/ContainerCloser.java |   7 +-
 .../TestCloseContainerByPipeline.java              | 221 +++++++++++++++++++++
 .../commandhandler/TestCloseContainerHandler.java  |   7 +-
 14 files changed, 412 insertions(+), 14 deletions(-)

commit 22994889dc449f966fb6462a3ac3d3bbaee3ac6a
Author: Eric Yang <eyang@apache.org>
Date:   Wed Jun 13 19:24:31 2018 -0400

    YARN-8259.  Improve privileged docker container liveliness checks.
                Contributed by Shane Kumpf

 .../linux/runtime/DockerLinuxContainerRuntime.java | 26 ++++++-----------
 .../runtime/LinuxContainerRuntimeConstants.java    |  2 ++
 .../linux/runtime/TestDockerContainerRuntime.java  | 34 +++++++++++++++-------
 .../src/site/markdown/DockerContainers.md          | 15 ++++++++++
 4 files changed, 49 insertions(+), 28 deletions(-)

commit 69b05968974994c6e22d6562a67b9392d1700094
Author: Eric Yang <eyang@apache.org>
Date:   Wed Jun 13 19:05:52 2018 -0400

    YARN-8411.  Restart stopped system service during RM start.
                Contributed by Billie Rinaldi

 .../service/client/SystemServiceManagerImpl.java   | 29 +++++++++++++---
 .../hadoop/yarn/service/webapp/ApiServer.java      |  3 +-
 .../hadoop/yarn/service/ServiceClientTest.java     |  4 +--
 .../client/TestSystemServiceManagerImpl.java       | 40 ++++++++++++++++++----
 .../hadoop/yarn/service/client/ServiceClient.java  | 14 +++++---
 5 files changed, 72 insertions(+), 18 deletions(-)

commit 7566e0ec5f1aff4cf3c53f4ccc5f3b57fff1e216
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Wed Jun 13 11:43:18 2018 -0700

    HDDS-159. RestClient: Implement list operations for volume, bucket and keys. Contributed by Lokesh Jain.

 .../robotframework/acceptance/ozone-shell.robot    |  18 ++--
 .../hadoop/ozone/client/rest/RestClient.java       | 113 ++++++++++++++++++++-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       |  33 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       |   3 -
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |   3 -
 .../apache/hadoop/ozone/web/client/TestVolume.java |  12 +--
 6 files changed, 136 insertions(+), 46 deletions(-)

commit 43baa036aeb025bcbed1aca19837b072f2c14a6a
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 13 09:50:10 2018 -0700

    HDDS-109. Add reconnect logic for XceiverClientGrpc.
    Contributed by Lokesh Jain.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 23 +++++++++++++++++
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  6 ++---
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 29 +++++++++++++++++-----
 3 files changed, 48 insertions(+), 10 deletions(-)

commit 8e7548d33be9c4874daab18b2e774bdc2ed216d3
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed Jun 13 20:05:55 2018 +0800

    HDFS-13641. Add metrics for edit log tailing. Contributed by Chao Sun.

 .../hadoop-common/src/site/markdown/Metrics.md     | 12 +++++
 .../org/apache/hadoop/test/MetricsAsserts.java     | 22 ++++++--
 .../hdfs/server/namenode/ha/EditLogTailer.java     | 11 ++++
 .../server/namenode/metrics/NameNodeMetrics.java   | 59 +++++++++++++++++++++-
 .../namenode/metrics/TestNameNodeMetrics.java      | 41 +++++++++++++++
 5 files changed, 140 insertions(+), 5 deletions(-)

commit 6307962b932e0ee69ba61f5796388c175d79195a
Author: Sunil G <sunilg@apache.org>
Date:   Wed Jun 13 16:09:16 2018 +0530

    YARN-8404. Timeline event publish need to be async to avoid Dispatcher thread leak in case ATS is down. Contributed by Rohith Sharma K S

 .../server/resourcemanager/metrics/TimelineServiceV1Publisher.java  | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit f4c7c91123b1dbb12bcc0070479999963b04ad46
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Wed Jun 13 00:36:02 2018 -0700

    HADOOP-15483. Upgrade jquery to version 3.3.1. Contributed by Lokesh Jain, Mukul Kumar Singh and Sunil Govindan.

 LICENSE.txt                                        |     4 +-
 .../server-scm/src/main/webapps/scm/index.html     |     6 +-
 .../src/main/webapps/router/federationhealth.html  |     6 +-
 hadoop-hdfs-project/hadoop-hdfs/pom.xml            |     4 +-
 .../src/main/webapps/datanode/datanode.html        |     6 +-
 .../src/main/webapps/hdfs/dfshealth.html           |     6 +-
 .../hadoop-hdfs/src/main/webapps/hdfs/dfshealth.js |     8 +-
 .../src/main/webapps/hdfs/explorer.html            |    10 +-
 .../hadoop-hdfs/src/main/webapps/hdfs/explorer.js  |    34 +-
 .../src/main/webapps/journal/index.html            |     6 +-
 .../src/main/webapps/secondary/status.html         |     6 +-
 .../static/bootstrap-3.0.2/css/bootstrap.min.css   |     9 -
 .../fonts/glyphicons-halflings-regular.eot         |   Bin 20290 -> 0 bytes
 .../fonts/glyphicons-halflings-regular.svg         |   229 -
 .../fonts/glyphicons-halflings-regular.ttf         |   Bin 41236 -> 0 bytes
 .../fonts/glyphicons-halflings-regular.woff        |   Bin 23292 -> 0 bytes
 .../webapps/static/bootstrap-3.0.2/img/clear.png   |   Bin 509 -> 0 bytes
 .../webapps/static/bootstrap-3.0.2/img/loading.gif |   Bin 1849 -> 0 bytes
 .../static/bootstrap-3.0.2/js/bootstrap.min.js     |     9 -
 .../css/bootstrap-editable.css                     |     0
 .../static/bootstrap-3.3.7/css/bootstrap-theme.css |   587 +
 .../bootstrap-3.3.7/css/bootstrap-theme.css.map    |     1 +
 .../bootstrap-3.3.7/css/bootstrap-theme.min.css    |     6 +
 .../css/bootstrap-theme.min.css.map                |     1 +
 .../static/bootstrap-3.3.7/css/bootstrap.css       |  6757 +++++++++
 .../static/bootstrap-3.3.7/css/bootstrap.css.map   |     1 +
 .../static/bootstrap-3.3.7/css/bootstrap.min.css   |     6 +
 .../bootstrap-3.3.7/css/bootstrap.min.css.map      |     1 +
 .../fonts/glyphicons-halflings-regular.eot         |   Bin 0 -> 20127 bytes
 .../fonts/glyphicons-halflings-regular.svg         |   288 +
 .../fonts/glyphicons-halflings-regular.ttf         |   Bin 0 -> 45404 bytes
 .../fonts/glyphicons-halflings-regular.woff        |   Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       |   Bin 0 -> 18028 bytes
 .../js/bootstrap-editable.min.js                   |     0
 .../webapps/static/bootstrap-3.3.7/js/bootstrap.js |  2377 ++++
 .../static/bootstrap-3.3.7/js/bootstrap.min.js     |     7 +
 .../main/webapps/static/bootstrap-3.3.7/js/npm.js  |    13 +
 .../src/main/webapps/static/dfs-dust.js            |     2 +-
 .../src/main/webapps/static/jquery-1.10.2.min.js   |     6 -
 .../src/main/webapps/static/jquery-3.3.1.min.js    |     2 +
 .../src/main/webapps/static/moment.min.js          |     6 +-
 .../src/test/robotframework/acceptance/ozone.robot |     4 +-
 .../ozone-manager/src/main/webapps/ksm/index.html  |     6 +-
 hadoop-ozone/pom.xml                               |     4 +-
 .../src/main/html/js/thirdparty/jquery.js          | 13607 ++++++++++---------
 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |     2 +-
 .../apache/hadoop/yarn/webapp/view/JQueryUI.java   |     2 +-
 .../webapps/static/jquery/jquery-1.8.2.min.js      |     2 -
 .../webapps/static/jquery/jquery-3.3.1.min.js      |     2 +
 .../resources/webapps/static/jt/jquery.jstree.js   |    42 +-
 50 files changed, 17221 insertions(+), 6854 deletions(-)

commit 29024a62038c297f11e8992601f2522ffffc7da7
Author: Weiwei Yang <wwei@apache.org>
Date:   Wed Jun 13 09:28:05 2018 +0800

    YARN-8394. Improve data locality documentation for Capacity Scheduler. Contributed by Weiwei Yang.

 .../hadoop-yarn-server-resourcemanager/conf/capacity-scheduler.xml   | 2 ++
 .../hadoop-yarn-site/src/site/markdown/CapacityScheduler.md          | 5 +++++
 2 files changed, 7 insertions(+)

commit 108da85320d65e37fe835de65866b818e5420587
Author: Eric Yang <eyang@apache.org>
Date:   Tue Jun 12 20:40:32 2018 -0400

    HADOOP-15527.  Improve delay check for stopping processes.
                   Contributed by Vinod Kumar Vavilapalli

 .../hadoop-common/src/main/bin/hadoop-functions.sh | 34 +++++++++++++++++++++-
 .../src/test/scripts/hadoop_stop_daemon.bats       | 24 ++++++++++++++-
 2 files changed, 56 insertions(+), 2 deletions(-)

commit 5670e89b2ec69ab71e32dcd5acbd3a57ca6abea5
Author: Arun Suresh <asuresh@apache.org>
Date:   Tue Jun 12 15:36:52 2018 -0700

    MAPREDUCE-7101. Add config parameter to allow JHS to alway scan user dir irrespective of modTime. (Thomas Marquardt via asuresh)

 .../org/apache/hadoop/mapreduce/v2/jobhistory/JHAdminConfig.java | 9 +++++++--
 .../src/main/resources/mapred-default.xml                        | 9 +++++++++
 .../org/apache/hadoop/mapreduce/v2/hs/HistoryFileManager.java    | 8 +++++++-
 3 files changed, 23 insertions(+), 3 deletions(-)

commit aeaf9fec62f10699d1c809d66444520fe4533c2c
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue Jun 12 14:16:14 2018 -0700

    HADOOP-15532. TestBasicDiskValidator fails with NoSuchFileException. Contributed by Giovanni Matteo Fumarola.

 .../src/test/java/org/apache/hadoop/util/TestDiskChecker.java       | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 04b74eddc67888142879ed114d21348e8a4aad78
Author: Gera Shegalov <gera@apache.org>
Date:   Tue Jun 12 11:21:51 2018 -0700

    MAPREDUCE-7108. TestFileOutputCommitter fails on Windows. (Zuoming Zhang via gera)

 .../mapreduce/lib/output/TestFileOutputCommitter.java    | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit a16623df2148e59e1b7dcf98939b03cb7440d143
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Jun 12 11:14:33 2018 -0700

    HADOOP-15307. NFS: flavor AUTH_SYS should use VerifierNone. Contributed by Gabor Bota.

 .../java/org/apache/hadoop/oncrpc/security/Verifier.java     | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit c35481594ffc372e3f846b0c8ebc2ff9e36ffdb0
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue Jun 12 10:59:50 2018 -0700

    YARN-8422. TestAMSimulator failing with NPE. Contributed by Giovanni Matteo Fumarola.

 .../apache/hadoop/yarn/sls/appmaster/TestAMSimulator.java   | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

commit 6e756e8a620e4d6dc3192986679060c52063489b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue Jun 12 10:24:34 2018 -0700

    HADOOP-15529. ContainerLaunch#testInvalidEnvVariableSubstitutionType is not supported in Windows. Contributed by Giovanni Matteo Fumarola.

 .../containermanager/launcher/TestContainerLaunch.java       | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit 10d0e4be6eade7c1685b9c6962bc9b18e33122a8
Author: Haibo Chen <haibochen@apache.org>
Date:   Tue Jun 12 10:11:30 2018 -0700

    YARN-8325. Miscellaneous QueueManager code clean up. (Szilard Nemeth via Haibo Chen)

 .../scheduler/fair/QueueManager.java               | 41 ++++++++++++----------
 1 file changed, 23 insertions(+), 18 deletions(-)

commit 24a89825f0cbc92b0a462152bc765e2195edd5a1
Author: Haibo Chen <haibochen@apache.org>
Date:   Tue Jun 12 10:03:07 2018 -0700

    YARN-6931. Make the aggregation interval in AppLevelTimelineCollector configurable. (Abhishek Modi via Haibo Chen)

 .../org/apache/hadoop/yarn/conf/YarnConfiguration.java     |  9 +++++++++
 .../hadoop-yarn-common/src/main/resources/yarn-default.xml |  9 +++++++++
 .../collector/AppLevelTimelineCollectorWithAgg.java        | 14 +++++++++-----
 3 files changed, 27 insertions(+), 5 deletions(-)

commit e9ea9022999f83aca000a10edbb76489e6b79d12
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jun 12 09:03:42 2018 -0700

    HDDS-130. TestGenerateOzoneRequiredConfigurations should use GenericTestUtils#getTempPath to set output directory. Contributed by Sandeep Nemuri.

 .../TestGenerateOzoneRequiredConfigurations.java   | 72 +++++++++++++++-------
 1 file changed, 50 insertions(+), 22 deletions(-)

commit 652bcbb3e4950758e61ce123ecc1798ae2b60a7f
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed Jun 13 00:34:57 2018 +0900

    YARN-8363. Upgrade commons-lang version to 3.7 in hadoop-yarn-project. Contributed by Takanobu Asanuma.

 .../hadoop-yarn/hadoop-yarn-api/pom.xml            |  4 --
 .../protocolrecords/GetApplicationsRequest.java    | 22 +++----
 .../apache/hadoop/yarn/api/records/Resource.java   |  2 +-
 .../hadoop/yarn/util/resource/ResourceUtils.java   |  4 +-
 .../pom.xml                                        |  4 --
 .../yarn/applications/distributedshell/Client.java |  2 +-
 .../yarn/service/client/ApiServiceClient.java      |  2 +-
 .../hadoop-yarn-services-core/pom.xml              |  5 --
 .../yarn/service/api/records/Configuration.java    |  2 +-
 .../hadoop/yarn/service/client/ServiceClient.java  |  2 +-
 .../hadoop/yarn/service/monitor/probe/Probe.java   |  2 +-
 .../service/provider/AbstractClientProvider.java   |  2 +-
 .../service/provider/AbstractProviderService.java  |  2 +-
 .../provider/docker/DockerClientProvider.java      |  2 +-
 .../provider/docker/DockerProviderService.java     |  2 +-
 .../provider/tarball/TarballClientProvider.java    |  2 +-
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  2 +-
 .../hadoop/yarn/service/utils/ServiceUtils.java    |  4 +-
 .../hadoop-yarn/hadoop-yarn-client/pom.xml         |  4 --
 .../apache/hadoop/yarn/client/cli/ClusterCLI.java  |  2 +-
 .../org/apache/hadoop/yarn/client/cli/LogsCLI.java |  2 +-
 .../org/apache/hadoop/yarn/client/cli/NodeCLI.java |  4 +-
 .../apache/hadoop/yarn/client/cli/RMAdminCLI.java  |  2 +-
 .../org/apache/hadoop/yarn/client/cli/TopCLI.java  |  6 +-
 .../apache/hadoop/yarn/client/cli/TestLogsCLI.java |  2 +-
 .../apache/hadoop/yarn/client/cli/TestYarnCLI.java |  2 +-
 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |  4 --
 .../impl/pb/GetApplicationsRequestPBImpl.java      | 30 +++++-----
 .../hadoop/yarn/logaggregation/LogCLIHelpers.java  |  2 +-
 .../hadoop/yarn/logaggregation/LogToolUtils.java   |  2 +-
 .../LogAggregationFileController.java              |  2 +-
 .../LogAggregationFileControllerFactory.java       |  2 +-
 .../ifile/LogAggregationIndexedFileController.java |  2 +-
 .../yarn/nodelabels/CommonNodeLabelsManager.java   |  2 +-
 .../apache/hadoop/yarn/nodelabels/RMNodeLabel.java |  2 +-
 .../java/org/apache/hadoop/yarn/state/Graph.java   |  2 +-
 .../util/Log4jWarningErrorMetricsAppender.java     |  2 +-
 .../hadoop/yarn/util/ProcfsBasedProcessTree.java   |  2 +-
 .../java/org/apache/hadoop/yarn/webapp/Router.java |  2 +-
 .../org/apache/hadoop/yarn/webapp/WebApps.java     |  2 +-
 .../hadoop/yarn/webapp/hamlet/HamletImpl.java      |  6 +-
 .../hadoop/yarn/webapp/hamlet2/HamletImpl.java     |  6 +-
 .../apache/hadoop/yarn/webapp/view/JQueryUI.java   |  6 +-
 .../apache/hadoop/yarn/webapp/view/TextView.java   |  6 +-
 .../hadoop/yarn/api/BasePBImplRecordsTest.java     |  8 ++-
 .../yarn/api/TestGetApplicationsRequest.java       |  7 ++-
 .../apache/hadoop/yarn/api/TestPBImplRecords.java  |  4 +-
 .../nodelabels/TestCommonNodeLabelsManager.java    |  2 +-
 .../org/apache/hadoop/yarn/webapp/TestWebApp.java  |  2 +-
 .../hadoop-yarn/hadoop-yarn-registry/pom.xml       |  5 --
 .../client/api/RegistryOperationsFactory.java      |  2 +-
 .../registry/client/binding/JsonSerDeser.java      |  2 +-
 .../registry/client/binding/RegistryUtils.java     |  2 +-
 .../client/impl/FSRegistryOperationsService.java   |  6 +-
 .../registry/client/impl/zk/RegistrySecurity.java  |  2 +-
 .../registry/server/dns/ReverseZoneUtils.java      |  2 +-
 .../integration/SelectByYarnPersistence.java       |  2 +-
 .../server/services/MicroZookeeperService.java     |  2 +-
 .../server/services/RegistryAdminService.java      |  2 +-
 .../apache/hadoop/registry/RegistryTestHelper.java |  2 +-
 .../ApplicationHistoryClientService.java           |  4 +-
 .../yarn/server/timeline/RollingLevelDB.java       |  2 +-
 .../timeline/RollingLevelDBTimelineStore.java      |  2 +-
 .../webapp/TestAHSWebServices.java                 |  2 +-
 .../store/impl/SQLFederationStateStore.java        |  6 +-
 .../utils/FederationStateStoreFacade.java          |  4 +-
 .../scheduler/OpportunisticContainerAllocator.java |  2 +-
 .../server/uam/UnmanagedApplicationManager.java    |  2 +-
 .../server/util/timeline/TimelineServerUtils.java  |  2 +-
 .../hadoop/yarn/server/webapp/AppAttemptBlock.java |  6 +-
 .../apache/hadoop/yarn/server/webapp/AppBlock.java |  4 +-
 .../hadoop/yarn/server/webapp/AppsBlock.java       | 14 ++---
 .../hadoop/yarn/server/webapp/WebServices.java     |  4 +-
 .../hadoop-yarn-server-nodemanager/pom.xml         |  4 --
 .../nodemanager/DefaultContainerExecutor.java      |  2 +-
 .../WindowsSecureContainerExecutor.java            |  2 +-
 .../containermanager/container/ContainerImpl.java  |  2 +-
 .../privileged/PrivilegedOperationExecutor.java    |  2 +-
 .../linux/resources/DefaultOOMHandler.java         |  2 +-
 .../executor/ContainerSignalContext.java           |  2 +-
 .../server/nodemanager/webapp/NMWebServices.java   |  2 +-
 .../launcher/TestContainerLaunch.java              | 48 +++++++--------
 .../logaggregation/TestLogAggregationService.java  |  2 +-
 .../loghandler/TestNonAggregatingLogHandler.java   |  4 +-
 .../hadoop-yarn-server-resourcemanager/pom.xml     |  4 --
 .../server/resourcemanager/ClientRMService.java    | 12 ++--
 .../ProportionalCapacityPreemptionPolicy.java      |  2 +-
 .../placement/QueuePlacementRuleUtils.java         |  2 +-
 .../placement/UserGroupMappingPlacementRule.java   |  2 +-
 .../server/resourcemanager/rmapp/RMAppImpl.java    |  2 +-
 .../rmapp/attempt/RMAppAttemptMetrics.java         |  2 +-
 .../scheduler/SchedulerApplicationAttempt.java     |  6 +-
 .../resourcemanager/scheduler/SchedulerUtils.java  |  2 +-
 .../scheduler/capacity/AbstractCSQueue.java        |  2 +-
 .../scheduler/capacity/CapacityScheduler.java      |  4 +-
 .../scheduler/capacity/LeafQueue.java              |  2 +-
 .../scheduler/capacity/ParentQueue.java            |  2 +-
 .../scheduler/capacity/QueueCapacities.java        |  2 +-
 .../allocator/RegularContainerAllocator.java       |  2 +-
 .../constraint/AllocationTagsManager.java          |  2 +-
 .../algorithm/LocalAllocationTagsManager.java      |  2 +-
 .../webapp/FairSchedulerAppsBlock.java             | 10 ++--
 .../resourcemanager/webapp/RMAppAttemptBlock.java  |  8 +--
 .../server/resourcemanager/webapp/RMAppBlock.java  |  4 +-
 .../server/resourcemanager/webapp/RMAppsBlock.java | 14 ++---
 .../resourcemanager/webapp/dao/AppAttemptInfo.java |  2 +-
 .../TestContainerResourceUsage.java                |  2 +-
 .../attempt/TestRMAppAttemptImplDiagnostics.java   |  2 +-
 .../TestCapacitySchedulerAutoCreatedQueueBase.java |  4 +-
 .../clientrm/FederationClientInterceptor.java      | 58 +++++++++---------
 .../yarn/server/router/webapp/AppsBlock.java       |  6 +-
 .../router/webapp/FederationInterceptorREST.java   | 70 +++++++++++-----------
 .../pom.xml                                        |  5 --
 .../storage/TimelineSchemaCreator.java             |  2 +-
 .../hadoop-yarn-server-timelineservice/pom.xml     |  5 --
 .../reader/TimelineReaderUtils.java                |  2 +-
 .../reader/TimelineReaderWebServicesUtils.java     |  2 +-
 117 files changed, 281 insertions(+), 318 deletions(-)

commit 5c7ad52573819728ed0b57d1f84258b5fff7c43c
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 12 08:25:18 2018 -0700

    HDDS-111. Include tests for Rest Client in TestVolume and TestBucket.
    Contributed by Lokesh Jain.

 .../hadoop/ozone/client/OzoneClientUtils.java      | 18 +++++-----
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  8 +++--
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 11 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       | 40 +++++++++++++++++++---
 .../hadoop/ozone/web/client/TestBucketsRatis.java  | 35 ++++++++++++++++++-
 .../apache/hadoop/ozone/web/client/TestVolume.java | 36 +++++++++++++++++--
 .../hadoop/ozone/web/client/TestVolumeRatis.java   | 29 ++++++++++++++--
 .../web/storage/DistributedStorageHandler.java     | 21 +++++++-----
 8 files changed, 165 insertions(+), 33 deletions(-)

commit aa7614c5f36060a3630b742590845da7efd85caa
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue Jun 12 20:36:23 2018 +0530

    HDDS-158. DatanodeStateMachine endPoint task throws NullPointerException. Contributed by Nanda Kumar.

 .../states/endpoint/HeartbeatEndpointTask.java     | 12 +++-
 .../common/report/TestReportPublisher.java         | 79 ++++++++++++++++++++++
 2 files changed, 88 insertions(+), 3 deletions(-)

commit b3612dd90c419c6ac5d59ab0793b4adec40ef5c6
Author: Sunil G <sunilg@apache.org>
Date:   Tue Jun 12 17:40:41 2018 +0530

    YARN-8419. [UI2] User cannot submit a new service as submit button is always disabled. Contributed by Suma Shivaprasad.

 .../hadoop-yarn-ui/src/main/webapp/app/components/deploy-service.js     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 95303f50d3467fd9bc64e504c9e64a64f118b25f
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Tue Jun 12 17:14:22 2018 +0530

    YARN-8413. Flow activity page is failing with 'Timeline server failed with an error'. Contributed by Sunil Govindan.

 .../hadoop-yarn-ui/src/main/webapp/app/initializers/loader.js           | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2df73dace06cfd2b3193a14cd455297f8f989617
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Tue Jun 12 17:13:09 2018 +0530

    YARN-8405. RM zk-state-store.parent-path ACLs has been changed since HADOOP-14773. Contributed by  ÃÃ±igo Goiri.

 .../hadoop/util/curator/ZKCuratorManager.java      | 14 ++++++++++-
 .../store/driver/impl/StateStoreZooKeeperImpl.java |  6 ++++-
 .../store/impl/ZookeeperFederationStateStore.java  |  8 +++---
 .../resourcemanager/recovery/ZKRMStateStore.java   |  2 +-
 .../capacity/conf/ZKConfigurationStore.java        |  2 +-
 .../recovery/TestZKRMStateStore.java               | 29 ++++++++++++++--------
 .../TestZKRMStateStoreZKClientConnections.java     | 22 ++++++++--------
 7 files changed, 53 insertions(+), 30 deletions(-)

commit 2b2f672022547e8c19658213ac5a4090bf5b6c72
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 11 19:25:56 2018 -0700

    YARN-8370. Some Node Manager tests fail on Windows due to improper path/file separator. Contributed by Anbang Hu.

 .../hadoop/yarn/server/nodemanager/TestLocalDirsHandlerService.java   | 4 ++--
 .../containermanager/logaggregation/TestAppLogAggregatorImpl.java     | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 23bfd9f7e4ef672613ec59c83d4b47b051949cd1
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 11 16:02:32 2018 -0700

    HDDS-72. Add deleteTransactionId field in ContainerInfo. Contributed by Lokesh Jain.

 .../container/common/helpers/ContainerInfo.java    |  27 ++++-
 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../apache/hadoop/utils/MetadataKeyFilters.java    | 118 +++++++++++++++++----
 hadoop-hdds/common/src/main/proto/hdds.proto       |   1 +
 .../org/apache/hadoop/ozone/TestMetadataStore.java |  61 ++++++++++-
 .../container/common/helpers/ContainerData.java    |  21 ++++
 .../container/common/helpers/ContainerReport.java  |  12 +++
 .../common/impl/ContainerManagerImpl.java          |  15 ++-
 .../background/BlockDeletingService.java           |  16 ++-
 .../commandhandler/DeleteBlocksCommandHandler.java |   3 +
 .../proto/StorageContainerDatanodeProtocol.proto   |   1 +
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |   9 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   3 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |   8 +-
 .../hdds/scm/container/ContainerMapping.java       |  35 ++++++
 .../hdds/scm/container/ContainerStateManager.java  |  12 +++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  11 ++
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  16 +++
 .../hdds/scm/container/TestContainerMapping.java   |   6 +-
 .../scm/container/closer/TestContainerCloser.java  |   3 +-
 .../ozone/TestStorageContainerManagerHelper.java   |   6 +-
 .../container/common/TestBlockDeletingService.java |  29 ++++-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   3 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |   9 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  44 +++++---
 25 files changed, 401 insertions(+), 70 deletions(-)

commit 7c3dc39083ef6608f8a8fe7699195d4d369ec5e4
Author: Yongjun Zhang <yzhang@cloudera.com>
Date:   Sun Jun 10 23:07:24 2018 -0700

    Update CHANGES, RELEASENOTES, and jdiff for 3.0.3 release.
    (cherry picked from commit 5a82f10e3254bc0745c2dda6bcef888d3ff0d1c3)

 .../site/markdown/release/3.0.3/CHANGES.3.0.3.md   | 309 ++++++++++++++++++++
 .../markdown/release/3.0.3/RELEASENOTES.3.0.3.md   |  31 ++
 .../dev-support/jdiff/Apache_Hadoop_HDFS_3.0.3.xml | 322 +++++++++++++++++++++
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 663 insertions(+), 1 deletion(-)

commit 7e228e54c56598e263d66e3ef74476e12a3b1f30
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 11 13:14:03 2018 -0700

    HDDS-136:Rename dbPath,containerFilePath. Contributed by Bharat Viswanadham

 .../common/impl/KeyValueContainerData.java         | 34 +++++++++++-----------
 .../ozone/container/common/impl/KeyValueYaml.java  |  9 +++---
 .../common/TestKeyValueContainerData.java          |  8 ++---
 .../container/common/impl/TestKeyValueYaml.java    | 16 +++++-----
 .../src/test/resources/additionalfields.container  |  7 +++--
 .../src/test/resources/incorrect.container         |  7 ++---
 6 files changed, 41 insertions(+), 40 deletions(-)

commit 0e437f9b174f3b1eaf41b63ae707dd76379b8e8b
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon Jun 11 12:15:39 2018 -0700

    Revert "Create Version File in Datanode. Contributed by Bharat Viswanadham."
    
    This reverts commit f26d3466d79125123cba00ab81481655d7bfe3c1.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 -
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../container/common/DataNodeLayoutVersion.java    |  80 ----------
 .../common/helpers/DatanodeVersionFile.java        | 172 ---------------------
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  71 +--------
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   8 +-
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 -
 .../hadoop/ozone/container/common/ScmTestMock.java |  24 ---
 .../common/TestDatanodeLayOutVersion.java          |  38 -----
 .../container/common/TestDatanodeStateMachine.java |   3 +-
 .../common/helpers/TestDatanodeVersionFile.java    | 120 --------------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 -
 .../ozone/container/common/TestEndPoint.java       | 169 +-------------------
 14 files changed, 14 insertions(+), 688 deletions(-)

commit 2e5cfe6df338c70965cfb0212a93617de3a6bd79
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 11 11:16:52 2018 -0700

    HDFS-13653. Make dfs.client.failover.random.order a per nameservice configuration. Contributed by Ekanth Sethuramalingam.

 .../ha/ConfiguredFailoverProxyProvider.java        |  29 ++-
 .../ha/TestConfiguredFailoverProxyProvider.java    | 264 +++++++++++++++++++++
 .../src/main/resources/hdfs-default.xml            |  12 +
 .../apache/hadoop/tools/TestHdfsConfigFields.java  |   1 +
 4 files changed, 303 insertions(+), 3 deletions(-)

commit 180b3c960bb693a68431c677d8c8b18821fb4361
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jun 11 11:18:44 2018 -0700

    YARN-8321. AllocationFileLoaderService.getAllocationFile() should be declared as VisibleForTest. (Szilard Nemeth via Haibo Chen)

 .../resourcemanager/scheduler/fair/AllocationFileLoaderService.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 676dcffff575fdf1c4b49aeae4e000bd60ca0a83
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jun 11 11:16:21 2018 -0700

    YARN-8322. Change log level when there is an IOException when the allocation file is loaded. (Szilard Nemeth via Haibo Chen)

 .../resourcemanager/scheduler/fair/AllocationFileLoaderService.java   | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c190ac2be88e574b3322cdc73a7c0af0cef708b2
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jun 11 11:12:44 2018 -0700

    YARN-8323. FairScheduler.allocConf should be declared as volatile. (Szilard Nemeth via Haibo Chen)

 .../yarn/server/resourcemanager/scheduler/fair/FairScheduler.java       | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 143dd560bf506fafd849aeb47a42becc6c13330d
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 11 09:04:54 2018 -0700

    HDDS-133:Change format of .container files to Yaml. Contributed by Bharat Viswanadham

 hadoop-hdds/container-service/pom.xml              |   6 +
 .../container/common/impl/ChunkLayOutVersion.java  |  18 ++
 .../ozone/container/common/impl/ContainerData.java |  28 ++-
 .../common/impl/KeyValueContainerData.java         |  19 +-
 .../ozone/container/common/impl/KeyValueYaml.java  | 274 +++++++++++++++++++++
 .../common/TestKeyValueContainerData.java          |  15 +-
 .../container/common/impl/TestKeyValueYaml.java    | 158 ++++++++++++
 .../src/test/resources/additionalfields.container  |   9 +
 .../src/test/resources/incorrect.container         |  10 +
 hadoop-hdds/pom.xml                                |   2 +
 10 files changed, 521 insertions(+), 18 deletions(-)

commit 18201b882a38ad875358c5d23c09b0ef903c2f91
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Mon Jun 11 13:53:37 2018 +0800

    HADOOP-15499. Performance severe drops when running RawErasureCoderBenchmark with NativeRSRawErasureCoder. Contributed by Sammi Chen.

 .../rawcoder/AbstractNativeRawDecoder.java         | 51 +++++++++++++---------
 .../rawcoder/AbstractNativeRawEncoder.java         | 49 +++++++++++++--------
 .../erasurecode/rawcoder/NativeRSRawDecoder.java   | 19 ++++++--
 .../erasurecode/rawcoder/NativeRSRawEncoder.java   | 19 ++++++--
 .../erasurecode/rawcoder/NativeXORRawDecoder.java  | 19 ++++++--
 .../erasurecode/rawcoder/NativeXORRawEncoder.java  | 19 ++++++--
 .../rawcoder/RawErasureCoderBenchmark.java         |  6 +++
 7 files changed, 127 insertions(+), 55 deletions(-)

commit ccfb816d39878abf4172933327d788c59b9eb082
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Sat Jun 9 16:39:09 2018 -0700

    HDFS-13667:Typo: Marking all datandoes as stale. Contributed by Nanda Kumar

 .../org/apache/hadoop/hdfs/server/blockmanagement/DatanodeManager.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ef0118b91e384b9a6d96c2ae64480d9acf5aa6fb
Author: Steve Loughran <stevel@apache.org>
Date:   Sat Jun 9 15:33:30 2018 +0100

    HADOOP-15520. Add tests for various org.apache.hadoop.util classes.
    Contributed by Arash Nabili

 .../hadoop/util/TestCloseableReferenceCount.java   |  91 ++++++++++
 .../hadoop/util/TestIntrusiveCollection.java       | 193 +++++++++++++++++++++
 .../apache/hadoop/util/TestLimitInputStream.java   |  74 ++++++++
 .../java/org/apache/hadoop/util/TestShell.java     |   8 +
 .../org/apache/hadoop/util/TestStringUtils.java    |  27 +++
 .../apache/hadoop/util/TestUTF8ByteArrayUtils.java |  57 ++++++
 6 files changed, 450 insertions(+)

commit 000a67839666bf7cb39d3955757bb05fa95f1b18
Author: Arpit Agarwal <arp@apache.org>
Date:   Fri Jun 8 17:57:12 2018 -0700

    HDFS-12670. can't renew HDFS tokens with only the hdfs client jar. Contributed by Arpit Agarwal.

 .../META-INF/services/org.apache.hadoop.security.token.TokenIdentifier    | 0
 .../META-INF/services/org.apache.hadoop.security.token.TokenRenewer       | 0
 2 files changed, 0 insertions(+), 0 deletions(-)

commit fba1c42adc1c8ae57951e1865ec2ab05c8707bdf
Author: Chao Sun <sunchao@apache.org>
Date:   Fri Jun 8 16:36:42 2018 -0700

    HDFS-13664. Refactor ConfiguredFailoverProxyProvider to make inheritance easier. Contributed by Chao Sun.

 .../server/namenode/ha/ConfiguredFailoverProxyProvider.java    | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit cf4108313da83e28d07676078a33016ec8856ff6
Author: Xiao Chen <xiao@apache.org>
Date:   Fri Jun 8 15:13:38 2018 -0700

    HDFS-13642. Creating a file with block size smaller than EC policy's cell size should fail.

 .../hdfs/server/namenode/FSDirErasureCodingOp.java |  23 ++++++++++++++++-----
 .../hdfs/server/namenode/FSDirWriteFileOp.java     |  10 ++-------
 .../hadoop/hdfs/server/namenode/FSNamesystem.java  |  21 ++++++++++++++-----
 .../java/org/apache/hadoop/hdfs/DFSTestUtil.java   |   5 +++--
 .../hadoop/hdfs/TestDFSStripedOutputStream.java    |  16 ++++++++++++++
 .../hadoop/hdfs/TestErasureCodingExerciseAPIs.java |   2 +-
 .../hadoop/hdfs/TestErasureCodingPolicies.java     |   2 +-
 .../hadoop-hdfs/src/test/resources/editsStored     | Bin 7909 -> 7909 bytes
 .../hadoop-hdfs/src/test/resources/editsStored.xml |   2 +-
 9 files changed, 58 insertions(+), 23 deletions(-)

commit a1272448bfa2f1a159d948b8635558e053b7be78
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 8 10:27:01 2018 -0700

    HDDS-157. Upgrade common-langs version to 3.7 in HDDS and Ozone.
    Contributed by Takanobu Asanuma.

 .../java/org/apache/hadoop/hdds/scm/XceiverClientHandler.java     | 2 +-
 .../src/main/java/org/apache/hadoop/hdds/client/BlockID.java      | 2 +-
 .../container/common/states/endpoint/RegisterEndpointTask.java    | 2 +-
 .../org/apache/hadoop/ozone/client/rest/response/KeyInfo.java     | 4 ++--
 .../main/java/org/apache/hadoop/ozone/web/response/KeyInfo.java   | 4 ++--
 .../apache/hadoop/ozone/TestStorageContainerManagerHelper.java    | 2 +-
 .../org/apache/hadoop/ozone/client/rpc/TestOzoneRpcClient.java    | 2 +-
 .../org/apache/hadoop/ozone/ksm/TestContainerReportWithKeys.java  | 2 +-
 .../java/org/apache/hadoop/ozone/ksm/TestKeySpaceManager.java     | 2 +-
 .../java/org/apache/hadoop/ozone/ksm/TestKsmBlockVersioning.java  | 2 +-
 .../apache/hadoop/ozone/ksm/TestMultipleContainerReadWrite.java   | 2 +-
 .../test/java/org/apache/hadoop/ozone/ozShell/TestOzoneShell.java | 2 +-
 .../java/org/apache/hadoop/ozone/scm/TestAllocateContainer.java   | 2 +-
 .../org/apache/hadoop/ozone/scm/TestXceiverClientManager.java     | 2 +-
 .../org/apache/hadoop/ozone/web/TestOzoneRestWithMiniCluster.java | 2 +-
 .../test/java/org/apache/hadoop/ozone/web/client/TestKeys.java    | 8 ++++----
 .../java/org/apache/hadoop/ozone/web/client/TestKeysRatis.java    | 2 +-
 .../test/java/org/apache/hadoop/ozone/web/client/TestVolume.java  | 2 +-
 .../test/java/org/apache/hadoop/ozone/ksm/TestChunkStreams.java   | 2 +-
 .../tools/src/main/java/org/apache/hadoop/ozone/freon/Freon.java  | 6 +++---
 .../apache/hadoop/ozone/genesis/BenchMarkDatanodeDispatcher.java  | 2 +-
 .../apache/hadoop/ozone/genesis/BenchMarkMetadataStoreReads.java  | 2 +-
 .../apache/hadoop/ozone/genesis/BenchMarkMetadataStoreWrites.java | 2 +-
 .../org/apache/hadoop/ozone/genesis/BenchMarkRocksDbStore.java    | 2 +-
 .../main/java/org/apache/hadoop/ozone/genesis/GenesisUtil.java    | 2 +-
 25 files changed, 32 insertions(+), 32 deletions(-)

commit c42dcc7c47340d517563890269c6c112996e8897
Author: Jitendra Pandey <jitendra@apache.org>
Date:   Thu Jun 7 23:00:26 2018 -0700

    HADOOP-15482. Upgrade jackson-databind to version 2.9.5. Contributed by Lokesh Jain.

 hadoop-project/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b88fe25baf130cd7a77590f9ded5b0bf028ef75
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 7 17:09:31 2018 -0700

    YARN-8359. Exclude containermanager.linux test classes on Windows. Contributed by Jason Lowe.

 .../hadoop-yarn-server-nodemanager/pom.xml          | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit 351cf87c92872d90f62c476f85ae4d02e485769c
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu Jun 7 17:09:34 2018 -0700

    Disable mounting cgroups by default (miklos.szegedi@cloudera.com via rkanter)

 .../container-executor/impl/container-executor.c   | 54 +++++++++++++++-------
 .../container-executor/impl/container-executor.h   |  4 ++
 .../src/main/native/container-executor/impl/main.c | 19 +++++---
 .../src/site/markdown/NodeManagerCgroups.md        |  2 +-
 4 files changed, 55 insertions(+), 24 deletions(-)

commit d5eca1a6a0e3939eead6711805b7a61c364d254b
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Thu Jun 7 14:58:56 2018 -0700

    YARN-6677. Preempt opportunistic containers when root container cgroup goes over memory limit. Contributed by Haibo Chen.

 .../containermanager/container/Container.java      |   8 +
 .../containermanager/container/ContainerImpl.java  |   5 +
 .../linux/resources/DefaultOOMHandler.java         | 249 ++++--
 .../linux/resources/TestDefaultOOMHandler.java     | 922 ++++++++++++++++++---
 .../server/nodemanager/webapp/MockContainer.java   |   5 +
 5 files changed, 989 insertions(+), 200 deletions(-)

commit 67fc70e09f941e9b43b022d9f42a9486ad759e6e
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 7 16:10:15 2018 -0700

    YARN-8400. Fix typos in YARN Federation documentation page. Contributed by Giovanni Matteo Fumarola.

 .../hadoop-yarn-site/src/site/markdown/Federation.md       | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 78761e87a7f3012ef2d96e294d55b323b76b7c42
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu Jun 7 14:35:22 2018 -0700

    HDDS-127. Add CloseContainerEventHandler in SCM.
    Contributed by Shashikant Banerjee.

 .../scm/container/CloseContainerEventHandler.java  |  83 ++++++++++
 .../hdds/scm/container/ContainerMapping.java       |   5 +
 .../hdds/scm/container/ContainerStateManager.java  |   9 ++
 .../apache/hadoop/hdds/scm/container/Mapping.java  |   6 +
 .../container/TestCloseContainerEventHandler.java  | 177 +++++++++++++++++++++
 5 files changed, 280 insertions(+)

commit ba303b1f890ccd4deb806cb030e26a77e316ebe4
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu Jun 7 14:10:52 2018 -0700

    HDDS-147. Update Ozone site docs. Contributed by Arpit Agarwal.

 hadoop-ozone/docs/content/CommandShell.md   | 141 +++++------
 hadoop-ozone/docs/content/GettingStarted.md | 353 ++++++++++++++--------------
 2 files changed, 254 insertions(+), 240 deletions(-)

commit 12be8bad7debd67c9ea72b979a39c8cf42c5f37d
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu Jun 7 13:34:52 2018 -0700

    HADOOP-15516. Add test cases to cover FileUtil#readLink. Contributed by Giovanni Matteo Fumarola.

 .../main/java/org/apache/hadoop/fs/FileUtil.java   |  6 +++
 .../java/org/apache/hadoop/fs/TestFileUtil.java    | 52 ++++++++++++++++++++++
 2 files changed, 58 insertions(+)

commit 7969cc4667343e5d3d738de66483e63af1955bbc
Author: James Clampffer <jhc@apache.org>
Date:   Thu Jun 7 16:02:57 2018 -0400

    HDFS-13615. libhdfs++ SaslProtocol hanging while accessing invalid lock.  Contributed by Mitchell Tracy

 .../src/main/native/libhdfspp/lib/rpc/sasl_protocol.cc    | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit c4bbcd5634d9e32183ae20adbeafca258568bedd
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu Jun 7 12:47:58 2018 -0700

    HDDS-119:Skip Apache license header check for some ozone doc scripts. Contributed by  Ajay Kumar

 .../src/main/resources/checkstyle/suppressions.xml             |  1 +
 hadoop-ozone/pom.xml                                           | 10 ++++++++++
 2 files changed, 11 insertions(+)

commit b79ae5d93d71f14a052ce4e54d0215a74a4b4266
Author: James Clampffer <jhc@apache.org>
Date:   Thu Jun 7 14:16:17 2018 -0400

    HDFS-13534. libhdfs++: Fix GCC7 build.  Contributed by James Clampffer.

 .../src/main/native/libhdfspp/include/hdfspp/ioservice.h                | 1 +
 .../src/main/native/libhdfspp/lib/reader/datatransfer.h                 | 2 +-
 .../src/main/native/libhdfspp/tests/mock_connection.h                   | 2 +-
 .../src/main/native/libhdfspp/tests/remote_block_reader_test.cc         | 2 +-
 4 files changed, 4 insertions(+), 3 deletions(-)

commit 377ea1bcdfd523f9353647388881b82699f2df12
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu Jun 7 21:31:15 2018 +0530

    YARN-8386. App log can not be viewed from Logs tab in secure cluster. Contributed by Sunil Govindan.

 .../src/main/webapp/app/adapters/yarn-app-log.js   | 68 ++++++++++++++++++++++
 .../src/main/webapp/app/adapters/yarn-log.js       |  6 --
 .../main/webapp/app/controllers/yarn-app/logs.js   | 17 +++---
 .../src/main/webapp/app/models/yarn-app-log.js     | 25 ++++++++
 .../main/webapp/app/serializers/yarn-app-log.js    | 38 ++++++++++++
 .../src/main/webapp/app/utils/converter.js         | 10 ++++
 .../tests/unit/adapters/yarn-app-log-test.js       | 30 ++++++++++
 7 files changed, 181 insertions(+), 13 deletions(-)

commit e39b113db0f2e4bcf93f873801be770e472601da
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu Jun 7 08:30:06 2018 -0700

    HDFS-13659. Add more test coverage for contentSummary for snapshottable path. Contributed by Wei-Chiu Chuang.

 .../TestGetContentSummaryWithSnapshot.java         | 26 ++++++++++++++++++++++
 1 file changed, 26 insertions(+)

commit f494f0b8968a61bf3aa32b7ca0851b8c744aa70f
Author: Steve Loughran <stevel@apache.org>
Date:   Thu Jun 7 15:55:49 2018 +0100

    HADOOP-15512. Clean up Shell from JDK7 workarounds.
    Contributed by Zsolt Venczel.

 .../src/main/java/org/apache/hadoop/util/Shell.java    | 18 ++----------------
 1 file changed, 2 insertions(+), 16 deletions(-)

commit 58bc34f1e347034af566d6968eb3b3439a91cc74
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu Jun 7 10:25:47 2018 +0530

    YARN-8399. NodeManager is giving 403 GSS exception post upgrade to 3.1 in secure mode. Contributed by Sunil Govindan.

 .../nodemanager/containermanager/AuxServices.java  |  6 +--
 .../containermanager/TestAuxServices.java          | 48 ++++++++++++++++++++++
 2 files changed, 51 insertions(+), 3 deletions(-)

commit 9654dd1f472052c4bb4a48a7412149c2e4859a10
Author: Brahma Reddy Battula <brahma@apache.org>
Date:   Thu Jun 7 10:16:02 2018 +0530

    HDFS-12950. [oiv] ls will fail in secure cluster. Contributed by Wei-Chiu Chuang.

 .../offlineImageViewer/OfflineImageViewerPB.java     |  3 ++-
 .../tools/offlineImageViewer/WebImageViewer.java     | 17 +++++++++++++++++
 .../hadoop-hdfs/src/site/markdown/HdfsImageViewer.md |  3 ++-
 .../offlineImageViewer/TestOfflineImageViewer.java   | 20 ++++++++++++++++++++
 4 files changed, 41 insertions(+), 2 deletions(-)

commit 772c95395b59dc9db61fa8f3721a6c81f97a1f4d
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Wed Jun 6 15:36:36 2018 -0700

    HDDS-140. Add DU usage to VolumeInfo.

 .../impl/RoundRobinVolumeChoosingPolicy.java       |   2 +-
 .../ozone/container/common/impl/VolumeInfo.java    |  59 +++++--
 .../ozone/container/common/impl/VolumeSet.java     | 109 ++++++------
 .../ozone/container/common/impl/VolumeUsage.java   | 189 +++++++++++++++++++++
 .../container/common/interfaces/TestVolumeSet.java |  33 ++--
 .../datanode/fsdataset/VolumeChoosingPolicy.java   |   2 +-
 6 files changed, 316 insertions(+), 78 deletions(-)

commit 977c8cd1665b42ba45e9d21655262ef78714b716
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed Jun 6 13:59:20 2018 -0700

    HDDS-123:ContainerSet class to manage ContainerMap. Contributed by Bharat Viswanadham

 .../ozone/container/common/impl/ContainerData.java |  38 ++++
 .../ozone/container/common/impl/ContainerSet.java  | 239 +++++++++++++++++++++
 .../container/common/impl/KeyValueContainer.java   |   8 +-
 .../container/common/impl/TestContainerSet.java    | 169 +++++++++++++++
 4 files changed, 452 insertions(+), 2 deletions(-)

commit db81f85e844b53595f40e5699776a336faad2f84
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed Jun 6 11:44:17 2018 -0700

    HADOOP-15513. Add additional test cases to cover some corner cases for FileUtil#symlink. Contributed by Giovanni Matteo Fumarola.

 .../main/java/org/apache/hadoop/fs/FileUtil.java   |   7 +
 .../java/org/apache/hadoop/fs/TestFileUtil.java    | 154 +++++++++++++++++++++
 2 files changed, 161 insertions(+)

commit d901be679554eb6b323f3bc6e8de267d85dd2e06
Author: Steve Loughran <stevel@apache.org>
Date:   Wed Jun 6 18:28:14 2018 +0100

    HADOOP-15506. Upgrade Azure Storage Sdk version to 7.0.0 and update corresponding code blocks.
    Contributed by Esfandiar Manii.

 hadoop-project/pom.xml                                           | 2 +-
 .../org/apache/hadoop/fs/azure/NativeAzureFileSystemHelper.java  | 4 +++-
 .../java/org/apache/hadoop/fs/azure/ITestContainerChecks.java    | 9 ++++++---
 3 files changed, 10 insertions(+), 5 deletions(-)

commit 30f0582f2b8bdf2e9368e84078f5a7aba033f9ff
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed Jun 6 08:39:18 2018 -0700

    HDDS-107. TestOzoneConfigurationFields is failing.
    Contributed by LiXin Ge & Mukul Kumar Singh.

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java   | 5 ++++-
 .../src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java       | 2 ++
 .../java/org/apache/hadoop/ozone/TestOzoneConfigurationFields.java   | 1 +
 3 files changed, 7 insertions(+), 1 deletion(-)

commit d1992ab9b01d6b2881abb2faae3dcab95d6fd996
Author: Sunil G <sunilg@apache.org>
Date:   Wed Jun 6 13:34:55 2018 +0530

    HADOOP-15514. NoClassDefFoundError for TimelineCollectorManager when starting MiniYARNCluster. Contributed by Rohith Sharma K S.

 hadoop-client-modules/hadoop-client-minicluster/pom.xml | 13 -------------
 1 file changed, 13 deletions(-)

commit 774c1f199e11d886d0c0a1069325f0284da35deb
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Jun 5 21:24:25 2018 -0700

    HDFS-13511. Provide specialized exception when block length cannot be obtained. Contributed by Gabor Bota.

 .../hdfs/CannotObtainBlockLengthException.java     | 55 ++++++++++++++++++++++
 .../org/apache/hadoop/hdfs/DFSInputStream.java     |  2 +-
 2 files changed, 56 insertions(+), 1 deletion(-)

commit ba4011d64fadef3bee5920ccedbcdac01794cc23
Author: Xiao Chen <xiao@apache.org>
Date:   Tue Jun 5 21:17:42 2018 -0700

    HADOOP-15217. FsUrlConnection does not handle paths with spaces. Contributed by Joseph Fourny and Zsolt Venczel.

 .../java/org/apache/hadoop/fs/FsUrlConnection.java |  2 +-
 .../hadoop/fs/TestUrlStreamHandlerFactory.java     | 36 +++++++++++++++++-----
 2 files changed, 29 insertions(+), 9 deletions(-)

commit 0afc036deb35df7e86ede3dcebc430c8f05ed368
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue Jun 5 12:24:57 2018 -0700

    MAPREDUCE-7103. Fix TestHistoryViewerPrinter on windows due to a mismatch line separator. Contributed by Giovanni Matteo Fumarola.

 .../jobhistory/TestHistoryViewerPrinter.java       | 378 ++++++++++++++-------
 1 file changed, 255 insertions(+), 123 deletions(-)

commit 1b0d4f4606adc78a5e43a924634d3d8506db26fa
Author: Chen Liang <cliang@apache.org>
Date:   Tue Jun 5 11:51:29 2018 -0700

    HDFS-13547. Add ingress port based sasl resolver. Contributed by Chen Liang.

 .../hadoop/security/IngressPortBasedResolver.java  | 100 +++++++++++++++++++++
 .../hadoop/security/SaslPropertiesResolver.java    |  47 +++++++++-
 .../hadoop/security/WhitelistBasedResolver.java    |  20 +----
 .../security/TestIngressPortBasedResolver.java     |  59 ++++++++++++
 4 files changed, 207 insertions(+), 19 deletions(-)

commit baebe4d52bc0e1ee3be062b61efa1de1d19a3bca
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue Jun 5 10:31:42 2018 -0700

    HDDS-129. Support for ReportManager in Datanode.
    Contributed by Nanda Kumar.

 .../common/report/ContainerReportPublisher.java    |  70 ++++++++++
 .../common/report/NodeReportPublisher.java         |  40 ++++++
 .../container/common/report/ReportManager.java     | 147 +++++++++++++++++++++
 .../container/common/report/ReportPublisher.java   |  96 ++++++++++++++
 .../common/report/ReportPublisherFactory.java      |  71 ++++++++++
 .../container/common/report/package-info.java      |  80 +++++++++++
 .../common/statemachine/DatanodeStateMachine.java  |  18 ++-
 .../common/statemachine/StateContext.java          |  59 +++++++--
 .../states/endpoint/HeartbeatEndpointTask.java     |  24 +++-
 .../container/common/report/TestReportManager.java |  52 ++++++++
 .../common/report/TestReportPublisher.java         | 106 +++++++++++++++
 .../common/report/TestReportPublisherFactory.java  |  68 ++++++++++
 .../container/common/report/package-info.java      |  22 +++
 13 files changed, 834 insertions(+), 19 deletions(-)

commit 920d154997f0ad6000d8f76029d6d415e7b8980c
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue Jun 5 08:34:44 2018 -0700

    HDDS-148. Remove ContainerReportManager and ContainerReportManagerImpl. Contributed by Nanda kumar.

 .../common/impl/ContainerManagerImpl.java          |  8 ---
 .../common/impl/ContainerReportManagerImpl.java    | 67 ----------------------
 .../common/interfaces/ContainerReportManager.java  | 30 ----------
 3 files changed, 105 deletions(-)

commit 745f3a244166c1e6a1aee81eb1d6c2c692053d04
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Tue Jun 5 19:28:24 2018 +0530

    YARN-8396. Click on an individual container continuously spins and doesn't load the page. Contributed by Sunil Govindan.

 .../hadoop-yarn-ui/src/main/webapp/app/routes/yarn-node-container.js    | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-container-log.hbs | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 0e3c31579d1c733decfb9b00721bdc7b86be60f2
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Tue Jun 5 17:53:24 2018 +0900

    HDFS-13545. "guarded" is misspelled as "gaurded" in FSPermissionChecker.java. Contributed by Jianchao Jia.

 .../org/apache/hadoop/hdfs/server/namenode/FSPermissionChecker.java     | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6d5e87aec2f615ed265dc495873bf53ee7d2ace2
Author: Xiao Chen <xiao@apache.org>
Date:   Mon Jun 4 21:13:17 2018 -0700

    HADOOP-15507. Add MapReduce counters about EC bytes read.

 .../main/java/org/apache/hadoop/fs/FileSystem.java | 34 ++++++++++++++++++++++
 .../hadoop/fs/FileSystemStorageStatistics.java     |  5 +++-
 .../hadoop/fs/TestFileSystemStorageStatistics.java |  6 +++-
 .../java/org/apache/hadoop/hdfs/DFSClient.java     |  6 ++++
 .../org/apache/hadoop/hdfs/DFSInputStream.java     |  4 +++
 .../org/apache/hadoop/hdfs/ReaderStrategy.java     |  8 +++++
 .../main/java/org/apache/hadoop/mapred/Task.java   | 14 ++++++++-
 .../apache/hadoop/mapreduce/FileSystemCounter.java |  1 +
 .../hadoop/mapreduce/FileSystemCounter.properties  |  1 +
 9 files changed, 76 insertions(+), 3 deletions(-)

commit 8d31ddcfeb5c2e97692dd386e5bd62f433b44f8e
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 4 18:28:11 2018 -0700

    HDFS-13650. Randomize baseDir for MiniDFSCluster in TestDFSStripedInputStream and TestDFSStripedInputStreamWithRandomECPolicy. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/TestDFSStripedInputStream.java    | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 16316b60112842cf8a328b79c89297f6a8b30e7b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 4 18:21:38 2018 -0700

    HDFS-13649. Randomize baseDir for MiniDFSCluster in TestReconstructStripedFile and TestReconstructStripedFileWithRandomECPolicy. Contributed by Anbang Hu.

 .../test/java/org/apache/hadoop/hdfs/TestReconstructStripedFile.java  | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit a28848104f2a067669f9b1706cd0da05ba71bcb7
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 4 18:12:43 2018 -0700

    HDFS-13652. Randomize baseDir for MiniDFSCluster in TestBlockScanner. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/server/datanode/TestBlockScanner.java  | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f30f2dc4085c51b6b6850430213f47b97a763b7f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 4 15:42:47 2018 -0700

    HADOOP-15137. ClassNotFoundException: org.apache.hadoop.yarn.server.api.DistributedSchedulingAMProtocol when using hadoop-client-minicluster. Contributed by Bharat Viswanadham

 .../hadoop-client-minicluster/pom.xml              | 141 ++++++++++++++++++++-
 1 file changed, 137 insertions(+), 4 deletions(-)

commit 5cf37418bdc6ff09c0c1ae3ac8ac4b0867de0de4
Author: Eric Yang <eyang@apache.org>
Date:   Mon Jun 4 19:01:17 2018 -0400

    YARN-8365.  Set DNS query type according to client request.
                Contributed by Shane Kumpf

 .../java/org/apache/hadoop/registry/server/dns/RegistryDNS.java  | 9 +++++----
 .../org/apache/hadoop/registry/server/dns/TestRegistryDNS.java   | 9 ++-------
 2 files changed, 7 insertions(+), 11 deletions(-)

commit 0cd145a44390bc1a01113dce4be4e629637c3e8a
Author: Robert Kanter <rkanter@apache.org>
Date:   Mon Jun 4 15:32:03 2018 -0700

    YARN-4677. RMNodeResourceUpdateEvent update from scheduler can lead to race condition (wilfreds and gphillips via rkanter)

 .../scheduler/AbstractYarnScheduler.java           | 19 ++++++----
 .../scheduler/fair/FairScheduler.java              |  2 +-
 .../scheduler/fifo/FifoScheduler.java              |  6 ++-
 .../scheduler/capacity/TestCapacityScheduler.java  | 44 ++++++++++++++++------
 .../scheduler/fair/TestFairScheduler.java          | 43 ++++++++++++++++-----
 .../scheduler/fifo/TestFifoScheduler.java          | 44 ++++++++++++++++------
 6 files changed, 115 insertions(+), 43 deletions(-)

commit f26d3466d79125123cba00ab81481655d7bfe3c1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon Jun 4 15:28:19 2018 -0700

    Create Version File in Datanode. Contributed by Bharat Viswanadham.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |   2 +
 .../org/apache/hadoop/ozone/common/Storage.java    |   6 +-
 .../container/common/DataNodeLayoutVersion.java    |  80 ++++++++++
 .../common/helpers/DatanodeVersionFile.java        | 172 +++++++++++++++++++++
 .../states/datanode/RunningDatanodeState.java      |   3 +-
 .../states/endpoint/VersionEndpointTask.java       |  71 ++++++++-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |   8 +-
 .../hadoop/ozone/protocol/VersionResponse.java     |   4 +
 .../hadoop/ozone/container/common/ScmTestMock.java |  24 +++
 .../common/TestDatanodeLayOutVersion.java          |  38 +++++
 .../container/common/TestDatanodeStateMachine.java |   3 +-
 .../common/helpers/TestDatanodeVersionFile.java    | 120 ++++++++++++++
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |   2 +
 .../ozone/container/common/TestEndPoint.java       | 169 +++++++++++++++++++-
 14 files changed, 688 insertions(+), 14 deletions(-)

commit 04cf699dd54aab3595eb80295652dcde9a2f4dd5
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jun 4 11:13:40 2018 -0700

    YARN-8388. TestCGroupElasticMemoryController.testNormalExit() hangs on Linux. (Miklos Szegedi via Haibo Chen)

 .../org/apache/hadoop/test/PlatformAssumptions.java   |  8 --------
 .../resources/TestCGroupElasticMemoryController.java  | 19 +++++--------------
 2 files changed, 5 insertions(+), 22 deletions(-)

commit dad1bb868f7a28a486fd500f102c8c174e6dd272
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 4 12:55:54 2018 -0700

    MAPREDUCE-7105. Fix TestNativeCollectorOnlyHandler.testOnCall on Windows because of the path format. Contributed by Giovanni Matteo Fumarola.

 .../nativetask/handlers/TestNativeCollectorOnlyHandler.java   | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit e2c172dc9faeb5472a32d7052e54d79d499c0a55
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Sun Jun 3 22:13:31 2018 -0700

    YARN-8382. cgroup file leak in NM. Contributed by Hu Ziqian.

 .../containermanager/linux/resources/CGroupsHandlerImpl.java          | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit ea7b53fb44496c35d58346f2222610a30d7041f6
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 4 09:51:04 2018 -0700

    HDDS-145. Freon times out because of because of wrong ratis port number in datanode details. Contributed by Mukul Kumar Singh.

 hadoop-hdds/common/src/main/java/org/apache/ratis/RatisHelper.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 61fc7f73f21b0949e27ef3893efda757d91a03f9
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon Jun 4 09:28:09 2018 -0700

    YARN-8389. Improve the description of machine-list property in Federation docs. Contributed by Takanobu Asanuma.

 .../hadoop-yarn/hadoop-yarn-site/src/site/markdown/Federation.md   | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit ba12f87dcb0e406da57cdd1ad17677ac2367f425
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon Jun 4 09:14:53 2018 -0700

    YARN-8390. Fix API incompatible changes in FairScheduler's AllocationFileLoaderService. (Gergo Repas via Haibo Chen)

 .../fair/AllocationFileLoaderService.java          | 16 ++--
 .../scheduler/fair/FairScheduler.java              |  4 +-
 .../fair/TestAllocationFileLoaderService.java      | 96 +++++++++++-----------
 3 files changed, 58 insertions(+), 58 deletions(-)

commit ab3885f2c8cfd63ff94e548c40db3b4ea52c12e8
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon Jun 4 08:55:01 2018 -0700

    HDDS-126. Fix findbugs warning in MetadataKeyFilters.java. Contributed by Akira Ajisaka.

 .../src/main/java/org/apache/hadoop/utils/MetadataKeyFilters.java      | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit e2289c8d1496a5eff88e6bcb8776a11d45371ffc
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Mon Jun 4 09:19:03 2018 -0500

    HDFS-13281 Namenode#createFile should be /.reserved/raw/ aware.. Contributed by Rushabh S Shah

 .../hadoop/hdfs/server/namenode/FSNamesystem.java  |  2 +-
 .../apache/hadoop/hdfs/TestEncryptionZones.java    | 29 ++++++++++++++++++++++
 2 files changed, 30 insertions(+), 1 deletion(-)

commit bccdfeee0aaef9cb98d09ee39909b63fdcbeeafc
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon Jun 4 07:02:05 2018 -0700

    HDFS-13155. BlockPlacementPolicyDefault.chooseTargetInOrder Not Checking Return Value for NULL. Contributed by Zsolt Venczel.

 .../server/blockmanagement/BlockPlacementPolicyDefault.java    | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 9efb4b7db00d79aded52997ec89a1be94ecdd268
Author: Xiao Chen <xiao@apache.org>
Date:   Sun Jun 3 22:29:52 2018 -0700

    HDFS-13339. Volume reference can't be released and may lead to deadlock when DataXceiver does a check volume. Contributed by liaoyuxiangqin and Zsolt Venczel.

 .../hdfs/server/datanode/checker/DatasetVolumeChecker.java  | 13 ++++++++++++-
 .../server/datanode/checker/TestDatasetVolumeChecker.java   |  3 +++
 2 files changed, 15 insertions(+), 1 deletion(-)

commit 9c4cbed8d19ec0f486af454de6b117d77a0a0b84
Author: Sunil G <sunilg@apache.org>
Date:   Mon Jun 4 00:06:56 2018 +0530

    YARN-8276. [UI2] After version field became mandatory, form-based submission of new YARN service doesn't work. Contributed by Gergely NovÃ¡k.

 .../src/main/webapp/app/components/deploy-service.js          |  3 ++-
 .../src/main/webapp/app/models/yarn-servicedef.js             |  8 +++++++-
 .../main/webapp/app/templates/components/deploy-service.hbs   | 11 +++++++++++
 .../hadoop-yarn-ui/src/main/webapp/app/utils/info-seeder.js   |  1 +
 4 files changed, 21 insertions(+), 2 deletions(-)

commit a804b7c9d2986556c91c1741c1ae7ac2b9c579f3
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Sat Jun 2 20:25:42 2018 -0700

    MAPREDUCE-7102. Fix TestJavaSerialization for Windows due a mismatch line separator. Contributed by Giovanni Matteo Fumarola.

 .../hadoop/mapred/TestJavaSerialization.java       | 23 ++++++++++++----------
 1 file changed, 13 insertions(+), 10 deletions(-)

commit 8f83b9abf9a7462c50a1db18d4d99e80c535b09c
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Sat Jun 2 20:19:59 2018 -0700

    HDFS-13648. Fix TestGetConf#testGetJournalNodes on Windows due to a mismatch line separator. Contributed by Giovanni Matteo Fumarola.

 .../src/test/java/org/apache/hadoop/hdfs/tools/TestGetConf.java     | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit e308ac88d399e9bed3581ff4b1450aa2070dcedf
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Sat Jun 2 20:12:35 2018 -0700

    HDFS-13651. TestReencryptionHandler fails on Windows. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/TestReencryptionHandler.java       | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 31998643a51f1e08f723f18dc5476ac1512d5b81
Author: Billie Rinaldi <billie@apache.org>
Date:   Sat Jun 2 14:46:32 2018 -0700

    YARN-8342. Enable untrusted docker image to run with launch command. Contributed by Eric Yang

 hadoop-yarn-project/hadoop-yarn/conf/yarn-env.sh   |  1 +
 .../provider/docker/DockerProviderService.java     | 24 +++++++++--
 .../linux/runtime/DockerLinuxContainerRuntime.java | 23 ++++++++++-
 .../container-executor/impl/utils/docker-util.c    |  7 +---
 .../test/utils/test_docker_util.cc                 | 48 +++++++++++-----------
 .../src/site/markdown/DockerContainers.md          | 33 +++++++++++++--
 .../src/site/markdown/yarn-service/Examples.md     | 37 ++++++++++++++++-
 .../site/markdown/yarn-service/YarnServiceAPI.md   |  2 +-
 8 files changed, 135 insertions(+), 40 deletions(-)

commit 8261f9e5710038ccbc475dbfcea3b9ae79b6f482
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Sat Jun 2 09:29:06 2018 +0530

    More YARN pages need to honor yarn.resourcemanager.display.per-user-apps(addendum). Contributed by Sunil G.

 .../reader/TimelineReaderManager.java               | 21 +++++++++++++++++++++
 .../reader/TimelineReaderWebServices.java           | 18 ++++++++++++------
 2 files changed, 33 insertions(+), 6 deletions(-)

commit d5e69d89942fd5dcfafd56bf653565557ff85501
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Sat Jun 2 09:27:03 2018 +0530

    MapReduce JHS should honor yarn.webapp.filter-entity-list-by-user(addendum). Contributed by  Sunil Govindan.

 .../hadoop/mapreduce/v2/hs/webapp/HsJobBlock.java  | 18 +---------
 .../hadoop/mapreduce/v2/hs/webapp/HsJobsBlock.java | 40 +++++++++++++++++++++-
 .../hadoop/mapreduce/v2/hs/webapp/TestBlocks.java  | 17 +++++++--
 .../mapreduce/v2/hs/webapp/TestHsJobBlock.java     | 20 ++---------
 4 files changed, 56 insertions(+), 39 deletions(-)

commit e11d67404945d80db2eb8a99453606419dbdc938
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri Jun 1 16:59:04 2018 -0700

    HDFS-13637. RBF: Router fails when threadIndex (in ConnectionPool) wraps around Integer.MIN_VALUE. Contributed by CR Hota.

 .../hdfs/server/federation/router/ConnectionPool.java       | 12 +++++++++++-
 .../server/federation/router/TestConnectionManager.java     | 13 +++++++++++++
 2 files changed, 24 insertions(+), 1 deletion(-)

commit 4880d890ee4716dafc5ff464c92a3c6d83b1db9b
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri Jun 1 16:28:13 2018 -0700

    YARN-8375. TestCGroupElasticMemoryController fails surefire build. (Miklos Szegedi via Haibo Chen)

 .../apache/hadoop/test/PlatformAssumptions.java    |  8 +++
 .../TestCGroupElasticMemoryController.java         | 65 ++++++++++++----------
 2 files changed, 45 insertions(+), 28 deletions(-)

commit 34710c66d61bb09ffcd5c4cb3b9c92506b272720
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 15:07:25 2018 -0700

    HDDS-143. Provide docker compose files to measure performance in a pseudo cluster.
    Contributed by Elek, Marton.

 hadoop-dist/src/main/compose/ozoneperf/.env        | 17 +++++
 hadoop-dist/src/main/compose/ozoneperf/README.md   | 73 ++++++++++++++++++++
 .../src/main/compose/ozoneperf/compose-all.sh      | 18 +++++
 .../compose/ozoneperf/docker-compose-freon.yaml    | 26 ++++++++
 .../src/main/compose/ozoneperf/docker-compose.yaml | 77 ++++++++++++++++++++++
 .../src/main/compose/ozoneperf/docker-config       | 37 +++++++++++
 hadoop-dist/src/main/compose/ozoneperf/init.sh     | 21 ++++++
 .../src/main/compose/ozoneperf/prometheus.yml      | 24 +++++++
 8 files changed, 293 insertions(+)

commit 9e50dce46c22d78f28d3ea91dcdb6e9b3bcd6047
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 14:42:03 2018 -0700

    HDDS-144. Fix TestEndPoint#testHeartbeat and TestEndPoint#testRegister.
    Contributed by Shashikant Banerjee.

 .../hadoop/ozone/container/common/ScmTestMock.java | 32 ++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit ff583d3fa3325029bc691ec22d817aee37e5e85d
Author: Wangda Tan <wangda@apache.org>
Date:   Fri Jun 1 14:07:23 2018 -0700

    YARN-8349. Remove YARN registry entries when a service is killed by the RM. (Billie Rinaldi via wangda)
    
    Change-Id: Ia58db3637789a8921482f564aa9bdf99c45cc36c

 hadoop-project/pom.xml                             |   7 ++
 .../hadoop-yarn-services-api/pom.xml               |  16 +++
 .../yarn/service/client/ApiServiceClient.java      |  11 ++
 .../hadoop/yarn/service/TestCleanupAfterKill.java  |  94 ++++++++++++++
 .../src/test/resources/yarn-site.xml               |  19 +++
 .../hadoop/yarn/service/client/ServiceClient.java  |  24 ++++
 .../hadoop/yarn/service/ServiceTestUtils.java      | 135 +++++++++++++++++++++
 .../yarn/service/TestYarnNativeServices.java       | 129 --------------------
 .../hadoop/yarn/client/api/AppAdminClient.java     |  12 ++
 .../registry/client/binding/RegistryUtils.java     |  10 ++
 .../server/resourcemanager/rmapp/RMAppImpl.java    |  30 +++++
 11 files changed, 358 insertions(+), 129 deletions(-)

commit 8956e5b8db3059e0872e49f59adc6affc76e2274
Author: Wangda Tan <wangda@apache.org>
Date:   Fri Jun 1 14:05:02 2018 -0700

    YARN-8372. Distributed shell app master should not release containers when shutdown if keep-container is true. (Suma Shivaprasad via wangda)
    
    Change-Id: Ief04d1ca865621f348fba4ac85fa78bc47465904

 .../distributedshell/ApplicationMaster.java        | 24 +++++++++++++++++++---
 .../yarn/applications/distributedshell/Client.java | 14 +++++++++----
 2 files changed, 31 insertions(+), 7 deletions(-)

commit 931f78718f3a09775bfa1f9a952c069c416d0914
Author: Wangda Tan <wangda@apache.org>
Date:   Fri Jun 1 14:00:18 2018 -0700

    YARN-7962. Race Condition When Stopping DelegationTokenRenewer causes RM crash during failover. (BELUGA BEHR via wangda)
    
    Change-Id: I617e2645f60a57080058ad5f06af860fb3f682c8

 .../security/DelegationTokenRenewer.java           | 10 ++++++++-
 .../security/TestDelegationTokenRenewer.java       | 24 ++++++++++++++++++++++
 2 files changed, 33 insertions(+), 1 deletion(-)

commit 3a6bd775500343632bad5f9c1a2bfacd408f7760
Author: Wangda Tan <wangda@apache.org>
Date:   Fri Jun 1 13:58:46 2018 -0700

    YARN-8384. stdout.txt, stderr.txt logs of a launched docker container is coming with primary group of submit user instead of hadoop. (Eric Yang via wangda)
    
    Change-Id: Idbb2cd250f4f62dc32993e0d3ca3ec5684616baa

 .../src/main/native/container-executor/impl/container-executor.c      | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit cba319499822a2475c60c43ea71f8e78237e139f
Author: Daniel Templeton <templedf@apache.org>
Date:   Fri Jun 1 14:42:39 2018 -0700

    HDFS-13636. Cross-Site Scripting vulnerability in HttpServer2
    (Contributed by Haibo Yan via Daniel Templeton)
    
    Change-Id: I28edde8125dd20d8d270f0e609d1c04d8173c8b7

 .../src/main/java/org/apache/hadoop/http/HttpServer2.java          | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 1be05a3623da22ed053ed9898df23c85981772e7
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 14:21:35 2018 -0700

    HDDS-142. TestMetadataStore fails on Windows.
    Contributed by  ÃÃ±igo Goiri.

 .../java/org/apache/hadoop/ozone/TestMetadataStore.java | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit 19560bb70421fda094f3f2af09e67501099b7ab7
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri Jun 1 12:54:47 2018 -0700

    HDDS-137. Cleanup Hdds-ozone CheckStyle Issues.
    Contributed by Anu Engineer.

 .../container/common/helpers/ContainerData.java    |  3 ++-
 .../common/impl/ContainerManagerImpl.java          |  8 +++++---
 .../container/common/impl/KeyManagerImpl.java      | 12 ++++++++----
 .../server/ratis/ContainerStateMachine.java        |  3 ++-
 .../container/common/utils/ContainerCache.java     |  6 ++++--
 .../ozone/container/common/package-info.java       | 22 ++++++++++++++++++++++
 6 files changed, 43 insertions(+), 11 deletions(-)

commit 6b21a599fbd53e3d6113fcd9a984f6ac59ccd302
Author: Yufei Gu <yufei@apache.org>
Date:   Thu May 31 22:28:49 2018 -0700

    YARN-7340. Fix the missing time stamp in exception message in Class
    NoOverCommitPolicy. Contributed by Dinesh Chitlangia.

 .../yarn/server/resourcemanager/reservation/NoOverCommitPolicy.java  | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 7dd26d5378483cdbce1dc594e8650a96c2976281
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 31 21:06:25 2018 -0400

    YARN-8308.  Fixed YARN Service AM failure with HDFS token renewal.
                Contributed by Gour Saha

 .../apache/hadoop/yarn/service/ServiceMaster.java  | 56 +++++++++++++++-------
 .../hadoop/yarn/service/client/ServiceClient.java  | 11 +++++
 2 files changed, 50 insertions(+), 17 deletions(-)

commit ff013d2c952272f3176dcf624251b05d610503b5
Author: Chao Sun <sunchao@apache.org>
Date:   Thu May 31 15:24:16 2018 -0700

    HDFS-13602. Add checkOperation(WRITE) checks in FSNamesystem. Contributed by Chao Sun.

 .../org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 6b74f5d7fc509c55c331249256eec78b7e53b6ce
Author: Vinod Kumar Vavilapalli (I am also known as @tshooter.) <vinodkv@apache.org>
Date:   Thu May 31 16:48:33 2018 -0700

    YARN-8197. Fixed AM IP Filter and Webapp proxy to redirect app tracking-URLs correctly when UI is secure. Contributed by Sunil Govindan.

 .../hadoop-yarn-server-web-proxy/pom.xml           |  13 ++
 .../yarn/server/webproxy/amfilter/AmIpFilter.java  |  19 ++-
 .../webproxy/amfilter/TestSecureAmFilter.java      | 159 +++++++++++++++++++++
 .../src/test/resources/krb5.conf                   |  33 +++++
 4 files changed, 220 insertions(+), 4 deletions(-)

commit 32671d87135f22707ea03c3f17e99d41d82c0a39
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 16:09:33 2018 -0700

    HADOOP-14783. [KMS] Add missing configuration properties into kms-default.xml. Contributed by Chetna Chaudhari.

 .../hadoop-kms/src/main/resources/kms-default.xml  | 35 ++++++++++++++++++++++
 1 file changed, 35 insertions(+)

commit 3f4a29813beccd85191886f4d7421c4f33180594
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 15:26:08 2018 -0700

    HDFS-13646. DFSAdmin doesn't display specialized help for triggerBlockReport. Contributed by Takanobu Asanuma.

 .../src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java            | 2 ++
 1 file changed, 2 insertions(+)

commit c95b9b5c077c5b95649d195bd7385a76604863c1
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Thu May 31 15:20:59 2018 -0700

    HDFS-13440. Log HDFS file name when client fails to connect.  Contributed by Gabor Bota.

 .../src/main/java/org/apache/hadoop/hdfs/DFSInputStream.java          | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ebe5853a458150b7e42fe7434851bfcbe25e354d
Author: Konstantin V Shvachko <shv@apache.org>
Date:   Thu May 31 14:56:32 2018 -0700

    HDFS-12978. Fine-grained locking while consuming journal stream. Contributed by Konstantin Shvachko.

 .../hdfs/server/namenode/FSEditLogLoader.java      | 23 ++++++++++++++----
 .../hadoop/hdfs/server/namenode/FSImage.java       | 16 ++++++++-----
 .../hdfs/server/namenode/ha/EditLogTailer.java     | 27 ++++++++++++++++++++--
 .../hdfs/server/namenode/ha/TestEditLogTailer.java | 13 ++++++++---
 4 files changed, 64 insertions(+), 15 deletions(-)

commit 950dea86f4e945fbf376ef3843c0101a2ca569b8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 31 11:28:42 2018 -0700

    HDDS-112. OzoneShell should support commands with url without scheme.
    Contributed by Lokesh Jain.

 .../robotframework/acceptance/ozone-shell.robot    | 21 ++++++++++
 .../apache/hadoop/ozone/web/ozShell/Handler.java   | 49 +++++++++++++++++++++-
 2 files changed, 68 insertions(+), 2 deletions(-)

commit 79b298111fb9d1bd10251fd30a95173fa9ccb398
Merge: 59777185fc3 a58acd9080a
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 11:45:01 2018 -0700

    Merge remote-tracking branch 'apache-commit/trunk' into HDDS-48

commit a58acd9080ab609db197438d2e5ff9152c91898c
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 31 10:56:17 2018 -0700

    HADOOP-15490:Multiple declaration of maven-enforcer-plugin found in pom.xml. Contributed by Nanda kumar

 pom.xml | 41 +++++++++++++++++------------------------
 1 file changed, 17 insertions(+), 24 deletions(-)

commit 59777185fc38b9f9b7428c5f3f7eb6c52796317d
Author: Arpit Agarwal <arp@apache.org>
Date:   Thu May 31 10:29:25 2018 -0700

    HDDS-116. Implement VolumeSet to manage disk volumes. Contributed by Hanisha Koneru.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   1 +
 .../impl/RoundRobinVolumeChoosingPolicy.java       |  82 +++++++
 .../ozone/container/common/impl/VolumeInfo.java    | 125 +++++++++++
 .../ozone/container/common/impl/VolumeSet.java     | 250 +++++++++++++++++++++
 .../common/interfaces/VolumeChoosingPolicy.java    |  46 ++++
 .../impl/TestRoundRobinVolumeChoosingPolicy.java   | 100 +++++++++
 .../container/common/interfaces/TestVolumeSet.java | 138 ++++++++++++
 7 files changed, 742 insertions(+)

commit 1f324e966136f69c3254f01b43b56cf077abba7f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 31 10:12:38 2018 -0700

    HDFS-13631. TestDFSAdmin#testCheckNumOfBlocksInReportCommand should use a separate MiniDFSCluster path. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/tools/TestDFSAdmin.java | 59 +++++++++++-----------
 1 file changed, 29 insertions(+), 30 deletions(-)

commit 1361030e59d7557a2bffac0ea8df116ce2eaae4a
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Thu May 31 07:56:57 2018 -0600

    HDFS-13582. Improve backward compatibility for HDFS-13176 (WebHdfs file path gets truncated when having semicolon (;) inside). Contributed by Zsolt Venczel.

 .../apache/hadoop/hdfs/web/WebHdfsFileSystem.java  | 11 ++++-
 .../org/apache/hadoop/hdfs/web/TestWebHdfsUrl.java | 55 ++++++++++++++++++++++
 2 files changed, 65 insertions(+), 1 deletion(-)

commit 6bc92e304fe05e80f13830104d1fd2c59da8344b
Author: Billie Rinaldi <billie@apache.org>
Date:   Thu May 31 06:46:34 2018 -0700

    YARN-8333. Load balance YARN services using RegistryDNS multiple A records. Contributed by Eric Yang

 .../server/dns/BaseServiceRecordProcessor.java     | 20 +++++++
 .../dns/ContainerServiceRecordProcessor.java       |  3 +-
 .../registry/server/dns/TestRegistryDNS.java       | 62 +++++++++++++++++-----
 .../site/markdown/yarn-service/ServiceDiscovery.md | 14 ++++-
 4 files changed, 84 insertions(+), 15 deletions(-)

commit 6468071f137e6d918a7b4799ad54558fa26b25ce
Author: Weiwei Yang <wwei@apache.org>
Date:   Thu May 31 20:46:39 2018 +0800

    YARN-8367. Fix NPE in SingleConstraintAppPlacementAllocator when placement constraint in SchedulingRequest is null. Contributed by Weiwei Yang.

 .../SingleConstraintAppPlacementAllocator.java     | 187 +++++++++++----------
 .../TestSchedulingRequestContainerAllocation.java  |  84 +++++++++
 2 files changed, 182 insertions(+), 89 deletions(-)

commit d1e2b8098078af4af31392ed7f2fa350a7d1c3b2
Author: Takanobu Asanuma <tasanuma@yahoo-corp.jp>
Date:   Thu May 31 18:31:10 2018 +0900

    MAPREDUCE-7098. Upgrade common-langs version to 3.7 in hadoop-mapreduce-project
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../src/main/java/org/apache/hadoop/util/StringUtils.java    |  2 +-
 .../test/java/org/apache/hadoop/util/TestStringUtils.java    |  2 +-
 .../hadoop/mapreduce/v2/app/job/impl/TaskAttemptImpl.java    |  2 +-
 .../apache/hadoop/mapreduce/v2/app/webapp/AppController.java |  2 +-
 .../org/apache/hadoop/mapreduce/v2/app/webapp/TaskPage.java  | 10 +++++-----
 .../apache/hadoop/mapreduce/v2/app/webapp/TasksBlock.java    |  6 +++---
 .../hadoop/mapreduce/v2/app/webapp/TestAppController.java    |  2 +-
 .../apache/hadoop/mapreduce/checkpoint/RandomNameCNS.java    |  2 +-
 .../jobhistory/HumanReadableHistoryViewerPrinter.java        |  2 +-
 .../mapreduce/lib/output/PathOutputCommitterFactory.java     |  2 +-
 .../org/apache/hadoop/mapreduce/security/TokenCache.java     |  2 +-
 .../src/main/java/org/apache/hadoop/mapreduce/tools/CLI.java |  2 +-
 .../mapreduce/lib/partition/TestRehashPartitioner.java       |  2 +-
 .../apache/hadoop/mapreduce/v2/hs/webapp/HsJobsBlock.java    |  8 ++++----
 .../org/apache/hadoop/mapreduce/v2/hs/webapp/HsTaskPage.java | 10 +++++-----
 .../src/main/java/org/apache/hadoop/mapred/ClientCache.java  |  2 +-
 .../java/org/apache/hadoop/mapred/ClientServiceDelegate.java |  2 +-
 .../main/java/org/apache/hadoop/mapred/NotRunningJob.java    | 12 ++++++------
 .../src/main/java/org/apache/hadoop/mapred/YARNRunner.java   |  2 +-
 .../test/java/org/apache/hadoop/mapred/TestJobCounters.java  |  2 +-
 .../apache/hadoop/mapreduce/lib/db/TestDBOutputFormat.java   |  2 +-
 hadoop-mapreduce-project/hadoop-mapreduce-client/pom.xml     |  5 -----
 22 files changed, 39 insertions(+), 44 deletions(-)

commit 02c4b89f99c93cf0a98509bc65a3313b653e98ff
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 13:15:44 2018 -0700

    HDDS-128. Support for DN to SCM signaling.
    Contributed by Nanda Kumar.

 .../proto/StorageContainerDatanodeProtocol.proto   | 28 ++++++++++++++++------
 1 file changed, 21 insertions(+), 7 deletions(-)

commit 6cd19b45efbbcce6d6ca4b5c0eb3beb42d95e558
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Fri May 25 15:11:19 2018 -0700

    HDDS-90: Create ContainerData, Container classes. Contributed by Bharat Viswanadham

 .../src/main/proto/DatanodeContainerProtocol.proto |   8 +
 .../container/common/impl/ChunkLayOutVersion.java  |  80 +++++++
 .../ozone/container/common/impl/ContainerData.java | 234 +++++++++++++++++++++
 .../container/common/impl/KeyValueContainer.java   |  74 +++++++
 .../common/impl/KeyValueContainerData.java         | 159 ++++++++++++++
 .../container/common/interfaces/Container.java     |  75 +++++++
 .../container/common/TestChunkLayOutVersion.java   |  42 ++++
 .../common/TestKeyValueContainerData.java          | 119 +++++++++++
 8 files changed, 791 insertions(+)

commit ee1e0e20368e825a6cef347ed9637c9cf67be45f
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 18:25:35 2018 -0700

    HDDS-92. Use DBType during parsing datanode .container files. Contributed by Bharat Viswanadham.

 .../apache/hadoop/utils/MetadataStoreBuilder.java  | 40 ++++++++++++---
 .../hadoop/{ozone => utils}/TestMetadataStore.java | 57 ++++++++++++++++++++--
 .../ozone/container/common/helpers/KeyUtils.java   |  3 +-
 .../container/common/utils/ContainerCache.java     |  6 ++-
 4 files changed, 93 insertions(+), 13 deletions(-)

commit 778a4a24be176382a5704f709c00bdfcfe6ddc8c
Author: Billie Rinaldi <billie@apache.org>
Date:   Wed May 30 13:19:13 2018 -0700

    YARN-8350. NPE in service AM related to placement policy. Contributed by Gour Saha

 .../hadoop/yarn/service/component/Component.java   | 114 +++++++++++----------
 .../service/exceptions/RestApiErrorMessages.java   |   8 ++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  24 ++++-
 .../hadoop/yarn/service/TestServiceApiUtil.java    |  44 +++++++-
 4 files changed, 130 insertions(+), 60 deletions(-)

commit 96eefcc84aacc4cc82ad7e3e72c5bdad56f4a7b7
Author: Billie Rinaldi <billie@apache.org>
Date:   Wed May 30 12:37:01 2018 -0700

    YARN-8368. yarn app start cli should print applicationId. Contributed by Rohith Sharma K S

 .../hadoop/yarn/service/webapp/ApiServer.java      | 28 ++++++++++++----------
 .../hadoop/yarn/service/ServiceClientTest.java     | 18 +++++++++++++-
 .../hadoop/yarn/service/client/ServiceClient.java  |  2 ++
 3 files changed, 35 insertions(+), 13 deletions(-)

commit 47c31ff16b452d47afc6ffc1cf936ac2de9b788d
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 30 10:22:04 2018 -0700

    HDFS-13629. Some tests in TestDiskBalancerCommand fail on Windows due to MiniDFSCluster path conflict and improper path usage. Contributed by Anbang Hu.

 .../hdfs/server/diskbalancer/DiskBalancerTestUtil.java    |  5 ++++-
 .../diskbalancer/command/TestDiskBalancerCommand.java     | 15 +++++++--------
 2 files changed, 11 insertions(+), 9 deletions(-)

commit 8197b9b56040113806bdf328bbee68e95dd0aadd
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 30 10:02:19 2018 -0700

    HDFS-13632. Randomize baseDir for MiniJournalCluster in MiniQJMHACluster for TestDFSAdminWithHA. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/qjournal/MiniQJMHACluster.java | 10 ++++++++--
 .../java/org/apache/hadoop/hdfs/tools/TestDFSAdminWithHA.java  |  4 +++-
 2 files changed, 11 insertions(+), 3 deletions(-)

commit e44c0849d7982c8f1ed43af25d2092090881d19f
Author: Eric E Payne <ericp@oath.com>
Date:   Wed May 30 16:50:19 2018 +0000

    YARN-8377: Javadoc build failed in hadoop-yarn-server-nodemanager. Contributed by Takanobu Asanuma

 .../containermanager/container/SlidingWindowRetryPolicy.java         | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 3b34148c4f7380d201de59c4a1870b597649248f
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 30 08:52:07 2018 -0700

    HDDS-88. Create separate message structure to represent ports in DatanodeDetails.
    Contributed by Nanda Kumar.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |   2 +-
 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  |   2 +-
 .../hadoop/hdds/protocol/DatanodeDetails.java      | 219 ++++++++++++---------
 .../main/java/org/apache/ratis/RatisHelper.java    |   6 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  10 +-
 .../common/transport/server/XceiverServer.java     |   3 +-
 .../common/transport/server/XceiverServerGrpc.java |   3 +-
 .../transport/server/ratis/XceiverServerRatis.java |   3 +-
 .../container/common/TestDatanodeStateMachine.java |  16 +-
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  12 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  18 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  17 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |   3 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   8 +-
 .../ozone/container/ContainerTestHelper.java       |  12 +-
 .../container/metrics/TestContainerMetrics.java    |   3 +-
 .../container/ozoneimpl/TestOzoneContainer.java    |  11 +-
 .../container/server/TestContainerServer.java      |   8 +-
 .../ksm/TestKeySpaceManagerRestInterface.java      |   5 +-
 .../ozone/web/TestDistributedOzoneVolumes.java     |   4 +-
 .../hadoop/ozone/web/TestLocalOzoneVolumes.java    |   4 +-
 .../hadoop/ozone/web/TestOzoneWebAccess.java       |   4 +-
 .../hadoop/ozone/web/client/TestOzoneClient.java   |   4 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   2 -
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |   4 +-
 .../hadoop/ozone/web/OzoneHddsDatanodeService.java |   5 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   4 +-
 .../apache/hadoop/ozone/genesis/GenesisUtil.java   |  12 +-
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    |   6 +-
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |   3 +-
 30 files changed, 260 insertions(+), 153 deletions(-)

commit b24098bc8ffe976d662acabc168e20eac8cc8460
Author: Yiqun Lin <yqlin@apache.org>
Date:   Wed May 30 16:52:21 2018 +0800

    HDFS-13626. Fix incorrect username when deny the setOwner operation. Contributed by Zsolt Venczel.

 .../org/apache/hadoop/hdfs/server/namenode/FSDirAttrOp.java |  4 ++--
 .../java/org/apache/hadoop/security/TestPermission.java     | 13 ++++++++-----
 2 files changed, 10 insertions(+), 7 deletions(-)

commit 5f6769f7964ff002b6c04a95893b5baeb424b6db
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 29 19:20:22 2018 -0700

    HADOOP-15480 AbstractS3GuardToolTestBase.testDiffCommand fails when using dynamo (Gabor Bota)

 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 37 +++++++++++++++-------
 .../fs/s3a/s3guard/ITestS3GuardToolDynamoDB.java   |  5 ---
 .../fs/s3a/s3guard/ITestS3GuardToolLocal.java      |  5 ---
 3 files changed, 25 insertions(+), 22 deletions(-)

commit 135941e00d762a417c3b4cc524cdc59b0d1810b1
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 29 16:56:58 2018 -0400

    YARN-8362.  Bugfix logic in container retries in node manager.
                Contributed by Chandni Singh

 .../containermanager/container/ContainerImpl.java  |  4 +-
 .../container/SlidingWindowRetryPolicy.java        | 62 ++++++++++++----------
 .../container/TestSlidingWindowRetryPolicy.java    |  6 +++
 3 files changed, 44 insertions(+), 28 deletions(-)

commit 24169062e5f4e7798a47c5e6e3e94504cba73092
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 13:23:58 2018 -0700

    HDDS-114. Ozone Datanode mbean registration fails for StorageLocation.
    Contributed by Elek, Marton.

 .../common/impl/StorageLocationReport.java         | 52 +++++++++++++---------
 .../interfaces/ContainerLocationManagerMXBean.java |  4 +-
 .../interfaces/StorageLocationReportMXBean.java    | 40 +++++++++++++++++
 3 files changed, 71 insertions(+), 25 deletions(-)

commit 30284d020d36c502dad5bdbae61ec48e9dfe9f8c
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 29 13:38:15 2018 -0700

    HADOOP-14946 S3Guard testPruneCommandCLI can fail. Contributed by Gabor Bota.

 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 52 ++++++++++++++++++----
 1 file changed, 44 insertions(+), 8 deletions(-)

commit 201440b987d5ef3910c2045b2411c213ed6eec1f
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 12:40:27 2018 -0700

    HDDS-81. Moving ContainerReport inside Datanode heartbeat.
    Contributed by Nanda Kumar.

 .../common/impl/ContainerManagerImpl.java          |  22 +-
 .../common/impl/StorageLocationReport.java         |   8 +-
 .../common/interfaces/ContainerManager.java        |   8 +-
 .../common/statemachine/DatanodeStateMachine.java  |   7 +-
 .../common/statemachine/StateContext.java          |  16 +-
 ...dler.java => CloseContainerCommandHandler.java} |  20 +-
 .../commandhandler/CommandDispatcher.java          |   5 +-
 .../commandhandler/CommandHandler.java             |   8 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |  12 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |  30 ++-
 .../states/endpoint/RegisterEndpointTask.java      |  12 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  10 +-
 .../protocol/StorageContainerDatanodeProtocol.java |  30 +--
 .../protocol/StorageContainerNodeProtocol.java     |  15 +-
 .../protocol/commands/CloseContainerCommand.java   |  18 +-
 .../protocol/commands/DeleteBlocksCommand.java     |  18 +-
 .../ozone/protocol/commands/RegisteredCommand.java |  26 +-
 .../ozone/protocol/commands/ReregisterCommand.java |  16 +-
 .../hadoop/ozone/protocol/commands/SCMCommand.java |   4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  50 +---
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  53 ++--
 .../proto/StorageContainerDatanodeProtocol.proto   | 256 +++++++++----------
 .../hadoop/ozone/container/common/ScmTestMock.java |  78 ++----
 .../hdds/scm/container/ContainerMapping.java       |  10 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |   6 +-
 .../container/replication/ContainerSupervisor.java |  13 +-
 .../scm/container/replication/InProgressPool.java  |  15 +-
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   |  14 +-
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  58 ++---
 .../hdds/scm/node/SCMNodeStorageStatMap.java       |  14 +-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 195 +++++++--------
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java |  19 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  26 +-
 .../hdds/scm/container/TestContainerMapping.java   |  24 +-
 .../scm/container/closer/TestContainerCloser.java  |  12 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   6 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  83 +++----
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   |  16 +-
 .../ozone/container/common/TestEndPoint.java       | 113 ++-------
 .../replication/TestContainerSupervisor.java       | 275 ---------------------
 .../testutils/ReplicationDatanodeStateManager.java | 101 --------
 .../testutils/ReplicationNodeManagerMock.java      |  14 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  11 +-
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |  68 ++---
 44 files changed, 603 insertions(+), 1212 deletions(-)

commit 4827e9a9085b306bc379cb6e0b1fe4b92326edcd
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 29 14:43:17 2018 -0500

    YARN-8329. Docker client configuration can still be set incorrectly. Contributed by Shane Kumpf

 .../yarn/util/DockerClientConfigHandler.java       | 23 ++++++++++++----------
 .../security/TestDockerClientConfigHandler.java    |  4 ++--
 .../linux/runtime/DockerLinuxContainerRuntime.java |  7 ++++---
 3 files changed, 19 insertions(+), 15 deletions(-)

commit e3236a9680709de7a95ffbc11b20e1bdc95a8605
Author: Kihwal Lee <kihwal@apache.org>
Date:   Tue May 29 14:15:12 2018 -0500

    Additional check when unpacking archives. Contributed by Wilfred Spiegelenburg.

 .../main/java/org/apache/hadoop/util/RunJar.java   | 10 ++++++
 .../java/org/apache/hadoop/util/TestRunJar.java    | 42 ++++++++++++++++++++++
 2 files changed, 52 insertions(+)

commit 9502b47bd2a3cf32edae635293169883c2914475
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 29 09:54:06 2018 -0700

    HDDS-125. Cleanup HDDS CheckStyle issues.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/block/BlockManagerImpl.java    |  1 -
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  2 +-
 .../hdds/scm/container/ContainerMapping.java       |  6 +-
 .../hdds/scm/container/ContainerStateManager.java  | 24 ++++----
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  9 ++-
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  4 +-
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 19 ++++---
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  8 +--
 .../hdds/scm/node/states/Node2ContainerMap.java    |  2 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |  5 +-
 .../hdds/scm/server/StorageContainerManager.java   |  3 +-
 .../scm/TestStorageContainerManagerHttpServer.java |  1 -
 .../apache/hadoop/hdds/scm/block/package-info.java | 23 ++++++++
 .../hdds/scm/container/TestContainerMapping.java   | 12 ++--
 .../hdds/scm/container/closer/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/container/package-info.java    | 22 ++++++++
 .../hdds/scm/container/states/package-info.java    | 22 ++++++++
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 66 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 32 ++++++-----
 .../apache/hadoop/hdds/scm/node/package-info.java  | 22 ++++++++
 .../ozone/container/common/TestEndPoint.java       |  2 -
 .../ozone/container/common/package-info.java       | 22 ++++++++
 .../ozone/container/placement/package-info.java    | 22 ++++++++
 .../replication/TestContainerSupervisor.java       |  7 ++-
 24 files changed, 263 insertions(+), 95 deletions(-)

commit 17aa40f669f197d43387d67dc00040d14cd00948
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 29 09:27:36 2018 -0700

    YARN-8369. Javadoc build failed due to 'bad use of >'. (Takanobu Asanuma via wangda)
    
    Change-Id: I79a42154e8f86ab1c3cc939b3745024b8eebe5f4

 .../org/apache/hadoop/yarn/util/resource/ResourceCalculator.java  | 4 ++--
 .../monitor/capacity/CapacitySchedulerPreemptionUtils.java        | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 3061bfcde53210d2032df3814243498b27a997b7
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 29 09:23:11 2018 -0700

    YARN-8339. Service AM should localize static/archive resource types to container working directory instead of 'resources'. (Suma Shivaprasad via wangda)
    
    Change-Id: I9f8e8f621650347f6c2f9e3420edee9eb2f356a4

 .../java/org/apache/hadoop/yarn/service/provider/ProviderUtils.java | 3 +--
 .../org/apache/hadoop/yarn/service/provider/TestProviderUtils.java  | 6 +++---
 2 files changed, 4 insertions(+), 5 deletions(-)

commit 3c75f8e4933221fa60a87e86a3db5e4727530b6f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 29 09:11:08 2018 -0700

    HADOOP-15497. TestTrash should use proper test path to avoid failing on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/fs/TestTrash.java          | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 31ab960f4f931df273481927b897388895d803ba
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 29 11:00:30 2018 -0500

    YARN-8338. TimelineService V1.5 doesn't come up after HADOOP-15406. Contributed by Vinod Kumar Vavilapalli

 hadoop-project/pom.xml                                               | 5 +++++
 .../hadoop-yarn-server-applicationhistoryservice/pom.xml             | 5 +++++
 2 files changed, 10 insertions(+)

commit 438ef4951a38171f193eaf2631da31d0f4bc3c62
Author: Wei-Chiu Chuang <weichiu@apache.org>
Date:   Mon May 28 17:32:32 2018 -0700

    HADOOP-15455. Incorrect debug message in KMSACL#hasAccess. Contributed by Yuen-Kuei Hsueh.

 .../main/java/org/apache/hadoop/crypto/key/kms/server/KMSACLs.java    | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8fdc993a993728c65084d7dc3ac469059cb1f603
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 16:45:42 2018 -0700

    HADOOP-15498. TestHadoopArchiveLogs (#testGenerateScript, #testPrepareWorkingDir) fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/tools/TestHadoopArchiveLogs.java  | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 9dbf4f01665d5480a70395a24519cbab5d4db0c5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 16:34:02 2018 -0700

    HDFS-13591. TestDFSShell#testSetrepLow fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/TestDFSShell.java     | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 91d7c74e6aa4850922f68bab490b585443e4fccb
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Mon May 28 10:26:47 2018 -0700

    HDFS-13627. TestErasureCodingExerciseAPIs fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/TestErasureCodingExerciseAPIs.java   | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7c343669baf660df3b70d58987d6e68aec54d6fa
Author: Sunil G <sunilg@apache.org>
Date:   Mon May 28 16:32:53 2018 +0530

    YARN-4781. Support intra-queue preemption for fairness ordering policy. Contributed by Eric Payne.

 .../capacity/FifoIntraQueuePreemptionPlugin.java   |  37 ++-
 .../capacity/IntraQueueCandidatesSelector.java     |  40 +++
 .../monitor/capacity/TempAppPerPartition.java      |   9 +
 .../policy/AbstractComparatorOrderingPolicy.java   |   2 -
 ...ionalCapacityPreemptionPolicyMockFramework.java |  12 +-
 ...cityPreemptionPolicyIntraQueueFairOrdering.java | 276 +++++++++++++++++++++
 6 files changed, 366 insertions(+), 10 deletions(-)

commit 61df174e8b3d582183306cabfa2347c8b96322ff
Author: Karthik Palanisamy <karthikshva123@gmail.com>
Date:   Mon May 28 19:41:07 2018 +0900

    HADOOP-15449. Increase default timeout of ZK session to avoid frequent NameNode failover
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../src/main/java/org/apache/hadoop/ha/ZKFailoverController.java        | 2 +-
 hadoop-common-project/hadoop-common/src/main/resources/core-default.xml | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 04757e5864bd4904fd5a59d143fff480814700e4
Author: Takanobu Asanuma <tasanuma@yahoo-corp.jp>
Date:   Mon May 28 19:04:36 2018 +0900

    HDFS-13628. Update Archival Storage doc for Provided Storage
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-hdfs-project/hadoop-hdfs/src/site/markdown/ArchivalStorage.md | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 88cbe57c069a1d2dd3bfb32e3ad742566470a10b
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Mon May 28 12:45:07 2018 +0530

    MAPREDUCE-7097. MapReduce JHS should honor yarn.webapp.filter-entity-list-by-user. Contributed by  Sunil Govindan.

 .../hadoop/mapreduce/v2/hs/webapp/HsJobBlock.java  | 18 +++++++++++++++-
 .../mapreduce/v2/hs/webapp/TestHsJobBlock.java     | 20 ++++++++++++++++--
 .../org/apache/hadoop/yarn/webapp/Controller.java  |  4 ++++
 .../java/org/apache/hadoop/yarn/webapp/View.java   | 24 ++++++++++++++--------
 4 files changed, 55 insertions(+), 11 deletions(-)

commit d14e26b31fe46fb47a8e99a212c70016fd15a4d9
Author: Johan Gustavsson <johan+apache+jira@treasure-data.com>
Date:   Mon May 28 17:29:59 2018 +0900

    HADOOP-15477. Make unjar in RunJar overrideable
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../main/java/org/apache/hadoop/util/RunJar.java   | 17 +++++++---
 .../java/org/apache/hadoop/util/TestRunJar.java    | 37 ++++++++++++++++++++--
 .../org/apache/hadoop/streaming/StreamJob.java     |  4 ++-
 3 files changed, 51 insertions(+), 7 deletions(-)

commit 0cf6e87f9212af10eae39cdcb1fe60e6d8191772
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 26 11:06:22 2018 -0700

    HDDS-78. Add per volume level storage stats in SCM.
    Contributed by  Shashikant Banerjee.

 .../container/placement/metrics/SCMNodeStat.java   |  21 --
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |   8 +
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 230 ++++++++++++++-------
 .../hadoop/hdds/scm/node/StorageReportResult.java  |  87 ++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 141 +++++++++----
 5 files changed, 356 insertions(+), 131 deletions(-)

commit f24c842d52e166e8566337ef93c96438f1c870d8
Author: Wangda Tan <wangda@apache.org>
Date:   Fri May 25 21:53:20 2018 -0700

    YARN-8213. Add Capacity Scheduler performance metrics. (Weiwei Yang via wangda)
    
    Change-Id: Ieea6f3eeb83c90cd74233fea896f0fcd0f325d5f

 .../server/resourcemanager/ResourceManager.java    |   1 +
 .../scheduler/AbstractYarnScheduler.java           |   5 +
 .../scheduler/ResourceScheduler.java               |   5 +
 .../scheduler/capacity/CapacityScheduler.java      |  31 +++++-
 .../capacity/CapacitySchedulerMetrics.java         | 119 +++++++++++++++++++++
 .../TestCapacitySchedulerMetrics.java              | 110 +++++++++++++++++++
 6 files changed, 269 insertions(+), 2 deletions(-)

commit 8605a38514b4f7a2a549c7ecf8e1421e61bb4d67
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 19:43:33 2018 -0700

    HDFS-13620. Randomize the test directory path for TestHDFSFileSystemContract. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/TestHDFSFileSystemContract.java     | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 2a9652e69650973f6158b60ff131215827738db6
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 15:40:46 2018 -0700

    HDDS-113. Rest and Rpc Client should verify resource name using HddsClientUtils.
    Contributed by Lokesh Jain.

 .../hadoop/hdds/scm/client/HddsClientUtils.java    | 23 ++++++++++
 .../apache/hadoop/ozone/client/ObjectStore.java    |  9 ----
 .../apache/hadoop/ozone/client/OzoneBucket.java    | 24 +---------
 .../apache/hadoop/ozone/client/OzoneVolume.java    | 18 +-------
 .../hadoop/ozone/client/rest/RestClient.java       | 52 +++++++++-------------
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  | 46 ++++++++-----------
 6 files changed, 64 insertions(+), 108 deletions(-)

commit 13d25289076b39daf481fb1ee15939dbfe4a6b23
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 13:32:34 2018 -0700

    HDFS-13619. TestAuditLoggerWithCommands fails on Windows. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/TestAuditLoggerWithCommands.java     | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 8733012ae35f2762d704f94975a762885d116795
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 25 13:06:14 2018 -0700

    HDDS-96. Add an option in ozone script to generate a site file with minimally required ozone configs.
    Contributed by Dinesh Chitlangia.

 .../hadoop/hdds/conf/OzoneConfiguration.java       |   6 +-
 hadoop-ozone/common/src/main/bin/ozone             |   4 +
 .../TestGenerateOzoneRequiredConfigurations.java   | 100 ++++++++++++
 .../GenerateOzoneRequiredConfigurations.java       | 174 +++++++++++++++++++++
 .../apache/hadoop/ozone/genconf/package-info.java  |  24 +++
 5 files changed, 305 insertions(+), 3 deletions(-)

commit 1e0d4b1c283fb98a95c60a1723f594befb3c18a9
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 25 09:10:32 2018 -0700

    HDFS-13618. Fix TestDataNodeFaultInjector test failures on Windows. Contributed by Xiao Liang.

 .../apache/hadoop/hdfs/server/datanode/TestDataNodeFaultInjector.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 02322de3f95ba78a22c057037ef61aa3ab1d3824
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 25 09:08:15 2018 -0700

    HADOOP-15473. Configure serialFilter in KeyProvider to avoid UnrecoverableKeyException caused by JDK-8189997. Contributed by Gabor Bota.

 .../org/apache/hadoop/crypto/key/KeyProvider.java  | 18 +++++++++++++++++
 .../hadoop/fs/CommonConfigurationKeysPublic.java   |  7 +++++++
 .../src/main/resources/core-default.xml            | 23 ++++++++++++++++++++++
 3 files changed, 48 insertions(+)

commit 8d5509c68156faaa6641f4e747fc9ff80adccf88
Author: Eric E Payne <ericp@oath.com>
Date:   Fri May 25 16:06:09 2018 +0000

    YARN-8292: Fix the dominant resource preemption cannot happen when some of the resource vector becomes negative. Contributed by Wangda Tan.

 .../util/resource/DefaultResourceCalculator.java   |  15 ++-
 .../util/resource/DominantResourceCalculator.java  |  39 +++++---
 .../yarn/util/resource/ResourceCalculator.java     |  13 ++-
 .../hadoop/yarn/util/resource/Resources.java       |   5 -
 .../AbstractPreemptableResourceCalculator.java     |  58 ++++++++----
 .../capacity/CapacitySchedulerPreemptionUtils.java |  61 ++++++++++--
 .../monitor/capacity/FifoCandidatesSelector.java   |   8 +-
 .../capacity/FifoIntraQueuePreemptionPlugin.java   |   4 +-
 .../capacity/IntraQueueCandidatesSelector.java     |   2 +-
 .../capacity/PreemptableResourceCalculator.java    |   6 +-
 .../monitor/capacity/TempQueuePerPartition.java    |   8 +-
 ...ionalCapacityPreemptionPolicyMockFramework.java |  30 ++++++
 .../TestPreemptionForQueueWithPriorities.java      | 103 ++++++++++++++-------
 ...lCapacityPreemptionPolicyInterQueueWithDRF.java |  60 +++++++++++-
 14 files changed, 312 insertions(+), 100 deletions(-)

commit bddfe796f2f992fc1dcc8a1dd44d64ff2b3c9cf4
Author: Steve Loughran <stevel@apache.org>
Date:   Fri May 25 11:12:47 2018 +0100

    HADOOP-15494. TestRawLocalFileSystemContract fails on Windows.
    Contributed by Anbang Hu.

 .../test/java/org/apache/hadoop/fs/TestRawLocalFileSystemContract.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 86bc6425d425913899f1d951498bd040e453b3d0
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 24 17:07:21 2018 -0700

    YARN-8191. Fair scheduler: queue deletion without RM restart. (Gergo Repas via Haibo Chen)

 .../fair/AllocationFileLoaderService.java          |  16 +-
 .../scheduler/fair/FSLeafQueue.java                |  31 ++
 .../resourcemanager/scheduler/fair/FSQueue.java    |   9 +
 .../scheduler/fair/FairScheduler.java              |  29 +-
 .../scheduler/fair/QueueManager.java               | 155 ++++++++--
 .../fair/TestAllocationFileLoaderService.java      | 100 +++---
 .../scheduler/fair/TestQueueManager.java           | 337 +++++++++++++++++++++
 7 files changed, 596 insertions(+), 81 deletions(-)

commit d9852eb5897a25323ab0302c2c0decb61d310e5e
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 24 16:32:13 2018 -0400

    YARN-8357.  Fixed NPE when YARN service is saved and not deployed.
                Contributed by Chandni Singh

 .../main/java/org/apache/hadoop/yarn/service/client/ServiceClient.java   | 1 +
 1 file changed, 1 insertion(+)

commit 7ff5a40218241ad2380595175a493794129a7402
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 24 16:26:02 2018 -0400

    YARN-8316.  Improved diagnostic message for ATS unavailability for YARN Service.
                Contributed by Billie Rinaldi

 .../java/org/apache/hadoop/yarn/client/api/impl/YarnClientImpl.java   | 2 +-
 .../java/org/apache/hadoop/yarn/client/api/impl/TestYarnClient.java   | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 2d19e7d08f031341078a36fee74860c58de02993
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 24 11:10:30 2018 -0700

    HDDS-80. Remove SendContainerCommand from SCM. Contributed by Nanda Kumar.

 .../common/statemachine/DatanodeStateMachine.java  |   3 -
 .../commandhandler/ContainerReportHandler.java     | 114 ---------------------
 .../states/endpoint/HeartbeatEndpointTask.java     |   5 -
 .../protocol/commands/SendContainerCommand.java    |  80 ---------------
 .../proto/StorageContainerDatanodeProtocol.proto   |  16 ++-
 .../scm/container/replication/InProgressPool.java  |  57 -----------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |   7 --
 7 files changed, 7 insertions(+), 275 deletions(-)

commit c9b63deb533274ca8ef4939f6cd13f728a067f7b
Author: Andrew Wang <wang@apache.org>
Date:   Thu May 24 09:56:23 2018 -0700

    HDFS-13611. Unsafe use of Text as a ConcurrentHashMap key in PBHelperClient.

 .../src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1388de18ad51434569589a8f5b0b05c38fe02ab3
Author: Shane Kumpf <skumpf@apache.org>
Date:   Thu May 24 09:30:39 2018 -0600

    YARN-6919. Add default volume mount list. Contributed by Eric Badger

 .../apache/hadoop/yarn/conf/YarnConfiguration.java |  10 ++
 .../src/main/resources/yarn-default.xml            |  14 +++
 .../linux/runtime/DockerLinuxContainerRuntime.java |  38 ++++++
 .../linux/runtime/TestDockerContainerRuntime.java  | 138 +++++++++++++++++++++
 4 files changed, 200 insertions(+)

commit 774daa8d532f9eeee1fe8e342a8da2cfa65a8629
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Thu May 24 15:53:42 2018 +0530

    HDDS-45. Removal of old OzoneRestClient. Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  |  22 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       | 646 -----------------
 .../apache/hadoop/ozone/web/client/OzoneKey.java   |  44 --
 .../hadoop/ozone/web/client/OzoneRestClient.java   | 804 ---------------------
 .../hadoop/ozone/web/client/OzoneVolume.java       | 584 ---------------
 .../hadoop/ozone/web/client/package-info.java      |  34 -
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |   3 +-
 .../org/apache/hadoop/ozone/RatisTestHelper.java   |  14 +-
 .../ozone/web/TestOzoneRestWithMiniCluster.java    | 207 +++---
 .../hadoop/ozone/web/client/TestBuckets.java       | 193 +++--
 .../hadoop/ozone/web/client/TestBucketsRatis.java  |  15 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   | 286 +++++---
 .../hadoop/ozone/web/client/TestKeysRatis.java     |  29 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java | 285 +++-----
 .../hadoop/ozone/web/client/TestVolumeRatis.java   |  29 +-
 15 files changed, 548 insertions(+), 2647 deletions(-)

commit c05b5d424b000bab766f57e88a07f2b4e9a56647
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 24 14:19:46 2018 +0530

    YARN-8319. More YARN pages need to honor yarn.resourcemanager.display.per-user-apps. Contributed by Sunil G.

 .../apache/hadoop/yarn/conf/YarnConfiguration.java | 11 +++-
 .../yarn/conf/TestYarnConfigurationFields.java     |  2 +
 .../src/main/resources/yarn-default.xml            |  2 +-
 .../server/nodemanager/webapp/NMWebServices.java   | 63 +++++++++++++++++++-
 .../nodemanager/webapp/TestNMWebServicesApps.java  | 68 ++++++++++++++++++----
 .../server/resourcemanager/ClientRMService.java    | 10 ++--
 .../resourcemanager/webapp/RMWebServices.java      |  8 +--
 .../reader/TimelineReaderWebServices.java          | 33 +++++++++++
 8 files changed, 175 insertions(+), 22 deletions(-)

commit 4cc0c9b0baa93f5a1c0623eee353874e858a7caa
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 24 12:23:47 2018 +0530

    YARN-8346. Upgrading to 3.1 kills running containers with error 'Opportunistic container queue is full'. Contributed by Jason Lowe.

 .../yarn/security/ContainerTokenIdentifier.java    |  4 ++--
 .../yarn/security/TestYARNTokenIdentifier.java     | 25 ++++++++++++++++++++++
 2 files changed, 27 insertions(+), 2 deletions(-)

commit 7a87add4ea4c317aa9377d1fc8e43fb5e7418a46
Author: Yiqun Lin <yqlin@apache.org>
Date:   Thu May 24 10:57:35 2018 +0800

    HDFS-13598. Reduce unnecessary byte-to-string transform operation in INodesInPath#toString. Contributed by Gabor Bota.

 .../main/java/org/apache/hadoop/hdfs/server/namenode/INodesInPath.java  | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d9964799544eefcf424fcc178d987525f5356cdf
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed May 23 11:29:55 2018 -0700

    YARN-4599. Set OOM control for memory cgroups. (Miklos Szegedi via Haibo Chen)

 .gitignore                                         |   1 +
 .../apache/hadoop/yarn/conf/YarnConfiguration.java |  26 +-
 .../src/main/resources/yarn-default.xml            |  67 ++-
 .../src/CMakeLists.txt                             |  19 +
 .../resources/CGroupElasticMemoryController.java   | 476 +++++++++++++++++++++
 .../linux/resources/CGroupsHandler.java            |   6 +
 .../linux/resources/CGroupsHandlerImpl.java        |   6 +-
 .../CGroupsMemoryResourceHandlerImpl.java          |  15 -
 .../linux/resources/DefaultOOMHandler.java         | 254 +++++++++++
 .../monitor/ContainersMonitorImpl.java             |  50 +++
 .../executor/ContainerSignalContext.java           |  41 ++
 .../main/native/oom-listener/impl/oom_listener.c   | 171 ++++++++
 .../main/native/oom-listener/impl/oom_listener.h   | 102 +++++
 .../native/oom-listener/impl/oom_listener_main.c   | 104 +++++
 .../oom-listener/test/oom_listener_test_main.cc    | 292 +++++++++++++
 .../linux/resources/DummyRunnableWithContext.java  |  31 ++
 .../TestCGroupElasticMemoryController.java         | 319 ++++++++++++++
 .../TestCGroupsMemoryResourceHandlerImpl.java      |   6 +-
 .../linux/resources/TestDefaultOOMHandler.java     | 307 +++++++++++++
 .../monitor/TestContainersMonitor.java             |   1 +
 .../TestContainersMonitorResourceChange.java       |   3 +-
 .../src/site/markdown/NodeManagerCGroupsMemory.md  | 133 ++++++
 22 files changed, 2391 insertions(+), 39 deletions(-)

commit f09dc73001fd5f3319765fa997f4b0ca9e8f2aff
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 15:59:30 2018 -0700

    YARN-8327. Fix TestAggregatedLogFormat#testReadAcontainerLogs1 on Windows. Contributed by Giovanni Matteo Fumarola.

 .../yarn/logaggregation/TestAggregatedLogFormat.java  | 19 ++++++++++++-------
 1 file changed, 12 insertions(+), 7 deletions(-)

commit d72615611cfa6bd82756270d4b10136ec1e56741
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 14:43:59 2018 -0700

    YARN-8348. Incorrect and missing AfterClass in HBase-tests to fix NPE failures. Contributed by Giovanni Matteo Fumarola.

 .../timelineservice/storage/TestHBaseTimelineStorageApps.java     | 4 +++-
 .../timelineservice/storage/TestHBaseTimelineStorageDomain.java   | 8 ++++++++
 .../timelineservice/storage/TestHBaseTimelineStorageEntities.java | 4 +++-
 .../timelineservice/storage/TestHBaseTimelineStorageSchema.java   | 8 ++++++++
 .../storage/flow/TestHBaseStorageFlowActivity.java                | 4 +++-
 .../timelineservice/storage/flow/TestHBaseStorageFlowRun.java     | 4 +++-
 .../storage/flow/TestHBaseStorageFlowRunCompaction.java           | 4 +++-
 7 files changed, 31 insertions(+), 5 deletions(-)

commit e99e5bf104e9664bc1b43a2639d87355d47a77e2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 14:15:26 2018 -0700

    YARN-8344. Missing nm.stop() in TestNodeManagerResync to fix testKillContainersOnResync. Contributed by Giovanni Matteo Fumarola.

 .../server/nodemanager/TestNodeManagerResync.java  | 87 ++++++++++++----------
 1 file changed, 48 insertions(+), 39 deletions(-)

commit cddbbe5f690e4617413f6e986adc6fa900629f03
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 12:12:08 2018 -0700

    HDFS-13493. Reduce the HttpServer2 thread count on DataNodes. Contributed by Erik Krogen.

 .../hdfs/server/datanode/web/DatanodeHttpServer.java       | 14 +++++++++++++-
 1 file changed, 13 insertions(+), 1 deletion(-)

commit e30938af1270e079587e7bc06b755f9e93e660a5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 11:55:31 2018 -0700

    YARN-8336. Fix potential connection leak in SchedConfCLI and YarnWebServiceUtils. Contributed by Giovanni Matteo Fumarola.

 .../hadoop/yarn/client/cli/SchedConfCLI.java       | 42 +++++++++++++---------
 .../yarn/webapp/util/YarnWebServiceUtils.java      | 17 ++++++---
 2 files changed, 38 insertions(+), 21 deletions(-)

commit c13dea87d9de7a9872fc8b0c939b41b1666a61e5
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 11:36:03 2018 -0700

    HDFS-13587. TestQuorumJournalManager fails on Windows. Contributed by Anbang Hu.

 .../java/org/apache/hadoop/hdfs/qjournal/MiniJournalCluster.java     | 5 +++++
 .../apache/hadoop/hdfs/qjournal/client/TestQuorumJournalManager.java | 3 ++-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 51ce02bb54d6047a8191624a86d427b0c9445cb1
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed May 23 10:30:12 2018 -0700

    HADOOP-15486. Make NetworkTopology#netLock fair. Contributed by Nanda kumar.

 .../src/main/java/org/apache/hadoop/net/NetworkTopology.java            | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit aa23d49fc8b9c2537529dbdc13512000e2ab295a
Author: Robert Kanter <rkanter@apache.org>
Date:   Wed May 23 10:23:17 2018 -0700

    HADOOP-15457. Add Security-Related HTTP Response Header in WEBUIs. (kanwaljeets via rkanter)

 .../java/org/apache/hadoop/http/HttpServer2.java   | 79 ++++++++++++++++------
 .../org/apache/hadoop/http/TestHttpServer.java     | 61 +++++++++++++++++
 2 files changed, 121 insertions(+), 19 deletions(-)

commit bc6d9d4c796d3c9d27dbbe3266031bf2adecde4f
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Wed May 23 10:15:40 2018 -0700

    HDFS-13589: Add dfsAdmin command to query if upgrade is finalized. Contributed by Hanisha Koneru

 .../java/org/apache/hadoop/hdfs/DFSClient.java     | 10 +++
 .../apache/hadoop/hdfs/DistributedFileSystem.java  | 10 +++
 .../hadoop/hdfs/protocol/ClientProtocol.java       |  9 ++
 .../apache/hadoop/hdfs/protocol/HdfsConstants.java |  7 ++
 .../ClientNamenodeProtocolTranslatorPB.java        | 17 ++++
 .../src/main/proto/ClientNamenodeProtocol.proto    |  9 ++
 .../server/federation/router/RouterRpcServer.java  |  7 ++
 ...ientNamenodeProtocolServerSideTranslatorPB.java | 17 ++++
 .../hdfs/server/namenode/NameNodeRpcServer.java    |  6 ++
 .../org/apache/hadoop/hdfs/tools/DFSAdmin.java     | 97 ++++++++++++++++++++++
 .../hadoop-hdfs/src/site/markdown/HDFSCommands.md  |  2 +
 .../site/markdown/HDFSHighAvailabilityWithQJM.md   |  2 +
 .../hadoop/hdfs/tools/TestDFSAdminWithHA.java      | 67 +++++++++++++++
 13 files changed, 260 insertions(+)

commit 699a6918aca2b57ae9ad0bff2c3aaf5a776da614
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 23 09:42:21 2018 -0700

    HDDS-110. Checkstyle is not working in the HDDS precommit hook.
    Contributed by Elek, Marton.

 pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c0c9b7a8ef2618b7641a0452d9277abd26815de2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 23 09:46:35 2018 -0700

    HDFS-13588. Fix TestFsDatasetImpl test failures on Windows. Contributed by Xiao Liang.

 .../hdfs/server/datanode/fsdataset/impl/TestFsDatasetImpl.java    | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit e83b943fed53c8082a699e0601c2f8e8db0f8ffe
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 23 09:29:35 2018 -0700

    HDDS-44. Ozone: start-ozone.sh fail to start datanode because of incomplete classpaths.
    Contributed by Mukul Kumar Singh.

 hadoop-ozone/common/src/main/bin/start-ozone.sh | 116 +++++++++++++++++++++++-
 1 file changed, 111 insertions(+), 5 deletions(-)

commit 63fc5873cee41b883e988ead00fc6f6cf74fae97
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 23 21:07:37 2018 +0530

    HDDS-84. The root directory of ozone.tar.gz should contain the version string. Contributed by Elek, Marton.

 dev-support/bin/ozone-dist-tar-stitching | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f61e3e752eb1cf4a08030da04bc3d6c5a2b3926d
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 23 18:31:03 2018 +0530

    YARN-8297. Incorrect ATS Url used for Wire encrypted cluster.(addendum). Contributed by Sunil G.

 .../src/main/webapp/app/initializers/loader.js               | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 9837ca9cc746573571029f9fb996a1be10b588ab
Author: Shane Kumpf <skumpf@apache.org>
Date:   Wed May 23 06:43:44 2018 -0600

    YARN-8285. Remove unused environment variables from the Docker runtime. Contributed by Eric Badger

 .../linux/runtime/DockerLinuxContainerRuntime.java               | 9 ---------
 1 file changed, 9 deletions(-)

commit 34e8b9f9a86fb03156861482643fba11bdee1dd4
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Wed May 23 19:10:09 2018 +0800

    HDFS-13540. DFSStripedInputStream should only allocate new buffers when reading. Contributed by Xiao Chen.

 .../apache/hadoop/io/ElasticByteBufferPool.java    | 12 ++++++
 .../apache/hadoop/hdfs/DFSStripedInputStream.java  | 12 +++---
 .../hadoop/hdfs/TestDFSStripedInputStream.java     | 45 ++++++++++++++++++++++
 3 files changed, 64 insertions(+), 5 deletions(-)

commit fed2bef647d9a15fe020ad5d3bb89fcb77ed30e6
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 23 14:15:35 2018 +0530

    HDDS-85. Send Container State Info while sending the container report from Datanode to SCM. Contributed by Shashikant Banerjee.

 .../src/main/proto/DatanodeContainerProtocol.proto |  1 +
 .../container/common/helpers/ContainerData.java    |  8 ++++
 .../common/impl/ContainerManagerImpl.java          | 45 ++++++++++++++++++++--
 .../common/interfaces/ContainerManager.java        |  2 +-
 .../commandhandler/ContainerReportHandler.java     |  4 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  4 +-
 .../common/impl/TestContainerPersistence.java      |  2 +-
 7 files changed, 57 insertions(+), 9 deletions(-)

commit 745f203e577bacb35b042206db94615141fa5e6f
Author: Akira Ajisaka <aajisaka@apache.org>
Date:   Wed May 23 17:15:57 2018 +0900

    Additional check when unpacking archives. Contributed by Jason Lowe and Akira Ajisaka.

 .../main/java/org/apache/hadoop/fs/FileUtil.java   | 18 +++++++++-
 .../java/org/apache/hadoop/fs/TestFileUtil.java    | 40 ++++++++++++++++++----
 2 files changed, 51 insertions(+), 7 deletions(-)

commit 1d2640b6132e8308c07476badd2d1482be68a298
Author: Andrew Wang <wang@apache.org>
Date:   Tue May 22 23:55:20 2018 -0700

    HDFS-13601. Optimize ByteString conversions in PBHelper.

 .../dev-support/findbugsExcludeFile.xml            |  5 ++
 .../apache/hadoop/hdfs/protocol/DatanodeID.java    | 50 ++++++++++++++--
 .../hadoop/hdfs/protocolPB/PBHelperClient.java     | 67 ++++++++++++++++++----
 .../datanode/TestDataXceiverBackwardsCompat.java   | 10 ++++
 4 files changed, 118 insertions(+), 14 deletions(-)

commit 5a9140690aba295ba1226a3190b52f34347a8372
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 16:51:43 2018 -0700

    HDDS-49. Standalone protocol should use grpc in place of netty.
    Contributed by Mukul Kumar Singh.

 .../apache/hadoop/hdds/scm/XceiverClientGrpc.java  | 217 +++++++++++++++++++++
 .../hadoop/hdds/scm/XceiverClientManager.java      |  21 +-
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |   8 +-
 .../common/dev-support/findbugsExcludeFile.xml     |   3 +
 hadoop-hdds/common/pom.xml                         |  17 ++
 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  |   4 +
 .../src/main/proto/DatanodeContainerProtocol.proto |   7 +
 .../common/src/main/resources/ozone-default.xml    |   9 +
 .../container/common/helpers/ContainerMetrics.java |  14 +-
 .../transport/server/GrpcXceiverService.java       |  82 ++++++++
 .../common/transport/server/XceiverServerGrpc.java | 105 ++++++++++
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  11 +-
 .../apache/hadoop/ozone/MiniOzoneClusterImpl.java  |  10 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  67 +++++--
 hadoop-project/pom.xml                             |   1 +
 15 files changed, 540 insertions(+), 36 deletions(-)

commit 3e5f7ea986600e084fcac723b0423e7de1b3bb8a
Author: Miklos Szegedi <miklos.szegedi@cloudera.com>
Date:   Tue May 22 18:10:33 2018 -0700

    YARN-8310. Handle old NMTokenIdentifier, AMRMTokenIdentifier, and ContainerTokenIdentifier formats. Contributed by Robert Kanter.

 .../main/java/org/apache/hadoop/io/IOUtils.java    |  20 ++++
 .../hadoop/yarn/security/AMRMTokenIdentifier.java  |  33 +++++-
 .../yarn/security/ContainerTokenIdentifier.java    |  98 ++++++++++++++---
 .../hadoop/yarn/security/NMTokenIdentifier.java    |  32 +++++-
 .../yarn/security/TestYARNTokenIdentifier.java     | 121 ++++++++++++++++++++-
 5 files changed, 278 insertions(+), 26 deletions(-)

commit 68c7fd8e6092e8436ecf96852c608708f311f262
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Tue May 22 15:46:59 2018 -0700

    HDDS-79. Remove ReportState from SCMHeartbeatRequestProto. Contributed by Nanda kumar.

 .../common/impl/ContainerManagerImpl.java          | 14 +---
 .../common/impl/ContainerReportManagerImpl.java    | 43 +++----------
 .../common/interfaces/ContainerManager.java        |  7 --
 .../common/interfaces/ContainerReportManager.java  |  8 +--
 .../common/statemachine/DatanodeStateMachine.java  |  1 -
 .../common/statemachine/StateContext.java          | 38 -----------
 .../states/endpoint/HeartbeatEndpointTask.java     |  3 +-
 .../ozone/container/ozoneimpl/OzoneContainer.java  |  9 ---
 .../protocol/StorageContainerDatanodeProtocol.java |  5 +-
 .../protocol/StorageContainerNodeProtocol.java     |  5 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  5 +-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  3 +-
 .../proto/StorageContainerDatanodeProtocol.proto   | 39 ------------
 .../hadoop/ozone/container/common/ScmTestMock.java | 13 +---
 .../container/common/TestDatanodeStateMachine.java |  7 --
 .../hadoop/hdds/scm/node/HeartbeatQueueItem.java   | 23 +------
 .../hadoop/hdds/scm/node/SCMNodeManager.java       | 30 +--------
 .../hdds/scm/server/SCMDatanodeProtocolServer.java |  6 +-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  5 +-
 .../hdds/scm/node/TestContainerPlacement.java      |  9 +--
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 74 ++++++++++------------
 .../ozone/container/common/TestEndPoint.java       | 11 +---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  5 +-
 24 files changed, 63 insertions(+), 305 deletions(-)

commit 43be9ab44f27ae847e100efdc6810b192202fc55
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 14:29:06 2018 -0700

    HDDS-89. Addendum Patch-1. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 hadoop-ozone/docs/dev-support/bin/generate-site.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b22f56c4719e63bd4f6edc2a075e0bcdb9442255
Author: Robert Kanter <rkanter@apache.org>
Date:   Tue May 22 14:24:38 2018 -0700

    YARN-8273. Log aggregation does not warn if HDFS quota in target directory is exceeded (grepas via rkanter)

 .../hadoop-yarn/hadoop-yarn-common/pom.xml         |  4 ++
 .../yarn/logaggregation/AggregatedLogFormat.java   | 14 +++-
 .../filecontroller/LogAggregationDFSException.java | 45 +++++++++++++
 .../LogAggregationFileController.java              |  4 +-
 .../tfile/LogAggregationTFileController.java       | 13 +++-
 .../logaggregation/TestContainerLogsUtils.java     |  4 +-
 .../logaggregation/AppLogAggregatorImpl.java       | 49 ++++++++++----
 .../logaggregation/TestAppLogAggregatorImpl.java   | 75 +++++++++++++++++++---
 .../nodemanager/webapp/TestNMWebServices.java      |  7 +-
 9 files changed, 183 insertions(+), 32 deletions(-)

commit 83f53e5c6236de30c213dc41878cebfb02597e26
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 22 13:29:21 2018 -0700

    YARN-8332. Incorrect min/max allocation property name in resource types doc. (Weiwei Yang via wangda)
    
    Change-Id: If74f1ceed9c045a2cb2d6593741278b65ac44a9f

 .../hadoop-yarn-site/src/site/markdown/ResourceModel.md      | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit bd15d2396ef0c24fb6b60c6393d16b37651b828e
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 22 13:25:15 2018 -0700

    YARN-8290. SystemMetricsPublisher.appACLsUpdated should be invoked after application information is published to ATS to avoid "User is not set in the application report" Exception. (Eric Yang via wangda)
    
    Change-Id: I0ac6ddd19740d1aa7dd07111cd11af71ddc2fcaf

 .../org/apache/hadoop/yarn/server/resourcemanager/RMAppManager.java  | 5 -----
 .../apache/hadoop/yarn/server/resourcemanager/rmapp/RMAppImpl.java   | 5 +++++
 .../apache/hadoop/yarn/server/resourcemanager/TestAppManager.java    | 4 ----
 .../org/apache/hadoop/yarn/server/resourcemanager/TestRMRestart.java | 1 +
 4 files changed, 6 insertions(+), 9 deletions(-)

commit 523f602f81eafd56e4adfadd70d7c9a672b5813a
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 13:20:42 2018 -0700

    HDDS-89. Addendum Patch. Create ozone specific inline documentation as part of the build
    Contributed by Elek, Marton.

 hadoop-dist/pom.xml | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit 60821fb20ecee55735ddd0a379cb64841ccb1e2e
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 11:38:11 2018 -0700

    HDDS-74. Rename name of properties related to configuration tags.
    Contributed by Sandeep Nemuri.

 .../src/main/java/org/apache/hadoop/hdds/conf/HddsConfServlet.java    | 2 +-
 hadoop-hdds/common/src/main/resources/ozone-default.xml               | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 481bfdb94ff2dd3038fd20b1604358ac78e422d4
Author: Anu Engineer <aengineer@apache.org>
Date:   Tue May 22 10:49:10 2018 -0700

    HDDS-89. Create ozone specific inline documentation as part of the build.
    Contributed by Elek, Marton.

 .gitignore                                         |   2 +
 dev-support/bin/ozone-dist-layout-stitching        |   4 +
 hadoop-dist/pom.xml                                |   6 +
 hadoop-ozone/docs/README.md                        |  52 ++++
 hadoop-ozone/docs/archetypes/default.md            |  17 ++
 hadoop-ozone/docs/config.toml                      |  23 ++
 .../content/CommandShell.md}                       |   5 +-
 .../content/GettingStarted.md}                     |   7 +-
 .../OzoneMetrics.md => docs/content/Metrics.md}    |   6 +-
 .../markdown/OzoneRest.md => docs/content/Rest.md} |   4 +
 .../OzoneOverview.md => docs/content/_index.md}    |  48 ++--
 hadoop-ozone/docs/dev-support/bin/generate-site.sh |  29 +++
 hadoop-ozone/docs/pom.xml                          |  58 +++++
 hadoop-ozone/docs/static/OzoneOverview.png         | Bin 0 -> 41729 bytes
 hadoop-ozone/docs/static/OzoneOverview.svg         | 225 ++++++++++++++++
 hadoop-ozone/docs/static/SCMBlockDiagram.png       | Bin 0 -> 14714 bytes
 .../themes/ozonedoc/layouts/_default/single.html   |  32 +++
 .../docs/themes/ozonedoc/layouts/index.html        |  21 ++
 .../themes/ozonedoc/layouts/partials/footer.html   |  19 ++
 .../themes/ozonedoc/layouts/partials/header.html   |  31 +++
 .../themes/ozonedoc/layouts/partials/navbar.html   |  33 +++
 .../themes/ozonedoc/layouts/partials/sidebar.html  |  43 +++
 .../ozonedoc/static/css/bootstrap-theme.min.css    |   6 +
 .../static/css/bootstrap-theme.min.css.map         |   1 +
 .../themes/ozonedoc/static/css/bootstrap.min.css   |   6 +
 .../ozonedoc/static/css/bootstrap.min.css.map      |   1 +
 .../docs/themes/ozonedoc/static/css/ozonedoc.css   | 128 +++++++++
 .../static/fonts/glyphicons-halflings-regular.eot  | Bin 0 -> 20127 bytes
 .../static/fonts/glyphicons-halflings-regular.svg  | 288 +++++++++++++++++++++
 .../static/fonts/glyphicons-halflings-regular.ttf  | Bin 0 -> 45404 bytes
 .../static/fonts/glyphicons-halflings-regular.woff | Bin 0 -> 23424 bytes
 .../fonts/glyphicons-halflings-regular.woff2       | Bin 0 -> 18028 bytes
 .../themes/ozonedoc/static/js/bootstrap.min.js     |   7 +
 .../docs/themes/ozonedoc/static/js/jquery.min.js   |   5 +
 .../docs/themes/ozonedoc/static/js/ozonedoc.js     |  23 ++
 hadoop-ozone/docs/themes/ozonedoc/theme.toml       |   2 +
 hadoop-ozone/pom.xml                               |   1 +
 hadoop-project/pom.xml                             |   5 +
 38 files changed, 1118 insertions(+), 20 deletions(-)

commit 6176d2b35c85715aae93526236c29540f71ecac8
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 22 13:44:58 2018 -0400

    YARN-7960.  Added security flag no-new-privileges for YARN Docker integration.
                Contributed by Eric Badger

 .../hadoop-yarn/conf/container-executor.cfg        |  1 +
 .../container-executor/impl/utils/docker-util.c    | 12 +++
 .../test/utils/test_docker_util.cc                 | 90 ++++++++++++++++++++++
 .../src/site/markdown/DockerContainers.md          |  1 +
 4 files changed, 104 insertions(+)

commit bcc8e76badc1341a6cf995c8e44fa5e422158de8
Author: Kihwal Lee <kihwal@apache.org>
Date:   Tue May 22 11:19:15 2018 -0500

    HADOOP-15450. Avoid fsync storm triggered by DiskChecker and handle disk full situation. Contributed by Arpit Agarwal.

 .../java/org/apache/hadoop/util/DiskChecker.java   |  46 +++++-
 .../org/apache/hadoop/util/TestDiskChecker.java    | 102 ------------
 .../hadoop/util/TestDiskCheckerWithDiskIo.java     | 173 +++++++++++++++++++++
 3 files changed, 217 insertions(+), 104 deletions(-)

commit 5f11288e41fca2e414dcbea130c7702e29d4d610
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 22 09:27:08 2018 -0500

    YARN-8206. Sending a kill does not immediately kill docker containers. Contributed by Eric Badger

 .../linux/runtime/DockerLinuxContainerRuntime.java |  93 ++++---
 .../linux/runtime/TestDockerContainerRuntime.java  | 301 ++++++++++-----------
 2 files changed, 198 insertions(+), 196 deletions(-)

commit 57c2feb0d3ed0bb4f8642300433a35f5e28071c9
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 22 13:33:31 2018 +0530

    HADOOP-15474. Rename properties introduced for <tags>. Contributed by Zsolt Venczel.

 .../java/org/apache/hadoop/conf/Configuration.java     | 18 +++++++++++++++---
 .../hadoop/fs/CommonConfigurationKeysPublic.java       | 15 +++++++++++++++
 .../hadoop-common/src/main/resources/core-default.xml  | 11 ++++++++++-
 .../java/org/apache/hadoop/conf/TestConfiguration.java |  4 ++--
 4 files changed, 42 insertions(+), 6 deletions(-)

commit 5e88126776e6d682a48f737d8ab1ad0e04d3e767
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 21 16:09:24 2018 -0700

    HDDS-82. Merge ContainerData and ContainerStatus classes. Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |   1 +
 .../container/common/helpers/ContainerData.java    | 163 +++++++++++++++-
 .../common/impl/ContainerManagerImpl.java          | 144 +++++++-------
 .../container/common/impl/ContainerStatus.java     | 217 ---------------------
 .../RandomContainerDeletionChoosingPolicy.java     |  10 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |  20 +-
 .../ContainerDeletionChoosingPolicy.java           |   3 +-
 .../common/impl/TestContainerPersistence.java      |  19 +-
 8 files changed, 257 insertions(+), 320 deletions(-)

commit 0b4c44bdeef62945b592d5761666ad026b629c0b
Author: Eric E Payne <ericp@oath.com>
Date:   Mon May 21 20:14:58 2018 +0000

    YARN-8179: Preemption does not happen due to natural_termination_factor when DRF is used. Contributed by Kyungwan Nam.

 .../capacity/PreemptableResourceCalculator.java    |  7 ++-
 ...lCapacityPreemptionPolicyInterQueueWithDRF.java | 56 ++++++++++++++++++++++
 2 files changed, 61 insertions(+), 2 deletions(-)

commit 132a547dea4081948c39c149c59d6453003fa277
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 22:57:08 2018 +0530

    HDDS-71. Send ContainerType to Datanode during container creation. Contributed by Bharat Viswanadham.

 .../hdds/scm/storage/ContainerProtocolCalls.java   |  2 ++
 .../src/main/proto/DatanodeContainerProtocol.proto |  6 ++++
 .../container/common/helpers/ContainerData.java    | 36 ++++++++++++++++++++++
 .../common/impl/ContainerManagerImpl.java          |  7 +++++
 4 files changed, 51 insertions(+)

commit 73e9120ad79c73703de21e0084591861813f3279
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Mon May 21 12:33:00 2018 -0500

    Skip the proxy user check if the ugi has not been initialized. Contributed by Daryn Sharp

 .../src/main/java/org/apache/hadoop/conf/Configuration.java       | 2 +-
 .../java/org/apache/hadoop/security/UserGroupInformation.java     | 8 ++++++--
 2 files changed, 7 insertions(+), 3 deletions(-)

commit f48fec83d0f2d1a781a141ad7216463c5526321f
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon May 21 08:00:21 2018 -0700

    YARN-8248. Job hangs when a job requests a resource that its queue does not have. (Szilard Nemeth via Haibo Chen)

 .../resourcemanager/scheduler/SchedulerUtils.java  | 159 ++++++++++++----
 .../scheduler/fair/FSAppAttempt.java               |  10 +-
 .../scheduler/fair/FSParentQueue.java              |   3 +
 .../scheduler/fair/FairScheduler.java              | 115 +++++++++---
 .../scheduler/fair/FairSchedulerTestBase.java      |  64 +++++--
 .../scheduler/fair/TestFairScheduler.java          | 205 +++++++++++++++++++++
 6 files changed, 481 insertions(+), 75 deletions(-)

commit 3d2d9dbcaa73fd72d614a8cf5a5be2806dd31537
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Mon May 21 08:01:51 2018 -0700

    HDDS-87:Fix test failures with uninitialized storageLocation field in storageReport Contributed by Shashikant Banerjee

 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 35 ++++++++++---
 .../hdds/scm/node/TestContainerPlacement.java      | 13 ++---
 .../hadoop/hdds/scm/node/TestNodeManager.java      | 58 +++++++++++-----------
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 22 ++++----
 .../ozone/container/common/TestEndPoint.java       | 32 ++++++------
 5 files changed, 92 insertions(+), 68 deletions(-)

commit c97df7712ce35938c2f4ccbbdc60c6671a7a67b0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 21 19:06:26 2018 +0530

    HDDS-57. TestContainerCloser#testRepeatedClose and TestContainerCloser#testCleanupThreadRuns fail consistently. Contributed by Shashikant Banerjee.

 .../apache/hadoop/hdds/scm/container/closer/TestContainerCloser.java   | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit ba842847c94d31d3f737226d954c566b5d88656b
Author: Steve Loughran <stevel@apache.org>
Date:   Mon May 21 11:02:01 2018 +0100

    HADOOP-15478. WASB: hflush() and hsync() regression.
    Contributed by Thomas Marquardt.

 .../hadoop/fs/azure/PageBlobOutputStream.java      |  13 +-
 .../hadoop/fs/azure/SyncableDataOutputStream.java  |   4 -
 .../fs/azure/ITestOutputStreamSemantics.java       | 385 +++++++++++++++++++++
 3 files changed, 397 insertions(+), 5 deletions(-)

commit a23ff8d88001ad8e4ac4c36fc1f7691d193dc1d0
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 18 17:29:10 2018 -0400

    YARN-7530.  Refactored YARN service API project location.
                Contributed by Chandni Singh

 hadoop-assemblies/src/main/resources/assemblies/hadoop-yarn-dist.xml    | 2 +-
 .../hadoop-yarn-services-api/dev-support/findbugs-exclude.xml           | 0
 .../{ => hadoop-yarn-services}/hadoop-yarn-services-api/pom.xml         | 2 +-
 .../java/org/apache/hadoop/yarn/service/client/ApiServiceClient.java    | 0
 .../org/apache/hadoop/yarn/service/client/SystemServiceManagerImpl.java | 0
 .../main/java/org/apache/hadoop/yarn/service/client/package-info.java   | 0
 .../src/main/java/org/apache/hadoop/yarn/service/webapp/ApiServer.java  | 0
 .../java/org/apache/hadoop/yarn/service/webapp/ApiServerWebApp.java     | 0
 .../main/java/org/apache/hadoop/yarn/service/webapp/package-info.java   | 0
 .../src/main/resources/definition/YARN-Services-Examples.md             | 0
 .../resources/definition/YARN-Simplified-V1-API-Layer-For-Services.yaml | 0
 .../hadoop-yarn-services-api/src/main/resources/log4j-server.properties | 0
 .../hadoop-yarn-services-api/src/main/resources/webapps/api-server/app  | 0
 .../hadoop-yarn-services-api/src/main/webapp/WEB-INF/web.xml            | 0
 .../src/test/java/org/apache/hadoop/yarn/service/ServiceClientTest.java | 0
 .../src/test/java/org/apache/hadoop/yarn/service/TestApiServer.java     | 0
 .../org/apache/hadoop/yarn/service/client/TestApiServiceClient.java     | 0
 .../apache/hadoop/yarn/service/client/TestSystemServiceManagerImpl.java | 0
 .../hadoop-yarn-services-api/src/test/resources/example-app.json        | 0
 .../hadoop-yarn-services-api/src/test/resources/log4j.properties        | 0
 .../src/test/resources/system-services/bad/bad.yarnfile                 | 0
 .../src/test/resources/system-services/sync/user1/example-app1.yarnfile | 0
 .../src/test/resources/system-services/sync/user1/example-app2.yarnfile | 0
 .../src/test/resources/system-services/sync/user1/example-app3.json     | 0
 .../src/test/resources/system-services/sync/user2/example-app1.yarnfile | 0
 .../src/test/resources/system-services/sync/user2/example-app2.yarnfile | 0
 .../hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/pom.xml   | 1 +
 hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/pom.xml        | 1 -
 28 files changed, 3 insertions(+), 3 deletions(-)

commit 89f59113927dd886f09d8fe2c05ff2cd5d1390c1
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 18 11:28:48 2018 -0700

    HADOOP-15154. Abstract new method assertCapability for StreamCapabilities testing. Contributed by Zsolt Venczel.

 .../apache/hadoop/crypto/TestCryptoStreams.java    | 39 ++++++++++++++--------
 .../hadoop/fs/contract/ContractTestUtils.java      | 29 ++++++++++++++++
 2 files changed, 54 insertions(+), 14 deletions(-)

commit 9775ecb2355d7bed3514fcd54bf69e8351c4ab99
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 18 09:46:02 2018 -0700

    HDFS-13593. TestBlockReaderLocalLegacy#testBlockReaderLocalLegacyWithAppend fails on Windows. Contributed by Anbang Hu.

 .../apache/hadoop/hdfs/client/impl/TestBlockReaderLocalLegacy.java | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 57b893de3d36d20f65ee81b5cc3cfef12594b75b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 18 09:36:58 2018 -0700

    HDFS-13592. TestNameNodePrunesMissingStorages#testNameNodePrunesUnreportedStorages does not shut down cluster properly. Contributed by Anbang Hu.

 .../TestNameNodePrunesMissingStorages.java         | 97 ++++++++++++----------
 1 file changed, 53 insertions(+), 44 deletions(-)

commit 6e996867f641b297e3f88068f6d185b709d509b0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Fri May 18 14:08:46 2018 +0530

    HDDS-76. Modify SCMStorageReportProto to include the data dir paths as well as the StorageType info. Contributed by Shashikant Banerjee.

 .../common/impl/ContainerLocationManagerImpl.java  |  18 +-
 .../common/impl/ContainerManagerImpl.java          |   9 +-
 .../common/impl/ContainerStorageLocation.java      |   9 +
 .../common/impl/StorageLocationReport.java         | 235 ++++++++++++++++++++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  21 +-
 5 files changed, 275 insertions(+), 17 deletions(-)

commit 3159bffce23abf35754da2d7d51de7d8c2631ae3
Author: Arun Suresh <asuresh@apache.org>
Date:   Thu May 17 20:00:52 2018 -0700

    YARN-7900. [AMRMProxy] AMRMClientRelayer for stateful FederationInterceptor. (Botong Huang via asuresh)

 .../yarn/client/api/impl/AMRMClientImpl.java       | 151 ++-------
 .../hadoop/yarn/client}/AMRMClientUtils.java       |  75 ++++-
 .../hadoop/yarn/server/AMRMClientRelayer.java      | 364 +++++++++++++++++++++
 .../failover/FederationProxyProviderUtil.java      |   2 +-
 .../apache/hadoop/yarn/server/package-info.java    |  18 +
 .../yarn/server/scheduler/ResourceRequestSet.java  | 206 ++++++++++++
 .../server/scheduler/ResourceRequestSetKey.java    | 133 ++++++++
 .../yarn/server/scheduler/SchedulerRequestKey.java |   4 +-
 .../yarn/server/uam/UnmanagedAMPoolManager.java    |   2 +-
 .../server/uam/UnmanagedApplicationManager.java    |   2 +-
 .../yarn/server/MockResourceManagerFacade.java     |   2 +-
 .../hadoop/yarn/server/TestAMRMClientRelayer.java  | 275 ++++++++++++++++
 .../amrmproxy/FederationInterceptor.java           |   2 +-
 .../resourcemanager/ApplicationMasterService.java  |   2 +-
 .../TestApplicationMasterLauncher.java             |   2 +-
 15 files changed, 1110 insertions(+), 130 deletions(-)

commit f749517cc78fc761cecff21e8b7f65fb719bfca2
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri May 18 10:43:53 2018 +0800

    HDFS-13573. Javadoc for BlockPlacementPolicyDefault is inaccurate. Contributed by Zsolt Venczel.

 .../server/blockmanagement/BlockPlacementPolicyDefault.java | 13 +++++++++----
 1 file changed, 9 insertions(+), 4 deletions(-)

commit 8783613696674aba4ae1739c6e8f48cda0d1c386
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 19:26:44 2018 -0700

    HDFS-13586. Fsync fails on directories on Windows. Contributed by Lukas Majercack.

 .../hadoop-common/src/main/java/org/apache/hadoop/io/IOUtils.java  | 7 +++++++
 1 file changed, 7 insertions(+)

commit 2f2dd22aad4a003228b9efe3b4c506a6922d09d8
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 20:58:13 2018 -0400

    YARN-8296.  Removed unique_component_support from YARN services.
                Contributed by Suma Shivaprasad

 .../src/main/resources/definition/YARN-Services-Examples.md         | 1 -
 .../src/site/markdown/yarn-service/YarnServiceAPI.md                | 3 +--
 .../hadoop-yarn-ui/src/main/webapp/app/models/yarn-servicedef.js    | 4 ----
 .../webapp/app/templates/components/service-component-table.hbs     | 6 ------
 4 files changed, 1 insertion(+), 13 deletions(-)

commit 989cfdc1e0f1c27b35679c668a9bde6a0be845b5
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 20:56:04 2018 -0400

    YARN-8141.  Removed YARN_CONTAINER_RUNTIME_DOCKER_LOCAL_RESOURCE_MOUNTS flag.
                Contributed by Chandni Singh

 .../containerlaunch/TestAbstractLauncher.java      | 54 ++++++++++++++++++++++
 1 file changed, 54 insertions(+)

commit 53b807a6a8486cefe0b036f7893de9f619bd44a1
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 17:03:23 2018 -0700

    HDFS-13560. Insufficient system resources exist to complete the requested service for some tests on Windows. Contributed by Anbang Hu.

 .../src/main/java/org/apache/hadoop/util/Shell.java       | 15 +++++++++++++++
 .../hadoop/hdfs/server/datanode/TestDirectoryScanner.java |  3 ++-
 .../datanode/fsdataset/impl/LazyPersistTestCase.java      |  3 ++-
 .../hadoop/hdfs/server/namenode/TestNameNodeMXBean.java   |  7 +++++--
 4 files changed, 24 insertions(+), 4 deletions(-)

commit a97a2042f210e9db97646baad6f56064d672f447
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 16:53:23 2018 -0700

    HDFS-13556. TestNestedEncryptionZones does not shut down cluster. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/TestNestedEncryptionZones.java   | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 7c485a6701275578cb22392168b2b31726121ceb
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 16:13:28 2018 -0700

    HDDS-38. Add SCMNodeStorage map in SCM class to store storage statistics per Datanode.
    Contributed by Shashikant Banerjee.

 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   |  10 +
 .../common/src/main/resources/ozone-default.xml    |  19 ++
 .../container/placement/metrics/SCMNodeStat.java   |  21 ++
 .../hdds/scm/node/SCMNodeStorageStatMXBean.java    |  69 +++++
 .../hdds/scm/node/SCMNodeStorageStatMap.java       | 277 +++++++++++++++++++++
 .../hdds/scm/node/TestSCMNodeStorageStatMap.java   | 188 ++++++++++++++
 6 files changed, 584 insertions(+)

commit e0367d3b248d47fc95e5df5d772f93663319c3b8
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 17 14:58:09 2018 -0700

    HDDS-73. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../acceptance-test/src/test/compose/docker-config |   1 +
 .../robotframework/acceptance/ozone-shell.robot    | 235 +++++++++++++++++++++
 .../src/test/robotframework/acceptance/ozone.robot |  32 ---
 3 files changed, 236 insertions(+), 32 deletions(-)

commit 65476458fa05656010809be632356e4015b59a17
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 14:48:04 2018 -0700

    HDFS-13554. TestDatanodeRegistration#testForcedRegistration does not shut down cluster. Contributed by Anbang Hu.

 .../hadoop/hdfs/TestDatanodeRegistration.java      | 149 +++++++++++----------
 1 file changed, 78 insertions(+), 71 deletions(-)

commit d45a0b7d73519acb78cd94ac3186bd8481f6c13e
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:29:34 2018 -0400

    YARN-8141.  Removed YARN_CONTAINER_RUNTIME_DOCKER_LOCAL_RESOURCE_MOUNTS flag.
                Contributed by Chandni Singh

 .../service/containerlaunch/AbstractLauncher.java  | 26 ++++++++++------
 .../linux/runtime/DockerLinuxContainerRuntime.java | 35 ++++------------------
 .../linux/runtime/TestDockerContainerRuntime.java  | 31 ++++---------------
 .../src/site/markdown/DockerContainers.md          |  1 -
 4 files changed, 28 insertions(+), 65 deletions(-)

commit 7f083ed8699a720d3fb82e4ec310356902a6ac30
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:16:50 2018 -0400

    YARN-8080.  Add restart policy for YARN services.
                Contributed by Suma Shivaprasad

 .../YARN-Simplified-V1-API-Layer-For-Services.yaml |   8 +
 .../hadoop/yarn/service/ClientAMService.java       |   7 +-
 .../apache/hadoop/yarn/service/ServiceContext.java |   4 +
 .../apache/hadoop/yarn/service/ServiceManager.java |  25 +-
 .../hadoop/yarn/service/ServiceScheduler.java      |  73 +++-
 .../hadoop/yarn/service/api/records/Component.java |  71 +++
 .../service/component/AlwaysRestartPolicy.java     |  82 ++++
 .../hadoop/yarn/service/component/Component.java   | 209 +++++++--
 .../service/component/ComponentRestartPolicy.java  |  45 ++
 .../yarn/service/component/NeverRestartPolicy.java |  82 ++++
 .../service/component/OnFailureRestartPolicy.java  |  87 ++++
 .../component/instance/ComponentInstance.java      |  91 ++--
 .../hadoop/yarn/service/utils/ServiceUtils.java    |  18 +
 .../hadoop/yarn/service/ServiceTestUtils.java      |  46 +-
 .../hadoop/yarn/service/TestServiceManager.java    |   6 +-
 .../yarn/service/component/TestComponent.java      |  99 ++++-
 .../component/TestComponentRestartPolicy.java      | 130 ++++++
 .../component/instance/TestComponentInstance.java  | 484 ++++++++++++++++++++-
 .../site/markdown/yarn-service/YarnServiceAPI.md   |   2 +
 19 files changed, 1447 insertions(+), 122 deletions(-)

commit 7802af6e9a85f033e9515cc7b23c125a0e06c325
Author: Eric Yang <eyang@apache.org>
Date:   Thu May 17 17:06:58 2018 -0400

    YARN-8293.  Removed "User Name for service" for deploying secure YARN service.
                Contributed by Sunil G

 .../main/webapp/app/adapters/yarn-servicedef.js    |  4 ++-
 .../main/webapp/app/components/deploy-service.js   |  5 ++++
 .../src/main/webapp/app/initializers/loader.js     | 32 ++++++++++++++++++++++
 .../src/main/webapp/app/services/hosts.js          |  5 ++++
 .../app/templates/components/deploy-service.hbs    | 18 ++++++------
 .../src/main/webapp/config/default-config.js       |  3 +-
 6 files changed, 57 insertions(+), 10 deletions(-)

commit 26f1e22fc9ee326e9c76503d347552faeb6c2d3b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 13:35:09 2018 -0700

    HDFS-13558. TestDatanodeHttpXFrame does not shut down cluster. Contributed by Anbang Hu.

 .../datanode/web/TestDatanodeHttpXFrame.java       | 30 +++++++++++++++-------
 1 file changed, 21 insertions(+), 9 deletions(-)

commit 328f0847e3d98cad8c368d57499f31081c153237
Author: Vinod Kumar Vavilapalli (I am also known as @tshooter.) <vinodkv@apache.org>
Date:   Thu May 17 12:47:10 2018 -0700

    YARN-8128. Documenting the per-node per-app file limit in YARN log aggregation. Contributed by Xuan Gong.

 .../org/apache/hadoop/yarn/conf/YarnConfiguration.java  | 10 ++++++++++
 .../filecontroller/LogAggregationFileController.java    | 17 ++++++-----------
 .../src/main/resources/yarn-default.xml                 |  9 +++++++++
 3 files changed, 25 insertions(+), 11 deletions(-)

commit a2cdffb95acbcb3625ee72ebc8aeb8bf17fa4bc7
Author: Miklos Szegedi <szegedim@apache.org>
Date:   Thu May 17 10:13:43 2018 -0700

    MAPREDUCE-7094. LocalDistributedCacheManager leaves classloaders open, which leaks FDs. Contributed by Adam Szita.

 .../mapred/LocalDistributedCacheManager.java       | 31 ++++++++++++++++++----
 .../org/apache/hadoop/mapred/LocalJobRunner.java   | 14 +++++++---
 2 files changed, 36 insertions(+), 9 deletions(-)

commit cc3600aabdca6e8b14c9fe02fe54073bf4ef7685
Author: Steve Loughran <stevel@apache.org>
Date:   Thu May 17 19:08:05 2018 +0100

    HADOOP-15469. S3A directory committer commit job fails if _temporary directory created under dest.
    Contributed by Steve Loughran.
    
    (cherry picked from commit 170f1040d46f9b1a084e6637def91e9864446acc)

 .../hadoop/fs/s3a/commit/staging/DirectoryStagingCommitter.java   | 7 ++-----
 .../s3a/commit/staging/TestStagingDirectoryOutputCommitter.java   | 8 +++-----
 2 files changed, 5 insertions(+), 10 deletions(-)

commit c0ec061e280c0d3e5299c0735c8b8697e0f31216
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 17 09:21:57 2018 -0700

    HDFS-13570. TestQuotaByStorageType,TestQuota,TestDFSOutputStream fail on Windows. Contributed by Anbang Hu.

 .../apache/hadoop/hdfs/TestDFSOutputStream.java    |  2 +-
 .../java/org/apache/hadoop/hdfs/TestQuota.java     | 48 ++++++++++++----------
 .../server/namenode/TestQuotaByStorageType.java    | 11 ++---
 3 files changed, 30 insertions(+), 31 deletions(-)

commit 59bde09920fc6a1552eb31e83bbc8fc8a0f2cf22
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:52:00 2018 -0700

    HDDS-3. Send NodeReport and ContainerReport when datanodes register. Contributed by Bharat Viswanadham.

 .../states/datanode/RunningDatanodeState.java      |  1 +
 .../states/endpoint/RegisterEndpointTask.java      | 37 +++++++++++--
 .../protocol/StorageContainerDatanodeProtocol.java |  8 +--
 .../protocol/StorageContainerNodeProtocol.java     |  4 +-
 ...inerDatanodeProtocolClientSideTranslatorPB.java |  8 ++-
 ...inerDatanodeProtocolServerSideTranslatorPB.java |  9 +++-
 .../proto/StorageContainerDatanodeProtocol.proto   |  2 +
 .../hadoop/ozone/container/common/ScmTestMock.java | 60 +++++++++++++++++++---
 .../hadoop/hdds/scm/node/SCMNodeManager.java       |  6 ++-
 .../hdds/scm/server/SCMDatanodeProtocolServer.java | 16 ++++--
 .../java/org/apache/hadoop/hdds/scm/TestUtils.java | 23 ++++++++-
 .../hadoop/hdds/scm/container/MockNodeManager.java |  4 +-
 .../hadoop/hdds/scm/node/TestNodeManager.java      |  3 +-
 .../ozone/container/common/TestEndPoint.java       | 32 +++++++++---
 .../testutils/ReplicationNodeManagerMock.java      |  5 +-
 15 files changed, 186 insertions(+), 32 deletions(-)

commit 41ae5c50024e3682b61df6f391d0fe63591ac92b
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 17 08:31:44 2018 -0700

    HDDS-77. Key replication factor and type should be stored per key by Ozone Manager. Contributed by Mukul Kumar Singh.

 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       | 36 ++++++++++++++++++++--
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  2 --
 .../src/main/proto/KeySpaceManagerProtocol.proto   | 10 +++---
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    | 19 +++---------
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  6 ----
 5 files changed, 44 insertions(+), 29 deletions(-)

commit 0ce6290de6a08beab01cb5184d366d97c9abd811
Author: Kihwal Lee <kihwal@apache.org>
Date:   Thu May 17 09:23:24 2018 -0500

    HDFS-13581. DN UI logs link is broken when https is enabled. Contributed by Shashikant Banerjee.

 hadoop-hdfs-project/hadoop-hdfs/src/main/webapps/datanode/datanode.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c95795cd8f649c45f05df1d5faa1dcabd30d7a6e
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Thu May 17 16:24:51 2018 +0530

    YARN-8297. Incorrect ATS Url used for Wire encrypted cluster. Contributed by Sunil G.

 .../src/main/webapp/app/initializers/loader.js     | 50 +++++++++++++++++++---
 1 file changed, 44 insertions(+), 6 deletions(-)

commit 454de3b543c8b00a9ab566c7d1c64d7e4cffee0f
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 19:23:02 2018 -0700

    HDFS-13559. TestBlockScanner does not close TestContext properly. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/server/datanode/TestBlockScanner.java     | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit be539690477f7fee8f836bf3612cbe7ff6a3506e
Author: Jason Lowe <jlowe@apache.org>
Date:   Wed May 16 16:17:28 2018 -0500

    YARN-8071. Add ability to specify nodemanager environment variables individually. Contributed by Jim Brennan

 .../java/org/apache/hadoop/yarn/util/Apps.java     | 33 ++++++--
 .../src/main/resources/yarn-default.xml            | 11 ++-
 .../containermanager/launcher/ContainerLaunch.java | 15 ++--
 .../launcher/TestContainerLaunch.java              | 94 +++++++++++++++++++++-
 4 files changed, 134 insertions(+), 19 deletions(-)

commit e3b7d7ac1694b8766ae11bc7e8ecf09763bb26db
Author: Haibo Chen <haibochen@apache.org>
Date:   Wed May 16 10:29:38 2018 -0700

    YARN-7933. [atsv2 read acls] Add TimelineWriter#writeDomain. (Rohith Sharma K S via Haibo Chen)

 .../records/timelineservice/TimelineDomain.java    | 178 +++++++++++++++++++++
 .../storage/TestHBaseTimelineStorageDomain.java    | 126 +++++++++++++++
 .../storage/HBaseTimelineWriterImpl.java           |  46 ++++++
 .../storage/domain/DomainTableRW.java              |   2 +-
 .../collector/TimelineCollector.java               |  28 ++++
 .../collector/TimelineCollectorWebService.java     |  50 ++++++
 .../storage/FileSystemTimelineWriterImpl.java      |   9 ++
 .../timelineservice/storage/TimelineWriter.java    |  15 ++
 .../collector/TestTimelineCollector.java           |  32 ++++
 9 files changed, 485 insertions(+), 1 deletion(-)

commit 0fc988e6a3dc6b435cbeea680549c06ef6147e3f
Author: Arpit Agarwal <arp@apache.org>
Date:   Wed May 16 11:28:39 2018 -0700

    HDFS-13512. WebHdfs getFileStatus doesn't return ecPolicy. Contributed by Ajay Kumar.

 .../org/apache/hadoop/hdfs/web/JsonUtilClient.java | 16 ++++++++
 .../java/org/apache/hadoop/hdfs/web/JsonUtil.java  | 19 +++++++++
 .../org/apache/hadoop/hdfs/web/TestJsonUtil.java   | 48 +++++++++++++++++++++-
 3 files changed, 82 insertions(+), 1 deletion(-)

commit 55d5549087183cb9c8d805e33267acabe9537667
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 10:08:49 2018 -0700

    HDFS-13550.TestDebugAdmin#testComputeMetaCommand fails on Windows. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/tools/DebugAdmin.java   | 30 ++++++++++++++--------
 .../apache/hadoop/hdfs/tools/TestDebugAdmin.java   |  2 +-
 2 files changed, 20 insertions(+), 12 deletions(-)

commit 91357c22ef0fb89652dd2898cf488b47234452ce
Author: Eric Yang <eyang@apache.org>
Date:   Wed May 16 12:38:26 2018 -0400

    YARN-8300.  Fixed NPE in DefaultUpgradeComponentsFinder.
                Contributed by Suma Shivaprasad

 .../yarn/service/UpgradeComponentsFinder.java      | 104 +++++++++++----------
 .../TestDefaultUpgradeComponentsFinder.java        |  30 +++++-
 2 files changed, 84 insertions(+), 50 deletions(-)

commit 6b67161ca33881d5f3d7606a57786e9c960759a1
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 16 09:31:46 2018 -0700

    HDFS-13557. TestDFSAdmin#testListOpenFiles fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/tools/TestDFSAdmin.java    | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d47c09dcb146d0a1cb50486f453a67560812fe5c
Author: Jason Lowe <jlowe@apache.org>
Date:   Wed May 16 09:23:49 2018 -0500

    YARN-8284. get_docker_command refactoring. Contributed by Eric Badger

 .../container-executor/impl/utils/docker-util.c    | 132 ++-------------------
 .../test/utils/test_docker_util.cc                 |  58 ++++-----
 2 files changed, 42 insertions(+), 148 deletions(-)

commit 0a2286033637843a6756e09b9b1acdf12a3d90a4
Author: Dinesh Chitlangia <dineshchitlangia@gmail.com>
Date:   Wed May 16 17:25:31 2018 +0900

    YARN-8123. Skip compiling old hamlet package when the Java version is 10 or upper
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/pom.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d3b39de89809f5eed06f85f00ab223e2f75e49c
Author: Eric Yang <eyang@apache.org>
Date:   Tue May 15 20:40:39 2018 -0400

    YARN-8081.  Add support to upgrade a component.
                Contributed by Chandni Singh

 .../yarn/service/client/ApiServiceClient.java      |  51 +++++++++-
 .../hadoop/yarn/service/webapp/ApiServer.java      | 112 +++++++++++++++++----
 .../hadoop/yarn/service/ServiceClientTest.java     |  41 +++++---
 .../apache/hadoop/yarn/service/TestApiServer.java  |  71 ++++++++++++-
 .../yarn/service/client/TestApiServiceClient.java  |  12 +++
 .../yarn/service/api/records/ComponentState.java   |   2 +-
 .../hadoop/yarn/service/client/ServiceClient.java  |  11 ++
 .../hadoop/yarn/service/conf/RestApiConstants.java |   2 +
 .../service/exceptions/RestApiErrorMessages.java   |   6 ++
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  |  53 +++++++++-
 .../hadoop/yarn/service/client/TestServiceCLI.java |  18 ++++
 .../hadoop/yarn/client/api/AppAdminClient.java     |  12 +++
 .../hadoop/yarn/client/cli/ApplicationCLI.java     |  17 +++-
 .../apache/hadoop/yarn/client/cli/TestYarnCLI.java |   3 +
 14 files changed, 367 insertions(+), 44 deletions(-)

commit 63480976a008bab0b84f4da08b1099867e5a9a6b
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 15:34:54 2018 -0700

    HDFS-13567. TestNameNodeMetrics#testGenerateEDEKTime,TestNameNodeMetrics#testResourceCheck should use a different cluster basedir. Contributed by Anbang Hu.

 .../hadoop/hdfs/server/namenode/metrics/TestNameNodeMetrics.java  | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 2d6195c0af4a1840172899ce70bca4ca549eb713
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 11:20:32 2018 -0700

    HDFS-13548. TestResolveHdfsSymlink#testFcResolveAfs fails on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/fs/TestResolveHdfsSymlink.java      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit eaca7980ad2a750f6b0025a706062740c2ddded2
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 10:27:36 2018 -0700

    HDFS-11700. TestHDFSServerPorts#testBackupNodePorts doesn't pass on Windows. Contributed by Anbang Hu.

 .../src/test/java/org/apache/hadoop/hdfs/TestHDFSServerPorts.java    | 5 +++++
 1 file changed, 5 insertions(+)

commit 92ebd466c75275118107e6ec665cf50e337a29e7
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Tue May 15 10:21:42 2018 -0700

    HDFS-13551. TestMiniDFSCluster#testClusterSetStorageCapacity does not shut down cluster. Contributed by Anbang Hu.

 .../org/apache/hadoop/hdfs/TestMiniDFSCluster.java | 44 ++++++++++++----------
 1 file changed, 25 insertions(+), 19 deletions(-)

commit 07d8505f75ec401e5847fe158dad765ce5175fab
Author: Steve Loughran <stevel@apache.org>
Date:   Tue May 15 16:19:03 2018 +0100

    HADOOP-15466. Correct units in adl.http.timeout.
    Contributed by Sean Mackrory,

 .../hadoop-common/src/main/resources/core-default.xml                 | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b6708374692e6c4d786e2f3f1f45cc7aa1e4e88f
Author: Steve Loughran <stevel@apache.org>
Date:   Tue May 15 16:13:56 2018 +0100

    HADOOP-15442. ITestS3AMetrics.testMetricsRegister can't know metrics source's name.
    Contributed by Sean Mackrory.

 .../src/main/java/org/apache/hadoop/fs/s3a/S3AInstrumentation.java   | 3 ---
 .../src/test/java/org/apache/hadoop/fs/s3a/ITestS3AMetrics.java      | 5 -----
 2 files changed, 8 deletions(-)

commit 2bb647bb91439e82cf7298e963bb5f7f80bbc3cb
Author: Weiwei Yang <wwei@apache.org>
Date:   Tue May 15 17:28:19 2018 +0800

    YARN-8278. DistributedScheduling is not working in HA. Contributed by Bibin A Chundatt.

 .../hadoop/yarn/server/api/ServerRMProxy.java      | 11 +++--
 .../hadoop/yarn/server/api/TestServerRMProxy.java  | 52 ++++++++++++++++++++++
 2 files changed, 60 insertions(+), 3 deletions(-)

commit 58b97c79e34901938d59acc84ed48c1f9344996a
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:17:35 2018 +0530

    YARN-8236. Invalid kerberos principal file name cause NPE in native service. Contributed by Gour Saha.

 .../hadoop/yarn/service/client/ServiceClient.java  | 46 ++++++++++++----------
 .../service/exceptions/RestApiErrorMessages.java   |  2 +
 .../hadoop/yarn/service/utils/ServiceApiUtil.java  | 38 ++++++++++++------
 .../hadoop/yarn/service/TestServiceApiUtil.java    | 41 +++++++++++++++++++
 4 files changed, 93 insertions(+), 34 deletions(-)

commit ffb9210dedb79a56075448dc296251896bed49e6
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:13:04 2018 +0530

    YARN-8166. [UI2] Service page header links are broken. Contributed by Yesha Vora.

 .../src/main/webapp/app/controllers/yarn-component-instance.js          | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 796b2b0ee36e8e9225fb76ae35edc58ad907b737
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 15 12:01:28 2018 +0530

    YARN-8266. [UI2] Clicking on application from cluster view should redirect to application attempt page. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/utils/href-address-utils.js      | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d00a0c71b5dde31e2cf8fcb96d9d541d41fb879
Author: Haibo Chen <haibochen@apache.org>
Date:   Mon May 14 11:08:42 2018 -0700

    YARN-8130 Race condition when container events are published for KILLED applications. (Rohith Sharma K S via Haibo Chen)

 .../timelineservice/NMTimelineEvent.java           |  12 ++-
 .../timelineservice/NMTimelineEventType.java       |   3 +
 .../timelineservice/NMTimelinePublisher.java       |  23 +++--
 .../timelineservice/TestNMTimelinePublisher.java   | 102 ++++++++++++++++++---
 4 files changed, 113 insertions(+), 27 deletions(-)

commit 6beb25ab7e4f5454dba0315a296081e61753f301
Author: Hanisha Koneru <hanishakoneru@apache.org>
Date:   Mon May 14 10:12:08 2018 -0700

    HDFS-13544. Improve logging for JournalNode in federated cluster.

 .../hadoop/hdfs/qjournal/server/Journal.java       | 115 ++++++++++++---------
 1 file changed, 64 insertions(+), 51 deletions(-)

commit 6653f4ba2ee21e6deb3736b41381451428f620e0
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Mon May 14 22:25:03 2018 +0530

    HDDS-19. Update ozone to latest ratis snapshot build (0.1.1-alpha-d7d7061-SNAPSHOT). Contributed by Lokesh Jain.

 .../org/apache/hadoop/hdds/scm/ScmConfigKeys.java  | 13 +++++++++
 .../org/apache/hadoop/ozone/OzoneConfigKeys.java   | 11 ++++++++
 .../common/src/main/resources/ozone-default.xml    | 12 ++++++++
 .../transport/server/ratis/XceiverServerRatis.java | 33 ++++++++++++++++++++--
 hadoop-project/pom.xml                             | 10 ++-----
 5 files changed, 69 insertions(+), 10 deletions(-)

commit 960940e0e08f7839775f2d8a352b444d104d36b4
Author: Xiao Chen <xiao@apache.org>
Date:   Mon May 14 09:28:09 2018 -0700

    HDFS-13539. DFSStripedInputStream NPE when reportCheckSumFailure.

 .../org/apache/hadoop/hdfs/DFSInputStream.java     | 13 ++++++++++-
 .../apache/hadoop/hdfs/DFSStripedInputStream.java  |  8 ++++---
 .../hadoop/hdfs/TestDFSStripedInputStream.java     | 25 ++++++++++++++++++++++
 3 files changed, 42 insertions(+), 4 deletions(-)

commit fc5d49c202354c6f39b33ea3f80f38e85794c6b3
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 14 09:09:25 2018 -0700

    HDDS-29. Fix TestStorageContainerManager#testRpcPermission. Contributed by  Mukul Kumar Singh.

 .../hdds/scm/server/SCMClientProtocolServer.java   | 15 ++++++++++--
 .../hdds/scm/server/StorageContainerManager.java   |  9 +-------
 .../hadoop/ozone/TestStorageContainerManager.java  | 27 +++++++++++-----------
 3 files changed, 28 insertions(+), 23 deletions(-)

commit 8a2b5914f3a68148f40f99105acf5dafcc326e89
Author: Naganarasimha <naganarasimha_gr@apache.org>
Date:   Tue May 15 00:03:38 2018 +0800

    YARN-8288. Fix wrong number of table columns in Resource Model doc. Contributed by Weiwei Yang.

 .../hadoop-yarn-site/src/site/markdown/ResourceModel.md      | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 89d0b87ad324db09f14e00031d20635083d576ed
Author: Sunil G <sunilg@apache.org>
Date:   Mon May 14 20:59:31 2018 +0530

    YARN-8271. [UI2] Improve labeling of certain tables. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-tools.js      | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/helpers/node-menu.js           | 4 ++--
 .../hadoop-yarn-ui/src/main/webapp/app/templates/cluster-overview.hbs | 4 ++--
 .../src/main/webapp/app/templates/components/node-menu-panel.hbs      | 4 ++--
 .../app/templates/components/yarn-queue/capacity-queue-info.hbs       | 2 +-
 .../webapp/app/templates/components/yarn-queue/capacity-queue.hbs     | 2 +-
 .../webapp/app/templates/components/yarn-queue/fair-queue-info.hbs    | 2 +-
 .../main/webapp/app/templates/components/yarn-queue/fair-queue.hbs    | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-tools.hbs       | 4 ++--
 9 files changed, 13 insertions(+), 13 deletions(-)

commit f3f544b00475583c4c9fe52be0d2004390979bd0
Author: Sammi Chen <sammi.chen@intel.com>
Date:   Mon May 14 15:14:02 2018 +0800

    Add 2.9.1 release notes and changes documents

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ++++++++++++++++++
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ++++++
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 +++++++++++++++++++++
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 678 insertions(+), 1 deletion(-)

commit 66c9905b5734472ce64863790c208e1f3775c870
Author: sammichen <sammi.chen@intel.com>
Date:   Mon May 14 14:38:40 2018 +0800

    Revert "Add 2.9.1 release notes and changes documents"
    
    This reverts commit e4dc346d651de4c9af05a9616f8fe6369895d8af.

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ------------------
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ------
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 ---------------------
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 1 insertion(+), 678 deletions(-)

commit e4dc346d651de4c9af05a9616f8fe6369895d8af
Author: littlezhou <wei.zhou@intel.com>
Date:   Mon May 14 14:24:01 2018 +0800

    Add 2.9.1 release notes and changes documents

 .../site/markdown/release/2.9.1/CHANGES.2.9.1.md   | 277 ++++++++++++++++++
 .../markdown/release/2.9.1/RELEASENOTES.2.9.1.md   |  88 ++++++
 .../dev-support/jdiff/Apache_Hadoop_HDFS_2.9.1.xml | 312 +++++++++++++++++++++
 hadoop-project-dist/pom.xml                        |   2 +-
 4 files changed, 678 insertions(+), 1 deletion(-)

commit 32cbd0cfd696a8293ac1c726081da9191cacecee
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 13:37:34 2018 -0700

    HDDS-51. Fix TestDeletedBlockLog#testDeletedBlockTransactions.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/block/TestDeletedBlockLog.java  | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 53c8ebcd0285ca91f7d758084cd91df93af0ffb3
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:18:53 2018 -0700

    HDDS-32. Fix TestContainerDeletionChoosingPolicy#testTopNOrderedChoosingPolicy.
    Contributed by Mukul Kumar Singh.

 .../common/impl/TestContainerDeletionChoosingPolicy.java      | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

commit cd8b9e913e9a27196d5622feab68d679c0b552c5
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:13:13 2018 -0700

    HDDS-53. Fix TestKey#testPutAndGetKeyWithDnRestart.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/ozone/MiniOzoneClusterImpl.java    | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 7e26e1f2166d2238a63a4086061a21e60e253605
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 10:07:32 2018 -0700

    HDDS-52. Fix TestSCMCli#testInfoContainer.
    Contributed by Mukul Kumar Singh.

 .../src/test/java/org/apache/hadoop/ozone/scm/TestSCMCli.java           | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a5449d36312c3de953e05ba8b3b5acf818a0c7e7
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Sat May 12 12:19:13 2018 -0500

    HADOOP-15441. Log kms url and token service at debug level. Contributed by  Gabor Bota

 .../main/java/org/apache/hadoop/crypto/key/kms/KMSClientProvider.java   | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1194ec31d72c3682bf1c97acbfc99c1798fb9c1b
Author: Anu Engineer <aengineer@apache.org>
Date:   Sat May 12 09:57:42 2018 -0700

    HDDS-17. Add node to container map class to simplify state in SCM.
    Contributed by Anu Engineer.

 .../hadoop/hdds/scm/container/ContainerID.java     |   2 +-
 .../hdds/scm/container/states/package-info.java    |   2 +-
 .../hadoop/hdds/scm/exceptions/SCMException.java   |   4 +-
 .../hdds/scm/node/states/Node2ContainerMap.java    | 184 ++++++++++++
 .../hadoop/hdds/scm/node/states/ReportResult.java  |  86 ++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  22 ++
 .../scm/node/states/Node2ContainerMapTest.java     | 308 +++++++++++++++++++++
 .../hadoop/hdds/scm/node/states/package-info.java  |  23 ++
 .../ozone/genesis/GenesisMemoryProfiler.java       |   4 +-
 9 files changed, 631 insertions(+), 4 deletions(-)

commit 413285569a897a4747880ee2c1f23a38609d1362
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Sat May 12 17:40:29 2018 +0530

    HDDS-21. Add support for rename key within a bucket for rest client. Contributed by Lokesh Jain.

 .../hadoop/ozone/client/rest/RestClient.java       | 16 +++++++-
 .../hadoop/ozone/client/rest/headers/Header.java   |  2 +
 .../ozone/client/rest/TestOzoneRestClient.java     | 30 +++++++++++++++
 .../hadoop/ozone/web/handlers/KeyHandler.java      | 45 ++++++++++++++++++++++
 .../apache/hadoop/ozone/web/interfaces/Keys.java   | 31 +++++++++++++++
 5 files changed, 123 insertions(+), 1 deletion(-)

commit 0ff94563b9b62d0426d475dc0f84152b68f1ff0d
Author: Eric Yang <eyang@HW13750.local>
Date:   Fri May 11 22:37:43 2018 -0700

    YARN-8265.  Improve DNS handling on docker IP changes.
                Contributed by Billie Rinaldi

 .../component/instance/ComponentInstance.java      | 45 +++++++++---
 .../apache/hadoop/yarn/service/MockServiceAM.java  | 17 ++++-
 .../apache/hadoop/yarn/service/TestServiceAM.java  | 42 ++++++++++++
 .../linux/runtime/docker/TestDockerClient.java     | 80 ++++++++++++++++++++++
 4 files changed, 173 insertions(+), 11 deletions(-)

commit 6c8e51ca7eaaeef0626658b3c45d446a537e4dc0
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri May 11 18:56:05 2018 -0500

    YARN-7654. Support ENTRY_POINT for docker container. Contributed by Eric Yang

 .../hadoop/yarn/api/ApplicationConstants.java      |   9 +-
 .../service/provider/AbstractProviderService.java  |  91 +++++++++++-----
 .../provider/docker/DockerProviderService.java     |  42 ++++++++
 .../containermanager/launcher/ContainerLaunch.java |  14 +++
 .../linux/runtime/DockerLinuxContainerRuntime.java |  20 ++--
 .../linux/runtime/docker/DockerClient.java         | 115 ++++++++++++--------
 .../linux/runtime/docker/DockerRunCommand.java     |  44 ++++++++
 .../container-executor/impl/container-executor.c   | 116 ++++++++++++++++++++-
 .../container-executor/impl/utils/docker-util.c    |  46 ++++++++
 .../container-executor/impl/utils/docker-util.h    |  14 +++
 .../test/utils/test_docker_util.cc                 |  42 ++++++++
 .../src/site/markdown/DockerContainers.md          |   1 +
 12 files changed, 467 insertions(+), 87 deletions(-)

commit 4b4f24ad5f2b457ad215d469bf28cf9a799812bc
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 13:52:05 2018 -0700

    HDDS-40. Separating packaging of Ozone/HDDS from the main Hadoop.
    Contributed by Elek, Marton.

 .gitignore                                         |   5 +
 dev-support/bin/dist-layout-stitching              |  15 --
 dev-support/bin/ozone-dist-layout-stitching        | 153 +++++++++++++++++++++
 dev-support/bin/ozone-dist-tar-stitching           |  48 +++++++
 hadoop-dist/pom.xml                                | 152 +++++++++++++-------
 hadoop-dist/src/main/compose/ozone/.env            |   2 +-
 .../src/main/compose/ozone/docker-compose.yaml     |   8 +-
 .../hadoop/hdfs/server/namenode/NameNodeUtils.java |   2 +-
 hadoop-ozone/acceptance-test/README.md             |  22 ++-
 .../acceptance-test/dev-support/bin/robot-all.sh   |  18 +++
 .../acceptance-test/dev-support/bin/robot.sh       |  38 +++++
 hadoop-ozone/acceptance-test/pom.xml               |  29 +---
 hadoop-ozone/acceptance-test/src/test/compose/.env |   2 +-
 .../src/test/compose/docker-compose.yaml           |   8 +-
 .../src/test/robotframework/acceptance/ozone.robot |   7 +-
 15 files changed, 394 insertions(+), 115 deletions(-)

commit 50408cfc6987b554f8f8f3d6711f7fa61c6e6d6f
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri May 11 14:07:09 2018 -0700

    YARN-3610. FairScheduler: Add steady-fair-shares to the REST API documentation. (Ray Chiang via Haibo Chen)

 .../src/site/markdown/ResourceManagerRest.md       | 118 +++++++++++++++++++--
 1 file changed, 110 insertions(+), 8 deletions(-)

commit ca612e353fc3e3766868ec0816de035e48b1f5b4
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 11 07:27:35 2018 -0700

    YARN-8243. Flex down should remove instance with largest component instance ID first. Contributed by Gour Saha

 .../apache/hadoop/yarn/service/ServiceManager.java |  5 ++-
 .../apache/hadoop/yarn/service/ServiceMaster.java  | 39 +++++++++------------
 .../hadoop/yarn/service/component/Component.java   | 26 ++++++++------
 .../component/instance/ComponentInstance.java      |  9 +----
 .../yarn/service/TestYarnNativeServices.java       | 40 +++++++++++++++++++++-
 5 files changed, 75 insertions(+), 44 deletions(-)

commit dc912994a1bcb511dfda32a0649cef0c9bdc47d3
Author: Jason Lowe <jlowe@apache.org>
Date:   Fri May 11 14:07:32 2018 -0500

    YARN-8244. TestContainerSchedulerQueuing.testStartMultipleContainers failed. Contributed by Jim Brennan

 .../containermanager/TestContainerManager.java     |  20 ++---
 .../scheduler/TestContainerSchedulerQueuing.java   | 100 +++++++--------------
 2 files changed, 42 insertions(+), 78 deletions(-)

commit ba12e8805e2ae6f125042bfb1d6b3cfc10faf9ed
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:35:21 2018 -0700

    HDDS-25. Simple async event processing for SCM.
    Contributed by Elek, Marton.

 .../apache/hadoop/hdds/server/events/Event.java    |  42 ++++
 .../hadoop/hdds/server/events/EventExecutor.java   |  68 +++++++
 .../hadoop/hdds/server/events/EventHandler.java    |  33 ++++
 .../hadoop/hdds/server/events/EventPublisher.java  |  28 +++
 .../hadoop/hdds/server/events/EventQueue.java      | 213 +++++++++++++++++++++
 .../hdds/server/events/SingleThreadExecutor.java   | 103 ++++++++++
 .../hadoop/hdds/server/events/TypedEvent.java      |  51 +++++
 .../hadoop/hdds/server/events/package-info.java    |  23 +++
 .../hadoop/hdds/server/events/TestEventQueue.java  | 113 +++++++++++
 .../hdds/server/events/TestEventQueueChain.java    |  79 ++++++++
 10 files changed, 753 insertions(+)

commit 1f10a360219c91ac13d31bdb5c8d302b1b45afc3
Author: Haibo Chen <haibochen@apache.org>
Date:   Fri May 11 11:28:05 2018 -0700

    YARN-8268. Fair scheduler: reservable queue is configured both as parent and leaf queue. (Gergo Repas via Haibo Chen)

 .../scheduler/fair/allocation/AllocationFileQueueParser.java   |  5 ++++-
 .../scheduler/fair/TestAllocationFileLoaderService.java        | 10 ++++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)

commit 8f7912e0fee5de608ce8824fa5bd81b01b9a7c38
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 11 14:23:16 2018 -0400

    YARN-8274. Fixed a bug on docker start command.
               Contributed by Jason Lowe

 .../native/container-executor/impl/utils/docker-util.c     | 14 ++++++++++++--
 .../container-executor/test/utils/test_docker_util.cc      |  4 ++--
 2 files changed, 14 insertions(+), 4 deletions(-)

commit c1d64d60f6ef3cb9ed89669501ca5b1efbab3c28
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 11:08:45 2018 -0700

    HDDS-39. Ozone: Compile Ozone/HDFS/Cblock protobuf files with proto3 compiler using maven protoc plugin.
    Contributed by Mukul Kumar Singh.

 .../org/apache/hadoop/hdds/scm/XceiverClient.java  | 16 +++----
 .../hadoop/hdds/scm/XceiverClientHandler.java      | 10 ++---
 .../hadoop/hdds/scm/XceiverClientInitializer.java  | 18 ++++----
 .../hadoop/hdds/scm/XceiverClientMetrics.java      |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientRatis.java | 18 ++++----
 .../hdds/scm/client/ContainerOperationClient.java  |  5 ++-
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  6 +--
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  8 ++--
 hadoop-hdds/common/pom.xml                         | 52 +++++++++++++++++++++-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  2 +-
 .../apache/hadoop/hdds/scm/XceiverClientSpi.java   |  4 +-
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  3 +-
 .../common/helpers/StorageContainerException.java  |  2 +-
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 40 +++++++++--------
 .../ozone/container/common/helpers/ChunkInfo.java  |  2 +-
 .../ozone/container/common/helpers/KeyData.java    |  2 +-
 .../com/google/protobuf/ShadedProtoUtil.java       | 38 ----------------
 .../shaded/com/google/protobuf/package-info.java   | 22 ---------
 .../src/main/proto/DatanodeContainerProtocol.proto |  2 +-
 .../ozone/container/common/helpers/ChunkUtils.java | 36 +++++++--------
 .../container/common/helpers/ContainerData.java    |  4 +-
 .../container/common/helpers/ContainerMetrics.java |  2 +-
 .../container/common/helpers/ContainerUtils.java   |  6 +--
 .../ozone/container/common/helpers/FileUtils.java  |  4 +-
 .../ozone/container/common/helpers/KeyUtils.java   | 10 ++---
 .../container/common/impl/ChunkManagerImpl.java    | 10 ++---
 .../common/impl/ContainerManagerImpl.java          | 42 ++++++++---------
 .../ozone/container/common/impl/Dispatcher.java    | 26 +++++------
 .../container/common/impl/KeyManagerImpl.java      |  6 +--
 .../container/common/interfaces/ChunkManager.java  |  2 +-
 .../common/interfaces/ContainerDispatcher.java     |  4 +-
 .../background/BlockDeletingService.java           |  5 ++-
 .../common/transport/server/XceiverServer.java     | 15 ++++---
 .../transport/server/XceiverServerHandler.java     |  8 ++--
 .../transport/server/XceiverServerInitializer.java | 18 ++++----
 .../server/ratis/ContainerStateMachine.java        | 25 +++++------
 .../scm/cli/container/InfoContainerHandler.java    |  5 ++-
 .../ozone/client/io/ChunkGroupInputStream.java     |  2 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  2 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++---
 .../container/common/TestBlockDeletingService.java |  2 +-
 .../common/impl/TestContainerPersistence.java      |  6 +--
 .../container/metrics/TestContainerMetrics.java    |  8 ++--
 .../container/ozoneimpl/TestOzoneContainer.java    |  3 +-
 .../container/server/TestContainerServer.java      | 10 +++--
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  2 +-
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java | 12 +++--
 .../apache/hadoop/ozone/web/client/TestKeys.java   |  2 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 27 ++++++-----
 hadoop-project/pom.xml                             | 11 +++--
 51 files changed, 292 insertions(+), 287 deletions(-)

commit 3a93af731ee09307b6f07e0fc739d1b5653cf69d
Author: Anu Engineer <aengineer@apache.org>
Date:   Fri May 11 10:20:04 2018 -0700

    HDDS-47. Add acceptance tests for Ozone Shell.
    Contributed by Lokesh Jain.

 .../src/test/robotframework/acceptance/ozone.robot | 24 ++++++++++++++++++++--
 .../hadoop/ozone/client/OzoneClientUtils.java      |  1 +
 2 files changed, 23 insertions(+), 2 deletions(-)

commit d50c4d71dc42576f96ae5c268856fd1a7795f936
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 11 09:47:57 2018 -0700

    HDFS-13542. TestBlockManager#testNeededReplicationWhileAppending fails due to improper cluster shutdown in TestBlockManager#testBlockManagerMachinesArray on Windows. Contributed by Anbang Hu.

 .../server/blockmanagement/TestBlockManager.java   | 155 +++++++++++----------
 1 file changed, 85 insertions(+), 70 deletions(-)

commit a922b9c82cc564e86dc0ef84bcc3597cb7b7c211
Author: Yiqun Lin <yqlin@apache.org>
Date:   Fri May 11 14:51:30 2018 +0800

    HDFS-13346. RBF: Fix synchronization of router quota and nameservice quota.

 .../federation/router/RouterAdminServer.java       | 28 +++++++++++++-
 .../federation/router/TestRouterAdminCLI.java      | 10 +++++
 .../server/federation/router/TestRouterQuota.java  | 43 +++++++++++++++++++++-
 3 files changed, 79 insertions(+), 2 deletions(-)

commit 9db9cd95bd0348070a286e69e7965c03c9bd39d6
Author: Weiwei Yang <wwei@apache.org>
Date:   Fri May 11 10:47:04 2018 +0800

    YARN-7003. DRAINING state of queues is not recovered after RM restart. Contributed by Tao Yang.

 .../scheduler/capacity/AbstractCSQueue.java        | 15 ++++++
 .../scheduler/capacity/CapacityScheduler.java      |  7 +++
 .../scheduler/capacity/TestQueueState.java         | 60 ++++++++++++++++++++++
 3 files changed, 82 insertions(+)

commit d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98
Author: Vinod Kumar Vavilapalli (I am also known as @tshooter.) <vinodkv@apache.org>
Date:   Thu May 10 19:03:23 2018 -0700

    YARN-8249. Fixed few REST APIs in RMWebServices to have static-user check. Contributed by Sunil Govindan.

 .../webapp/AHSWebServices.java                     |  18 +-
 .../hadoop/yarn/server/webapp/WebServices.java     |   2 +-
 .../resourcemanager/webapp/RMWebServices.java      | 302 +++++++++------------
 .../resourcemanager/webapp/TestRMWebServices.java  |   2 +-
 ...TestRMWebServicesHttpStaticUserPermissions.java |  12 +-
 5 files changed, 142 insertions(+), 194 deletions(-)

commit 84b305f11a67e6f420e33e1ec30640b8214997e1
Author: Bharat Viswanadham <bharat@apache.org>
Date:   Thu May 10 17:24:40 2018 -0700

    HDDS-43: Rename hdsl to hdds in hadoop-ozone/acceptance-test/README.md. Contributed by Sandeep Nemuri

 hadoop-ozone/acceptance-test/README.md | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 30293f6065c9e5b41c07cd670c7a6a1768d1434b
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 17:08:26 2018 -0700

    HDDS-34. Remove .meta file during creation of container
    Contributed by Bharat Viswanadham.

 .../src/main/proto/DatanodeContainerProtocol.proto |  5 ---
 .../container/common/helpers/ContainerData.java    | 27 --------------
 .../container/common/helpers/ContainerUtils.java   | 35 +++---------------
 .../common/impl/ContainerManagerImpl.java          | 42 +++-------------------
 .../scm/cli/container/InfoContainerHandler.java    |  3 --
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    |  2 +-
 6 files changed, 9 insertions(+), 105 deletions(-)

commit db1ab0fc1674177fdbe8f50c557aa4052ce77efc
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 16:27:21 2018 -0700

    HDDS-37. Remove dependency of hadoop-hdds-common and hadoop-hdds-server-scm from hadoop-ozone/tools/pom.xml.
    Contributed by Sandeep Nemuri.

 hadoop-ozone/tools/pom.xml | 12 ------------
 1 file changed, 12 deletions(-)

commit 7369f410202ea0583606aab2b4771c740d45e231
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Thu May 10 14:49:58 2018 -0700

    HDDS-16. Remove Pipeline from Datanode Container Protocol protobuf definition. Contributed by Mukul Kumar Singh.

 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  4 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     | 12 +++++
 .../hdds/scm/storage/ContainerProtocolCalls.java   | 12 ++---
 .../ozone/container/common/helpers/ChunkInfo.java  |  5 +-
 .../ozone/container/common/helpers/KeyData.java    |  7 ++-
 .../src/main/proto/DatanodeContainerProtocol.proto | 63 ++++++++++++++--------
 .../container/common/helpers/ContainerData.java    | 19 +++----
 .../ozone/container/common/impl/Dispatcher.java    |  5 --
 .../scm/cli/container/InfoContainerHandler.java    |  5 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  2 +-
 .../ozone/container/ContainerTestHelper.java       | 10 ++--
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java |  9 ++--
 12 files changed, 85 insertions(+), 68 deletions(-)

commit 48d0b548492a3fc0b072543be81b5e1b0ea1f278
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 12:43:13 2018 -0700

    HDDS-31. Fix TestSCMCli. Contributed by Lokesh Jain.

 .../container/common/helpers/ContainerInfo.java    | 26 +++++++
 .../scm/cli/container/CreateContainerHandler.java  |  8 ++-
 .../scm/cli/container/ListContainerHandler.java    |  8 +--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 80 ++++++++++------------
 4 files changed, 74 insertions(+), 48 deletions(-)

commit f8b540049dbc7916220d6fa95c025c5a854a31f7
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:44:14 2018 -0700

    HDDS-42. Inconsistent module names and descriptions. Contributed by Tsz Wo Nicholas Sze.

 hadoop-hdds/client/pom.xml            | 5 +++--
 hadoop-hdds/common/pom.xml            | 2 +-
 hadoop-hdds/container-service/pom.xml | 4 ++--
 hadoop-hdds/framework/pom.xml         | 4 ++--
 hadoop-hdds/pom.xml                   | 4 ++--
 hadoop-hdds/server-scm/pom.xml        | 4 ++--
 hadoop-hdds/tools/pom.xml             | 4 ++--
 hadoop-ozone/acceptance-test/pom.xml  | 4 ++--
 hadoop-ozone/common/pom.xml           | 2 +-
 hadoop-ozone/integration-test/pom.xml | 4 ++--
 hadoop-ozone/ozone-manager/pom.xml    | 4 ++--
 hadoop-ozone/pom.xml                  | 2 +-
 12 files changed, 22 insertions(+), 21 deletions(-)

commit 7482963f1a250f1791a5164817b608dbf2556433
Author: Anu Engineer <aengineer@apache.org>
Date:   Thu May 10 11:28:35 2018 -0700

    HDDS-30. Fix TestContainerSQLCli. Contributed by Shashikant Banerjee.

 .../hadoop/ozone/scm/TestContainerSQLCli.java      | 23 -------
 .../org/apache/hadoop/ozone/scm/cli/SQLCLI.java    | 73 ++++------------------
 2 files changed, 13 insertions(+), 83 deletions(-)

commit 6341c3a437489737a9c4bf0911b218b0023d8dd9
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 10 11:01:01 2018 -0700

    YARN-7715. Support NM promotion/demotion of running containers. (Miklos Szegedi via Haibo Chen)

 .../resources/CGroupsBlkioResourceHandlerImpl.java |  6 ++
 .../resources/CGroupsCpuResourceHandlerImpl.java   | 75 +++++++++++++---------
 .../CGroupsMemoryResourceHandlerImpl.java          | 73 ++++++++++++---------
 .../resources/NetworkPacketTaggingHandlerImpl.java |  6 ++
 .../linux/resources/ResourceHandler.java           | 16 ++++-
 .../linux/resources/ResourceHandlerChain.java      | 18 ++++++
 .../TrafficControlBandwidthHandlerImpl.java        |  6 ++
 .../resources/fpga/FpgaResourceHandlerImpl.java    |  6 ++
 .../resources/gpu/GpuResourceHandlerImpl.java      |  6 ++
 .../resources/numa/NumaResourceHandlerImpl.java    |  6 ++
 .../scheduler/ContainerScheduler.java              | 30 +++++++++
 .../TestCGroupsCpuResourceHandlerImpl.java         |  1 +
 .../TestCGroupsMemoryResourceHandlerImpl.java      |  1 +
 .../resourceplugin/TestResourcePluginManager.java  |  6 ++
 .../scheduler/TestContainerSchedulerQueuing.java   | 10 +++
 15 files changed, 202 insertions(+), 64 deletions(-)

commit 274eee32841082a734c57f9e383e5e2f02f97f78
Author: Haibo Chen <haibochen@apache.org>
Date:   Thu May 10 10:42:26 2018 -0700

    MAPREDUCE-7095. Race conditions in closing FadvisedChunkedFile. (Miklos Szegedi via Haibo Chen)

 .../java/org/apache/hadoop/io/ReadaheadPool.java   |  6 ++-
 .../apache/hadoop/mapred/FadvisedChunkedFile.java  | 57 +++++++++++++++-------
 .../hadoop/mapred/TestFadvisedChunkedFile.java     | 55 +++++++++++++++++++++
 3 files changed, 98 insertions(+), 20 deletions(-)

commit 1da8d4190d6e574347ab9d3380513e9401569573
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 10 09:41:16 2018 -0700

    HADOOP-15454. TestRollingFileSystemSinkWithLocal fails on Windows. Contributed by Xiao Liang.

 .../sink/TestRollingFileSystemSinkWithLocal.java      | 19 ++++++++++---------
 1 file changed, 10 insertions(+), 9 deletions(-)

commit c8b53c43644b4ad22d5385c22cad8ed573c0b1ba
Author: Robert Kanter <rkanter@apache.org>
Date:   Thu May 10 09:31:59 2018 -0700

    YARN-8202. DefaultAMSProcessor should properly check units of requested custom resource types against minimum/maximum allocation (snemeth via rkanter)

 .../v2/app/rm/ContainerRequestCreator.java         |  57 +++
 .../v2/app/rm/TestRMContainerAllocator.java        | 534 +++++++++++----------
 .../hadoop/yarn/util/UnitsConversionUtil.java      |  44 +-
 .../resourcetypes/ResourceTypesTestHelper.java     |  93 ++++
 .../hadoop/yarn/server/utils/BuilderUtils.java     |   8 +-
 .../resourcemanager/scheduler/SchedulerUtils.java  |  95 +++-
 .../TestApplicationMasterService.java              | 185 +++++--
 .../scheduler/TestSchedulerUtils.java              | 278 ++++++++++-
 8 files changed, 961 insertions(+), 333 deletions(-)

commit ba051b0686ad5190b43ce64552de5f14d1b1461d
Author: Steve Loughran <stevel@hortonworks.com>
Date:   Thu May 10 18:38:08 2018 +0900

    HADOOP-15354. hadoop-aliyun & hadoop-azure modules to mark hadoop-common as provided
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 hadoop-tools/hadoop-aliyun/pom.xml | 2 +-
 hadoop-tools/hadoop-azure/pom.xml  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 46e0f2786259ecd25e9a5a1e51b667f9c32e5c56
Author: Anu Engineer <aengineer@apache.org>
Date:   Wed May 9 21:23:33 2018 -0700

    HDDS-18. Ozone Shell should use RestClient and RpcClient. Contributed by Lokesh Jain.

 .../java/org/apache/hadoop/ozone/OzoneConsts.java  |  12 +-
 .../src/test/compose/docker-compose.yaml           |   1 +
 .../src/test/robotframework/acceptance/ozone.robot |  13 +-
 .../apache/hadoop/ozone/client/ObjectStore.java    |  49 ++--
 .../apache/hadoop/ozone/client/OzoneBucket.java    |  25 +-
 .../OzoneClientException.java}                     |  10 +-
 .../hadoop/ozone/client/OzoneClientFactory.java    |   2 +-
 .../hadoop/ozone/client/OzoneClientUtils.java      |  86 ++++++
 .../apache/hadoop/ozone/client/OzoneVolume.java    |  26 +-
 .../hadoop/ozone/client/rest/RestClient.java       |   8 +-
 .../hadoop/ozone/web/client/OzoneBucket.java       |  47 ++--
 .../hadoop/ozone/web/client/OzoneRestClient.java   |  43 +--
 .../hadoop/ozone/web/client/OzoneVolume.java       |  23 +-
 .../hadoop/ozone/ozShell/TestOzoneShell.java       | 298 ++++++++++++++-------
 .../hadoop/ozone/web/client/TestBuckets.java       |   3 +-
 .../apache/hadoop/ozone/web/client/TestVolume.java |   3 +-
 .../apache/hadoop/ozone/web/ozShell/Handler.java   |  59 ++--
 .../web/ozShell/bucket/CreateBucketHandler.java    |  32 +--
 .../web/ozShell/bucket/DeleteBucketHandler.java    |  20 +-
 .../web/ozShell/bucket/InfoBucketHandler.java      |  25 +-
 .../web/ozShell/bucket/ListBucketHandler.java      |  51 ++--
 .../web/ozShell/bucket/UpdateBucketHandler.java    |  41 +--
 .../ozone/web/ozShell/keys/DeleteKeyHandler.java   |  26 +-
 .../ozone/web/ozShell/keys/GetKeyHandler.java      |  46 ++--
 .../ozone/web/ozShell/keys/InfoKeyHandler.java     |  31 +--
 .../ozone/web/ozShell/keys/ListKeyHandler.java     |  48 ++--
 .../ozone/web/ozShell/keys/PutKeyHandler.java      |  49 ++--
 .../web/ozShell/volume/CreateVolumeHandler.java    |  28 +-
 .../web/ozShell/volume/DeleteVolumeHandler.java    |  18 +-
 .../web/ozShell/volume/InfoVolumeHandler.java      |  38 +--
 .../web/ozShell/volume/ListVolumeHandler.java      |  58 ++--
 .../web/ozShell/volume/UpdateVolumeHandler.java    |  24 +-
 .../java/org/apache/hadoop/fs/ozone/Constants.java |   6 -
 .../main/java/org/apache/hadoop/fs/ozone/OzFs.java |   3 +-
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |   4 +-
 .../hadoop/fs/ozone/TestOzoneFSInputStream.java    |   3 +-
 .../hadoop/fs/ozone/TestOzoneFileInterfaces.java   |   5 +-
 .../hadoop/fs/ozone/contract/OzoneContract.java    |   6 +-
 38 files changed, 747 insertions(+), 523 deletions(-)

commit 3c95ca4f21dcfcaabdd0694e7d005a45baba953f
Author: Vrushali C <vrushali@apache.org>
Date:   Wed May 9 22:17:48 2018 -0700

    YARN-8247 Incorrect HTTP status code returned by ATSv2 for non-whitelisted users.  Contributed by Rohith Sharma K S

 ...TimelineReaderWhitelistAuthorizationFilter.java | 14 +++---
 ...TimelineReaderWhitelistAuthorizationFilter.java | 58 ++++++++++++++--------
 2 files changed, 44 insertions(+), 28 deletions(-)

commit cc0310a5266c8b8351f338f5fc8087a203c68cac
Author: bibinchundatt <bibinchundatt@apache.org>
Date:   Thu May 10 09:15:46 2018 +0530

    YARN-8201. Skip stacktrace of few exception from ClientRMService. Contributed by Bilwa S T.

 .../apache/hadoop/yarn/server/resourcemanager/ClientRMService.java    | 4 ++++
 1 file changed, 4 insertions(+)

commit 914b98a713f70667d4380ac752f6c4de931520d9
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Wed May 9 16:52:09 2018 -0700

    HDFS-13537. TestHdfsHelper does not generate jceks path properly for relative path in Windows. Contributed by Xiao Liang.

 .../src/test/java/org/apache/hadoop/test/TestHdfsHelper.java          | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 1cfe7506f7e9aff808af4ec0e57639130a6d0f35
Author: Sean Mackrory <mackrorysd@apache.org>
Date:   Fri Apr 27 17:17:02 2018 -0600

    HADOOP-15356. Make HTTP timeout configurable in ADLS connector. Contributed by Atul Sikaria and Sean Mackrory.

 .../src/main/resources/core-default.xml            |  9 +++
 .../java/org/apache/hadoop/fs/adl/AdlConfKeys.java |  1 +
 .../org/apache/hadoop/fs/adl/AdlFileSystem.java    | 13 ++++
 .../src/site/markdown/troubleshooting_adl.md       |  9 +++
 .../fs/adl/live/AdlStorageConfiguration.java       | 12 ++--
 .../fs/adl/live/TestAdlSdkConfiguration.java       | 77 ++++++++++++++++++++++
 6 files changed, 117 insertions(+), 4 deletions(-)

commit af4fc2e62805a5bd392214521a93650085b8d020
Author: Eric Yang <eyang@apache.org>
Date:   Wed May 9 13:32:51 2018 -0400

    YARN-8261.  Fixed a bug in creation of localized container directory.
                Contributed by Jason Lowe

 .../containermanager/linux/runtime/docker/DockerClient.java   | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit 343b51dcf48459616c49faae3837593fcec5ed15
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 20:20:21 2018 +0530

    HDDS-28. Ozone:Duplicate declaration in hadoop-tools/hadoop-ozone/pom.xml. Contributed by Tsz Wo Nicholas Sze.

 hadoop-dist/pom.xml               | 10 ++++++----
 hadoop-ozone/tools/pom.xml        |  4 ++++
 hadoop-tools/hadoop-ozone/pom.xml | 25 -------------------------
 3 files changed, 10 insertions(+), 29 deletions(-)

commit 208b97e969cda59827890dfd26f53e3b7f20d7de
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 19:06:07 2018 +0530

    HDDS-20. Ozone: Add support for rename key within a bucket for rpc client. Contributed by Lokesh Jain.

 .../apache/hadoop/ozone/client/OzoneBucket.java    |   8 ++
 .../ozone/client/protocol/ClientProtocol.java      |  10 ++
 .../hadoop/ozone/client/rest/RestClient.java       |   6 ++
 .../apache/hadoop/ozone/client/rpc/RpcClient.java  |  15 +++
 .../hadoop/ozone/ksm/helpers/KsmKeyInfo.java       |   6 +-
 .../ksm/protocol/KeySpaceManagerProtocol.java      |   9 +-
 ...SpaceManagerProtocolClientSideTranslatorPB.java |  27 +++++
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  20 +++-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  44 ++++++++
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      | 115 +++++++++++++++++++++
 .../ozone/web/interfaces/StorageHandler.java       |   9 ++
 .../web/localstorage/LocalStorageHandler.java      |   6 ++
 .../web/storage/DistributedStorageHandler.java     |  11 ++
 .../org/apache/hadoop/ozone/ksm/KSMMetrics.java    |  22 ++++
 .../org/apache/hadoop/ozone/ksm/KeyManager.java    |  10 ++
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |  65 ++++++++++++
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |  11 ++
 .../hadoop/ozone/ksm/exceptions/KSMException.java  |   2 +
 ...SpaceManagerProtocolServerSideTranslatorPB.java |  26 +++++
 .../apache/hadoop/fs/ozone/OzoneFileSystem.java    |  29 ++----
 20 files changed, 427 insertions(+), 24 deletions(-)

commit cd68c7cc6942970285dce04775e80f75a5d55afa
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:17:04 2018 +0530

    YARN-8260. [UI2] Per-application tracking URL is no longer available in YARN UI2. Contributed by Sunil G.

 .../hadoop-yarn/hadoop-yarn-ui/src/main/webapp/app/models/yarn-app.js | 2 ++
 .../src/main/webapp/app/serializers/yarn-app-timeline.js              | 4 +++-
 .../hadoop-yarn-ui/src/main/webapp/app/serializers/yarn-app.js        | 4 +++-
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-app.hbs         | 3 +++
 4 files changed, 11 insertions(+), 2 deletions(-)

commit 9acfaee1f080245744f191a7fd080f91413249a6
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:04:31 2018 +0530

    YARN-8264. [UI2] GPU Info tab disappears if we click any sub link under List of Applications or List of Containers. Contributed by Sunil G.

 .../hadoop-yarn-ui/src/main/webapp/app/routes/yarn-node-container.js    | 1 +
 .../hadoop-yarn-ui/src/main/webapp/app/templates/yarn-node-app.hbs      | 2 +-
 .../src/main/webapp/app/templates/yarn-node-container.hbs               | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

commit eb7b256cc2c74e1b461e45444179584668d34ac6
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Wed May 9 12:00:43 2018 +0530

    YARN-8239. [UI2] Clicking on Node Manager UI under AM container info / App Attempt page goes to old RM UI. Contributed by Sunil G.

 .../hadoop/yarn/server/metrics/AppAttemptMetricsConstants.java      | 5 +++++
 .../server/resourcemanager/metrics/TimelineServiceV2Publisher.java  | 4 ++++
 .../resourcemanager/metrics/TestSystemMetricsPublisherForV2.java    | 3 +++
 .../hadoop-yarn-ui/src/main/webapp/app/components/timeline-view.js  | 6 ++++--
 .../hadoop-yarn-ui/src/main/webapp/app/models/yarn-container.js     | 6 ++++++
 .../src/main/webapp/app/models/yarn-timeline-appattempt.js          | 4 ++++
 .../src/main/webapp/app/models/yarn-timeline-container.js           | 6 ++++++
 .../src/main/webapp/app/serializers/yarn-container.js               | 1 +
 .../src/main/webapp/app/serializers/yarn-timeline-appattempt.js     | 6 +++---
 .../src/main/webapp/app/serializers/yarn-timeline-container.js      | 3 ++-
 .../src/main/webapp/app/templates/components/container-table.hbs    | 2 +-
 11 files changed, 39 insertions(+), 7 deletions(-)

commit 809135082a04208f586ba7fbce705668eb559007
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Wed May 9 10:21:41 2018 +0530

    HDDS-33. Ozone : Fix the test logic in TestKeySpaceManager#testDeleteKey. Contributed by Shashikant Banerjee.

 .../java/org/apache/hadoop/ozone/ksm/TestKeySpaceManager.java    | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 8981674bbcff0663af820f3e87a3eaea5789968a
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 8 18:58:42 2018 -0700

    HADOOP-15420 s3guard ITestS3GuardToolLocal failures in diff tests (Gabor Bota)

 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  | 16 ++++-
 .../s3a/s3guard/AbstractS3GuardToolTestBase.java   | 68 ++++++++++++++++++++++
 .../fs/s3a/s3guard/ITestS3GuardToolLocal.java      | 68 ----------------------
 3 files changed, 83 insertions(+), 69 deletions(-)

commit 69aac696d9d4e32a55ba9b6992f41a9ad13424f1
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Tue May 8 15:29:46 2018 -0700

    HADOOP-13649 s3guard: implement time-based (TTL) expiry for LocalMetadataStore (Gabor Bota)

 .../hadoop/fs/s3a/s3guard/LocalMetadataStore.java  |  93 ++++++++++------
 .../apache/hadoop/fs/s3a/s3guard/LruHashMap.java   |  50 ---------
 .../fs/s3a/s3guard/TestLocalMetadataStore.java     | 121 ++++++++++++++++-----
 3 files changed, 153 insertions(+), 111 deletions(-)

commit 1ef0a1db1d6a412b2a26782329a8325635866d0a
Author: Billie Rinaldi <billie@apache.org>
Date:   Tue May 8 13:49:41 2018 -0700

    YARN-7894. Improve ATS response for DShell DS_CONTAINER when container launch fails. Contributed by Chandni Singh

 .../distributedshell/ApplicationMaster.java        | 98 ++++++++++++++++++----
 .../distributedshell/TestDistributedShell.java     | 10 +++
 2 files changed, 93 insertions(+), 15 deletions(-)

commit a2ea7564209dce896a5badee3949ee41e4bc00bf
Author: Jason Lowe <jlowe@apache.org>
Date:   Tue May 8 15:30:36 2018 -0500

    YARN-8207. Docker container launch use popen have risk of shell expansion. Contributed by Eric Yang.

 .../container-executor/impl/container-executor.c   | 118 ++--
 .../container-executor/impl/container-executor.h   |   5 +
 .../container-executor/impl/utils/docker-util.c    | 611 ++++++++++-----------
 .../container-executor/impl/utils/docker-util.h    |  38 +-
 .../container-executor/impl/utils/string-utils.c   |  24 +
 .../container-executor/impl/utils/string-utils.h   |   4 +
 .../test/utils/test_docker_util.cc                 | 463 +++++++++-------
 7 files changed, 674 insertions(+), 589 deletions(-)

commit 6b96a73bb0f0ad1c877a062b19091e3e15a33ec4
Author: Wangda Tan <wangda@apache.org>
Date:   Tue May 8 11:34:45 2018 -0700

    YARN-8232. RMContainer lost queue name when RM HA happens. (Hu Ziqian via wangda)
    
    Change-Id: Ia21e1da6871570c993bbedde76ce32929e95970f

 .../scheduler/AbstractYarnScheduler.java           |  6 ++-
 .../scheduler/TestAbstractYarnScheduler.java       | 60 ++++++++++++++++++----
 2 files changed, 54 insertions(+), 12 deletions(-)

commit d72c16516184479e82a73d3e211e2883be779908
Author: Mukul Kumar Singh <msingh@apache.org>
Date:   Tue May 8 18:11:33 2018 +0530

    HDDS-23. Remove SCMNodeAddressList from SCMRegisterRequestProto. Contributed by Nanda Kumar.

 .../container/common/states/endpoint/RegisterEndpointTask.java   | 3 +--
 .../hadoop/ozone/protocol/StorageContainerDatanodeProtocol.java  | 7 +++----
 .../StorageContainerDatanodeProtocolClientSideTranslatorPB.java  | 3 +--
 .../StorageContainerDatanodeProtocolServerSideTranslatorPB.java  | 9 +--------
 .../src/main/proto/StorageContainerDatanodeProtocol.proto        | 1 -
 .../org/apache/hadoop/ozone/container/common/ScmTestMock.java    | 4 +---
 .../apache/hadoop/hdds/scm/server/SCMDatanodeProtocolServer.java | 7 +++----
 .../org/apache/hadoop/ozone/container/common/TestEndPoint.java   | 4 +---
 8 files changed, 11 insertions(+), 27 deletions(-)

commit 7450583721757b8af2945ebd9be1a9efed11444c
Author: Rohith Sharma K S <rohithsharmaks@apache.org>
Date:   Tue May 8 12:28:54 2018 +0530

    YARN-8253. HTTPS Ats v2 api call fails with 'bad HTTP parsed'. Contributed by Charan Hebri.

 .../yarn/server/timelineservice/reader/TimelineReaderServer.java | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 2916c90500643f82aabcedd74b349938d8c86518
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 8 11:37:03 2018 +0530

    YARN-8251. [UI2] Clicking on Application link at the header goes to Diagnostics Tab instead of AppAttempt Tab. Contributed by Yesha Vora.

 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-app-attempt.js  | 2 +-
 .../hadoop-yarn-ui/src/main/webapp/app/controllers/yarn-app.js          | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9832265e1deeefaa6d58f9f62052c8ef6a8e82b7
Author: Sunil G <sunilg@apache.org>
Date:   Tue May 8 10:35:19 2018 +0530

    YARN-5151. [UI2] Support kill application from new YARN UI. Contributed by Gergely NovÃ¡k.

 .../src/main/webapp/app/adapters/yarn-app.js       | 13 ++++++--
 .../src/main/webapp/app/controllers/yarn-app.js    | 35 ++++++++++++++++++++
 .../src/main/webapp/app/templates/yarn-app.hbs     | 37 ++++++++++++++++++----
 3 files changed, 76 insertions(+), 9 deletions(-)

commit 08ea90e1e4cd5d4860668a1368f0b0396fbe83e0
Author: Xiaoyu Yao <xyao@apache.org>
Date:   Mon May 7 18:24:00 2018 -0700

    HDDS-27. Fix TestStorageContainerManager#testBlockDeletionTra;nsactions. Contributed by Xiaoyu Yao.

 .../java/org/apache/hadoop/ozone/TestStorageContainerManager.java  | 1 -
 .../org/apache/hadoop/ozone/TestStorageContainerManagerHelper.java | 7 +++----
 2 files changed, 3 insertions(+), 5 deletions(-)

commit 696a4be0daac00dd3bb64801d9fbe659aef9e089
Author: Xiao Chen <xiao@apache.org>
Date:   Mon May 7 15:34:22 2018 -0700

    HDFS-12981. renameSnapshot a Non-Existent snapshot to itself should throw error. Contributed by Kitti Nanasi.

 .../namenode/snapshot/DirectorySnapshottableFeature.java |  6 +++---
 .../org/apache/hadoop/hdfs/TestSnapshotCommands.java     |  5 +++++
 .../server/namenode/snapshot/TestSnapshotRename.java     | 16 ++++++++++++++++
 3 files changed, 24 insertions(+), 3 deletions(-)

commit 3a43ac2851f5dea4deb8a1dfebf9bf65fc57bd76
Author: Anu Engineer <aengineer@apache.org>
Date:   Mon May 7 14:42:18 2018 -0700

    HDDS-1. Remove SCM Block DB. Contributed by Xiaoyu Yao.

 .../src/main/java/org/apache/hadoop/util/Time.java |  12 +
 .../hadoop/hdds/scm/XceiverClientManager.java      |  17 +-
 .../hdds/scm/client/ContainerOperationClient.java  | 121 +++---
 .../hadoop/hdds/scm/storage/ChunkInputStream.java  |  13 +-
 .../hadoop/hdds/scm/storage/ChunkOutputStream.java |  18 +-
 .../org/apache/hadoop/hdds/client/BlockID.java     |  59 +++
 .../apache/hadoop/hdds/scm/client/ScmClient.java   |  46 ++-
 .../container/common/helpers/AllocatedBlock.java   |  20 +-
 .../container/common/helpers/ContainerInfo.java    |  22 +-
 .../common/helpers/DeleteBlockResult.java          |  16 +-
 .../scm/container/common/helpers/Pipeline.java     |  18 +-
 .../container/common/helpers/PipelineChannel.java  |   2 +
 .../scm/protocol/ScmBlockLocationProtocol.java     |  12 -
 .../protocol/StorageContainerLocationProtocol.java |  26 +-
 ...lockLocationProtocolClientSideTranslatorPB.java |  46 +--
 ...inerLocationProtocolClientSideTranslatorPB.java |  60 ++-
 .../hdds/scm/storage/ContainerProtocolCalls.java   |  66 ++--
 .../org/apache/hadoop/ozone/common/BlockGroup.java |  26 +-
 .../ozone/common/DeleteBlockGroupResult.java       |  13 +-
 .../ozone/container/common/helpers/KeyData.java    |  41 +-
 ...lockLocationProtocolServerSideTranslatorPB.java |  38 +-
 ...inerLocationProtocolServerSideTranslatorPB.java |  30 +-
 .../java/org/apache/hadoop/utils/LevelDBStore.java |   4 +-
 .../apache/hadoop/utils/MetadataKeyFilters.java    |  20 +-
 .../java/org/apache/hadoop/utils/RocksDBStore.java |   1 +
 .../src/main/proto/DatanodeContainerProtocol.proto |  82 ++--
 .../src/main/proto/ScmBlockLocationProtocol.proto  |  36 +-
 .../proto/StorageContainerLocationProtocol.proto   |  16 +-
 hadoop-hdds/common/src/main/proto/hdds.proto       |  13 +-
 .../ozone/container/common/helpers/ChunkUtils.java |  20 +-
 .../container/common/helpers/ContainerData.java    |  33 +-
 .../container/common/helpers/ContainerReport.java  |  19 +-
 .../container/common/helpers/ContainerUtils.java   |  14 +-
 .../helpers/DeletedContainerBlocksSummary.java     |  19 +-
 .../ozone/container/common/helpers/FileUtils.java  |   3 +-
 .../ozone/container/common/helpers/KeyUtils.java   |   6 +-
 .../container/common/impl/ChunkManagerImpl.java    |  76 ++--
 .../common/impl/ContainerManagerImpl.java          | 210 ++++++-----
 .../ozone/container/common/impl/Dispatcher.java    | 121 +++---
 .../container/common/impl/KeyManagerImpl.java      |  66 ++--
 .../RandomContainerDeletionChoosingPolicy.java     |   4 +-
 ...TopNOrderedContainerDeletionChoosingPolicy.java |   4 +-
 .../container/common/interfaces/ChunkManager.java  |  19 +-
 .../ContainerDeletionChoosingPolicy.java           |   2 +-
 .../common/interfaces/ContainerManager.java        |  76 ++--
 .../container/common/interfaces/KeyManager.java    |  17 +-
 .../background/BlockDeletingService.java           |   8 +-
 .../commandhandler/CloseContainerHandler.java      |   9 +-
 .../commandhandler/DeleteBlocksCommandHandler.java |   9 +-
 .../states/endpoint/HeartbeatEndpointTask.java     |   2 +-
 .../server/ratis/ContainerStateMachine.java        |  21 +-
 .../container/common/utils/ContainerCache.java     |  36 +-
 .../protocol/commands/CloseContainerCommand.java   |  14 +-
 .../proto/StorageContainerDatanodeProtocol.proto   |   9 +-
 .../hadoop/ozone/container/common/ScmTestMock.java |   2 +-
 .../apache/hadoop/hdds/scm/block/BlockManager.java |  12 +-
 .../hadoop/hdds/scm/block/BlockManagerImpl.java    | 171 ++-------
 .../block/DatanodeDeletedBlockTransactions.java    |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLog.java     |   6 +-
 .../hadoop/hdds/scm/block/DeletedBlockLogImpl.java |  24 +-
 .../hdds/scm/container/ContainerMapping.java       |  80 ++--
 .../hdds/scm/container/ContainerStateManager.java  |  12 +-
 .../apache/hadoop/hdds/scm/container/Mapping.java  |  33 +-
 .../hdds/scm/container/closer/ContainerCloser.java |  16 +-
 .../scm/container/replication/InProgressPool.java  |  10 +-
 .../hadoop/hdds/scm/node/SCMNodePoolManager.java   |   2 +-
 .../hadoop/hdds/scm/pipelines/PipelineManager.java |  15 +-
 .../hdds/scm/pipelines/PipelineSelector.java       |   8 +-
 .../hdds/scm/pipelines/ratis/RatisManagerImpl.java |   2 +-
 .../hdds/scm/server/SCMBlockProtocolServer.java    |  20 +-
 .../hdds/scm/server/SCMClientProtocolServer.java   |  47 +--
 .../hdds/scm/server/StorageContainerManager.java   |   9 +-
 .../hadoop/hdds/scm/block/TestBlockManager.java    |  34 +-
 .../hadoop/hdds/scm/block/TestDeletedBlockLog.java |  56 +--
 .../hdds/scm/container/TestContainerMapping.java   |  79 ++--
 .../scm/container/closer/TestContainerCloser.java  |  25 +-
 .../hdds/scm/node/TestContainerPlacement.java      |   9 +-
 .../ozone/container/common/TestEndPoint.java       |   7 +-
 .../replication/TestContainerSupervisor.java       |  32 +-
 .../testutils/ReplicationDatanodeStateManager.java |  11 +-
 .../scm/cli/container/CloseContainerHandler.java   |  26 +-
 .../scm/cli/container/ContainerCommandHandler.java |   1 -
 .../scm/cli/container/CreateContainerHandler.java  |  22 +-
 .../scm/cli/container/DeleteContainerHandler.java  |  26 +-
 .../scm/cli/container/InfoContainerHandler.java    |  31 +-
 .../scm/cli/container/ListContainerHandler.java    |  12 +-
 .../ozone/client/io/ChunkGroupInputStream.java     |  25 +-
 .../ozone/client/io/ChunkGroupOutputStream.java    |  35 +-
 .../ozone/client/io/OzoneContainerTranslation.java |  11 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfo.java      |  41 +-
 .../ozone/ksm/helpers/KsmKeyLocationInfoGroup.java |   2 +-
 .../apache/hadoop/ozone/web/handlers/UserArgs.java |   8 +-
 .../src/main/proto/KeySpaceManagerProtocol.proto   |  11 +-
 .../scm/container/TestContainerStateManager.java   | 124 +++---
 .../hadoop/ozone/TestContainerOperations.java      |  10 +-
 .../apache/hadoop/ozone/TestMiniOzoneCluster.java  |   3 +-
 .../hadoop/ozone/TestStorageContainerManager.java  |  64 ++--
 .../ozone/TestStorageContainerManagerHelper.java   |  33 +-
 .../ozone/client/rpc/TestOzoneRpcClient.java       |  10 +-
 .../ozone/container/ContainerTestHelper.java       | 180 ++++-----
 .../container/common/TestBlockDeletingService.java |  25 +-
 .../impl/TestContainerDeletionChoosingPolicy.java  |  19 +-
 .../common/impl/TestContainerPersistence.java      | 419 ++++++++++-----------
 .../commandhandler/TestCloseContainerHandler.java  |  14 +-
 .../container/metrics/TestContainerMetrics.java    |  14 +-
 .../container/ozoneimpl/TestOzoneContainer.java    | 142 +++----
 .../ozoneimpl/TestOzoneContainerRatis.java         |   3 +-
 .../container/server/TestContainerServer.java      |  18 +-
 .../ozone/ksm/TestContainerReportWithKeys.java     |   8 +-
 .../hadoop/ozone/ksm/TestKeySpaceManager.java      |   8 -
 .../hadoop/ozone/ksm/TestKsmBlockVersioning.java   |   2 +-
 .../hadoop/ozone/scm/TestAllocateContainer.java    |  24 +-
 .../hadoop/ozone/scm/TestContainerSQLCli.java      |  40 +-
 .../hadoop/ozone/scm/TestContainerSmallFile.java   |  68 ++--
 .../org/apache/hadoop/ozone/scm/TestSCMCli.java    | 210 +++++------
 .../apache/hadoop/ozone/scm/TestSCMMetrics.java    |   5 +-
 .../hadoop/ozone/scm/TestXceiverClientManager.java |  86 ++---
 .../hadoop/ozone/scm/TestXceiverClientMetrics.java |  19 +-
 .../apache/hadoop/ozone/web/client/TestKeys.java   |   5 +-
 .../hadoop/ozone/ksm/KSMMetadataManagerImpl.java   |  10 +-
 .../hadoop/ozone/ksm/KeyDeletingService.java       |   3 +-
 .../apache/hadoop/ozone/ksm/KeyManagerImpl.java    |   6 +-
 .../apache/hadoop/ozone/ksm/KeySpaceManager.java   |   2 +-
 .../hadoop/ozone/ksm/OpenKeyCleanupService.java    |   3 +-
 .../ozone/genesis/BenchMarkContainerStateMap.java  |  10 +-
 .../ozone/genesis/BenchMarkDatanodeDispatcher.java | 170 ++++++---
 .../ozone/genesis/BenchMarkRocksDbStore.java       |  14 +-
 127 files changed, 2059 insertions(+), 2402 deletions(-)

commit a3a1552c33d5650fbd0a702369fccd21b8c9d3e2
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 4 20:29:20 2018 -0700

    Revert "HADOOP-14445. Delegation tokens are not shared between KMS instances. Contributed by Xiao Chen and Rushabh S Shah."
    
    This reverts commit 583fa6ed48ad3df40bcaa9c591d5ccd07ce3ea81.
    
     Conflicts:
            hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/crypto/key/kms/KMSTokenRenewer.java
            hadoop-common-project/hadoop-kms/src/test/java/org/apache/hadoop/crypto/key/kms/server/TestKMS.java

 .../hadoop/crypto/key/kms/KMSClientProvider.java   | 214 ++++-----
 .../hadoop/crypto/key/kms/KMSDelegationToken.java  |  22 +-
 .../crypto/key/kms/KMSLegacyTokenRenewer.java      |  56 ---
 .../hadoop/crypto/key/kms/KMSTokenRenewer.java     | 103 ----
 .../apache/hadoop/crypto/key/kms/package-info.java |  18 -
 .../hadoop/fs/CommonConfigurationKeysPublic.java   |  10 -
 .../web/DelegationTokenAuthenticatedURL.java       |  21 +-
 .../web/DelegationTokenAuthenticationHandler.java  |   8 +-
 .../web/DelegationTokenAuthenticator.java          |   2 +-
 .../main/java/org/apache/hadoop/util/KMSUtil.java  |  45 +-
 .../apache/hadoop/util/KMSUtilFaultInjector.java   |  49 --
 ...rg.apache.hadoop.security.token.TokenIdentifier |   1 -
 .../org.apache.hadoop.security.token.TokenRenewer  |   3 +-
 .../src/main/resources/core-default.xml            |  20 -
 .../crypto/key/kms/TestKMSClientProvider.java      | 162 -------
 .../kms/TestLoadBalancingKMSClientProvider.java    |  67 +--
 .../java/org/apache/hadoop/util/TestKMSUtil.java   |  65 ---
 .../hadoop/crypto/key/kms/server/TestKMS.java      | 519 ++++-----------------
 18 files changed, 205 insertions(+), 1180 deletions(-)

commit 118bd7580583e31bf643b642a2fbc9556177b906
Author: Xiao Chen <xiao@apache.org>
Date:   Fri May 4 20:19:34 2018 -0700

    Revert "HDFS-13430. Fix TestEncryptionZonesWithKMS failure due to HADOOP-14445."
    
    This reverts commit 650359371175fba416331e73aa03d2a96ccb90e5.

 .../src/test/java/org/apache/hadoop/hdfs/TestEncryptionZones.java      | 3 ---
 1 file changed, 3 deletions(-)

commit 5b11b9fd413470e134ecdc7c50468f8c7b39fa50
Author: Steve Loughran <stevel@apache.org>
Date:   Mon May 7 11:54:08 2018 +0100

    HADOOP-15446. WASB: PageBlobInputStream.skip breaks HBASE replication.
    Contributed by Thomas Marquardt

 .../hadoop/fs/azure/PageBlobInputStream.java       | 123 +++--
 .../hadoop/fs/azure/ITestPageBlobInputStream.java  | 527 +++++++++++++++++++++
 2 files changed, 605 insertions(+), 45 deletions(-)

commit 67f239c42f676237290d18ddbbc9aec369267692
Author: Weiwei Yang <wwei@apache.org>
Date:   Mon May 7 11:33:14 2018 +0800

    YARN-8025. UsersManangers#getComputedResourceLimitForActiveUsers throws NPE due to preComputedActiveUserLimit is empty. Contributed by Tao Yang.

 .../server/resourcemanager/scheduler/capacity/UsersManager.java  | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit e9159db62367920c34616179aa4ced46d1ed22e1
Author: Abhishek Modi <abmodi90@gmail.com>
Date:   Mon May 7 01:15:14 2018 +0900

    MAPREDUCE-7093. Use assertEquals instead of assertTrue(a == b) in TestMapReduceJobControlWithMocks
    
    Signed-off-by: Akira Ajisaka <aajisaka@apache.org>

 .../jobcontrol/TestMapReduceJobControlWithMocks.java  | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit a732acd8730277df4d9b97b97101bc2bc768800f
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Fri May 4 16:37:47 2018 -0700

    HDFS-5926 Documentation should clarify dfs.datanode.du.reserved impact from reserved disk capacity (Gabor Bota)

 hadoop-hdfs-project/hadoop-hdfs/src/main/resources/hdfs-default.xml | 3 +++
 1 file changed, 3 insertions(+)

commit 6a69239d867070ee85d79026542033ac661c4c1c
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Fri May 4 14:59:59 2018 -0700

    YARN-8163. Add support for Node Labels in opportunistic scheduling. Contributed by Abhishek Modi.

 .../server/api/protocolrecords/RemoteNode.java     | 40 +++++++++++++++++++++-
 .../protocolrecords/impl/pb/RemoteNodePBImpl.java  | 19 ++++++++++
 .../scheduler/OpportunisticContainerAllocator.java | 38 +++++++++++++++++---
 .../proto/yarn_server_common_service_protos.proto  |  1 +
 .../TestOpportunisticContainerAllocator.java       | 37 ++++++++++++++++++++
 .../OpportunisticContainerAllocatorAMService.java  | 12 +++++++
 ...stOpportunisticContainerAllocatorAMService.java | 10 ++++--
 7 files changed, 149 insertions(+), 8 deletions(-)

commit 4cdbdce752e192b45c2b9756c2d4bd24ceffdabd
Author: Rushabh Shah <shahrs87@apache.org>
Date:   Fri May 4 15:36:13 2018 -0500

    HADOOP-14841 Kms client should disconnect if unable to get output stream from connection. Contributed by Rushabh S Shah

 .../org/apache/hadoop/crypto/key/kms/KMSClientProvider.java | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit 96c843f64bb424cd7544be0ccda16a6755c086de
Author: Aaron Fabbri <fabbri@apache.org>
Date:   Fri May 4 11:34:37 2018 -0700

    HADOOP-15444 ITestS3GuardToolDynamo should only run with -Ddynamo (Aaron Fabbri)

 .../apache/hadoop/fs/s3a/s3guard/ITestS3GuardToolDynamoDB.java   | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 8cdb032aff4237d8d3970057d82290e4e32c4040
Author: Eric Yang <eyang@apache.org>
Date:   Fri May 4 12:36:31 2018 -0400

    YARN-8223.  Improved yarn auxiliary service to load jar file from HDFS.
                Contributed by Zian Chen

 .../markdown/PluggableShuffleAndPluggableSort.md   | 44 ++++++++++++++++++++++
 .../nodemanager/containermanager/AuxServices.java  | 19 +++++++++-
 2 files changed, 61 insertions(+), 2 deletions(-)

commit 6795f8072ffbe6138857e77d51af173f33e4e5c1
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 4 09:27:07 2018 -0700

    YARN-8079. Support static and archive unmodified local resources in service AM. Contributed by Suma Shivaprasad

 .../YARN-Simplified-V1-API-Layer-For-Services.yaml |   2 +
 .../yarn/service/api/records/ConfigFile.java       |   3 +-
 .../yarn/service/conf/YarnServiceConstants.java    |   1 +
 .../service/provider/AbstractClientProvider.java   |  23 ++-
 .../service/provider/AbstractProviderService.java  |   4 +
 .../yarn/service/provider/ProviderUtils.java       |  91 ++++++++++--
 .../yarn/service/provider/TestProviderUtils.java   | 164 +++++++++++++++++++++
 .../providers/TestAbstractClientProvider.java      |  44 ++++++
 .../site/markdown/yarn-service/YarnServiceAPI.md   |   4 +-
 9 files changed, 321 insertions(+), 15 deletions(-)

commit 502914ca32ac02b19116fd681eb8301b92fccbb3
Author: Billie Rinaldi <billie@apache.org>
Date:   Fri May 4 08:53:55 2018 -0700

    YARN-7818. Remove privileged operation warnings during container launch for the ContainerRuntimes. Contributed by Shane Kumpf

 .../linux/runtime/DefaultLinuxContainerRuntime.java        |  5 +++--
 .../linux/runtime/DockerLinuxContainerRuntime.java         | 14 +++++++-------
 2 files changed, 10 insertions(+), 9 deletions(-)

commit a3b416f69dc3965f247603f657df33bd74fd723e
Author: Inigo Goiri <inigoiri@apache.org>
Date:   Thu May 3 11:24:57 2018 -0700

    HDFS-13525. RBF: Add unit test TestStateStoreDisabledNameservice. Contributed by Yiqun Lin.

 .../store/TestStateStoreDisabledNameservice.java   | 71 ++++++++++++++++++++++
 1 file changed, 71 insertions(+)
